/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[0],Array(80).concat([function(e,t,n){"use strict";n.d(t,"M",(function(){return r.W})),n.d(t,"jb",(function(){return r.Fb})),n.d(t,"N",(function(){return r.Z})),n.d(t,"b",(function(){return r.b})),n.d(t,"bb",(function(){return r.vb})),n.d(t,"d",(function(){return r.d})),n.d(t,"g",(function(){return r.h})),n.d(t,"cb",(function(){return r.wb})),n.d(t,"db",(function(){return r.xb})),n.d(t,"ab",(function(){return r.ub})),n.d(t,"fb",(function(){return r.Ab})),n.d(t,"ib",(function(){return r.Eb})),n.d(t,"lb",(function(){return r.Hb})),n.d(t,"F",(function(){return r.O})),n.d(t,"hb",(function(){return r.Db})),n.d(t,"Q",(function(){return r.cb})),n.d(t,"U",(function(){return r.ib})),n.d(t,"V",(function(){return r.jb})),n.d(t,"s",(function(){return r.w})),n.d(t,"i",(function(){return r.j})),n.d(t,"H",(function(){return r.Q})),n.d(t,"h",(function(){return r.i})),n.d(t,"l",(function(){return r.m})),n.d(t,"k",(function(){return r.l})),n.d(t,"I",(function(){return r.S})),n.d(t,"X",(function(){return r.nb})),n.d(t,"u",(function(){return r.z})),n.d(t,"J",(function(){return r.U})),n.d(t,"R",(function(){return r.fb})),n.d(t,"T",(function(){return r.hb})),n.d(t,"p",(function(){return r.s})),n.d(t,"o",(function(){return r.r})),n.d(t,"D",(function(){return r.K})),n.d(t,"A",(function(){return r.H})),n.d(t,"y",(function(){return r.F})),n.d(t,"B",(function(){return r.I})),n.d(t,"z",(function(){return r.G})),n.d(t,"x",(function(){return r.E})),n.d(t,"C",(function(){return r.J})),n.d(t,"t",(function(){return r.y})),n.d(t,"m",(function(){return r.n})),n.d(t,"q",(function(){return r.t})),n.d(t,"S",(function(){return r.gb})),n.d(t,"j",(function(){return r.k})),n.d(t,"W",(function(){return r.mb})),n.d(t,"v",(function(){return r.A})),n.d(t,"O",(function(){return r.ab})),n.d(t,"Y",(function(){return r.rb})),n.d(t,"E",(function(){return r.M})),n.d(t,"G",(function(){return r.P})),n.d(t,"r",(function(){return r.v})),n.d(t,"w",(function(){return r.C})),n.d(t,"n",(function(){return r.p})),n.d(t,"mb",(function(){return r.Jb})),n.d(t,"c",(function(){return r.c})),n.d(t,"P",(function(){return r.bb})),n.d(t,"f",(function(){return r.f})),n.d(t,"kb",(function(){return r.Gb})),n.d(t,"Z",(function(){return r.tb})),n.d(t,"e",(function(){return r.e})),n.d(t,"gb",(function(){return r.Cb})),n.d(t,"a",(function(){return r.a})),n.d(t,"K",(function(){return r.V})),n.d(t,"eb",(function(){return r.zb})),n.d(t,"L",(function(){return u}));var r=n(10),a=n(4),i=n(83);const s={href:i.l.base()[1],text:a.i18n.translate("xpack.fleet.breadcrumbs.appTitle",{defaultMessage:"Fleet"})},o={href:i.l.integrations()[1],text:a.i18n.translate("xpack.fleet.breadcrumbs.integrationsAppTitle",{defaultMessage:"Integrations"}),useIntegrationsBasePath:!0},l={base:()=>[s],policies:()=>[s,{text:a.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Agent policies"})}],policies_list:()=>[s,{text:a.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Agent policies"})}],policy_details:({policyName:e})=>[s,{href:i.l.policies()[1],text:a.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Agent policies"})},{text:e}],add_integration_to_policy:({pkgTitle:e,pkgkey:t,integration:n})=>[o,{href:i.l.integration_details_overview({pkgkey:t,integration:n})[1],text:e,useIntegrationsBasePath:!0},{text:a.i18n.translate("xpack.fleet.breadcrumbs.addPackagePolicyPageTitle",{defaultMessage:"Add integration"})}],edit_integration:({policyName:e,policyId:t})=>[s,{href:i.l.policies()[1],text:a.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Agent policies"})},{href:i.l.policy_details({policyId:t})[1],text:e},{text:a.i18n.translate("xpack.fleet.breadcrumbs.editPackagePolicyPageTitle",{defaultMessage:"Edit integration"})}],upgrade_package_policy:({policyName:e,policyId:t})=>[s,{href:i.l.policies()[1],text:a.i18n.translate("xpack.fleet.breadcrumbs.policiesPageTitle",{defaultMessage:"Agent policies"})},{href:i.l.policy_details({policyId:t})[1],text:e},{text:a.i18n.translate("xpack.fleet.breadcrumbs.upgradePacagePolicyPageTitle",{defaultMessage:"Upgrade integration "})}],agent_list:()=>[s,{text:a.i18n.translate("xpack.fleet.breadcrumbs.agentsPageTitle",{defaultMessage:"Agents"})}],agent_details:({agentHost:e})=>[s,{href:i.l.agent_list({})[1],text:a.i18n.translate("xpack.fleet.breadcrumbs.agentsPageTitle",{defaultMessage:"Agents"})},{text:e}],enrollment_tokens:()=>[s,{text:a.i18n.translate("xpack.fleet.breadcrumbs.enrollmentTokensPageTitle",{defaultMessage:"Enrollment tokens"})}],data_streams:()=>[s,{text:a.i18n.translate("xpack.fleet.breadcrumbs.datastreamsPageTitle",{defaultMessage:"Data streams"})}]};function u(e,t={}){var n;const{chrome:a,http:s,application:o}=Object(r.Fb)(),u=(null===(n=l[e])||void 0===n?void 0:n.call(l,t).map((e=>{const t=e.href?s.basePath.prepend(`${e.useIntegrationsBasePath?i.i:i.e}${e.href}`):void 0;return{...e,href:t,onClick:t?e=>{e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(e.preventDefault(),o.navigateToUrl(t))}:void 0}})))||[],c=[...u].reverse().map((e=>e.text));a.docTitle.change(c),a.setBreadcrumbs(u)}},function(e,t,n){"use strict";var r=n(101);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f})),n.d(t,"g",(function(){return r.g})),n.d(t,"h",(function(){return r.h})),n.d(t,"i",(function(){return r.i})),n.d(t,"j",(function(){return r.k})),n.d(t,"k",(function(){return r.l})),n.d(t,"l",(function(){return r.m})),n.d(t,"m",(function(){return r.n})),n.d(t,"n",(function(){return r.o})),n.d(t,"p",(function(){return r.p}));var a=n(112);n.d(t,"o",(function(){return a.a}))},function(e,t,n){"use strict";n.d(t,"n",(function(){return r.W})),n.d(t,"G",(function(){return r.Fb})),n.d(t,"z",(function(){return r.xb})),n.d(t,"e",(function(){return r.g})),n.d(t,"C",(function(){return r.yb})),n.d(t,"K",(function(){return r.Ib})),n.d(t,"J",(function(){return r.Hb})),n.d(t,"o",(function(){return r.Y})),n.d(t,"g",(function(){return r.q})),n.d(t,"u",(function(){return r.nb})),n.d(t,"r",(function(){return r.lb})),n.d(t,"k",(function(){return r.U})),n.d(t,"j",(function(){return r.T})),n.d(t,"p",(function(){return r.db})),n.d(t,"x",(function(){return r.qb})),n.d(t,"q",(function(){return r.eb})),n.d(t,"w",(function(){return r.pb})),n.d(t,"s",(function(){return r.mb})),n.d(t,"v",(function(){return r.ob})),n.d(t,"h",(function(){return r.u})),n.d(t,"i",(function(){return r.R})),n.d(t,"E",(function(){return r.Bb})),n.d(t,"d",(function(){return r.f})),n.d(t,"H",(function(){return r.Gb})),n.d(t,"b",(function(){return r.a})),n.d(t,"D",(function(){return r.zb})),n.d(t,"m",(function(){return c})),n.d(t,"A",(function(){return d.a})),n.d(t,"f",(function(){return h})),n.d(t,"B",(function(){return m})),n.d(t,"c",(function(){return k})),n.d(t,"y",(function(){return D})),n.d(t,"F",(function(){return S})),n.d(t,"t",(function(){return C})),n.d(t,"I",(function(){return A})),n.d(t,"a",(function(){return w})),n.d(t,"l",(function(){return M}));var r=n(10),a=n(0),i=n.n(a),s=n(4),o=n(89);const l={href:o.j.integrations()[1],text:s.i18n.translate("xpack.fleet.breadcrumbs.integrationsAppTitle",{defaultMessage:"Integrations"})},u={integrations:()=>[l],integrations_all:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.allIntegrationsPageTitle",{defaultMessage:"Browse integrations"})}],integrations_installed:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.installedIntegrationsPageTitle",{defaultMessage:"Installed integrations"})}],integration_details_overview:({pkgTitle:e})=>[l,{text:e}],integration_policy_edit:({pkgTitle:e,pkgkey:t,policyName:n})=>[l,{href:o.j.integration_details_policies({pkgkey:t})[1],text:e},{text:n}]};function c(e,t={}){var n;const{chrome:i,http:s,application:l}=Object(r.Fb)(),c=Object(a.useRef)();if(c.current===e)return;c.current=e;const d=(null===(n=u[e])||void 0===n?void 0:n.call(u,t).map((e=>{const t=e.href?s.basePath.prepend(`${o.d}${e.href}`):void 0;return{...e,href:t,onClick:t?e=>{e.preventDefault(),l.navigateToUrl(t)}:void 0}})))||[],p=[...d].reverse().map((e=>e.text));i.docTitle.change(p),i.setBreadcrumbs(d)}var d=n(39),p=n(144);const h="id",f=["name","title","description"];function m(e){const t=Object(a.useRef)(new p.Search(h));return Object(a.useEffect)((()=>{const n=new p.Search(h);n.indexStrategy=new p.AllSubstringsIndexStrategy,f.forEach((e=>n.addIndex(e))),n.addDocuments(e),t.current=n}),[e]),t}var g=n(157),E=n.n(g),x=n(8),y=n(68),v=n(21),b=n(15);const[k,D,S,C,A]=E()((function({notifications:e}){const t=Object(x.useHistory)(),{getPath:n}=Object(r.xb)(),[s,o]=Object(a.useState)({}),l=Object(a.useCallback)((({name:e,status:t,version:n})=>{const r={status:t,version:n};o((t=>({...t,[e]:r})))}),[]),u=Object(a.useCallback)((e=>s[e]),[s]),c=Object(a.useCallback)((async({name:a,version:s,title:o,fromUpdate:c=!1})=>{const d=u(a),p={...d,name:a,status:b.b.installing};l(p);const h=`${a}-${s}`;if((await Object(r.D)(h)).error)l(c?{...d,name:a}:{name:a,status:b.b.notInstalled,version:s}),e.toasts.addWarning({title:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallErrorTitle",defaultMessage:"Failed to install {title} package",values:{title:o}})),text:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallErrorDescription",defaultMessage:"Something went wrong while trying to install this package. Please try again later."})),iconType:"alert"});else{if(l({name:a,status:b.b.installed,version:s}),c){const e=n("integration_details_settings",{pkgkey:`${a}-${s}`});t.push(e)}e.toasts.addSuccess({title:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessTitle",defaultMessage:"Installed {title}",values:{title:o}})),text:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessDescription",defaultMessage:"Successfully installed {title}",values:{title:o}}))})}}),[u,e.toasts,l,n,t]),d=Object(a.useCallback)((async({name:a,version:s,title:o,redirectToVersion:u})=>{l({name:a,status:b.b.uninstalling,version:s});const c=`${a}-${s}`;if((await Object(r.N)(c)).error)l({name:a,status:b.b.installed,version:s}),e.toasts.addWarning({title:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorTitle",defaultMessage:"Failed to uninstall {title} package",values:{title:o}})),text:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorDescription",defaultMessage:"Something went wrong while trying to uninstall this package. Please try again later."})),iconType:"alert"});else if(l({name:a,status:b.b.notInstalled,version:null}),e.toasts.addSuccess({title:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessTitle",defaultMessage:"Uninstalled {title}",values:{title:o}})),text:Object(v.toMountPoint)(i.a.createElement(y.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessDescription",defaultMessage:"Successfully uninstalled {title}",values:{title:o}}))}),u!==s){const e=n("integration_details_settings",{pkgkey:`${a}-${u}`});t.push(e)}}),[e.toasts,l,n,t]);return{packages:s,installPackage:c,setPackageInstallStatus:l,getPackageInstallStatus:u,uninstallPackage:d}}),(e=>e.installPackage),(e=>e.setPackageInstallStatus),(e=>e.getPackageInstallStatus),(e=>e.uninstallPackage)),F=Object(a.createContext)({getId:()=>{}}),w=({children:e})=>{const t=Object(r.tb)(),n=Object(a.useRef)(null==t?void 0:t.forAgentPolicyId),s=Object(a.useCallback)((()=>n.current),[]);return i.a.createElement(F.Provider,{value:{getId:s}},e)},M=()=>{const e=Object(a.useContext)(F);if(!e)throw new Error("useAgentPolicyContext can only be used inside of AgentPolicyContextProvider");return e}},function(e,t,n){"use strict";var r=n(7);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.g})),n.d(t,"e",(function(){return r.h})),n.d(t,"f",(function(){return r.i})),n.d(t,"g",(function(){return r.j})),n.d(t,"h",(function(){return r.k})),n.d(t,"i",(function(){return r.l})),n.d(t,"j",(function(){return r.m})),n.d(t,"k",(function(){return r.r})),n.d(t,"l",(function(){return r.s}))},function(e,t,n){"use strict";var r=n(99),a=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],i=["scalar","sequence","mapping"];e.exports=function(e,t){var n,s;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===a.indexOf(t))throw new r('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(n=t.styleAliases||null,s={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){s[String(t)]=e}))})),s),-1===i.indexOf(this.kind))throw new r('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t,n){"use strict";var r=n(1);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.e})),n.d(t,"e",(function(){return r.g})),n.d(t,"f",(function(){return r.h})),n.d(t,"g",(function(){return r.l})),n.d(t,"h",(function(){return r.m})),n.d(t,"i",(function(){return r.n})),n.d(t,"j",(function(){return r.o})),n.d(t,"k",(function(){return r.p})),n.d(t,"l",(function(){return r.s})),n.d(t,"m",(function(){return r.t})),n.d(t,"n",(function(){return r.w})),n.d(t,"o",(function(){return r.x})),n.d(t,"p",(function(){return r.y}))},function(e,t,n){e.exports=n(29)(1076)},function(e,t,n){e.exports=n(29)(2398)},function(e,t,n){e.exports=n(29)(269)},function(e,t,n){"use strict";var r=n(7);n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.d})),n.d(t,"c",(function(){return r.f})),n.d(t,"d",(function(){return r.l})),n.d(t,"e",(function(){return r.m})),n.d(t,"f",(function(){return r.n})),n.d(t,"g",(function(){return r.o})),n.d(t,"h",(function(){return r.p})),n.d(t,"i",(function(){return r.q})),n.d(t,"j",(function(){return r.s}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return r.a})),n.d(t,"d",(function(){return r.b})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(102),a=n(0),i=n.n(a),s=n(68),o=n(80),l=n(6);const u=()=>i.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(l.EuiFlexItem,null,i.a.createElement(l.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},i.a.createElement(l.EuiFlexItem,{grow:!1},i.a.createElement(l.EuiTitle,{size:"l"},i.a.createElement("h1",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.overviewPageTitle",defaultMessage:"Fleet"})))))),i.a.createElement(l.EuiFlexItem,null,i.a.createElement(l.EuiText,{color:"subdued"},i.a.createElement("p",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.overviewPageSubtitle",defaultMessage:"Centralized management for Elastic Agents."}))))),c=({section:e,children:t,rightColumn:n})=>{const{getHref:a}=Object(o.db)(),{agents:l}=Object(o.N)();return i.a.createElement(r.a,{leftColumn:i.a.createElement(u,null),rightColumn:n,tabs:[{name:i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.agentsLinkText",defaultMessage:"Agents"}),isSelected:"agents"===e,href:a("agent_list"),disabled:!(null!=l&&l.enabled),"data-test-subj":"fleet-agents-tab"},{name:i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.policiesLinkText",defaultMessage:"Agent policies"}),isSelected:"agent_policies"===e,href:a("policies_list"),"data-test-subj":"fleet-agent-policies-tab"},{name:i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.enrollmentTokensText",defaultMessage:"Enrollment tokens"}),isSelected:"enrollment_tokens"===e,href:a("enrollment_tokens"),"data-test-subj":"fleet-enrollment-tokens-tab"},{name:i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.dataStreamsLinkText",defaultMessage:"Data streams"}),isSelected:"data_streams"===e,href:a("data_streams"),"data-test-subj":"fleet-datastreams-tab"}]},t)}},function(e,t,n){e.exports=n(29)(346)},function(e,t,n){e.exports=n(29)(2403)},function(e,t,n){"use strict";var r=n(168);e.exports=r},function(e,t,n){"use strict";function r(e){return null==e}e.exports.isNothing=r,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:r(e)?[]:[e]},e.exports.repeat=function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var n,r,a,i;if(t)for(n=0,r=(i=Object.keys(t)).length;n<r;n+=1)e[a=i[n]]=t[a];return e}},function(e,t,n){"use strict";var r=n(94),a=n(99),i=n(84);function s(e,t,n){var r=[];return e.include.forEach((function(e){n=s(e,t,n)})),e[t].forEach((function(e){n.forEach((function(t,n){t.tag===e.tag&&t.kind===e.kind&&r.push(n)})),n.push(e)})),n.filter((function(e,t){return-1===r.indexOf(t)}))}function o(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{}};function r(e){n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(this.compiledImplicit,this.compiledExplicit)}o.DEFAULT=null,o.create=function(){var e,t;switch(arguments.length){case 1:e=o.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new a("Wrong number of arguments for Schema.create function")}if(e=r.toArray(e),t=r.toArray(t),!e.every((function(e){return e instanceof o})))throw new a("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof i})))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:e,explicit:t})},e.exports=o},function(e,t,n){e.exports=n(29)(406)},function(e,t,n){"use strict";n.d(t,"d",(function(){return r.j})),n.d(t,"b",(function(){return x})),n.d(t,"e",(function(){return E})),n.d(t,"c",(function(){return D})),n.d(t,"a",(function(){return S}));var r=n(81),a=n(0),i=n.n(a),s=n(6),o=n(68),l=n(4),u=n(69),c=n.n(u),d=n(5),p=n(85),h=n(80),f=n(83);const m=({children:e})=>{const{notifications:t}=Object(h.jb)(),{agents:{enabled:n}}=Object(h.N)(),[r,u]=Object(a.useState)(),[c,d]=Object(a.useState)(!1),[p,m]=Object(a.useState)(!1),[g,E]=Object(a.useState)(0),[x,y]=Object(a.useState)(!1),v=Object(a.useRef)(null),b=()=>{u(void 0),y(!1),m(!1),d(!1)},k=async()=>{y(!0);try{const{data:e}=await Object(h.l)({agentPolicyId:r});e?(t.toasts.addSuccess(l.i18n.translate("xpack.fleet.deleteAgentPolicy.successSingleNotificationTitle",{defaultMessage:"Deleted agent policy '{id}'",values:{id:e.name||e.id}})),v.current&&v.current(r)):t.toasts.addDanger(l.i18n.translate("xpack.fleet.deleteAgentPolicy.failureSingleNotificationTitle",{defaultMessage:"Error deleting agent policy '{id}'",values:{id:r}}))}catch(e){t.toasts.addDanger(l.i18n.translate("xpack.fleet.deleteAgentPolicy.fatalErrorNotificationTitle",{defaultMessage:"Error deleting agent policy"}))}b()},D=async e=>{if(!n||p)return;m(!0);const{data:t}=await Object(h.F)({path:"/api/fleet/agents",method:"get",query:{kuery:`${f.c}.policy_id : ${e}`}});E((null==t?void 0:t.total)||0),m(!1)};return i.a.createElement(a.Fragment,null,e(((e,t=(()=>{}))=>{if(!e)throw new Error("No agent policy specified for deletion");d(!0),u(e),D(e),v.current=t})),c?i.a.createElement(s.EuiConfirmModal,{title:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.deletePolicyTitle",defaultMessage:"Delete this agent policy?"}),onCancel:b,onConfirm:k,cancelButtonText:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:x||p?i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.loadingButtonLabel",defaultMessage:"Loading…"}):i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete policy"}),buttonColor:"danger",confirmButtonDisabled:x||p||!!g},p?i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.loadingAgentsCountMessage",defaultMessage:"Checking amount of affected agents…"}):g?i.a.createElement(s.EuiCallOut,{color:"danger",title:l.i18n.translate("xpack.fleet.deleteAgentPolicy.confirmModal.affectedAgentsTitle",{defaultMessage:"Policy in use"})},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.affectedAgentsMessage",defaultMessage:"{agentsCount, plural, one {# agent is} other {# agents are}} assigned to this agent policy. Unassign these agents before deleting this policy.",values:{agentsCount:g}})):i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.irreversibleMessage",defaultMessage:"This action cannot be undone."})):null)},g=c()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-1njiai8-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),E=e=>{var t;const n={},r=Object(p.k)(e.namespace||"");return null!==(t=e.name)&&void 0!==t&&t.trim()||(n.name=[i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.nameRequiredErrorMessage",defaultMessage:"Agent policy name is required"})]),!r.valid&&r.error&&(n.namespace=[r.error]),e.unenroll_timeout&&e.unenroll_timeout<0&&(n.unenroll_timeout=[i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollTimeoutMinValueErrorMessage",defaultMessage:"Timeout must be greater than zero."})]),n},x=({agentPolicy:e,updateAgentPolicy:t,withSysMonitoring:n,updateSysMonitoring:r,validation:u,isEditing:c=!1,onDelete:p=(()=>{})})=>{const{docLinks:f}=Object(h.jb)(),[E,x]=Object(a.useState)({}),y=Object(a.useMemo)((()=>[{name:"name",label:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.nameFieldLabel",defaultMessage:"Name"}),placeholder:l.i18n.translate("xpack.fleet.agentPolicyForm.nameFieldPlaceholder",{defaultMessage:"Choose a name"})},{name:"description",label:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.descriptionFieldLabel",defaultMessage:"Description"}),placeholder:l.i18n.translate("xpack.fleet.agentPolicyForm.descriptionFieldPlaceholder",{defaultMessage:"How will this policy be used?"})}]),[]).map((({name:n,label:r,placeholder:a})=>i.a.createElement(s.EuiFormRow,{fullWidth:!0,key:n,label:r,error:E[n]&&u[n]?u[n]:null,isInvalid:Boolean(E[n]&&u[n])},i.a.createElement(s.EuiFieldText,{disabled:!0===e.is_managed,fullWidth:!0,value:e[n],onChange:e=>t({[n]:e.target.value}),isInvalid:Boolean(E[n]&&u[n]),onBlur:()=>x({...E,[n]:!0}),placeholder:a})))),v=i.a.createElement(i.a.Fragment,null,i.a.createElement(s.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.namespaceFieldLabel",defaultMessage:"Default namespace"})),description:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.namespaceFieldDescription",defaultMessage:"Namespaces are a user-configurable arbitrary grouping that makes it easier to search for data and manage user permissions. A policy namespace is used to name its integration's data streams. {fleetUserGuide}.",values:{fleetUserGuide:i.a.createElement(s.EuiLink,{href:f.links.fleet.datastreamsNamingScheme,target:"_blank"},l.i18n.translate("xpack.fleet.agentPolicyForm.nameSpaceFieldDescription.fleetUserGuideLabel",{defaultMessage:"Learn more"}))}})},i.a.createElement(s.EuiFormRow,{fullWidth:!0,error:E.namespace&&u.namespace?u.namespace:null,isInvalid:Boolean(E.namespace&&u.namespace)},i.a.createElement(s.EuiComboBox,{fullWidth:!0,singleSelection:!0,noSuggestions:!0,selectedOptions:e.namespace?[{label:e.namespace}]:[],onCreateOption:e=>{t({namespace:e})},onChange:e=>{t({namespace:e.length?e[0]:""})},isInvalid:Boolean(E.namespace&&u.namespace),onBlur:()=>x({...E,namespace:!0})}))),i.a.createElement(s.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringLabel",defaultMessage:"Agent monitoring"})),description:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringDescription",defaultMessage:"Collect data about your agents for debugging and tracking performance. Monitoring data will be written to the default namespace specified above."})},i.a.createElement(s.EuiCheckboxGroup,{disabled:!0===e.is_managed,options:[{id:d.dataTypes.Logs,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringLogsFieldLabel",defaultMessage:"Collect agent logs"})," ",i.a.createElement(s.EuiIconTip,{content:l.i18n.translate("xpack.fleet.agentPolicyForm.monitoringLogsTooltipText",{defaultMessage:"Collect logs from Elastic Agents that use this policy."}),position:"right",type:"iInCircle",color:"subdued"}))},{id:d.dataTypes.Metrics,label:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringMetricsFieldLabel",defaultMessage:"Collect agent metrics"})," ",i.a.createElement(s.EuiIconTip,{content:l.i18n.translate("xpack.fleet.agentPolicyForm.monitoringMetricsTooltipText",{defaultMessage:"Collect metrics from Elastic Agents that use this policy."}),position:"right",type:"iInCircle",color:"subdued"}))}],idToSelectedMap:(e.monitoring_enabled||[]).reduce(((e,t)=>(e[t]=!0,e)),{logs:!1,metrics:!1}),onChange:n=>{if(n!==d.dataTypes.Logs&&n!==d.dataTypes.Metrics)return;const r=e.monitoring_enabled&&e.monitoring_enabled.indexOf(n)>=0,a=e.monitoring_enabled||[];t({monitoring_enabled:r?a.filter((e=>e!==n)):[...a,n]})}})),i.a.createElement(s.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollmentTimeoutLabel",defaultMessage:"Unenrollment timeout"})),description:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollmentTimeoutDescription",defaultMessage:"An optional timeout in seconds. If provided, an agent will automatically unenroll after being gone for this period of time."})},i.a.createElement(s.EuiFormRow,{fullWidth:!0,error:E.unenroll_timeout&&u.unenroll_timeout?u.unenroll_timeout:null,isInvalid:Boolean(E.unenroll_timeout&&u.unenroll_timeout)},i.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:!0===e.is_managed,value:e.unenroll_timeout||"",min:0,onChange:e=>{t({unenroll_timeout:e.target.value?Number(e.target.value):0})},isInvalid:Boolean(E.unenroll_timeout&&u.unenroll_timeout),onBlur:()=>x({...E,unenroll_timeout:!0})}))),!c||!("id"in e)||e.is_managed||e.is_default||e.is_default_fleet_server?null:i.a.createElement(s.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.deletePolicyGroupTitle",defaultMessage:"Delete policy"})),description:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.deletePolicyGroupDescription",defaultMessage:"Existing data will not be deleted."}),i.a.createElement(s.EuiSpacer,{size:"s"}),i.a.createElement(m,null,(t=>i.a.createElement(s.EuiButton,{color:"danger",disabled:Boolean(e.is_default),onClick:()=>t(e.id,p)},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.deletePolicyActionText",defaultMessage:"Delete policy"})))),e.is_default?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.EuiSpacer,{size:"xs"}),i.a.createElement(s.EuiText,{color:"subdued",size:"xs"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.unableToDeleteDefaultPolicyText",defaultMessage:"Default policy cannot be deleted"}))):null)}));return i.a.createElement(s.EuiForm,null,c?(b=y,i.a.createElement(s.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.generalSettingsGroupTitle",defaultMessage:"General settings"})),description:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.generalSettingsGroupDescription",defaultMessage:"Choose a name and description for your agent policy."})},b)):y,c?null:i.a.createElement(s.EuiFormRow,{label:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.systemMonitoringFieldLabel",defaultMessage:"System monitoring"})},i.a.createElement(s.EuiCheckbox,{id:"agentPolicyFormSystemMonitoringCheckbox",label:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.systemMonitoringText",defaultMessage:"Collect system logs and metrics"})," ",i.a.createElement(s.EuiIconTip,{content:l.i18n.translate("xpack.fleet.agentPolicyForm.systemMonitoringTooltipText",{defaultMessage:"Enable this option to bootstrap your policy with an integration that collects system logs and metrics."}),position:"right",type:"iInCircle",color:"subdued"})),checked:n,onChange:()=>{r(!n)}})),c?v:i.a.createElement(i.a.Fragment,null,i.a.createElement(s.EuiHorizontalRule,null),i.a.createElement(s.EuiSpacer,{size:"xs"}),i.a.createElement(g,{id:"advancedOptions",buttonContent:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:"ingest-active-button"},i.a.createElement(s.EuiSpacer,{size:"l"}),v)));var b},y=({children:e})=>{const{notifications:t}=Object(h.jb)(),[n,r]=Object(a.useState)(),[u,c]=Object(a.useState)(),[d,p]=Object(a.useState)(!1),[f,m]=Object(a.useState)(!1),g=Object(a.useRef)(null),E=()=>{r(void 0),c(void 0),m(!1),p(!1)},x=async()=>{m(!0);try{const{data:e,error:r}=await Object(h.h)(n.id,u);if(r)throw r;if(!e)throw new Error("Error duplicating agent policy: no data");t.toasts.addSuccess(l.i18n.translate("xpack.fleet.copyAgentPolicy.successNotificationTitle",{defaultMessage:"Agent policy duplicated"})),E(),g.current&&g.current(e.item)}catch(e){m(!1),t.toasts.addError(e,{title:l.i18n.translate("xpack.fleet.copyAgentPolicy.fatalErrorNotificationTitle",{defaultMessage:"Error duplicating agent policy"})})}};return i.a.createElement(a.Fragment,null,e(((e,t=(()=>{}))=>{if(!e)throw new Error("No agent policy specified to duplicate");p(!0),r(e),c({name:l.i18n.translate("xpack.fleet.copyAgentPolicy.confirmModal.defaultNewPolicyName",{defaultMessage:"{name} (copy)",values:{name:e.name}}),description:e.description}),g.current=t})),d&&n&&u?i.a.createElement(s.EuiConfirmModal,{title:i.a.createElement("span",{className:"eui-textBreakWord"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.copyPolicyTitle",defaultMessage:"Duplicate '{name}' agent policy",values:{name:n.name}})),onCancel:E,onConfirm:x,cancelButtonText:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.confirmButtonLabel",defaultMessage:"Duplicate policy"}),confirmButtonDisabled:f||!u.name.trim()},i.a.createElement("p",null,i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.copyPolicyPrompt",defaultMessage:"Choose a name and description for your new agent policy."})),i.a.createElement(s.EuiFormRow,{label:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.newNameLabel",defaultMessage:"New policy name"}),fullWidth:!0},i.a.createElement(s.EuiFieldText,{fullWidth:!0,value:u.name,onChange:e=>c({...u,name:e.target.value})})),i.a.createElement(s.EuiFormRow,{label:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.newDescriptionLabel",defaultMessage:"Description"}),fullWidth:!0},i.a.createElement(s.EuiFieldText,{fullWidth:!0,value:u.description,onChange:e=>c({...u,description:e.target.value})}))):null)};var v=n(93);const b=c()(s.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-l5rkdh-0"})([".euiFlyoutBody__overflowContent{padding:0;}"]),k=Object(a.memo)((({policyId:e,onClose:t})=>{const n=Object(h.jb)(),{isLoading:a,data:l,error:u}=Object(h.V)(e),{data:c}=Object(h.U)(e),d=a?i.a.createElement(r.k,null):u?i.a.createElement(s.EuiCallOut,{title:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.ErrorGettingFullAgentPolicy",defaultMessage:"Error loading agent policy"}),color:"danger",iconType:"alert"},u.message):i.a.createElement(s.EuiCodeBlock,{language:"yaml",isCopyable:!0,fontSize:"m",whiteSpace:"pre"},Object(p.g)(l.item,v.safeDump)),f=n.http.basePath.prepend(p.b.getInfoFullDownloadPath(e));return i.a.createElement(s.EuiFlyout,{onClose:t,size:"l",maxWidth:640},i.a.createElement(s.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"IngestManagerAgentPolicyYamlFlyoutTitle"},i.a.createElement(s.EuiTitle,{size:"m"},i.a.createElement("h2",{id:"IngestManagerAgentPolicyYamlFlyoutTitle"},null!=c&&c.item?i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlflyoutTitleWithName",defaultMessage:"'{name}' agent policy",values:{name:c.item.name}}):i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlflyoutTitleWithoutName",defaultMessage:"Agent policy"})))),i.a.createElement(b,null,d),i.a.createElement(s.EuiFlyoutFooter,null,i.a.createElement(s.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(s.EuiFlexItem,{grow:!1},i.a.createElement(s.EuiButtonEmpty,{onClick:t,flush:"left"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlFlyoutCloseButtonLabel",defaultMessage:"Close"}))),i.a.createElement(s.EuiFlexItem,{grow:!1},i.a.createElement(s.EuiButton,{href:f,iconType:"download",isDisabled:Boolean(a&&!l)},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlDownloadButtonLabel",defaultMessage:"Download policy"}))))))})),D=({onConfirm:e,onCancel:t,agentCount:n,agentPolicy:r})=>i.a.createElement(s.EuiConfirmModal,{title:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalTitle",defaultMessage:"Save and deploy changes"}),onCancel:t,onConfirm:e,cancelButtonText:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalCancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalConfirmButtonLabel",defaultMessage:"Save and deploy changes"}),buttonColor:"primary"},i.a.createElement(s.EuiCallOut,{iconType:"iInCircle",title:l.i18n.translate("xpack.fleet.agentPolicy.confirmModalCalloutTitle",{defaultMessage:"This action will update {agentCount, plural, one {# agent} other {# agents}}",values:{agentCount:n}})},i.a.createElement("div",{className:"eui-textBreakWord"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalCalloutDescription",defaultMessage:"Fleet has detected that the selected agent policy, {policyName}, is already in use by some of your agents. As a result of this action, Fleet will deploy updates to all agents that use this policy.",values:{policyName:i.a.createElement("b",null,r.name)}}))),i.a.createElement(s.EuiSpacer,{size:"l"}),i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalDescription",defaultMessage:"This action can not be undone. Are you sure you wish to continue?"})),S=Object(a.memo)((({agentPolicy:e,onCopySuccess:t,fullButton:n=!1,enrollmentFlyoutOpenByDefault:l=!1,onCancelEnrollment:u})=>{const c=Object(h.M)().write,[d,p]=Object(a.useState)(!1),[f,m]=Object(a.useState)(l),[g,E]=Object(a.useState)(!1),x=Object(a.useCallback)((e=>{E(e)}),[E]),v=Object(a.useMemo)((()=>u||(()=>m(!1))),[u,m]);return i.a.createElement(y,null,(a=>{const l=i.a.createElement(s.EuiContextMenuItem,{icon:"inspect",onClick:()=>{E(!1),p(!d)},key:"viewPolicy"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.viewPolicyText",defaultMessage:"View policy"})),u=null!=e&&e.is_managed?[l]:[i.a.createElement(s.EuiContextMenuItem,{disabled:!c,icon:"plusInCircle",onClick:()=>{E(!1),m(!0)},key:"enrollAgents"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.enrollAgentActionText",defaultMessage:"Add agent"})),l,i.a.createElement(s.EuiContextMenuItem,{disabled:!c,icon:"copy",onClick:()=>{E(!1),a(e,t)},key:"copyPolicy"},i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.copyPolicyActionText",defaultMessage:"Duplicate policy"}))];return i.a.createElement(i.a.Fragment,null,d?i.a.createElement(s.EuiPortal,null,i.a.createElement(k,{policyId:e.id,onClose:()=>p(!1)})):null,f&&i.a.createElement(s.EuiPortal,null,i.a.createElement(r.b,{agentPolicy:e,onClose:v})),i.a.createElement(r.e,{isOpen:g,onChange:x,button:n?{props:{iconType:"arrowDown",iconSide:"right"},children:i.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.buttonText",defaultMessage:"Actions"})}:void 0,items:u}))}))}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s.n})),n.d(t,"e",(function(){return s.o})),n.d(t,"f",(function(){return s.p})),n.d(t,"a",(function(){return s.d}));const r=e=>!(e.show_user||e.required&&void 0===e.default);var a=n(93);const i=(e,t)=>e&&!t||Boolean(e&&e.find((e=>{var n;return e.required&&(!t||!t[e.name]||(null===(n=Object(s.o)(t[e.name],e,e.name,a.safeLoad))||void 0===n?void 0:n.length))})));var s=n(85)},function(e,t,n){"use strict";function r(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=r},function(e,t,n){"use strict";var r=n(95);e.exports=new r({include:[n(130)],implicit:[n(178),n(179)],explicit:[n(180),n(181),n(182),n(183)]})},function(e,t,n){"use strict";n.d(t,"l",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"i",(function(){return u})),n.d(t,"n",(function(){return c.b})),n.d(t,"e",(function(){return f})),n.d(t,"k",(function(){return E})),n.d(t,"h",(function(){return x})),n.d(t,"j",(function(){return C})),n.d(t,"m",(function(){return A})),n.d(t,"c",(function(){return w})),n.d(t,"o",(function(){return ie})),n.d(t,"a",(function(){return se})),n.d(t,"d",(function(){return ue})),n.d(t,"p",(function(){return ke})),n.d(t,"f",(function(){return W})),n.d(t,"b",(function(){return ae}));var r=n(0),a=n.n(r),i=n(6);const s=({size:e})=>a.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceAround"},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiLoadingSpinner,{size:e||"xl"}))),o=({title:e,error:t})=>a.a.createElement(i.EuiCallOut,{title:e,color:"danger",iconType:"alert"},a.a.createElement("p",null,"string"==typeof t?t:t.message));var l=n(68);const u=()=>a.a.createElement(i.EuiEmptyPrompt,{title:a.a.createElement("h2",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.setup.titleLabel",defaultMessage:"Loading Fleet..."})),titleSize:"m",body:a.a.createElement(i.EuiLoadingSpinner,{size:"xl"})});var c=n(111),d=n(86),p=n.n(d),h=n(4);const f=a.a.memo((({button:e,onChange:t,isOpen:n,...s})=>{const[o,l]=Object(r.useState)(!1),u=Object(r.useCallback)((()=>{t?t(!1):l(!1)}),[l,t]),c=Object(r.useCallback)((()=>{t?t(!n):l(!o)}),[o,t,n]);return a.a.createElement(i.EuiPopover,{anchorPosition:"downRight",panelPaddingSize:"none",button:e?a.a.createElement(i.EuiButton,p()({},e.props,{onClick:c}),e.children):a.a.createElement(i.EuiButtonIcon,{iconType:"boxesHorizontal",onClick:c,"aria-label":h.i18n.translate("xpack.fleet.genericActionsMenuText",{defaultMessage:"Open"})}),isOpen:void 0===n?o:n,closePopover:u},"items"in s?a.a.createElement(i.EuiContextMenuPanel,{items:s.items}):a.a.createElement(i.EuiContextMenu,{panels:s.panels,initialPanelId:0}))}));var m=n(10),g=n(7);const E=Object(r.memo)((({count:e,agentPolicyId:t,showAgentText:n,...r})=>{const{getHref:s}=Object(m.xb)(),o=n?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicy.linkedAgentCountText",defaultMessage:"{count, plural, one {# agent} other {# agents}}",values:{count:e}}):e;return e>0?a.a.createElement(i.EuiLink,p()({},r,{href:s("agent_list",{kuery:`${g.c}.policy_id : ${t}`})}),o):a.a.createElement("span",{"data-test-subj":r["data-test-subj"],className:r.className},o)})),x=Object(r.memo)((({children:e})=>a.a.createElement(i.EuiErrorBoundary,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(s,null)},e))));var y=n(69),v=n.n(y);v()(i.EuiText).attrs((e=>({color:"subdued",textAlign:"center",size:"s"}))).withConfig({displayName:"Message",componentId:"sc-1u1wc33-0"})(["padding:",";margin-top:auto;"],(e=>e.theme.eui.paddingSizes.m));const b=v.a.div.withConfig({displayName:"Container",componentId:"sc-iae46-0"})(["border-bottom:",";background-color:",";@media (max-width:767px){.euiFlexItem{margin-bottom:0 !important;}}"],(e=>e.theme.eui.euiBorderThin),(e=>e.theme.eui.euiPageBackgroundColor)),k=v.a.div.withConfig({displayName:"Wrapper",componentId:"sc-iae46-1"})(["max-width:","px;margin-left:auto;margin-right:auto;padding-top:",";padding-left:",";padding-right:",";"],(e=>e.maxWidth||1200),(e=>e.theme.eui.paddingSizes.xl),(e=>e.theme.eui.paddingSizes.m),(e=>e.theme.eui.paddingSizes.m)),D=v()(i.EuiTabs).withConfig({displayName:"Tabs",componentId:"sc-iae46-2"})(["top:1px;&:before{height:0px;}"]),S=Object(r.memo)((({leftColumn:e,rightColumn:t,rightColumnGrow:n})=>a.a.createElement(i.EuiFlexGroup,{alignItems:"center"},e?a.a.createElement(i.EuiFlexItem,null,e):null,t?a.a.createElement(i.EuiFlexItem,{grow:n},t):null))),C=({leftColumn:e,rightColumn:t,rightColumnGrow:n,topContent:r,tabs:s,maxWidth:o,tabsClassName:l,"data-test-subj":u})=>a.a.createElement(b,{"data-test-subj":u},a.a.createElement(k,{maxWidth:o},r,a.a.createElement(S,{leftColumn:e,rightColumn:t,rightColumnGrow:n}),a.a.createElement(i.EuiFlexGroup,null,s?a.a.createElement(i.EuiFlexItem,null,a.a.createElement(i.EuiSpacer,{size:"s"}),a.a.createElement(D,{className:l},s.map(((e,t)=>a.a.createElement(i.EuiTab,p()({},e,{key:`${e.id}-${t}`}),e.name))))):a.a.createElement(i.EuiFlexItem,null,a.a.createElement(i.EuiSpacer,{size:"l"})))));const A=({onClose:e,agentPolicies:t=[]})=>{var n;const{notifications:s}=Object(m.Fb)(),o=null===(n=t.find((e=>e.is_default)))||void 0===n?void 0:n.id,l=function(e,t,n){const[a,i]=Object(r.useState)(!1),s=Object(m.sb)(""),o=Object(m.sb)(e);return{isLoading:a,onSubmit:async e=>{e.preventDefault(),i(!0);try{var r;const e=await Object(m.k)({name:s.value,policy_id:o.value});if(e.error)throw e.error;o.clear(),s.clear(),i(!1),null!==(r=e.data)&&void 0!==r&&r.item&&t(e.data.item)}catch(e){i(!1),n(e)}},policyIdInput:o,apiKeyNameInput:s}}(o,(t=>{e(t),s.toasts.addSuccess(h.i18n.translate("xpack.fleet.newEnrollmentKey.keyCreatedToasts",{defaultMessage:"Enrollment token created"}))}),(e=>{s.toasts.addError(e,{title:"Error"})})),u=a.a.createElement(i.EuiForm,null,a.a.createElement("form",{onSubmit:l.onSubmit},a.a.createElement(i.EuiFormRow,{label:h.i18n.translate("xpack.fleet.newEnrollmentKey.nameLabel",{defaultMessage:"Token name"}),helpText:h.i18n.translate("xpack.fleet.newEnrollmentKey.helpText",{defaultMessage:"Token id will be used when this is left empty."})},a.a.createElement(i.EuiFieldText,p()({name:"name",autoComplete:"off",placeholder:h.i18n.translate("xpack.fleet.newEnrollmentKey.placeholder",{defaultMessage:"Enter a token name"})},l.apiKeyNameInput.props))),a.a.createElement(i.EuiFormRow,{label:h.i18n.translate("xpack.fleet.newEnrollmentKey.policyLabel",{defaultMessage:"Policy"})},a.a.createElement(i.EuiSelect,p()({required:!0,defaultValue:o},l.policyIdInput.props,{options:t.filter((e=>!e.is_managed)).map((e=>({value:e.id,text:e.name})))})))));return a.a.createElement(i.EuiConfirmModal,{isLoading:l.isLoading,title:h.i18n.translate("xpack.fleet.newEnrollmentKey.modalTitle",{defaultMessage:"Create enrollment token"}),onCancel:()=>e(),cancelButtonText:h.i18n.translate("xpack.fleet.newEnrollmentKey.cancelButtonLabel",{defaultMessage:"Cancel"}),onConfirm:l.onSubmit,confirmButtonText:h.i18n.translate("xpack.fleet.newEnrollmentKey.submitButton",{defaultMessage:"Create enrollment token"})},u)};var F=n(2);const w=({agentPolicyId:e,hideTitle:t,excludeFleetServer:n})=>{const s=Object(m.ib)(e),o=s.data?s.data.item:null,u=Object(r.useMemo)((()=>{if(!o)return;const e=new Map;return o.package_policies.forEach((({package:t})=>{t&&(!e.has(t.name)||e.get(t.name).version<t.version)&&e.set(t.name,t)})),[...e.values()]}),[o]),d=Object(r.useMemo)((()=>n&&(null==u?void 0:u.some((e=>e.name===F.Z)))),[u,n]),p=Object(r.useMemo)((()=>u?u.filter((e=>!n||e.name!==F.Z)).length:0),[u,n]);return o&&u?a.a.createElement(a.a.Fragment,null,!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.policyDescription",defaultMessage:"The selected agent policy will collect data for {count, plural, one {{countValue} integration} other {{countValue} integrations}}:",values:{count:p,countValue:a.a.createElement("b",null,p)}})),a.a.createElement(i.EuiSpacer,{size:"s"})),a.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center",wrap:!0},u.map(((e,t)=>a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiBadge,{key:t,color:"hollow",isDisabled:n&&e.name===F.Z},a.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center",responsive:!1},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(c.b,{packageName:e.name,version:e.version,tryApi:!0,style:{margin:"unset",width:"16px"}})),a.a.createElement(i.EuiFlexItem,{grow:!1},e.title))))))),d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiSpacer,{size:"s"}),a.a.createElement(i.EuiCallOut,{size:"s",color:"warning",iconType:"alert",title:h.i18n.translate("xpack.fleet.agentReassignPolicy.packageBadgeFleetServerWarning",{defaultMessage:"Fleet Server will not be enabled in standalone mode."})}))):null},M=v()(i.EuiContextMenuItem).withConfig({displayName:"DangerEuiContextMenuItem",componentId:"sc-1qm6slt-0"})(["color:",";"],(e=>e.theme.eui.euiTextColors.danger)),T=({agentPolicy:e,children:t})=>{const{notifications:n}=Object(m.Fb)(),{agents:{enabled:s}}=Object(m.Z)(),[o,u]=Object(r.useState)([]),[c,d]=Object(r.useState)(!1),[p,f]=Object(r.useState)(!1),[g,E]=Object(r.useState)(0),[x,y]=Object(r.useState)(!1),v=Object(r.useRef)(null),b=Object(r.useMemo)((()=>async()=>{if(p||!s)return;f(!0);const{data:t}=await Object(m.O)({path:F.f.LIST_PATTERN,method:"get",query:{page:1,perPage:1,kuery:`${F.r}.policy_id : ${e.id}`}});E((null==t?void 0:t.total)||0),f(!1)}),[e.id,s,p]),k=Object(r.useMemo)((()=>(e,t=(()=>{}))=>{if(!Array.isArray(e)||0===e.length)throw new Error("No package policies specified for deletion");d(!0),u(e),b(),v.current=t}),[b]),D=Object(r.useMemo)((()=>()=>{u([]),y(!1),f(!1),d(!1)}),[]),S=Object(r.useMemo)((()=>async()=>{y(!0);try{const{data:e}=await Object(m.o)({packagePolicyIds:o}),t=(null==e?void 0:e.filter((e=>e.success)))||[],r=(null==e?void 0:e.filter((e=>!e.success)))||[];if(t.length){const e=t.length>1?h.i18n.translate("xpack.fleet.deletePackagePolicy.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} integrations",values:{count:t.length}}):h.i18n.translate("xpack.fleet.deletePackagePolicy.successSingleNotificationTitle",{defaultMessage:"Deleted integration '{id}'",values:{id:t[0].name||t[0].id}});n.toasts.addSuccess(e)}if(r.length){const e=r.length>1?h.i18n.translate("xpack.fleet.deletePackagePolicy.failureMultipleNotificationTitle",{defaultMessage:"Error deleting {count} integrations",values:{count:r.length}}):h.i18n.translate("xpack.fleet.deletePackagePolicy.failureSingleNotificationTitle",{defaultMessage:"Error deleting integration '{id}'",values:{id:r[0].id}});n.toasts.addDanger(e)}v.current&&v.current(t.map((e=>e.id)))}catch(e){n.toasts.addDanger(h.i18n.translate("xpack.fleet.deletePackagePolicy.fatalErrorNotificationTitle",{defaultMessage:"Error deleting integration"}))}D()}),[D,o,n.toasts]);return a.a.createElement(r.Fragment,null,t(k),c?a.a.createElement(i.EuiConfirmModal,{title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.deleteMultipleTitle",defaultMessage:"Delete {count, plural, one {integration} other {# integrations}}?",values:{count:o.length}}),onCancel:D,onConfirm:S,cancelButtonText:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:x||p?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.loadingButtonLabel",defaultMessage:"Loading…"}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete {agentPoliciesCount, plural, one {integration} other {integrations}}",values:{agentPoliciesCount:o.length}}),buttonColor:"danger",confirmButtonDisabled:x||p},p?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.loadingAgentsCountMessage",defaultMessage:"Checking affected agents…"}):g?a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiCallOut,{color:"danger",title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentsTitle",defaultMessage:"This action will affect {agentsCount} {agentsCount, plural, one {agent} other {agents}}.",values:{agentsCount:g}})},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentsMessage",defaultMessage:"Fleet has detected that {agentPolicyName} is already in use by some of your agents.",values:{agentPolicyName:a.a.createElement("strong",null,e.name)}})),a.a.createElement(i.EuiSpacer,{size:"l"})):null,!p&&a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.generalMessage",defaultMessage:"This action can not be undone. Are you sure you wish to continue?"})):null)},I=v.a.pre.withConfig({displayName:"CommandCode",componentId:"sc-dov1dw-0"})({overflow:"scroll"});const P=({apiKey:e,fleetServerHosts:t})=>{const{platform:n,setPlatform:r}=Object(m.Cb)(),{docLinks:s}=Object(m.Fb)(),o=function(e,t){return`--url=${t[0]} --enrollment-token=${e.api_key}`}(e,t),u=`sudo ./elastic-agent install ${o}`,c=`.\\elastic-agent.exe install ${o}`;return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.descriptionText",defaultMessage:"From the agent directory, run the appropriate command to install, enroll, and start an Elastic Agent. You can reuse these commands to set up agents on more than one host. Requires administrator privileges."})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiButtonGroup,{options:m.e,idSelected:n,onChange:e=>r(e),legend:h.i18n.translate("xpack.fleet.enrollmentInstructions.platformSelectAriaLabel",{defaultMessage:"Platform"})}),a.a.createElement(i.EuiSpacer,{size:"s"}),"linux-mac"===n&&a.a.createElement(i.EuiCodeBlock,{fontSize:"m",isCopyable:!0,paddingSize:"m"},a.a.createElement(I,null,u)),"windows"===n&&a.a.createElement(i.EuiCodeBlock,{fontSize:"m",isCopyable:!0,paddingSize:"m"},a.a.createElement(I,null,c)),"rpm-deb"===n&&a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.moreInstructionsText",defaultMessage:"See the {link} for RPM / DEB deploy instructions.",values:{link:a.a.createElement(i.EuiLink,{target:"_blank",external:!0,href:s.links.fleet.installElasticAgent},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.moreInstructionsLink",defaultMessage:"Elastic Agent docs"}))}})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingText",defaultMessage:"If you are having trouble connecting, see our {link}.",values:{link:a.a.createElement(i.EuiLink,{target:"_blank",external:!0,href:s.links.fleet.troubleshooting},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}))}})))};var O=n(143),B=n(122),j=n(165),N=n.n(j),L=n(166),_=n.n(L),z=n(167),U=n.n(z),R=n(83),H=n(80);const X=({agentPolicyId:e,onCreateEnrollmentApiKey:t})=>{const{notifications:n}=Object(H.jb)(),[s,o]=Object(r.useState)(!1);return a.a.createElement(i.EuiCallOut,{color:"warning",title:h.i18n.translate("xpack.fleet.enrollmentStepAgentPolicy.noEnrollmentTokensForSelectedPolicyCallout",{defaultMessage:"There are no enrollment tokens for the selected agent policy"})},a.a.createElement("div",{className:"eui-textBreakWord"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrenrollmentStepAgentPolicyollment.noEnrollmentTokensForSelectedPolicyCalloutDescription",defaultMessage:"You must create and enrollment token in order to enroll agents with this policy"})),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiButton,{iconType:"plusInCircle",isLoading:s,fill:!0,onClick:async()=>{if(o(!0),e)try{var r;const a=await Object(H.j)({policy_id:e});if(a.error)throw a.error;if(o(!1),null===(r=a.data)||void 0===r||!r.item)return;t(a.data.item),n.toasts.addSuccess(h.i18n.translate("xpack.fleet.newEnrollmentKey.keyCreatedToasts",{defaultMessage:"Enrollment token created"}))}catch(e){o(!1),n.toasts.addError(e,{title:"Error"})}}},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.setUpAgentsLink",defaultMessage:"Create enrollment token"})))},J=({agentPolicyId:e,selectedApiKeyId:t,initialAuthenticationSettingsOpen:n=!1,onKeyChange:o})=>{const{notifications:u}=Object(H.jb)(),[c,d]=Object(r.useState)([]),[p,h]=Object(r.useState)(n),[f,m]=Object(r.useState)(!1),g=Object(r.useCallback)((e=>{d([e]),o(e.id)}),[o]);return Object(r.useEffect)((function(){if(!e)return h(!0),void d([]);!async function(){try{var t;m(!0);const n=await Object(H.q)({page:1,perPage:R.k});if(n.error)throw n.error;if(!n.data)throw new Error("No data while fetching enrollment API keys");const r=n.data.list.filter((t=>t.policy_id===e&&!0===t.active));d(r),o(null===(t=r[0])||void 0===t?void 0:t.id)}catch(e){u.toasts.addError(e,{title:"Error"})}finally{m(!1)}}()}),[o,e,u.toasts]),Object(r.useEffect)((function(){if(!t&&c.length>0&&c[0].policy_id===e){const e=c[0].id;o(e)}}),[c,t,e,o]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiButtonEmpty,{iconSide:"left",iconType:p?"arrowDown":"arrowRight",onClick:()=>h(!p)},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.showAuthenticationSettingsButton",defaultMessage:"Authentication settings"})),p&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiSpacer,{size:"m"}),c.length&&t?a.a.createElement(i.EuiSelect,{fullWidth:!0,options:c.map((e=>({value:e.id,text:e.name}))),value:t||void 0,prepend:a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.enrollmentTokenSelectLabel",defaultMessage:"Enrollment token"})),onChange:e=>{o(e.target.value)}}):f?a.a.createElement(s,null):a.a.createElement(X,{agentPolicyId:e,onCreateEnrollmentApiKey:g})))},K=(e,t)=>{if(e&&e.length&&!t){if(1===e.length)return e[0].id;const t=e.find((e=>e.is_default));if(t)return t.id}return t},G=e=>{const{agentPolicies:t,onAgentPolicyChange:n,excludeFleetServer:s}=e,[o,u]=Object(r.useState)((()=>K(t,void 0)));return Object(r.useEffect)((function(){n&&n(o)}),[o,n]),Object(r.useEffect)((function(){const e=K(t,o);e!==o&&u(e)}),[t,o]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiSelect,{fullWidth:!0,prepend:a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.policySelectLabel",defaultMessage:"Agent policy"})),isLoading:!t,options:(t||[]).map((e=>({value:e.id,text:e.name}))),value:o||void 0,onChange:e=>u(e.target.value),"aria-label":h.i18n.translate("xpack.fleet.enrollmentStepAgentPolicy.policySelectAriaLabel",{defaultMessage:"Agent policy"})}),a.a.createElement(i.EuiSpacer,{size:"m"}),o&&a.a.createElement(w,{agentPolicyId:o,excludeFleetServer:s}),e.withKeySelection&&e.onKeyChange&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiSpacer,null),a.a.createElement(J,{selectedApiKeyId:e.selectedApiKeyId,onKeyChange:e.onKeyChange,agentPolicyId:o})))},W=e=>{const t=Object(m.vb)(),n=Object(r.useMemo)((()=>`${N()(t)}-${_()(t)}-${U()(t)}`),[t]),s=e?h.i18n.translate("xpack.fleet.agentEnrollment.stepDownloadAgentForFleetServerTitle",{defaultMessage:"Download the Fleet Server to a centralized host"}):h.i18n.translate("xpack.fleet.agentEnrollment.stepDownloadAgentTitle",{defaultMessage:"Download the Elastic Agent to your host"}),o=e?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadDescriptionForFleetServer",defaultMessage:"Fleet Server runs on an Elastic Agent. Install this agent on a centralized host so that other hosts you wish to monitor can connect to it. In production, we recommend using one or more dedicated hosts. You can download the Elastic Agent binaries and verification signatures from Elastic’s download page."}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadDescription",defaultMessage:"Install the Elastic Agent on the hosts you wish to monitor. Do not install this agent policy on a host containing Fleet Server. You can download the Elastic Agent binaries and verification signatures from Elastic’s download page."});return{title:s,children:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,o),a.a.createElement(i.EuiSpacer,{size:"s"}),a.a.createElement(i.EuiText,{size:"s"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadUseLinuxInstaller",defaultMessage:"Linux users: We recommend the installer (TAR) over system packages (RPM/DEB) because it lets you upgrade your agent in Fleet."})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiButton,{href:`https://www.elastic.co/downloads/past-releases/elastic-agent-${n}`,target:"_blank",iconSide:"right",iconType:"popout"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadLink",defaultMessage:"Go to download page"})))}},q=({agentPolicies:e,setSelectedPolicyId:t,selectedApiKeyId:n,setSelectedAPIKeyId:i,excludeFleetServer:s})=>{const o=Object(r.useMemo)((()=>Array.isArray(e)?e.filter((e=>e&&!e.is_managed&&(!s||!e.is_default_fleet_server))):[]),[e,s]),l=Object(r.useCallback)((async e=>{t&&t(e)}),[t]);return{title:h.i18n.translate("xpack.fleet.agentEnrollment.stepChooseAgentPolicyTitle",{defaultMessage:"Choose an agent policy"}),children:a.a.createElement(G,{agentPolicies:o,withKeySelection:!!i,selectedApiKeyId:n,onKeyChange:i,onAgentPolicyChange:l,excludeFleetServer:s})}},V=({agentPolicy:e,selectedApiKeyId:t,setSelectedAPIKeyId:n})=>({title:h.i18n.translate("xpack.fleet.agentEnrollment.stepConfigurePolicyAuthenticationTitle",{defaultMessage:"Select enrollment token"}),children:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentAuthenticationSettings",defaultMessage:"{agentPolicyName} has been selected. Select which enrollment token to use when enrolling agents.",values:{agentPolicyName:a.a.createElement("strong",null,e.name)}})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(J,{agentPolicyId:e.id,selectedApiKeyId:t,initialAuthenticationSettingsOpen:!0,onKeyChange:n}))}),$=()=>{const{getHref:e}=Object(m.xb)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentsNotInitializedText",defaultMessage:"Before enrolling agents, {link}.",values:{link:a.a.createElement(i.EuiLink,{href:e("overview")},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.setUpAgentsLink",defaultMessage:"set up central management for Elastic Agents"}))}}))},Y=()=>a.a.createElement(B.a,null),Q=a.a.memo((({agentPolicy:e,agentPolicies:t,viewDataStep:n,setSelectedPolicyId:s,isFleetServerPolicySelected:o,settings:u})=>{var c,d,p;const f=Object(m.bb)(),[g,E]=Object(r.useState)(),x=Object(m.kb)(g),y=Object(O.g)(null==x||null===(c=x.data)||void 0===c||null===(d=c.item)||void 0===d?void 0:d.policy_id),v=Object(r.useMemo)((()=>{const{serviceToken:e,getServiceToken:t,isLoadingServiceToken:n,installCommand:r,platform:a,setPlatform:i,deploymentMode:s,setDeploymentMode:o,addFleetServerHost:l}=y;return[Object(O.f)({deploymentMode:s,setDeploymentMode:o}),Object(O.e)({addFleetServerHost:l}),Object(O.d)({serviceToken:e,getServiceToken:t,isLoadingServiceToken:n}),Object(O.b)({serviceToken:e,installCommand:r,platform:a,setPlatform:i})]}),[y]),b=Object(r.useMemo)((()=>{const r=(null==u?void 0:u.fleet_server_hosts)||[],i=[e?V({agentPolicy:e,selectedApiKeyId:g,setSelectedAPIKeyId:E}):q({agentPolicies:t,selectedApiKeyId:g,setSelectedAPIKeyId:E,setSelectedPolicyId:s}),W(o||!1)];return o?i.push(...v):i.push({title:h.i18n.translate("xpack.fleet.agentEnrollment.stepEnrollAndRunAgentTitle",{defaultMessage:"Enroll and start the Elastic Agent"}),children:g&&x.data&&a.a.createElement(P,{apiKey:x.data.item,fleetServerHosts:r})}),n&&i.push({"data-test-subj":"view-data-step",...n}),i}),[e,g,s,E,t,x.data,v,o,null==u?void 0:u.fleet_server_hosts,n]);return f.isReady&&0===(null==u?void 0:u.fleet_server_hosts.length)?null:f.isReady?a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.managedDescription",defaultMessage:"Enroll an Elastic Agent in Fleet to automatically deploy updates and centrally manage the agent."})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiSteps,{steps:b})):a.a.createElement(a.a.Fragment,null,1===(null===(p=f.missingRequirements)||void 0===p?void 0:p.length)&&"fleet_server"===f.missingRequirements[0]?a.a.createElement(Y,null):a.a.createElement($,null))}));var Z=n(93),ee=n(1),te=n(5);const ne=a.a.memo((({agentPolicy:e,agentPolicies:t})=>{const{getHref:n}=Object(m.xb)(),s=Object(m.Fb)(),{notifications:o}=s,[u,c]=Object(r.useState)(null==e?void 0:e.id),[d,p]=Object(r.useState)(),[f,g]=Object(r.useState)("IS_LOADING"),[E,x]=Object(r.useState)(""),y="IS_KUBERNETES"===f?te.KUBERNETES_RUN_INSTRUCTIONS:te.STANDALONE_RUN_INSTRUCTIONS;Object(r.useEffect)((()=>{!async function(){if(!u)return;const e=await Object(m.w)(u),t=e.data?e.data.item:null;if(!t)return void g("IS_NOT_KUBERNETES");g(t.package_policies.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===te.FLEET_KUBERNETES_PACKAGE}))?"IS_KUBERNETES":"IS_NOT_KUBERNETES")}()}),[u,o.toasts]),Object(r.useEffect)((()=>{"IS_LOADING"!==f&&async function(){try{if(!u)return;let e={standalone:!0,kubernetes:!1};"IS_KUBERNETES"===f&&(e={standalone:!0,kubernetes:!0});const t=await Object(m.x)(u,e);if(t.error)throw t.error;if(!t.data)throw new Error("No data while fetching full agent policy");p(t.data.item)}catch(e){o.toasts.addError(e,{title:"Error"})}}()}),[u,o.toasts,f,s.http.basePath]),Object(r.useEffect)((()=>{if("IS_KUBERNETES"===f){if("object"==typeof d)return;x(d)}else{if("string"==typeof d)return;x(Object(ee.l)(d,Z.safeDump))}}),[d,f]);const v="IS_KUBERNETES"===f?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepConfigureAgentDescriptionk8s",defaultMessage:"Copy or download the Kubernetes manifest inside the Kubernetes cluster. Modify {ESUsernameVariable} and {ESPasswordVariable} in the Daemonset environment variables and apply the manifest.",values:{ESUsernameVariable:a.a.createElement(i.EuiCode,null,"ES_USERNAME"),ESPasswordVariable:a.a.createElement(i.EuiCode,null,"ES_PASSWORD")}}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepConfigureAgentDescription",defaultMessage:"Copy this policy to the {fileName} on the host where the Elastic Agent is installed. Modify {ESUsernameVariable} and {ESPasswordVariable} in the {outputSection} section of {fileName} to use your Elasticsearch credentials.",values:{fileName:a.a.createElement(i.EuiCode,null,"elastic-agent.yml"),ESUsernameVariable:a.a.createElement(i.EuiCode,null,"ES_USERNAME"),ESPasswordVariable:a.a.createElement(i.EuiCode,null,"ES_PASSWORD"),outputSection:a.a.createElement(i.EuiCode,null,"outputs")}});let b="";u&&(b="IS_KUBERNETES"===f?s.http.basePath.prepend(`${ee.b.getInfoFullDownloadPath(u)}?kubernetes=true`):s.http.basePath.prepend(`${ee.b.getInfoFullDownloadPath(u)}?standalone=true`));const k="IS_KUBERNETES"===f?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadPolicyButtonk8s",defaultMessage:"Download Manifest"}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadPolicyButton",defaultMessage:"Download Policy"}),D="IS_KUBERNETES"===f?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepRunAgentDescriptionk8s",defaultMessage:"From the directory where the Kubernetes manifest is downloaded, run the apply command."}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepRunAgentDescription",defaultMessage:"From the agent directory, run this command to install, enroll and start an Elastic Agent. You can reuse this command to set up agents on more than one host. Requires administrator privileges."}),S=[e?void 0:q({agentPolicies:t,setSelectedPolicyId:c,excludeFleetServer:!0}),W(!1),{title:h.i18n.translate("xpack.fleet.agentEnrollment.stepConfigureAgentTitle",{defaultMessage:"Configure the agent"}),children:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(a.a.Fragment,null,v),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiFlexGroup,{gutterSize:"m"},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiCopy,{textToCopy:E},(e=>a.a.createElement(i.EuiButton,{onClick:e,iconType:"copyClipboard"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.copyPolicyButton",defaultMessage:"Copy to clipboard"}))))),a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButton,{iconType:"download",href:b,isDisabled:!b},a.a.createElement(a.a.Fragment,null,k)))),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiCodeBlock,{language:"yaml",style:{maxHeight:300},fontSize:"m"},E)))},{title:h.i18n.translate("xpack.fleet.agentEnrollment.stepRunAgentTitle",{defaultMessage:"Start the agent"}),children:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(a.a.Fragment,null,D),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiCodeBlock,{fontSize:"m"},y),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiCopy,{textToCopy:y},(e=>a.a.createElement(i.EuiButton,{onClick:e,iconType:"copyClipboard"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.copyRunInstructionsButton",defaultMessage:"Copy to clipboard"}))))))},{title:h.i18n.translate("xpack.fleet.agentEnrollment.stepCheckForDataTitle",{defaultMessage:"Check for data"}),children:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepCheckForDataDescription",defaultMessage:"The agent should begin sending data. Go to {link} to view your data.",values:{link:a.a.createElement(i.EuiLink,{href:n("data_streams")},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.goToDataStreamsLink",defaultMessage:"data streams"}))}})))}].filter(Boolean);return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.standaloneDescription",defaultMessage:"Run an Elastic Agent standalone to configure and update the agent manually on the host where the agent is installed."})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiSteps,{steps:S}))})),re=()=>{const{setModal:e}=Object(m.Hb)(),{docLinks:t}=Object(m.Fb)();return a.a.createElement(i.EuiCallOut,{title:h.i18n.translate("xpack.fleet.agentEnrollment.missingFleetHostCalloutTitle",{defaultMessage:"Missing URL for Fleet Server host"})},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.missingFleetHostCalloutText",defaultMessage:"A URL for your Fleet Server host is required to enroll agents with Fleet. You can add this information in Fleet Settings. For more information, see the {link}.",values:{link:a.a.createElement(i.EuiLink,{href:t.links.fleet.guide,target:"_blank",external:!0},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.missingFleetHostGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiButton,{fill:!0,iconType:"gear",onClick:()=>{e("settings")}},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.fleetSettingsLink",defaultMessage:"Fleet Settings"})))},ae=({onClose:e,agentPolicy:t,agentPolicies:n,viewDataStep:s,defaultMode:o="managed"})=>{var u,c,d;const[p,h]=Object(r.useState)(o),{modal:f}=Object(m.Hb)(),[E,x]=Object(r.useState)(f),y=Object(m.rb)(),v=(null===(u=y.data)||void 0===u||null===(c=u.item)||void 0===c?void 0:c.fleet_server_hosts)||[];Object(r.useEffect)((()=>{f!==E&&(y.resendRequest(),x(f))}),[f,E,y]);const b=Object(m.bb)(),[k,D]=Object(r.useState)(null==t?void 0:t.id),[S,C]=Object(r.useState)(!1);Object(r.useEffect)((()=>{!async function(){if(k&&C){var e;const t=await Object(m.w)(k);null!==(e=t.data)&&void 0!==e&&e.item&&t.data.item.package_policies.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===g.j}))?C(!0):C(!1)}}()}),[k]);const A=y.isLoading&&y.isInitialRequest;return a.a.createElement(i.EuiFlyout,{"data-test-subj":"agentEnrollmentFlyout",onClose:e,size:"m"},a.a.createElement(i.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"FleetAgentEnrollmentFlyoutTitle"},a.a.createElement(i.EuiTitle,{size:"m"},a.a.createElement("h2",{id:"FleetAgentEnrollmentFlyoutTitle"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.flyoutTitle",defaultMessage:"Add agent"}))),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiText,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentDescription",defaultMessage:"Add Elastic Agents to your hosts to collect data and send it to the Elastic Stack."})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiTabs,{style:{marginBottom:"-25px"}},a.a.createElement(i.EuiTab,{"data-test-subj":"managedTab",isSelected:"managed"===p,onClick:()=>h("managed")},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.enrollFleetTabLabel",defaultMessage:"Enroll in Fleet"})),a.a.createElement(i.EuiTab,{"data-test-subj":"standaloneTab",isSelected:"standalone"===p,onClick:()=>h("standalone")},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.enrollStandaloneTabLabel",defaultMessage:"Run standalone"})))),a.a.createElement(i.EuiFlyoutBody,{banner:b.isReady&&!A&&0===v.length&&"managed"===p?a.a.createElement(re,null):void 0},"managed"===p?a.a.createElement(Q,{settings:null===(d=y.data)||void 0===d?void 0:d.item,setSelectedPolicyId:D,agentPolicy:t,agentPolicies:n,viewDataStep:s,isFleetServerPolicySelected:S}):a.a.createElement(ne,{agentPolicy:t,agentPolicies:n})),a.a.createElement(i.EuiFlyoutFooter,null,a.a.createElement(i.EuiFlexGroup,{justifyContent:"flexStart"},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButtonEmpty,{onClick:e},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentEnrollment.closeFlyoutButtonLabel",defaultMessage:"Close"}))))))},ie=({agentPolicy:e,packagePolicy:t,viewDataStep:n,showAddAgent:s,upgradePackagePolicyHref:o,defaultIsOpen:u=!1})=>{const[c,d]=Object(r.useState)(!1),{getHref:p}=Object(m.xb)(),h=Object(m.W)().write,g=Object(m.V)(),[E,x]=Object(r.useState)(u),y=Object(r.useMemo)((()=>()=>d(!1)),[]),v=[...s&&!e.is_managed?[a.a.createElement(i.EuiContextMenuItem,{icon:"plusInCircle",onClick:()=>{x(!1),d(!0)},key:"addAgent"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.addAgent",defaultMessage:"Add agent"}))]:[],a.a.createElement(i.EuiContextMenuItem,{disabled:!h,icon:"pencil",href:p("integration_policy_edit",{packagePolicyId:t.id}),key:"packagePolicyEdit"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.editActionTitle",defaultMessage:"Edit integration"})),a.a.createElement(i.EuiContextMenuItem,{disabled:!t.hasUpgrade,icon:"refresh",href:o,key:"packagePolicyUpgrade"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.upgradeActionTitle",defaultMessage:"Upgrade integration policy"}))];return e.is_managed||v.push(a.a.createElement(T,{agentPolicy:e,key:"packagePolicyDelete"},(e=>a.a.createElement(M,{disabled:!h,icon:"trash",onClick:()=>{e([t.id],(()=>{x(!1),g()}))}},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.deleteActionTitle",defaultMessage:"Delete integration"}))))),a.a.createElement(a.a.Fragment,null,c&&a.a.createElement(i.EuiPortal,null,a.a.createElement(ae,{agentPolicy:e,viewDataStep:n,onClose:y})),a.a.createElement(f,{isOpen:E,items:v,onChange:e=>x(e)}))},se=({button:e,isOpen:t,offset:n,closePopover:r})=>{const{docLinks:s}=Object(m.Fb)(),o=Object(y.useTheme)(),u={};return void 0!==n&&(u.offset=n),a.a.createElement(i.EuiTourStep,p()({},u,{content:a.a.createElement(i.EuiText,{size:"m",style:{width:302}},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.popoverBody",defaultMessage:"For integrations to work successfully, add {elasticAgent} to your host to collect data and send it to Elastic Stack. {learnMoreLink}",values:{elasticAgent:a.a.createElement("strong",null,"Elastic Agent"),learnMoreLink:a.a.createElement(i.EuiLink,{target:"_blank",external:!0,href:s.links.fleet.elasticAgent},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.documentationLink",defaultMessage:"Learn more about Elastic Agent."}))}})),zIndex:o.eui.euiZLevel1-1,isStepOpen:t,minWidth:300,onFinish:()=>{},step:1,stepsTotal:1,title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.title",defaultMessage:"Don't forget to add the agent to your host"}),anchorPosition:"downCenter",subtitle:null,"data-test-subj":"addAgentHelpPopover",footerAction:a.a.createElement(i.EuiLink,{onClick:()=>{r()}},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.footActionButton",defaultMessage:"Got it"}))}),e)},oe={minWidth:0},le={whiteSpace:"nowrap"},ue=Object(r.memo)((({policy:e})=>{const{getHref:t}=Object(m.xb)(),{name:n,id:r,revision:s,is_managed:o}=e;return a.a.createElement(i.EuiFlexGroup,{gutterSize:"s",alignItems:"baseline",style:oe,responsive:!1},a.a.createElement(i.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},a.a.createElement(i.EuiLink,{className:"eui-textTruncate",href:t("policy_details",{policyId:r}),title:n||r},n||r)),o&&a.a.createElement(i.EuiIconTip,{title:"Hosted agent policy",content:h.i18n.translate("xpack.fleet.agentPolicySummaryLine.hostedPolicyTooltip",{defaultMessage:"This policy is managed outside of Fleet. Most actions related to this policy are unavailable."}),type:"lock",size:"m",color:"subdued"}),s&&a.a.createElement(i.EuiFlexItem,{grow:!0},a.a.createElement(i.EuiText,{color:"subdued",size:"xs",style:le},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicySummaryLine.revisionNumber",defaultMessage:"rev. {revNumber}",values:{revNumber:s}}))))}));var ce=n(21);const de=[{name:h.i18n.translate("xpack.fleet.settingsConfirmModal.fieldLabel",{defaultMessage:"Field"}),field:"label",render:(e,t)=>function(e){if("elasticsearch"===e.type&&"removed"===e.direction)return h.i18n.translate("xpack.fleet.settingsConfirmModal.elasticsearchRemovedLabel",{defaultMessage:"Elasticsearch hosts (old)"});if("elasticsearch"===e.type&&"added"===e.direction)return h.i18n.translate("xpack.fleet.settingsConfirmModal.elasticsearchAddedLabel",{defaultMessage:"Elasticsearch hosts (new)"});if("fleet_server"===e.type&&"removed"===e.direction)return h.i18n.translate("xpack.fleet.settingsConfirmModal.fleetServerRemovedLabel",{defaultMessage:"Fleet Server hosts (old)"});if("fleet_server"===e.type&&"added"===e.direction)return h.i18n.translate("xpack.fleet.settingsConfirmModal.fleetServerAddedLabel",{defaultMessage:"Fleet Server hosts (new)"});return h.i18n.translate("xpack.fleet.settingsConfirmModal.defaultChangeLabel",{defaultMessage:"Unknown setting"})}(t),width:"180px"},{field:"urls",name:h.i18n.translate("xpack.fleet.settingsConfirmModal.valueLabel",{defaultMessage:"Value"}),render:(e,t)=>a.a.createElement(i.EuiText,{size:"s",color:"added"===t.direction?"secondary":"danger"},t.urls.map((e=>a.a.createElement("div",{key:e},e))))}];const pe=a.a.memo((({changes:e,onConfirm:t,onClose:n})=>{const r=e.some((e=>"elasticsearch"===e.type)),s=e.some((e=>"fleet_server"===e.type));return a.a.createElement(i.EuiModal,{maxWidth:!0,onClose:n},a.a.createElement(i.EuiModalHeader,null,a.a.createElement(i.EuiModalHeaderTitle,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.title",defaultMessage:"Apply settings to all agent policies"}))),a.a.createElement(i.EuiModalBody,null,a.a.createElement(i.EuiCallOut,{title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.calloutTitle",defaultMessage:"This action updates all agent policies and enrolled agents"}),color:"warning",iconType:"alert"},a.a.createElement(i.EuiText,{size:"s"},s&&a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.fleetServerChangedText",defaultMessage:"Agents that cannot connect to the new {fleetServerHosts} log an error. The agents remain on the current policy and check for updates at the old URL until they connect at the new URL.",values:{fleetServerHosts:a.a.createElement("strong",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.fleetServerHosts",defaultMessage:"Fleet Server hosts"}))}})),r&&a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.eserverChangedText",defaultMessage:"Agents that cannot connect at the new {elasticsearchHosts} have a healthy status even though they are unable to send data. To update the URL that Fleet Server uses to connect to Elasticsearch, you must reenroll Fleet Server.",values:{elasticsearchHosts:a.a.createElement("strong",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.elasticsearchHosts",defaultMessage:"Elasticsearch hosts"}))}})))),e.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiBasicTable,{tableLayout:"auto",columns:de,items:e}))),a.a.createElement(i.EuiModalFooter,null,a.a.createElement(i.EuiButtonEmpty,{onClick:n},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.cancelButton",defaultMessage:"Cancel"})),a.a.createElement(i.EuiButton,{onClick:t,fill:!0},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settingsConfirmModal.confirmButton",defaultMessage:"Apply settings"}))))})),he=v.a.div.withConfig({displayName:"DraggableDiv",componentId:"sc-10pkrrf-0"})(["margin:",";"],(e=>e.theme.eui.euiSizeS));function fe(e){return null!=e&&e.length?e.map(((e,t)=>a.a.createElement(i.EuiFormErrorText,{key:t},e))):null}const me=a.a.memo((({id:e,index:t,value:n,onChange:s,onDelete:o,autoFocus:l,errors:u})=>{var c;const d=Object(r.useCallback)((()=>{o(t)}),[o,t]),f=(null!==(c=null==u?void 0:u.length)&&void 0!==c?c:0)>0,m=Object(y.useTheme)();return a.a.createElement(i.EuiDraggable,{spacing:"m",index:t,draggableId:e,customDragHandle:!0,style:{paddingLeft:0,paddingRight:0}},((e,t)=>a.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1,style:t.isDragging?{background:m.eui.euiPanelBackgroundColorModifiers.plain}:{}},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(he,p()({},e.dragHandleProps,{"aria-label":h.i18n.translate("xpack.fleet.settings.sortHandle",{defaultMessage:"Sort host handle"})}),a.a.createElement(i.EuiIcon,{color:"text",type:"grab"}))),a.a.createElement(i.EuiFlexItem,null,a.a.createElement(i.EuiFieldText,{fullWidth:!0,compressed:!0,value:n,onChange:s,autoFocus:l,isInvalid:f}),fe(u)),a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButtonIcon,{color:"text",onClick:d,iconType:"cross","aria-label":h.i18n.translate("xpack.fleet.settings.deleteHostButton",{defaultMessage:"Delete host"})})))))})),ge=({id:e,value:t,onChange:n,helpText:s,label:o,isInvalid:u,errors:c})=>{const[d,p]=Object(r.useState)(!1),h=Object(r.useMemo)((()=>t.length?t:[""]),[t]),f=Object(r.useMemo)((()=>h.map(((e,t)=>({value:e,onChange:e=>{const r=[...h];r[t]=e.target.value,n(r)}})))),[h,n]),m=Object(r.useMemo)((()=>c?c.reduce(((e,t)=>(void 0===t.index||(e[t.index]||(e[t.index]=[]),e[t.index].push(t.message)),e)),[]):[]),[c]),g=Object(r.useCallback)((e=>{m.splice(e,1),n([...h.slice(0,e),...h.slice(e+1)])}),[h,n,m]),E=Object(r.useCallback)((()=>{p(!0),n([...h,""])}),[h,n]),x=Object(r.useCallback)((({source:e,destination:t})=>{if(e&&t){const r=Object(i.euiDragDropReorder)(h,e.index,t.index),a=m[e.index];m.splice(e.index,1),m.splice(t.index,0,a),n(r)}}),[h,n,m]),y=Object(r.useMemo)((()=>c&&c.filter((e=>void 0===e.index)).map((({message:e})=>e))),[c]),v=f.length>1;return a.a.createElement(i.EuiFormRow,{fullWidth:!0,label:o,isInvalid:u},a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiFormHelpText,null,s),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiDragDropContext,{onDragEnd:x},a.a.createElement(i.EuiDroppable,{droppableId:`${e}Droppable`,spacing:"none"},f.map(((t,n)=>a.a.createElement(a.a.Fragment,{key:n},v?a.a.createElement(me,{id:`${e}${n}Draggable`,index:n,onChange:t.onChange,onDelete:g,value:t.value,autoFocus:d,errors:m[n]}):a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiFieldText,{fullWidth:!0,compressed:!0,value:t.value,onChange:t.onChange,isInvalid:!!m[n]}),fe(m[n]))))))),fe(y),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiButtonEmpty,{size:"xs",flush:"left",iconType:"plusInCircle",onClick:E},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.hostsInput.addRow",defaultMessage:"Add row"}))))},Ee=v.a.div.withConfig({displayName:"CodeEditorContainer",componentId:"sc-1jw075y-0"})(["min-height:0;position:relative;height:250px;"]),xe=v()(i.EuiTextColor).attrs((e=>({color:"subdued",size:"xs"}))).withConfig({displayName:"CodeEditorPlaceholder",componentId:"sc-1jw075y-1"})(["position:absolute;top:0;left:0;font-family:Menlo,Monaco,'Courier New',monospace;font-size:12px;line-height:21px;pointer-events:none;"]),ye=/^(https?):\/\/[^\s$.?#].[^\s]*$/gm;function ve(e){return e.map((e=>{try{return Object(te.normalizeHostsForAgents)(e)}catch(t){return e}}))}function be(e=[],t=[]){const n=ve(e),r=ve(t);return n.length===r.length&&n.every(((e,t)=>e===r[t]))}const ke=({onClose:e})=>{var t;const{docLinks:n}=Object(m.Fb)(),s=Object(m.rb)(),o=null==s||null===(t=s.data)||void 0===t?void 0:t.item,{output:u}=Object(m.ab)(),{inputs:c,submit:d,validate:f,isLoading:g}=function(e,t){const[n,i]=a.a.useState(!1),{notifications:s}=Object(m.Fb)(),o=Object(m.X)("fleetServerHostsComboBox",[],(e=>{if(0===e.length)return[{message:h.i18n.translate("xpack.fleet.settings.fleetServerHostsEmptyError",{defaultMessage:"At least one URL is required"})}];const t=[],n={};return e.forEach(((e,r)=>{e.match(ye)||t.push({message:h.i18n.translate("xpack.fleet.settings.fleetServerHostsError",{defaultMessage:"Invalid URL"}),index:r});const a=n[e]||[];n[e]=[...a,r]})),Object.values(n).filter((({length:e})=>e>1)).forEach((e=>{e.forEach((e=>t.push({message:h.i18n.translate("xpack.fleet.settings.fleetServerHostsDuplicateError",{defaultMessage:"Duplicate URL"}),index:e})))})),t.length?t:e.length&&Object(te.isDiffPathProtocol)(e)?[{message:h.i18n.translate("xpack.fleet.settings.fleetServerHostsDifferentPathOrProtocolError",{defaultMessage:"Protocol and path must be the same for each URL"})}]:void 0})),l=Object(m.X)("esHostsComboxBox",[],(e=>{const t=[],n={};if(e.forEach(((e,r)=>{e.match(ye)||t.push({message:h.i18n.translate("xpack.fleet.settings.elasticHostError",{defaultMessage:"Invalid URL"}),index:r});const a=n[e]||[];n[e]=[...a,r]})),Object.values(n).filter((({length:e})=>e>1)).forEach((e=>{e.forEach((e=>t.push({message:h.i18n.translate("xpack.fleet.settings.elasticHostDuplicateError",{defaultMessage:"Duplicate URL"}),index:e})))})),t.length)return t})),u=Object(m.sb)("",(e=>{try{return void Object(Z.safeLoad)(e)}catch(e){return[h.i18n.translate("xpack.fleet.settings.invalidYamlFormatErrorMessage",{defaultMessage:"Invalid YAML: {reason}",values:{reason:e.message}})]}}));return{isLoading:n,validate:Object(r.useCallback)((()=>{const e=o.validate(),t=l.validate(),n=u.validate();return!!(e&&t&&n)}),[o,l,u]),submit:async()=>{try{if(i(!0),!e)throw new Error("Unable to load outputs");const n=await Object(m.L)(e,{hosts:l.value,config_yaml:u.value});if(n.error)throw n.error;const r=await Object(m.M)({fleet_server_hosts:o.value});if(r.error)throw r.error;s.toasts.addSuccess(h.i18n.translate("xpack.fleet.settings.success.message",{defaultMessage:"Settings saved"})),i(!1),t()}catch(e){i(!1),s.toasts.addError(e,{title:"Error"})}},inputs:{fleetServerHosts:o,elasticsearchUrl:l,additionalYamlConfig:u}}}(null==u?void 0:u.id,e),[E,x]=a.a.useState(!1),y=Object(r.useCallback)((()=>{f()&&x(!0)}),[f,x]),v=Object(r.useCallback)((()=>{x(!1),d()}),[d]),b=Object(r.useCallback)((()=>{x(!1)}),[x]);Object(r.useEffect)((()=>{u&&(c.elasticsearchUrl.setValue(u.hosts||[]),c.additionalYamlConfig.setValue(u.config_yaml||""))}),[u]),Object(r.useEffect)((()=>{o&&c.fleetServerHosts.setValue([...o.fleet_server_hosts])}),[o]);const k=a.a.useMemo((()=>!(!o||!u)&&(!be(o.fleet_server_hosts,c.fleetServerHosts.value)||!be(u.hosts,c.elasticsearchUrl.value)||(u.config_yaml||"")!==c.additionalYamlConfig.value)),[o,c,u]),D=a.a.useMemo((()=>{if(!o||!u||!E)return[];const e=[];return be(u.hosts,c.elasticsearchUrl.value)||e.push({type:"elasticsearch",direction:"removed",urls:ve(u.hosts||[])},{type:"elasticsearch",direction:"added",urls:ve(c.elasticsearchUrl.value)}),be(o.fleet_server_hosts,c.fleetServerHosts.value)||e.push({type:"fleet_server",direction:"removed",urls:ve(o.fleet_server_hosts||[])},{type:"fleet_server",direction:"added",urls:ve(c.fleetServerHosts.value)}),e}),[o,c,u,E]),S=o&&a.a.createElement(i.EuiForm,null,a.a.createElement(i.EuiText,{color:"subdued",size:"s"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.globalOutputDescription",defaultMessage:"These settings are applied globally to the {outputs} section of all agent policies and affect all enrolled agents.",values:{outputs:a.a.createElement(i.EuiCode,null,"outputs")}})),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiPanel,{hasShadow:!1,hasBorder:!0},a.a.createElement(ge,p()({},c.fleetServerHosts.props,{label:h.i18n.translate("xpack.fleet.settings.fleetServerHostsLabel",{defaultMessage:"Fleet Server hosts"}),helpText:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsHelpTect",defaultMessage:"Specify the URLs that your agents will use to connect to a Fleet Server. If multiple URLs exist, Fleet shows the first provided URL for enrollment purposes. Fleet Server uses port 8220 by default. Refer to the {link}.",values:{link:a.a.createElement(i.EuiLink,{href:n.links.fleet.settingsFleetServerHostSettings,target:"_blank",external:!0},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.userGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})}))),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiPanel,{hasShadow:!1,hasBorder:!0},a.a.createElement(ge,p()({},c.elasticsearchUrl.props,{label:h.i18n.translate("xpack.fleet.settings.elasticsearchUrlLabel",{defaultMessage:"Elasticsearch hosts"}),helpText:h.i18n.translate("xpack.fleet.settings.elasticsearchUrlsHelpTect",{defaultMessage:"Specify the Elasticsearch URLs where agents send data. Elasticsearch uses port 9200 by default."})}))),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiPanel,{hasShadow:!1,hasBorder:!0},a.a.createElement(i.EuiFormRow,p()({},c.additionalYamlConfig.formRowProps,{label:h.i18n.translate("xpack.fleet.settings.additionalYamlConfig",{defaultMessage:"Elasticsearch output configuration (YAML)"}),fullWidth:!0}),a.a.createElement(Ee,null,a.a.createElement(ce.CodeEditor,{languageId:"yaml",width:"100%",height:"250px",value:c.additionalYamlConfig.value,onChange:c.additionalYamlConfig.setValue,options:{minimap:{enabled:!1},ariaLabel:h.i18n.translate("xpack.fleet.settings.yamlCodeEditor",{defaultMessage:"YAML Code Editor"}),scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,tabSize:2,lineNumbers:"off",lineNumbersMinChars:0,glyphMargin:!1,folding:!1,lineDecorationsWidth:0}}),(!c.additionalYamlConfig.value||""===c.additionalYamlConfig.value)&&a.a.createElement(xe,null,"# YAML settings here will be added to the Elasticsearch output section of each policy")))));return a.a.createElement(a.a.Fragment,null,E&&a.a.createElement(pe,{changes:D,onConfirm:v,onClose:b}),a.a.createElement(i.EuiFlyout,{onClose:e,size:"m"},a.a.createElement(i.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"IngestManagerSettingsFlyoutTitle"},a.a.createElement(i.EuiTitle,{size:"m"},a.a.createElement("h2",{id:"IngestManagerSettingsFlyoutTitle"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.flyoutTitle",defaultMessage:"Fleet settings"})))),a.a.createElement(i.EuiFlyoutBody,null,S),a.a.createElement(i.EuiFlyoutFooter,null,a.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween"},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButtonEmpty,{onClick:e,flush:"left"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.cancelButtonLabel",defaultMessage:"Cancel"}))),a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButton,{disabled:!k,onClick:y,isLoading:g,color:"primary",fill:!0},g?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.saveButtonLoadingLabel",defaultMessage:"Applying settings..."}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.settings.saveButtonLabel",defaultMessage:"Save and apply settings"})))))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var r=n(86),a=n.n(r),i=n(0),s=n.n(i),o=n(6),l=n(101),u=n(69),c=n.n(u);const d=c.a.div.withConfig({displayName:"Wrapper",componentId:"sc-7bdheo-0"})(["background-color:",";min-height:calc( 100vh - ","px );"],(e=>e.theme.eui.euiColorEmptyShade),(e=>2*parseFloat(e.theme.eui.euiHeaderHeightCompensation))),p=c()(o.EuiPage).withConfig({displayName:"Page",componentId:"sc-7bdheo-1"})(["background:",";width:100%;align-self:center;margin:auto;flex:1;"],(e=>e.theme.eui.euiColorEmptyShade)),h=c.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-7bdheo-2"})(["height:100%;"]),f=({restrictWidth:e,children:t})=>s.a.createElement(d,null,s.a.createElement(p,{restrictWidth:e||1200},s.a.createElement(o.EuiPageBody,null,s.a.createElement(h,null,s.a.createElement(o.EuiSpacer,{size:"m"}),t)))),m=({restrictWidth:e,restrictHeaderWidth:t,children:n,"data-test-subj":r,...i})=>s.a.createElement(d,null,s.a.createElement(l.j,a()({maxWidth:t,"data-test-subj":r?`${r}_header`:void 0},i)),s.a.createElement(p,{restrictWidth:e||1200,"data-test-subj":r?`${r}_page`:void 0},s.a.createElement(o.EuiPageBody,null,s.a.createElement(h,null,s.a.createElement(o.EuiSpacer,{size:"m"}),n))))},function(e,t,n){e.exports=n(29)(2400)},function(e,t,n){"use strict";var r=n(95);e.exports=r.DEFAULT=new r({include:[n(100)],explicit:[n(184),n(185),n(186)]})},function(e,t,n){"use strict";e.exports=o;var r=n(221),a=r.CONTINUE,i=r.SKIP,s=r.EXIT;function o(e,t,n,a){"function"==typeof t&&"function"!=typeof n&&(a=n,n=t,t=null),r(e,t,(function(e,t){var r=t[t.length-1],a=r?r.children.indexOf(e):null;return n(e,a,r)}),a)}o.CONTINUE=a,o.SKIP=i,o.EXIT=s},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return w}));var r=n(0),a=n.n(r),i=n(68),s=n(69),o=n.n(s),l=n(6),u=n(90),c=n(81);const d=o()(l.EuiDescriptionListDescription).withConfig({displayName:"AgentPolicyName",componentId:"sc-vgpngq-0"})(["margin-left:auto;max-width:250px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),p=Object(r.memo)((({from:e,cancelUrl:t,onCancel:n,agentPolicy:s,packageInfo:o,integrationInfo:p,children:h,"data-test-subj":f,tabs:m=[]})=>{const g=Object(r.useMemo)((()=>["package","policy"].includes(e)),[e]),E=Object(r.useMemo)((()=>["edit","package-edit"].includes(e)),[e]),x=Object(r.useMemo)((()=>["upgrade-from-fleet-policy-list","upgrade-from-integrations-policy-list","upgrade-from-extension"].includes(e)),[e]),y=Object(r.useMemo)((()=>{if((g||E||x)&&o){let e=a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageTitleWithPackageName",defaultMessage:"Add {packageName} integration",values:{packageName:(null==p?void 0:p.title)||o.title}});return E?e=a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.editPageTitleWithPackageName",defaultMessage:"Edit {packageName} integration",values:{packageName:o.title}}):x&&(e=a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.upgradePageTitleWithPackageName",defaultMessage:"Upgrade {packageName} integration",values:{packageName:o.title}})),a.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(c.m,{packageName:(null==o?void 0:o.name)||"",integrationName:null==p?void 0:p.name,version:(null==o?void 0:o.version)||"",icons:(null==p?void 0:p.icons)||(null==o?void 0:o.icons),size:"xl"})),a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiText,null,a.a.createElement("h1",{"data-test-subj":`${f}_pageTitle`},e))))}return E?a.a.createElement(l.EuiText,null,a.a.createElement("h1",{"data-test-subj":`${f}_pageTitle`},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.pageTitle",defaultMessage:"Edit integration"}))):x?a.a.createElement(l.EuiText,null,a.a.createElement("h1",{"data-test-subj":`${f}_pageTitle`},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.pageTitle",defaultMessage:"Upgrade integration"}))):a.a.createElement(l.EuiText,null,a.a.createElement("h1",null,a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageTitle",defaultMessage:"Add integration"})))}),[f,null==p?void 0:p.icons,null==p?void 0:p.name,null==p?void 0:p.title,o,g,E,x]),v=Object(r.useMemo)((()=>E?a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.pageDescription",defaultMessage:"Modify integration settings and deploy changes to the selected agent policy."}):g?a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageDescriptionfromPolicy",defaultMessage:"Configure an integration for the selected agent policy."}):x?a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.pageDescriptionFromUpgrade",defaultMessage:"Upgrade this integration and deploy changes to the selected agent policy"}):a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageDescriptionfromPackage",defaultMessage:"Follow these instructions to add this integration to an agent policy."})),[g,E,x]),b=a.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"s",alignItems:"flexStart"},a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiButtonEmpty,{size:"xs",iconType:"arrowLeft",flush:"left",href:t,onClick:n,"data-test-subj":`${f}_cancelBackLink`},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.cancelLinkText",defaultMessage:"Cancel"}))),a.a.createElement(l.EuiFlexItem,null,y),a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiSpacer,{size:"s"}),a.a.createElement(l.EuiText,{color:"subdued",size:"s"},v))),k=s&&(g||E)?a.a.createElement(l.EuiDescriptionList,{className:"eui-textRight",textStyle:"reverse"},a.a.createElement(l.EuiDescriptionListTitle,null,a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.agentPolicyNameLabel",defaultMessage:"Agent policy"})),a.a.createElement(d,{className:"eui-textBreakWord",title:(null==s?void 0:s.name)||"-"},(null==s?void 0:s.name)||"-")):void 0;return a.a.createElement(u.c,{restrictHeaderWidth:770,restrictWidth:770,leftColumn:b,rightColumn:k,rightColumnGrow:!1,"data-test-subj":f,tabs:m.map((({title:e,...t})=>({name:e,...t})))},h)}));var h=n(4),f=n(98),m=n(115),g=n.n(m),E=n(21);const x=({index:e,value:t,onChange:n,onDelete:i,onBlur:s,autoFocus:o,isDisabled:u,showDeleteButton:c})=>{const d=Object(r.useCallback)((()=>{i(e)}),[i,e]),p=Object(r.useCallback)((t=>{n(e,t.target.value)}),[n,e]);return a.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1},a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiFieldText,{fullWidth:!0,value:t,onChange:p,autoFocus:o,disabled:u,onBlur:s})),c&&a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiButtonIcon,{color:"text",onClick:d,iconType:"cross",disabled:u,"aria-label":h.i18n.translate("xpack.fleet.multiTextInput.deleteRowButton",{defaultMessage:"Delete row"})})))};const y=({value:e,onChange:t,onBlur:n,isInvalid:s,isDisabled:o,errors:u})=>{const[c,d]=Object(r.useState)(!1),[p,h]=Object(r.useState)((()=>function(e){return e.length>0?e:[""]}(e))),[f,m]=Object(r.useState)(p);Object(r.useEffect)((()=>{f!==p&&(m(p),""===p[p.length-1]?t(p.slice(0,p.length-1)):t(p))}),[t,f,p]);const g=Object(r.useCallback)((e=>{h([...p.slice(0,e),...p.slice(e+1)])}),[p]),E=Object(r.useCallback)(((e,t)=>{const n=[...p];n[e]=t,h(n)}),[p]),y=Object(r.useCallback)((()=>{d(!0),h([...p,""])}),[p]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.EuiFlexGroup,{gutterSize:"s",direction:"column"},p.map(((e,t)=>a.a.createElement(l.EuiFlexItem,{key:t},a.a.createElement(x,{index:t,onChange:E,onDelete:g,onBlur:n,value:e,autoFocus:c,isDisabled:o,showDeleteButton:p.length>1}))))),a.a.createElement(l.EuiSpacer,{size:"m"}),a.a.createElement(l.EuiButtonEmpty,{disabled:o,size:"xs",flush:"left",iconType:"plusInCircle",onClick:y},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.multiTextInput.addRow",defaultMessage:"Add row"})))},v=o.a.div.withConfig({displayName:"FixedHeightDiv",componentId:"sc-5eef6j-0"})(["height:300px;"]),b=Object(r.memo)((({varDef:e,value:t,onChange:n,errors:s,forceShowErrors:o,frozen:u})=>{const[c,d]=Object(r.useState)(!1),{multi:p,required:f,type:m,title:x,name:b,description:k}=e,D=(c||o)&&!!s,S=D?s:null,C=x||b,A=Object(r.useMemo)((()=>{if(p)return a.a.createElement(y,{value:null!=t?t:[],onChange:n,onBlur:()=>d(!0),isDisabled:u});switch(m){case"yaml":return u?a.a.createElement(l.EuiCodeBlock,{language:"yaml",isCopyable:!1,paddingSize:"s"},a.a.createElement("pre",null,t)):a.a.createElement(v,null,a.a.createElement(E.CodeEditor,{languageId:"yaml",width:"100%",height:"300px",value:t,onChange:n,options:{minimap:{enabled:!1},ariaLabel:h.i18n.translate("xpack.fleet.packagePolicyField.yamlCodeEditor",{defaultMessage:"YAML Code Editor"}),scrollBeyondLastLine:!1,wordWrap:"off",wrappingIndent:"indent",tabSize:2,lineNumbers:"off",lineNumbersMinChars:0,glyphMargin:!1,folding:!1,lineDecorationsWidth:0,overviewRulerBorder:!1}}));case"bool":return a.a.createElement(l.EuiSwitch,{label:C,checked:t,showLabel:!1,onChange:e=>n(e.target.checked),onBlur:()=>d(!0),disabled:u});case"password":return a.a.createElement(l.EuiFieldPassword,{type:"dual",isInvalid:D,value:void 0===t?"":t,onChange:e=>n(e.target.value),onBlur:()=>d(!0),disabled:u});default:return a.a.createElement(l.EuiFieldText,{isInvalid:D,value:void 0===t?"":t,onChange:e=>n(e.target.value),onBlur:()=>d(!0),disabled:u})}}),[D,p,n,m,t,C,u]),F=Object(r.useMemo)((()=>"bool"!==m&&!f),[f,m]);return a.a.createElement(l.EuiFormRow,{isInvalid:D,error:S,label:C,labelAppend:F?a.a.createElement(l.EuiText,{size:"xs",color:"subdued"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})):null,helpText:a.a.createElement(g.a,{source:k})},A)})),k=o()(l.EuiFlexItem).withConfig({displayName:"FlexItemWithMaxWidth",componentId:"sc-2lf3ki-0"})(["max-width:calc(50% - ",");"],(e=>e.theme.eui.euiSizeL)),D=Object(r.memo)((({hasInputStreams:e,packageInputVars:t,packagePolicyInput:n,updatePackagePolicyInput:s,inputVarsValidationResults:o,forceShowErrors:u})=>{const[c,d]=Object(r.useState)(!1),p=u&&Object(f.f)(o),h=[],m=[];t&&t.forEach((e=>{Object(f.c)(e)?m.push(e):h.push(e)}));const g=Object(r.useMemo)((()=>m.filter((({name:e})=>{var t,n;return null===(t=o.vars)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.length})).length),[m,o.vars]);return a.a.createElement(l.EuiFlexGrid,{columns:2},a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart"},a.a.createElement(l.EuiFlexItem,{grow:1}),a.a.createElement(l.EuiFlexItem,{grow:5},a.a.createElement(l.EuiText,null,a.a.createElement("h4",null,a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputSettingsTitle",defaultMessage:"Settings"}))),e?a.a.createElement(a.a.Fragment,null,a.a.createElement(l.EuiSpacer,{size:"s"}),a.a.createElement(l.EuiText,{color:"subdued",size:"s"},a.a.createElement("p",null,a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputSettingsDescription",defaultMessage:"The following settings are applicable to all inputs below."})))):null))),a.a.createElement(k,null,a.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"m"},h.map((e=>{const{name:t,type:r}=e,{value:i,frozen:c}=n.vars[t];return a.a.createElement(l.EuiFlexItem,{key:t},a.a.createElement(b,{varDef:e,value:i,frozen:c,onChange:e=>{s({vars:{...n.vars,[t]:{type:r,value:e}}})},errors:o.vars[t],forceShowErrors:u}))})),m.length?a.a.createElement(r.Fragment,null,a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiButtonEmpty,{size:"xs",iconType:c?"arrowDown":"arrowRight",onClick:()=>d(!c),flush:"left"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.toggleAdvancedOptionsButtonText",defaultMessage:"Advanced options"}))),!c&&p&&g?a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiText,{color:"danger",size:"s"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:g}}))):null)),c?m.map((e=>{var t,r;const{name:i,type:c}=e,d=null===(t=n.vars)||void 0===t||null===(r=t[i])||void 0===r?void 0:r.value;return a.a.createElement(l.EuiFlexItem,{key:i},a.a.createElement(b,{varDef:e,value:d,onChange:e=>{s({vars:{...n.vars,[i]:{type:c,value:e}}})},errors:o.vars[i],forceShowErrors:u}))})):null):null)))})),S=o()(l.EuiFlexItem).withConfig({displayName:"FlexItemWithMaxWidth",componentId:"sc-d6l6ns-0"})(["max-width:calc(50% - ",");"],(e=>e.theme.eui.euiSizeL)),C=Object(r.memo)((({packageInputStream:e,packagePolicyInputStream:t,updatePackagePolicyInputStream:n,inputStreamValidationResults:s,forceShowErrors:o})=>{const[u,c]=Object(r.useState)(),d=o&&Object(f.f)(s),p=[],h=[];e.vars&&e.vars.length&&e.vars.forEach((e=>{Object(f.c)(e)?h.push(e):p.push(e)}));const m=Object(r.useMemo)((()=>h.filter((({name:e})=>{var t,n;return null==s||null===(t=s.vars)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.length})).length),[h,null==s?void 0:s.vars]);return a.a.createElement(l.EuiFlexGrid,{columns:2},a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart"},a.a.createElement(l.EuiFlexItem,{grow:1}),a.a.createElement(l.EuiFlexItem,{grow:5},a.a.createElement(l.EuiSwitch,{label:e.title,disabled:t.keep_enabled,checked:t.enabled,onChange:e=>{const t=e.target.checked;n({enabled:t})}}),e.description?a.a.createElement(r.Fragment,null,a.a.createElement(l.EuiSpacer,{size:"s"}),a.a.createElement(l.EuiText,{size:"s",color:"subdued"},a.a.createElement(g.a,{source:e.description}))):null))),a.a.createElement(S,null,a.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"m"},p.map((e=>{var r,i;const{name:u,type:c}=e,d=null===(r=t.vars)||void 0===r?void 0:r[u],p=null==d?void 0:d.value,h=null!==(i=null==d?void 0:d.frozen)&&void 0!==i&&i;return a.a.createElement(l.EuiFlexItem,{key:u},a.a.createElement(b,{varDef:e,value:p,frozen:h,onChange:e=>{n({vars:{...t.vars,[u]:{type:c,value:e}}})},errors:null==s?void 0:s.vars[u],forceShowErrors:o}))})),h.length?a.a.createElement(r.Fragment,null,a.a.createElement(l.EuiFlexItem,null,a.a.createElement(l.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiButtonEmpty,{size:"xs",iconType:u?"arrowDown":"arrowRight",onClick:()=>c(!u),flush:"left"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.toggleAdvancedOptionsButtonText",defaultMessage:"Advanced options"}))),!u&&d&&m?a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiText,{color:"danger",size:"s"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:m}}))):null)),u?h.map((e=>{var r,i;const{name:u,type:c}=e,d=null===(r=t.vars)||void 0===r||null===(i=r[u])||void 0===i?void 0:i.value;return a.a.createElement(l.EuiFlexItem,{key:u},a.a.createElement(b,{varDef:e,value:d,onChange:e=>{n({vars:{...t.vars,[u]:{type:c,value:e}}})},errors:null==s?void 0:s.vars[u],forceShowErrors:o}))})):null):null)))})),A=o()(l.EuiHorizontalRule).withConfig({displayName:"ShortenedHorizontalRule",componentId:"sc-3olfkf-0"})(["&&&{width:","%;margin-left:auto;}"],11/12*100),F=Object(r.memo)((({packageInput:e,packageInputStreams:t,packagePolicyInput:n,updatePackagePolicyInput:s,inputValidationResults:o,forceShowErrors:u})=>{const[c,d]=Object(r.useState)(((e,t,n)=>n.enabled&&(Object(f.b)(e.vars,n.vars)||Boolean(t.find((e=>{var t;return e.enabled&&Object(f.b)(e.vars,null===(t=n.streams.find((t=>e.data_stream.dataset===t.data_stream.dataset)))||void 0===t?void 0:t.vars)})))))(e,t,n)),p=o?Object(f.a)(o):0,m=u&&p,g=Object(r.useMemo)((()=>t.length>0),[t.length]),E=Object(r.useMemo)((()=>t.map((e=>({packageInputStream:e,packagePolicyInputStream:n.streams.find((t=>t.data_stream.dataset===e.data_stream.dataset))}))).filter((e=>Boolean(e.packagePolicyInputStream)))),[t,n.streams]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiSwitch,{label:a.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiText,null,a.a.createElement("h4",null,e.title||e.type)))),checked:n.enabled,disabled:n.keep_enabled,onChange:e=>{const t=e.target.checked;s({enabled:t,streams:n.streams.map((e=>({...e,enabled:t})))}),!t&&c&&d(!1)}})),a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},m?a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiText,{color:"danger",size:"s"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:p}}))):null,a.a.createElement(l.EuiFlexItem,{grow:!1},a.a.createElement(l.EuiButtonIcon,{iconType:c?"arrowUp":"arrowDown",onClick:()=>d(!c),color:m?"danger":"text","aria-label":c?h.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.hideStreamsAriaLabel",{defaultMessage:"Hide {type} inputs",values:{type:e.type}}):h.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.showStreamsAriaLabel",{defaultMessage:"Show {type} inputs",values:{type:e.type}})}))))),c?a.a.createElement(l.EuiSpacer,{size:"l"}):null,c&&e.vars&&e.vars.length?a.a.createElement(r.Fragment,null,a.a.createElement(D,{hasInputStreams:g,packageInputVars:e.vars,packagePolicyInput:n,updatePackagePolicyInput:s,inputVarsValidationResults:{vars:null==o?void 0:o.vars},forceShowErrors:u}),g?a.a.createElement(A,{margin:"m"}):a.a.createElement(l.EuiSpacer,{size:"l"})):null,c?a.a.createElement(l.EuiFlexGroup,{direction:"column"},E.map((({packageInputStream:e,packagePolicyInputStream:t},r)=>a.a.createElement(l.EuiFlexItem,{key:r},a.a.createElement(C,{packageInputStream:e,packagePolicyInputStream:t,updatePackagePolicyInputStream:t=>{const r=n.streams.findIndex((t=>t.data_stream.dataset===e.data_stream.dataset)),a=[...n.streams];a[r]={...a[r],...t};const i={streams:a};!n.enabled&&t.enabled?i.enabled=!0:n.enabled&&!a.find((e=>e.enabled))&&(i.enabled=!1),s(i)},inputStreamValidationResults:null==o?void 0:o.streams[t.data_stream.dataset],forceShowErrors:u}),r!==E.length-1?a.a.createElement(a.a.Fragment,null,a.a.createElement(l.EuiSpacer,{size:"m"}),a.a.createElement(A,{margin:"none"})):null)))):null)})),w=({onConfirm:e,onCancel:t,packageInfo:n,agentPolicy:r})=>{return a.a.createElement(l.EuiConfirmModal,{title:a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModal",defaultMessage:"{packageName} integration added",values:{packageName:(s=n.title,s.charAt(0).toUpperCase()+s.substr(1))}}),onCancel:t,onConfirm:e,cancelButtonText:a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModalCancelButtonLabel",defaultMessage:"Add Elastic Agent later"}),confirmButtonText:a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModalConfirmButtonLabel",defaultMessage:"Add Elastic Agent to your hosts"}),buttonColor:"primary","data-test-subj":"postInstallAddAgentModal"},a.a.createElement(i.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModalDescription",defaultMessage:"To complete this integration, add {elasticAgent} to your hosts to collect data and send it to Elastic Stack",values:{elasticAgent:a.a.createElement("strong",null,"Elastic Agent")}}));var s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(145);Object.defineProperty(t,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return r.AllSubstringsIndexStrategy}});var a=n(146);Object.defineProperty(t,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return a.ExactWordIndexStrategy}});var i=n(147);Object.defineProperty(t,"PrefixIndexStrategy",{enumerable:!0,get:function(){return i.PrefixIndexStrategy}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(148);Object.defineProperty(t,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return r.CaseSensitiveSanitizer}});var a=n(149);Object.defineProperty(t,"LowerCaseSanitizer",{enumerable:!0,get:function(){return a.LowerCaseSanitizer}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n(86),a=n.n(r),i=n(0),s=n.n(i),o=n(6),l=n(10);const u=({packageName:e,integrationName:t,version:n,icons:r,tryApi:i,...u})=>{const c=Object(l.yb)({packageName:e,integrationName:t,version:n,icons:r,tryApi:i});return s.a.createElement(o.EuiIcon,a()({size:"s",type:c},u,{loading:"lazy"}))},c=e=>{const{icons:t}=e;return t&&1===t.length&&"eui"===t[0].type?s.a.createElement(o.EuiIcon,a()({size:"xl",type:t[0].src},e)):t&&1===t.length&&"svg"===t[0].type?s.a.createElement(o.EuiIcon,a()({size:"xl",type:t[0].src},e,{loading:"lazy"})):s.a.createElement(u,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(142),s=n(72),o=n(80),l=n(83);const u=[`${l.c}.actions`,"_id","_index"],c=({value:e,fieldPrefix:t,onChange:n,placeholder:c,indexPattern:d=l.h})=>{const{data:p}=Object(o.jb)(),[h,f]=Object(r.useState)(),m=Object(r.useMemo)((()=>{if(!e||""===e)return!0;try{return Object(i.a)(e),!0}catch(e){return!1}}),[e]);return Object(r.useEffect)((()=>{(async()=>{try{const e=(await p.indexPatterns.getFieldsForWildcard({pattern:d})||[]).filter((e=>{if(!t||e.name.startsWith(t)){for(const t of u)if(e.name.startsWith(t))return!1;return!0}}));f(e)}catch(e){f(void 0)}})()}),[p.indexPatterns,t,d]),a.a.createElement(s.QueryStringInput,{iconType:"search",disableLanguageSwitcher:!0,indexPatterns:h?[{title:d,fields:h}]:[],query:{query:e,language:"kuery"},isInvalid:!m,disableAutoFocus:!0,placeholder:c,onChange:e=>{n(e.query)},onSubmit:e=>{n(e.query,!0)},submitOnBlur:!0,isClearable:!0,autoSubmit:!0})}},function(e,t,n){e.exports=n(29)(2402)},function(e,t,n){"use strict";var r=n(95);e.exports=new r({explicit:[n(171),n(172),n(173)]})},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=n(91),i=n(189),s=n(203),o=n(259),l=n(260),u=n(262),c=n(263),d=n(264),p=n(266),h=n(267),f=n(268),m=n(269),g=n(270),E=Object.keys(m),x=function(e){var t=e.source||e.children||"",n=e.parserOptions;if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var r=a(m,e.renderers),o=[[s,n]].concat(e.plugins||[]).reduce(y,i()),f=o.parse(t),x=a(e,{renderers:r,definitions:h(f)}),v=function(e){var t=[p,l()],n=e.disallowedTypes;e.allowedTypes&&(n=E.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(c.ofType(n,r));e.allowNode&&t.push(c.ifNotMatch(e.allowNode,r));var a=!e.escapeHtml&&!e.skipHtml,i=(e.astPlugins||[]).some((function(e){return(Array.isArray(e)?e[0]:e).identity===g.HtmlParser}));a&&!i&&t.push(u);return e.astPlugins?t.concat(e.astPlugins):t}(e),b=o.runSync(f),k=v.reduce((function(e,t){return t(e,x)}),b);return d(k,x)};function y(e,t){return Array.isArray(t)?e.use.apply(e,r(t)):e.use(t)}x.defaultProps={renderers:{},escapeHtml:!0,skipHtml:!1,sourcePos:!1,rawSourcePos:!1,transformLinkUri:f,astPlugins:[],plugins:[],parserOptions:{}},x.propTypes={className:o.string,source:o.string,children:o.string,sourcePos:o.bool,rawSourcePos:o.bool,escapeHtml:o.bool,skipHtml:o.bool,allowNode:o.func,allowedTypes:o.arrayOf(o.oneOf(E)),disallowedTypes:o.arrayOf(o.oneOf(E)),transformLinkUri:o.oneOfType([o.func,o.bool]),linkTarget:o.oneOfType([o.func,o.string]),transformImageUri:o.func,astPlugins:o.arrayOf(o.func),unwrapDisallowed:o.bool,renderers:o.object,plugins:o.array,parserOptions:o.object},x.types=E,x.renderers=m,x.uriTransformer=f,e.exports=x},function(e,t,n){"use strict";var r=n(210),a=n(211),i=n(117),s=n(212),o=n(213),l=n(214);e.exports=function(e,t){var n,i,s={};t||(t={});for(i in p)n=t[i],s[i]=null==n?p[i]:n;(s.position.indent||s.position.start)&&(s.indent=s.position.indent||[],s.position=s.position.start);return function(e,t){var n,i,s,p,w,M,T,I,P,O,B,j,N,L,_,z,U,R,H,X=t.additional,J=t.nonTerminated,K=t.text,G=t.reference,W=t.warning,q=t.textContext,V=t.referenceContext,$=t.warningContext,Y=t.position,Q=t.indent||[],Z=e.length,ee=0,te=-1,ne=Y.column||1,re=Y.line||1,ae="",ie=[];z=se(),I=W?oe:d,ee--,Z++;for(;++ee<Z;)if("\n"===w&&(ne=Q[te]||1),"&"!==(w=le(ee)))"\n"===w&&(re++,te++,ne=0),w?(ae+=w,ne++):ue();else{if("\t"===(T=le(ee+1))||"\n"===T||"\f"===T||" "===T||"<"===T||"&"===T||""===T||X&&T===X){ae+=w,ne++;continue}for(j=N=ee+1,H=N,"#"!==T?L=h:"x"===(T=le(H=++j))||"X"===T?(L=f,H=++j):L=m,n="",B="",p="",_=E[L],H--;++H<Z&&_(T=le(H));)p+=T,L===h&&u.call(r,p)&&(n=p,B=r[p]);(s=";"===le(H))&&(H++,(i=L===h&&l(p))&&(n=p,B=i)),R=1+H-N,(s||J)&&(p?L===h?(s&&!B?I(k,1):(n!==p&&(R=1+(H=j+n.length)-j,s=!1),s||(P=n?x:v,t.attribute?"="===(T=le(H))?(I(P,R),B=null):o(T)?B=null:I(P,R):I(P,R))),M=B):(s||I(y,R),A(M=parseInt(p,g[L]))?(I(S,R),M="�"):M in a?(I(D,R),M=a[M]):(O="",F(M)&&I(D,R),M>65535&&(O+=c((M-=65536)>>>10|55296),M=56320|1023&M),M=O+c(M))):L!==h&&I(b,R)),M?(ue(),z=se(),ee=H-1,ne+=H-N+1,ie.push(M),(U=se()).offset++,G&&G.call(V,M,{start:z,end:U},e.slice(N-1,H)),z=U):(p=e.slice(N-1,H),ae+=p,ne+=p.length,ee=H-1)}return ie.join("");function se(){return{line:re,column:ne,offset:ee+(Y.offset||0)}}function oe(e,t){var n=se();n.column+=t,n.offset+=t,W.call($,C[e],n,e)}function le(t){return e.charAt(t)}function ue(){ae&&(ie.push(ae),K&&K.call(q,ae,{start:z,end:se()}),ae="")}}(e,s)};var u={}.hasOwnProperty,c=String.fromCharCode,d=Function.prototype,p={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},h="named",f="hexadecimal",m="decimal",g={};g[f]=16,g[m]=10;var E={};E[h]=o,E[m]=i,E[f]=s;var x=1,y=2,v=3,b=4,k=5,D=6,S=7,C={};function A(e){return e>=55296&&e<=57343||e>1114111}function F(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)}C[x]="Named character references must be terminated by a semicolon",C[y]="Numeric character references must be terminated by a semicolon",C[v]="Named character references cannot be empty",C[b]="Numeric character references cannot be empty",C[k]="Named character references must be known",C[D]="Numeric character references cannot be disallowed",C[S]="Numeric character references cannot be outside the permissible Unicode range"},function(e,t,n){e.exports=n(29)(403)},function(e,t,n){e.exports=n(29)(917)},function(e,t,n){e.exports=n(29)(1349)},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var a,i,s,o,l,u,c=["pedantic","commonmark"],d=c.length,p=e.length,h=-1;for(;++h<p;){for(i=(a=e[h])[1]||{},s=a[0],o=-1,u=!1;++o<d;)if(void 0!==i[l=c[o]]&&i[l]!==n.options[l]){u=!0;break}if(!u&&t[s].apply(n,r))return!0}return!1}},function(e,t,n){"use strict";var r=n(234);e.exports=function(e){return r(e).toLowerCase()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return E}));var r=n(0),a=n.n(r),i=n(4),s=n(68),o=n(6),l=n(90),u=n(80);const c=({isMissing:e,children:t})=>a.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"flexStart"},a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiText,null,e?a.a.createElement(o.EuiIcon,{type:"crossInACircleFilled",color:"danger"}):a.a.createElement(o.EuiIcon,{type:"checkInCircleFilled",color:"success"}))),a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiText,null,t))),d=({missingRequirements:e})=>{const{docLinks:t}=Object(u.jb)();return a.a.createElement(l.d,null,a.a.createElement(o.EuiPageBody,{restrictWidth:820},a.a.createElement(o.EuiPageContent,{hasBorder:!0,hasShadow:!1},a.a.createElement(o.EuiCallOut,{title:i.i18n.translate("xpack.fleet.setupPage.missingRequirementsCalloutTitle",{defaultMessage:"Missing security requirements"}),color:"warning",iconType:"alert"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.missingRequirementsCalloutDescription",defaultMessage:"To use central management for Elastic Agents, enable the following Elasticsearch security features."})),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.missingRequirementsElasticsearchTitle",defaultMessage:"In your Elasticsearch configuration ({esConfigFile}), enable:",values:{esConfigFile:a.a.createElement(o.EuiCode,null,"elasticsearch.yml")}}),a.a.createElement(o.EuiSpacer,{size:"l"}),a.a.createElement(c,{isMissing:e.includes("security_required")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchSecurityFlagText",defaultMessage:"{esSecurityLink}. Set {securityFlag} to {true} .",values:{esSecurityLink:a.a.createElement(o.EuiLink,{href:t.links.security.elasticsearchEnableSecurity,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchSecurityLink",defaultMessage:"Elasticsearch security"})),securityFlag:a.a.createElement(o.EuiCode,null,"xpack.security.enabled"),true:a.a.createElement(o.EuiCode,null,"true")}})),a.a.createElement(o.EuiSpacer,{size:"s"}),a.a.createElement(c,{isMissing:e.includes("api_keys")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchApiKeyFlagText",defaultMessage:"{apiKeyLink}. Set {apiKeyFlag} to {true} .",values:{apiKeyFlag:a.a.createElement(o.EuiCode,null,"xpack.security.authc.api_key.enabled"),true:a.a.createElement(o.EuiCode,null,"true"),apiKeyLink:a.a.createElement(o.EuiLink,{href:t.links.security.apiKeyServiceSettings,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.apiKeyServiceLink",defaultMessage:"API key service"}))}})),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiCodeBlock,{isCopyable:!0},"xpack.security.enabled: true\nxpack.security.authc.api_key.enabled: true"),a.a.createElement(o.EuiSpacer,{size:"l"}),a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.gettingStartedText",defaultMessage:"For more information, read our {link} guide.",values:{link:a.a.createElement(o.EuiLink,{href:t.links.fleet.guide,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.gettingStartedLink",defaultMessage:"Getting Started"}))}}))))};var p=n(69),h=n.n(p),f=n(143);const m=h()(o.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-1urw201-0"})(["min-width:0px;max-width:100%;"]),g=h()(o.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1urw201-1"})(["height:100%;margin:0 auto;"]),E=()=>{var e;const t=null===(e=Object(u.jb)().cloud)||void 0===e?void 0:e.deploymentUrl;return a.a.createElement(a.a.Fragment,null,a.a.createElement(g,{gutterSize:"l",justifyContent:"center",alignItems:"center",direction:"column"},a.a.createElement(m,{grow:!1},t?a.a.createElement(f.a,{deploymentUrl:t}):a.a.createElement(f.c,null))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return A}));var r=n(86),a=n.n(r),i=n(0),s=n.n(i),o=n(8),l=n(4),u=n(68),c=n(93),d=n(6),p=n(69),h=n.n(p),f=n(80),m=n(82),g=n(81),E=n(97),x=n(108),y=n(98),v=n(137),b=n(138),k=n(85),D=n(280),S=n.n(D);const C=Object(i.memo)((()=>{var e,t,n,r;const{params:{packagePolicyId:a}}=Object(o.useRouteMatch)(),i=Object(m.r)(a),l=Object(f.kb)(null!==(e=null===(t=i.data)||void 0===t||null===(n=t.item)||void 0===n||null===(r=n.package)||void 0===r?void 0:r.name)&&void 0!==e?e:"","package-policy-edit");return s.a.createElement(A,{packagePolicyId:a,forceUpgrade:null==l?void 0:l.useLatestPackageVersion})})),A=Object(i.memo)((({packagePolicyId:e,forceUpgrade:t=!1,from:n="edit"})=>{var r,o,p,h,m;const{application:D,notifications:C}=Object(f.jb)(),{agents:{enabled:A}}=Object(f.N)(),{getHref:w}=Object(f.db)(),[M,T]=Object(i.useState)(!0),[P,O]=Object(i.useState)(),[B,j]=Object(i.useState)(),[N,L]=Object(i.useState)(),[_,z]=Object(i.useState)({name:"",description:"",namespace:"",policy_id:"",enabled:!0,output_id:"",inputs:[],version:""}),[U,R]=Object(i.useState)(),[H,X]=Object(i.useState)(),[J,K]=Object(i.useState)(!1);Object(i.useEffect)((()=>{t&&K(!0)}),[t]);const G=null!==(r=null==B?void 0:B.id)&&void 0!==r?r:"";Object(i.useEffect)((()=>{(async()=>{T(!0),O(void 0);try{var t,n;const{data:l,error:u}=await Object(f.u)(e);if(u)throw u;const{data:d,error:p}=await Object(f.s)(l.item.policy_id);if(p)throw p;null!=d&&d.item&&j(d.item);const{data:h,error:m}=await Object(f.J)([e]);if(m)throw m;const g=!!h&&function(e){var t,n,r,a;return e&&e[0].diff&&S()(null!==(t=null===(n=e[0].diff[1].package)||void 0===n?void 0:n.version)&&void 0!==t?t:"",null!==(r=null===(a=e[0].diff[0].package)||void 0===a?void 0:a.version)&&void 0!==r?r:"")}(h);g||K(!1),h&&g&&X(h);const E=null==l?void 0:l.item;let x=null==E?void 0:E.inputs,v=null==E?void 0:E.package;const b=null==h||null===(t=h[0])||void 0===t||null===(n=t.diff)||void 0===n?void 0:n[1];if(J&&b&&(x=b.inputs,v=b.package),E){R(E);const{id:e,revision:t,inputs:n,created_by:l,created_at:u,updated_by:d,updated_at:p,...m}=E,g={...m,inputs:x.map((e=>{var t;const{streams:n,compiled_input:r,vars:a,...i}=e;let s=J&&(null===(t=E.inputs.find((t=>t.type===e.type&&t.policy_template===e.policy_template)))||void 0===t?void 0:t.vars),o=a;return s&&a&&(s=Object.keys(a).reduce(((e,t)=>({...e,[t]:s[t]})),{}),o={...a,...s}),{...i,streams:n.map((e=>{const{compiled_stream:t,...n}=e;return n})),vars:o}})),package:v};if(z(g),E.package){var r,a,i;let e=E.package;var s,o;if(J&&null!=h&&null!==(r=h[0])&&void 0!==r&&null!==(a=r.diff)&&void 0!==a&&null!==(i=a[1])&&void 0!==i&&i.package)e=null===(s=h[0].diff)||void 0===s||null===(o=s[1])||void 0===o?void 0:o.package;const{data:t}=await Object(f.v)(Object(k.m)(e));if(null!=t&&t.response){L(t.response);const e=Object(y.d)(g,t.response,c.safeLoad);$(e),Object(y.f)(e)?se("INVALID"):se("VALID")}}}}catch(e){O(e)}T(!1)})()}),[G,e,J]);const[W,q]=Object(i.useState)(0);Object(i.useEffect)((()=>{A&&G&&(async()=>{const{data:e}=await Object(f.o)({policyId:G});null!=e&&e.results.total&&q(e.results.total)})()}),[G,A]);const[V,$]=Object(i.useState)(),Y=!!V&&Object(y.f)(V),Q=Object(i.useCallback)((e=>{if(N){const t=Object(y.d)(e||_,N,c.safeLoad);return $(t),console.debug("Package policy validation results",t),t}}),[_,N]),Z=Object(i.useCallback)((e=>{ae(!0);const t={..._,...e};z(t),console.debug("Package policy updated",t);const n=Q(t),r=!!n&&Object(y.f)(n);se(r?"INVALID":"VALID")}),[_,Q]),ee=Object(i.useCallback)((({isValid:e,updatedPolicy:t})=>{Z(t),se((t=>"VALID"!==t||e?t:"INVALID"))}),[Z]),te=Object(i.useMemo)((()=>N&&G?"package-edit"===n?w("integration_details_policies",{pkgkey:Object(k.m)(N)}):w("policy_details",{policyId:G}):"/"),[n,w,N,G]),ne=Object(i.useMemo)((()=>N&&G?"package-edit"===n||"upgrade-from-integrations-policy-list"===n?w("integration_details_policies",{pkgkey:Object(k.m)(N)}):w("policy_details",{policyId:G}):"/"),[n,w,N,G]),[re,ae]=Object(i.useState)(!1),[ie,se]=Object(i.useState)("INVALID"),oe=async()=>{if("VALID"===ie&&Y)return void se("INVALID");if(0!==W&&"CONFIRM"!==ie)return void se("CONFIRM");const{error:t}=await(async()=>{se("LOADING");const{elasticsearch:t,...n}=_,r=await Object(f.I)(e,n);return se("SUBMITTED"),r})();t?(409===t.statusCode?C.toasts.addError(t,{title:l.i18n.translate("xpack.fleet.editPackagePolicy.failedNotificationTitle",{defaultMessage:"Error updating '{packagePolicyName}'",values:{packagePolicyName:_.name}}),toastMessage:l.i18n.translate("xpack.fleet.editPackagePolicy.failedConflictNotificationMessage",{defaultMessage:"Data is out of date. Refresh the page to get the latest policy."})}):C.toasts.addError(t,{title:l.i18n.translate("xpack.fleet.editPackagePolicy.failedNotificationTitle",{defaultMessage:"Error updating '{packagePolicyName}'",values:{packagePolicyName:_.name}})}),se("VALID")):(D.navigateToUrl(ne),C.toasts.addSuccess({title:l.i18n.translate("xpack.fleet.editPackagePolicy.updatedNotificationTitle",{defaultMessage:"Successfully updated '{packagePolicyName}'",values:{packagePolicyName:_.name}}),"data-test-subj":"policyUpdateSuccessToast",text:W&&B?l.i18n.translate("xpack.fleet.editPackagePolicy.updatedNotificationMessage",{defaultMessage:"Fleet will deploy updates to all agents that use the '{agentPolicyName}' policy",values:{agentPolicyName:B.name}}):void 0}))},le=Object(f.kb)(null!==(o=null===(p=_.package)||void 0===p?void 0:p.name)&&void 0!==o?o:"","package-policy-edit"),ue=Object(f.kb)(null!==(h=null===(m=_.package)||void 0===m?void 0:m.name)&&void 0!==h?h:"","package-policy-edit-tabs"),ce=null==ue?void 0:ue.tabs,[de,pe]=Object(i.useState)(0),he={from:null!=le&&le.useLatestPackageVersion&&J?"upgrade-from-extension":n,cancelUrl:te,agentPolicy:B,packageInfo:N,tabs:null!=ce&&ce.length?[{title:l.i18n.translate("xpack.fleet.editPackagePolicy.settingsTabName",{defaultMessage:"Settings"}),isSelected:0===de,onClick:()=>{pe(0)}},...ce.map((({title:e},t)=>({title:e,isSelected:de===t+1,onClick:()=>{pe(t+1)}})))]:[]},fe=Object(i.useMemo)((()=>{var e;return B&&N?s.a.createElement(s.a.Fragment,null,0===de&&s.a.createElement(b.a,{agentPolicy:B,packageInfo:N,packagePolicy:_,updatePackagePolicy:Z,validationResults:V,submitAttempted:"INVALID"===ie,isUpdate:!0}),!le&&0===de&&s.a.createElement(v.a,{packageInfo:N,packagePolicy:_,updatePackagePolicy:Z,validationResults:V,submitAttempted:"INVALID"===ie}),le&&_.policy_id&&(null===(e=_.package)||void 0===e?void 0:e.name)&&U&&s.a.createElement(g.h,null,de>0&&ce?s.a.createElement(ce[de-1].Component,{policy:U,newPolicy:_,onChange:ee}):s.a.createElement(le.Component,{policy:U,newPolicy:_,onChange:ee}))):null}),[B,N,_,Z,V,ie,U,le,ee,de,ce]);return s.a.createElement(x.a,a()({},he,{"data-test-subj":"editPackagePolicy"}),s.a.createElement(d.EuiErrorBoundary,null,M?s.a.createElement(g.k,null):!P&&B&&N?s.a.createElement(s.a.Fragment,null,s.a.createElement(F,{agentPolicyName:B.name,from:n,packagePolicyName:_.name,pkgkey:Object(k.m)(N),pkgTitle:N.title,policyId:G}),"CONFIRM"===ie&&s.a.createElement(E.c,{agentCount:W,agentPolicy:B,onConfirm:oe,onCancel:()=>se("VALID")}),J&&H&&s.a.createElement(s.a.Fragment,null,s.a.createElement(I,{dryRunData:H}),s.a.createElement(d.EuiSpacer,{size:"xxl"})),fe,s.a.createElement(d.EuiSpacer,{size:"xxl"}),s.a.createElement(d.EuiSpacer,{size:"xxl"}),s.a.createElement(d.EuiBottomBar,null,s.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(d.EuiFlexItem,{grow:!1},B&&N&&"INVALID"===ie?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.errorOnSaveText",defaultMessage:"Your integration policy has errors. Please fix them before saving."}):null),s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(d.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd"},s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(d.EuiButtonEmpty,{color:"ghost",href:te},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.cancelButton",defaultMessage:"Cancel"}))),s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(d.EuiButton,{onClick:oe,isLoading:"LOADING"===ie,disabled:"VALID"!==ie||!re&&!J,iconType:"save",color:"primary",fill:!0,"data-test-subj":"saveIntegration"},J?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.upgradeButton",defaultMessage:"Upgrade integration"}):s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.saveButton",defaultMessage:"Save integration"})))))))):s.a.createElement(g.g,{title:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.errorLoadingDataTitle",defaultMessage:"Error loading data"}),error:P||l.i18n.translate("xpack.fleet.editPackagePolicy.errorLoadingDataMessage",{defaultMessage:"There was an error loading this integration information"})})))})),F=Object(i.memo)((({agentPolicyName:e,from:t,packagePolicyName:n,pkgkey:r,pkgTitle:a,policyId:i})=>{let o=s.a.createElement(M,{policyName:e,policyId:i});return"package"===t||"package-edit"===t||"upgrade-from-integrations-policy-list"===t?o=s.a.createElement(w,{pkgkey:r,pkgTitle:a,policyName:n}):"upgrade-from-fleet-policy-list"===t&&(o=s.a.createElement(T,{policyName:e,policyId:i})),o})),w=Object(i.memo)((({pkgTitle:e,policyName:t,pkgkey:n})=>(Object(m.m)("integration_policy_edit",{policyName:t,pkgTitle:e,pkgkey:n}),null))),M=({policyName:e,policyId:t})=>(Object(f.L)("edit_integration",{policyName:e,policyId:t}),null),T=({policyName:e,policyId:t})=>(Object(f.L)("upgrade_package_policy",{policyName:e,policyId:t}),null),I=({dryRunData:e})=>{var t,n,r,a,o;const[c,p]=Object(i.useState)(!1);if(!e)return null;const f=!e[0].hasErrors,[m,g]=e[0].diff||[],E=h()(d.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-1h7qg65-0"})([".euiFlyoutBody__overflowContent{padding:0;}"]);return s.a.createElement(s.a.Fragment,null,c&&m&&s.a.createElement(d.EuiPortal,null,s.a.createElement(d.EuiFlyout,{onClose:()=>p(!1),size:"l",maxWidth:640},s.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},s.a.createElement(d.EuiTitle,{size:"m"},s.a.createElement("h2",{id:"FleetPackagePolicyPreviousVersionFlyoutTitle"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.previousVersionFlyout.title",defaultMessage:"'{name}' integration policy",values:{name:null==m?void 0:m.name}})))),s.a.createElement(E,null,s.a.createElement(d.EuiCodeBlock,{isCopyable:!0,fontSize:"m",whiteSpace:"pre"},JSON.stringify((null===(t=e[0].agent_diff)||void 0===t?void 0:t[0])||[],null,2))))),f&&m?s.a.createElement(d.EuiCallOut,{title:l.i18n.translate("xpack.fleet.upgradePackagePolicy.statusCallOut.successTitle",{defaultMessage:"Ready to upgrade"}),color:"success",iconType:"checkInCircleFilled"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.successContent",defaultMessage:"This integration is ready to be upgraded from version {currentVersion} to {upgradeVersion}. Review the changes below and save to upgrade.",values:{currentVersion:null==m||null===(n=m.package)||void 0===n?void 0:n.version,upgradeVersion:null==g||null===(r=g.package)||void 0===r?void 0:r.version}})):s.a.createElement(d.EuiCallOut,{title:l.i18n.translate("xpack.fleet.upgradePackagePolicy.statusCallOut.errorTitle",{defaultMessage:"Review field conflicts"}),color:"warning",iconType:"alert"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.errorContent",defaultMessage:"This integration has conflicting fields from version {currentVersion} to {upgradeVersion} Review the configuration and save to perform the upgrade. You may reference your {previousConfigurationLink} for comparison.",values:{currentVersion:null==m||null===(a=m.package)||void 0===a?void 0:a.version,upgradeVersion:null==g||null===(o=g.package)||void 0===o?void 0:o.version,previousConfigurationLink:s.a.createElement(d.EuiLink,{onClick:()=>p(!0)},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.previousConfigurationLink",defaultMessage:"previous configuration"}))}})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(150);Object.defineProperty(t,"TfIdfSearchIndex",{enumerable:!0,get:function(){return r.TfIdfSearchIndex}});var a=n(151);Object.defineProperty(t,"UnorderedSearchIndex",{enumerable:!0,get:function(){return a.UnorderedSearchIndex}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=t||[];for(var n=e=e||{},r=0;r<t.length;r++)if(null==(n=n[t[r]]))return null;return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(152);Object.defineProperty(t,"SimpleTokenizer",{enumerable:!0,get:function(){return r.SimpleTokenizer}});var a=n(153);Object.defineProperty(t,"StemmingTokenizer",{enumerable:!0,get:function(){return a.StemmingTokenizer}});var i=n(154);Object.defineProperty(t,"StopWordsTokenizer",{enumerable:!0,get:function(){return i.StopWordsTokenizer}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.StopWordsMap={a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0};r.constructor=!1,r.hasOwnProperty=!1,r.isPrototypeOf=!1,r.propertyIsEnumerable=!1,r.toLocaleString=!1,r.toString=!1,r.valueOf=!1},function(e,t,n){e.exports=n(29)(495)},function(e,t,n){"use strict";function r(e,t,n,a){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,r.prototype),i.expected=t,i.found=n,i.location=a,i.name="SyntaxError",i}function a(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source+":"+i.line+":"+i.column;if(r){var o=this.location.end,l=a("",i.line.toString().length),u=r[i.line-1],c=i.line===o.line?o.column:u.length+1;t+="\n --\x3e "+s+"\n"+l+" |\n"+i.line+" | "+u+"\n"+l+" | "+a("",i.column-1)+a("",c-i.column,"^")}else t+="\n at "+s}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(s);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,a={},i=(t=void 0!==t?t:{}).grammarSource,s={start:it,Literal:xt},o=it,l="(",u=")",c=":",d="{",p="}",h="or",f="and",m="not",g='"',E="\\",x="*",y="\\t",v="\\r",b="\\n",k="u",D="<=",S=">=",C="<",A=">",F="@kuery-cursor@",w=/^[\\"]/,M=/^[^"]/,T=/^[\\():<>"*{}]/,I=/^[0-9a-f]/i,P=/^[ \t\r\n\xA0]/,O=Qe("(",!1),B=Qe(")",!1),j=Qe(":",!1),N=Qe("{",!1),L=Qe("}",!1),_=et("fieldName"),z=et("value"),U=et("OR"),R=Qe("or",!0),H=et("AND"),X=Qe("and",!0),J=et("NOT"),K=Qe("not",!0),G=et("literal"),W=Qe('"',!1),q=Qe("\\",!1),V=Ze(["\\",'"'],!1,!1),$=Ze(['"'],!0,!1),Y={type:"any"},Q=Qe("*",!1),Z=Qe("\\t",!1),ee=Qe("\\r",!1),te=Qe("\\n",!1),ne=Ze(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),re=Qe("u",!1),ae=Ze([["0","9"],["a","f"]],!1,!0),ie=Qe("<=",!1),se=Qe(">=",!1),oe=Qe("<",!1),le=Qe(">",!1),ue=et("whitespace"),ce=Ze([" ","\t","\r","\n"," "],!1,!1),de=Qe("@kuery-cursor@",!1),pe=function(e,t){return"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:null!==e?e:Ot.function.buildNode("is","*","*")},he=function(e,t){return t},fe=function(e,t){const n=[e,...t],r=Tt&&n.find((e=>"cursor"===e.type));return r||Bt("or",n)},me=function(e,t){const n=[e,...t],r=Tt&&n.find((e=>"cursor"===e.type));return r||Bt("and",n)},ge=function(e){return"cursor"===e.type?e:Bt("not",[e])},Ee=function(e,t){return"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:e},xe=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Bt("nested",[e,t])},ye=function(e,t,n){if("cursor"===n.type)return{...n,suggestionTypes:["conjunction"]};const r=Lt(t,n);return Bt("range",[e,r])},ve=function(e,t){return"cursor"===t.type?{...t,fieldName:e.value,suggestionTypes:["value","conjunction"]}:t(e)},be=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(jt(null))},ke=function(e,t){return"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:e},De=function(e,t){return t},Se=function(e,t){const n=[e,...t],r=Tt&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Bt("or",n.map((t=>t(e))))},Ce=function(e,t){const n=[e,...t],r=Tt&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Bt("and",n.map((t=>t(e))))},Ae=function(e){return"cursor"===e.type?{...list,suggestionTypes:["value"]}:t=>Bt("not",[e(t)])},Fe=function(e){if("cursor"===e.type)return e;const t=jt(!0);return n=>Bt("is",[n,e,t])},we=function(e){if("cursor"===e.type)return e;!Pt&&"wildcard"===e.type&&Ot.wildcard.hasLeadingWildcard(e)&&function(e,t){throw t=void 0!==t?t:nt(We,Ge),function(e,t){return new r(e,null,null,t)}(e,t)}("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const t=jt(!1);return n=>Bt("is",[n,e,t])},Me=function(){return Tt},Te=function(t,n,r){const{start:a,end:i}=nt(We,Ge);return{type:"cursor",start:a.offset,end:i.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(We,Ge).replace(n,"")}},Ie=function(e){return jt(e.join(""))},Pe=function(e){return e},Oe=function(e){const t=e.join("").trim();return"null"===t?jt(null):"true"===t?jt(!0):"false"===t?jt(!1):e.includes(_t)?Nt(t):jt(t)},Be=function(){return _t},je=function(){return"\t"},Ne=function(){return"\r"},Le=function(){return"\n"},_e=function(e){return e},ze=function(e){return e},Ue=function(e){return String.fromCharCode(parseInt(e,16))},Re=function(){return"lte"},He=function(){return"gte"},Xe=function(){return"lt"},Je=function(){return"gt"},Ke=function(){return It},Ge=0,We=0,qe=[{line:1,column:1}],Ve=0,$e=[],Ye=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=s[t.startRule]}function Qe(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ze(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function et(e){return{type:"other",description:e}}function tt(t){var n,r=qe[t];if(r)return r;for(n=t-1;!qe[n];)n--;for(r={line:(r=qe[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return qe[t]=r,r}function nt(e,t){var n=tt(e),r=tt(t);return{source:i,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function rt(e){Ge<Ve||(Ge>Ve&&(Ve=Ge,$e=[]),$e.push(e))}function at(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function it(){var e,t,n,r;for(e=Ge,t=[],n=wt();n!==a;)t.push(n),n=wt();return(n=st())===a&&(n=null),(r=Dt())!==a?(We=e,e=pe(n,r)):(Ge=e,e=a),e}function st(){var e,t,n,r,i;if(e=Ge,(t=ot())!==a){if(n=[],r=Ge,mt()!==a&&(i=ot())!==a?(We=r,r=he(t,i)):(Ge=r,r=a),r!==a)for(;r!==a;)n.push(r),r=Ge,mt()!==a&&(i=ot())!==a?(We=r,r=he(t,i)):(Ge=r,r=a);else n=a;n!==a?(We=e,e=fe(t,n)):(Ge=e,e=a)}else Ge=e,e=a;return e===a&&(e=ot()),e}function ot(){var e,t,n,r,i;if(e=Ge,(t=lt())!==a){if(n=[],r=Ge,gt()!==a&&(i=lt())!==a?(We=r,r=he(t,i)):(Ge=r,r=a),r!==a)for(;r!==a;)n.push(r),r=Ge,gt()!==a&&(i=lt())!==a?(We=r,r=he(t,i)):(Ge=r,r=a);else n=a;n!==a?(We=e,e=me(t,n)):(Ge=e,e=a)}else Ge=e,e=a;return e===a&&(e=lt()),e}function lt(){var e,t;return e=Ge,Et()!==a&&(t=ut())!==a?(We=e,e=ge(t)):(Ge=e,e=a),e===a&&(e=ut()),e}function ut(){var t,n,r,i,s,o;if(t=Ge,40===e.charCodeAt(Ge)?(n=l,Ge++):(n=a,0===Ye&&rt(O)),n!==a){for(r=[],i=wt();i!==a;)r.push(i),i=wt();(i=st())!==a&&(s=Dt())!==a?(41===e.charCodeAt(Ge)?(o=u,Ge++):(o=a,0===Ye&&rt(B)),o!==a?(We=t,t=Ee(i,s)):(Ge=t,t=a)):(Ge=t,t=a)}else Ge=t,t=a;return t===a&&(t=function(){var t,n,r,i,s,o,l,u,h,f;if(t=Ge,n=ct(),n!==a){for(r=[],i=wt();i!==a;)r.push(i),i=wt();if(58===e.charCodeAt(Ge)?(i=c,Ge++):(i=a,0===Ye&&rt(j)),i!==a){for(s=[],o=wt();o!==a;)s.push(o),o=wt();if(123===e.charCodeAt(Ge)?(o=d,Ge++):(o=a,0===Ye&&rt(N)),o!==a){for(l=[],u=wt();u!==a;)l.push(u),u=wt();(u=st())!==a&&(h=Dt())!==a?(125===e.charCodeAt(Ge)?(f=p,Ge++):(f=a,0===Ye&&rt(L)),f!==a?(We=t,t=xe(n,u,h)):(Ge=t,t=a)):(Ge=t,t=a)}else Ge=t,t=a}else Ge=t,t=a}else Ge=t,t=a;t===a&&(t=function(){var t;t=function(){var t,n,r,i,s,o;if(t=Ge,n=ct(),n!==a){for(r=[],i=wt();i!==a;)r.push(i),i=wt();if(i=function(){var t,n;t=Ge,e.substr(Ge,2)===D?(n=D,Ge+=2):(n=a,0===Ye&&rt(ie));n!==a&&(We=t,n=Re());t=n,t===a&&(t=Ge,e.substr(Ge,2)===S?(n=S,Ge+=2):(n=a,0===Ye&&rt(se)),n!==a&&(We=t,n=He()),(t=n)===a&&(t=Ge,60===e.charCodeAt(Ge)?(n=C,Ge++):(n=a,0===Ye&&rt(oe)),n!==a&&(We=t,n=Xe()),(t=n)===a&&(t=Ge,62===e.charCodeAt(Ge)?(n=A,Ge++):(n=a,0===Ye&&rt(le)),n!==a&&(We=t,n=Je()),t=n)));return t}(),i!==a){for(s=[],o=wt();o!==a;)s.push(o),o=wt();(o=xt())!==a?(We=t,t=ye(n,i,o)):(Ge=t,t=a)}else Ge=t,t=a}else Ge=t,t=a;return t}(),t===a&&(t=function(){var t,n,r,i,s,o;if(t=Ge,n=ct(),n!==a){for(r=[],i=wt();i!==a;)r.push(i),i=wt();if(58===e.charCodeAt(Ge)?(i=c,Ge++):(i=a,0===Ye&&rt(j)),i!==a){for(s=[],o=wt();o!==a;)s.push(o),o=wt();(o=dt())!==a?(We=t,t=ve(n,o)):(Ge=t,t=a)}else Ge=t,t=a}else Ge=t,t=a;return t}(),t===a&&(t=function(){var e,t;e=Ge,t=ft(),t!==a&&(We=e,t=be(t));return e=t,e}()));return t}());return t}()),t}function ct(){var e;return Ye++,e=xt(),Ye--,e===a&&(a,0===Ye&&rt(_)),e}function dt(){var t,n,r,i,s,o;if(t=Ge,40===e.charCodeAt(Ge)?(n=l,Ge++):(n=a,0===Ye&&rt(O)),n!==a){for(r=[],i=wt();i!==a;)r.push(i),i=wt();i=function(){var e,t,n,r,i;if(e=Ge,t=pt(),t!==a){if(n=[],r=Ge,mt()!==a&&(i=pt())!==a?(We=r,r=De(t,i)):(Ge=r,r=a),r!==a)for(;r!==a;)n.push(r),r=Ge,mt()!==a&&(i=pt())!==a?(We=r,r=De(t,i)):(Ge=r,r=a);else n=a;n!==a?(We=e,e=Se(t,n)):(Ge=e,e=a)}else Ge=e,e=a;e===a&&(e=pt());return e}(),i!==a&&(s=Dt())!==a?(41===e.charCodeAt(Ge)?(o=u,Ge++):(o=a,0===Ye&&rt(B)),o!==a?(We=t,t=ke(i,s)):(Ge=t,t=a)):(Ge=t,t=a)}else Ge=t,t=a;return t===a&&(t=ft()),t}function pt(){var e,t,n,r,i;if(e=Ge,(t=ht())!==a){if(n=[],r=Ge,gt()!==a&&(i=ht())!==a?(We=r,r=De(t,i)):(Ge=r,r=a),r!==a)for(;r!==a;)n.push(r),r=Ge,gt()!==a&&(i=ht())!==a?(We=r,r=De(t,i)):(Ge=r,r=a);else n=a;n!==a?(We=e,e=Ce(t,n)):(Ge=e,e=a)}else Ge=e,e=a;return e===a&&(e=ht()),e}function ht(){var e,t;return e=Ge,Et()!==a&&(t=dt())!==a?(We=e,e=Ae(t)):(Ge=e,e=a),e===a&&(e=dt()),e}function ft(){var e,t;return Ye++,e=Ge,(t=yt())!==a&&(We=e,t=Fe(t)),(e=t)===a&&(e=Ge,(t=bt())!==a&&(We=e,t=we(t)),e=t),Ye--,e===a&&(t=a,0===Ye&&rt(z)),e}function mt(){var t,n,r,i,s;if(Ye++,t=Ge,n=[],(r=wt())!==a)for(;r!==a;)n.push(r),r=wt();else n=a;if(n!==a)if(e.substr(Ge,2).toLowerCase()===h?(r=e.substr(Ge,2),Ge+=2):(r=a,0===Ye&&rt(R)),r!==a){if(i=[],(s=wt())!==a)for(;s!==a;)i.push(s),s=wt();else i=a;i!==a?t=n=[n,r,i]:(Ge=t,t=a)}else Ge=t,t=a;else Ge=t,t=a;return Ye--,t===a&&(n=a,0===Ye&&rt(U)),t}function gt(){var t,n,r,i,s;if(Ye++,t=Ge,n=[],(r=wt())!==a)for(;r!==a;)n.push(r),r=wt();else n=a;if(n!==a)if(e.substr(Ge,3).toLowerCase()===f?(r=e.substr(Ge,3),Ge+=3):(r=a,0===Ye&&rt(X)),r!==a){if(i=[],(s=wt())!==a)for(;s!==a;)i.push(s),s=wt();else i=a;i!==a?t=n=[n,r,i]:(Ge=t,t=a)}else Ge=t,t=a;else Ge=t,t=a;return Ye--,t===a&&(n=a,0===Ye&&rt(H)),t}function Et(){var t,n,r,i;if(Ye++,t=Ge,e.substr(Ge,3).toLowerCase()===m?(n=e.substr(Ge,3),Ge+=3):(n=a,0===Ye&&rt(K)),n!==a){if(r=[],(i=wt())!==a)for(;i!==a;)r.push(i),i=wt();else r=a;r!==a?t=n=[n,r]:(Ge=t,t=a)}else Ge=t,t=a;return Ye--,t===a&&(n=a,0===Ye&&rt(J)),t}function xt(){var e;return Ye++,(e=yt())===a&&(e=bt()),Ye--,e===a&&(a,0===Ye&&rt(G)),e}function yt(){var t,n,r,i,s,o,l;if(t=Ge,We=Ge,(n=(n=Me())?void 0:a)!==a)if(34===e.charCodeAt(Ge)?(r=g,Ge++):(r=a,0===Ye&&rt(W)),r!==a){for(i=[],s=vt();s!==a;)i.push(s),s=vt();if((s=Mt())!==a){for(o=[],l=vt();l!==a;)o.push(l),l=vt();34===e.charCodeAt(Ge)?(l=g,Ge++):(l=a,0===Ye&&rt(W)),l!==a?(We=t,t=Te(i,s,o)):(Ge=t,t=a)}else Ge=t,t=a}else Ge=t,t=a;else Ge=t,t=a;if(t===a)if(t=Ge,34===e.charCodeAt(Ge)?(n=g,Ge++):(n=a,0===Ye&&rt(W)),n!==a){for(r=[],i=vt();i!==a;)r.push(i),i=vt();34===e.charCodeAt(Ge)?(i=g,Ge++):(i=a,0===Ye&&rt(W)),i!==a?(We=t,t=Ie(r)):(Ge=t,t=a)}else Ge=t,t=a;return t}function vt(){var t,n,r;return(t=St())===a&&(t=At())===a&&(t=Ge,92===e.charCodeAt(Ge)?(n=E,Ge++):(n=a,0===Ye&&rt(q)),n!==a?(w.test(e.charAt(Ge))?(r=e.charAt(Ge),Ge++):(r=a,0===Ye&&rt(V)),r!==a?(We=t,t=Pe(r)):(Ge=t,t=a)):(Ge=t,t=a),t===a&&(t=Ge,n=Ge,Ye++,r=Mt(),Ye--,r===a?n=void 0:(Ge=n,n=a),n!==a?(M.test(e.charAt(Ge))?(r=e.charAt(Ge),Ge++):(r=a,0===Ye&&rt($)),r!==a?(We=t,t=Pe(r)):(Ge=t,t=a)):(Ge=t,t=a))),t}function bt(){var e,t,n,r,i,s;if(e=Ge,We=Ge,(t=(t=Me())?void 0:a)!==a){for(n=[],r=kt();r!==a;)n.push(r),r=kt();if((r=Mt())!==a){for(i=[],s=kt();s!==a;)i.push(s),s=kt();We=e,e=Te(n,r,i)}else Ge=e,e=a}else Ge=e,e=a;if(e===a){if(e=Ge,t=[],(n=kt())!==a)for(;n!==a;)t.push(n),n=kt();else t=a;t!==a&&(We=e,t=Oe(t)),e=t}return e}function kt(){var t,n,r,i,s;return(t=St())===a&&(t=function(){var t,n,r;t=Ge,92===e.charCodeAt(Ge)?(n=E,Ge++):(n=a,0===Ye&&rt(q));n!==a&&(r=Ct())!==a?(We=t,t=Pe(r)):(Ge=t,t=a);return t}(),t===a&&(t=At())===a&&(t=function(){var t,n,r;t=Ge,92===e.charCodeAt(Ge)?(n=E,Ge++):(n=a,0===Ye&&rt(q));n!==a?(e.substr(Ge,2).toLowerCase()===h?(r=e.substr(Ge,2),Ge+=2):(r=a,0===Ye&&rt(R)),r===a&&(e.substr(Ge,3).toLowerCase()===f?(r=e.substr(Ge,3),Ge+=3):(r=a,0===Ye&&rt(X)),r===a&&(e.substr(Ge,3).toLowerCase()===m?(r=e.substr(Ge,3),Ge+=3):(r=a,0===Ye&&rt(K)))),r!==a?(We=t,t=_e(r)):(Ge=t,t=a)):(Ge=t,t=a);return t}(),t===a&&(t=function(){var t,n;t=Ge,42===e.charCodeAt(Ge)?(n=x,Ge++):(n=a,0===Ye&&rt(Q));n!==a&&(We=t,n=Be());return t=n,t}(),t===a&&(t=Ge,n=Ge,Ye++,r=Ct(),Ye--,r===a?n=void 0:(Ge=n,n=a),n!==a?(r=Ge,Ye++,i=function(){var e;e=mt(),e===a&&(e=gt())===a&&(e=Et());return e}(),Ye--,i===a?r=void 0:(Ge=r,r=a),r!==a?(i=Ge,Ye++,s=Mt(),Ye--,s===a?i=void 0:(Ge=i,i=a),i!==a?(e.length>Ge?(s=e.charAt(Ge),Ge++):(s=a,0===Ye&&rt(Y)),s!==a?(We=t,t=Pe(s)):(Ge=t,t=a)):(Ge=t,t=a)):(Ge=t,t=a)):(Ge=t,t=a))))),t}function Dt(){var e,t,n,r,i,s;if(e=Ge,We=Ge,(t=(t=Me())?void 0:a)!==a){for(n=[],r=wt();r!==a;)n.push(r),r=wt();if((r=Mt())!==a){for(i=[],s=wt();s!==a;)i.push(s),s=wt();We=e,e=Te(n,r,i)}else Ge=e,e=a}else Ge=e,e=a;if(e===a)for(e=[],t=wt();t!==a;)e.push(t),t=wt();return e}function St(){var t,n;return t=Ge,e.substr(Ge,2)===y?(n=y,Ge+=2):(n=a,0===Ye&&rt(Z)),n!==a&&(We=t,n=je()),(t=n)===a&&(t=Ge,e.substr(Ge,2)===v?(n=v,Ge+=2):(n=a,0===Ye&&rt(ee)),n!==a&&(We=t,n=Ne()),(t=n)===a&&(t=Ge,e.substr(Ge,2)===b?(n=b,Ge+=2):(n=a,0===Ye&&rt(te)),n!==a&&(We=t,n=Le()),t=n)),t}function Ct(){var t;return T.test(e.charAt(Ge))?(t=e.charAt(Ge),Ge++):(t=a,0===Ye&&rt(ne)),t}function At(){var t,n,r;return t=Ge,92===e.charCodeAt(Ge)?(n=E,Ge++):(n=a,0===Ye&&rt(q)),n!==a?(r=function(){var t,n,r,i,s,o,l,u;t=Ge,117===e.charCodeAt(Ge)?(n=k,Ge++):(n=a,0===Ye&&rt(re));n!==a?(r=Ge,i=Ge,(s=Ft())!==a&&(o=Ft())!==a&&(l=Ft())!==a&&(u=Ft())!==a?i=s=[s,o,l,u]:(Ge=i,i=a),(r=i!==a?e.substring(r,Ge):i)!==a?(We=t,t=Ue(r)):(Ge=t,t=a)):(Ge=t,t=a);return t}(),r!==a?(We=t,t=ze(r)):(Ge=t,t=a)):(Ge=t,t=a),t}function Ft(){var t;return I.test(e.charAt(Ge))?(t=e.charAt(Ge),Ge++):(t=a,0===Ye&&rt(ae)),t}function wt(){var t;return Ye++,P.test(e.charAt(Ge))?(t=e.charAt(Ge),Ge++):(t=a,0===Ye&&rt(ce)),Ye--,t===a&&(a,0===Ye&&rt(ue)),t}function Mt(){var t,n;return t=Ge,We=Ge,(Me()?void 0:a)!==a?(e.substr(Ge,14)===F?(n=F,Ge+=14):(n=a,0===Ye&&rt(de)),n!==a?(We=t,t=Ke()):(Ge=t,t=a)):(Ge=t,t=a),t}const{parseCursor:Tt,cursorSymbol:It,allowLeadingWildcards:Pt=!0,helpers:{nodeTypes:Ot}}=t,Bt=Ot.function.buildNodeWithArgumentNodes,jt=Ot.literal.buildNode,Nt=Ot.wildcard.buildNode,Lt=Ot.namedArg.buildNode,{wildcardSymbol:_t}=Ot.wildcard;if((n=o())!==a&&Ge===e.length)return n;throw n!==a&&Ge<e.length&&rt({type:"end"}),at($e,Ve<e.length?e.charAt(Ve):null,Ve<e.length?nt(Ve,Ve+1):nt(Ve,Ve))}}},function(e,t,n){"use strict";var r=n(95);e.exports=new r({include:[n(131)]})},function(e,t,n){"use strict";var r=n(95);e.exports=new r({include:[n(114)],implicit:[n(174),n(175),n(176),n(177)]})},function(e,t,n){"use strict";e.exports={position:!0,gfm:!0,commonmark:!1,footnotes:!1,pedantic:!1,blocks:n(218)}},function(e,t,n){"use strict";e.exports=function(e){var t,n=0,a=0,i=e.charAt(n),s={};for(;i in r;)a+=t=r[i],t>1&&(a=Math.floor(a/t)*t),s[a]=n,i=e.charAt(++n);return{indent:a,stops:s}};var r={" ":1,"\t":4}},function(e,t,n){"use strict";var r="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",a="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";t.openCloseTag=new RegExp("^(?:"+r+"|"+a+")"),t.tag=new RegExp("^(?:"+r+"|"+a+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("<",t)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("[",t),r=e.indexOf("![",t);if(-1===r)return n;return n<r?n:r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(6),s=n(68),o=n(81),l=n(85),u=n(108);const c=({packageInfo:e,showOnlyIntegration:t,packagePolicy:n,updatePackagePolicy:c,validationResults:d,submitAttempted:p})=>{const h=Object(r.useMemo)((()=>Object(l.f)(e)),[e]),f=Object(r.useMemo)((()=>t?(e.policy_templates||[]).filter((e=>e.name===t)):e.policy_templates||[]),[e.policy_templates,t]);return d?f.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiHorizontalRule,{margin:"m"}),a.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},f.map((t=>(t.inputs||[]).map((r=>{const s=n.inputs.find((e=>e.type===r.type&&(!h||e.policy_template===t.name))),o=Object(l.h)(r.type,e,h?t.data_streams:[]);return s?a.a.createElement(i.EuiFlexItem,{key:r.type},a.a.createElement(u.b,{packageInput:r,packageInputStreams:o,packagePolicyInput:s,updatePackagePolicyInput:e=>{const a=n.inputs.findIndex((e=>e.type===r.type&&(!h||e.policy_template===t.name))),i=[...n.inputs];i[a]={...i[a],...e},c({inputs:i})},inputValidationResults:d.inputs[h?`${t.name}-${s.type}`:s.type],forceShowErrors:p}),a.a.createElement(i.EuiHorizontalRule,{margin:"m"})):null})))))):a.a.createElement(i.EuiEmptyPrompt,{iconType:"checkInCircleFilled",iconColor:"secondary",body:a.a.createElement(i.EuiText,null,a.a.createElement("p",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.noPolicyOptionsMessage",defaultMessage:"Nothing to configure"})))}):a.a.createElement(o.k,null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(0),a=n.n(r),i=n(4),s=n(68),o=n(6),l=n(69),u=n.n(l),c=n(85),d=n(81),p=n(80),h=n(7),f=n(5),m=n(98),g=n(108);const E=u()(o.EuiDescribedFormGroup).withConfig({displayName:"FormGroupResponsiveFields",componentId:"sc-14ocboh-0"})(["@media (max-width:767px){.euiFlexGroup--responsive{align-items:flex-start;}}"]),x=Object(r.memo)((({agentPolicy:e,packageInfo:t,packagePolicy:n,integrationToEnable:l,isUpdate:u,updatePackagePolicy:x,validationResults:y,submitAttempted:v})=>{const{docLinks:b}=Object(p.jb)(),{data:k,isLoading:D}=Object(p.X)({perPage:f.SO_SEARCH_LIMIT,page:1,kuery:`${h.p}.package.name:${t.name}`}),[S,C]=Object(r.useState)(!1),A=[],F=[];return t.vars&&t.vars.forEach((e=>{Object(m.c)(e)?F.push(e):A.push(e)})),Object(r.useEffect)((()=>{if(D)return;u&&!n.vars&&t.vars&&x(Object(c.l)(t,(null==e?void 0:e.id)||"",n.output_id,n.namespace,n.name,n.description,l));const r=n.package;if((r?Object(c.m)(r):"")!==Object(c.m)(t)){const r=new RegExp(`${t.name}-(\\d+)`),a=null!=k&&k.items?k.items.filter((e=>Boolean(e.name.match(r)))).map((e=>parseInt(e.name.match(r)[1],10))).sort(((e,t)=>e-t)):[],i=`${t.name}-${a.length?a[a.length-1]+1:1}`;x(Object(c.l)(t,(null==e?void 0:e.id)||"",n.output_id,n.namespace,n.name||i,n.description,l))}e&&n.policy_id!==e.id&&x({policy_id:e.id,namespace:e.namespace})}),[u,n,e,t,x,l,k,D]),y?a.a.createElement(E,{title:a.a.createElement("h4",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.integrationSettingsSectionTitle",defaultMessage:"Integration settings"})),description:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.integrationSettingsSectionDescription",defaultMessage:"Choose a name and description to help identify how this integration will be used."})},a.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},a.a.createElement(o.EuiFlexItem,null,a.a.createElement(o.EuiFormRow,{isInvalid:!!y.name,error:y.name,label:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNameInputLabel",defaultMessage:"Integration name"})},a.a.createElement(o.EuiFieldText,{value:n.name,onChange:e=>x({name:e.target.value}),"data-test-subj":"packagePolicyNameInput"}))),a.a.createElement(o.EuiFlexItem,null,a.a.createElement(o.EuiFormRow,{label:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDescriptionInputLabel",defaultMessage:"Description"}),labelAppend:a.a.createElement(o.EuiText,{size:"xs",color:"subdued"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})),isInvalid:!!y.description,error:y.description},a.a.createElement(o.EuiFieldText,{value:n.description,onChange:e=>x({description:e.target.value}),"data-test-subj":"packagePolicyDescriptionInput"}))),A.map((e=>{const{name:t,type:r}=e;if(!n.vars||!n.vars[t])return null;const i=n.vars[t].value;return a.a.createElement(o.EuiFlexItem,{key:t},a.a.createElement(g.c,{varDef:e,value:i,onChange:e=>{x({vars:{...n.vars,[t]:{type:r,value:e}}})},errors:y.vars[t],forceShowErrors:v}))})),a.a.createElement(o.EuiFlexItem,null,a.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:S?"arrowDown":"arrowRight",onClick:()=>C(!S),flush:"left"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.advancedOptionsToggleLinkText",defaultMessage:"Advanced options"}))),!S&&y.namespace?a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiText,{color:"danger",size:"s"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:1}}))):null)),S?a.a.createElement(o.EuiFlexItem,null,a.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},a.a.createElement(o.EuiFlexItem,null,a.a.createElement(o.EuiFormRow,{isInvalid:!!y.namespace,error:y.namespace,label:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceInputLabel",defaultMessage:"Namespace"}),helpText:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceHelpLabel",defaultMessage:"Change the default namespace inherited from the selected Agent policy. This setting changes the name of the integration's data stream. {learnMore}.",values:{learnMore:a.a.createElement(o.EuiLink,{href:b.links.fleet.datastreamsNamingScheme,target:"_blank"},i.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceHelpLearnMoreLabel",{defaultMessage:"Learn more"}))}})},a.a.createElement(o.EuiComboBox,{noSuggestions:!0,singleSelection:!0,selectedOptions:n.namespace?[{label:n.namespace}]:[],onCreateOption:e=>{x({namespace:e})},onChange:e=>{x({namespace:e.length?e[0].label:""})}}))),F.map((e=>{const{name:t,type:r}=e;if(!n.vars||!n.vars[t])return null;const i=n.vars[t].value;return a.a.createElement(o.EuiFlexItem,{key:t},a.a.createElement(g.c,{varDef:e,value:i,onChange:e=>{x({vars:{...n.vars,[t]:{type:r,value:e}}})},errors:y.vars[t],forceShowErrors:v}))})))):null)):a.a.createElement(d.k,null)}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),a=n(0),i=r.__importDefault(n(140));t.default=function(e,t){var n=a.useState(t),r=n[0],s=n[1];return i.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=a},,function(e,t,n){"use strict";n.d(t,"a",(function(){return Xe}));var r={};n.r(r),n.d(r,"buildNode",(function(){return j})),n.d(r,"toElasticsearchQuery",(function(){return N}));var a={};n.r(a),n.d(a,"wildcardSymbol",(function(){return L})),n.d(a,"buildNode",(function(){return U})),n.d(a,"test",(function(){return R})),n.d(a,"toElasticsearchQuery",(function(){return H})),n.d(a,"toQueryStringQuery",(function(){return X})),n.d(a,"hasLeadingWildcard",(function(){return J}));var i={};n.r(i),n.d(i,"buildNodeParams",(function(){return Y})),n.d(i,"toElasticsearchQuery",(function(){return Q}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return Z})),n.d(s,"toElasticsearchQuery",(function(){return ee}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return te})),n.d(o,"toElasticsearchQuery",(function(){return ne}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return re})),n.d(l,"toElasticsearchQuery",(function(){return ae}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return oe})),n.d(u,"toElasticsearchQuery",(function(){return le}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return ue})),n.d(c,"toElasticsearchQuery",(function(){return ce}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return de})),n.d(d,"toElasticsearchQuery",(function(){return pe}));var p={};n.r(p),n.d(p,"buildNodeParams",(function(){return he})),n.d(p,"toElasticsearchQuery",(function(){return fe}));var h={};n.r(h),n.d(h,"buildNodeParams",(function(){return me})),n.d(h,"toElasticsearchQuery",(function(){return ge}));var f={};n.r(f),n.d(f,"buildNode",(function(){return xe})),n.d(f,"buildNodeWithArgumentNodes",(function(){return ye})),n.d(f,"toElasticsearchQuery",(function(){return ve}));var m={};n.r(m),n.d(m,"buildNode",(function(){return be})),n.d(m,"toElasticsearchQuery",(function(){return ke}));var g,E,x=n(9),y=n.n(x),v=n(87),b=n.n(v),k=n(20),D=n.n(k),S=(n(128),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),C=function(e,t){var n=S(e,t);return{script:{source:A(e),lang:e.lang,params:{value:n}}}},A=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(g||(g={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(E||(E={}));var F={gt:">",gte:">=",lte:"<=",lt:"<"},w={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},M={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},T=function(e,t){var n=Object(k.mapValues)(Object(k.pickBy)(t,(function(e,t){return t in F})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(k.map)(n,(function(t,n){return"("+e.script+")"+Object(k.get)(F,n)+n})).join(" && ");if("painless"===e.lang){var a="date"===e.type?M:w,i=Object(k.reduce)(n,(function(e,t,n){return e.concat(Object(k.get)(a,n))}),[]).join(" "),s=Object(k.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(i).concat(s)}return{script:{source:r,params:n,lang:e.lang}}};var I=n(92),P=n.n(I),O=n(103),B=n.n(O);function j(e){return{type:"literal",value:e}}function N(e){return e.value}var L="@kuery-wildcard@";function _(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function z(e){return e.replace(/[+\-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function U(e){return e.includes(L)?{type:"wildcard",value:e}:He(e)}function R(e,t){var n=e.value.split(L).map(_).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function H(e){return e.value.split(L).join("*")}function X(e){return e.value.split(L).map(z).join("*")}function J(e){var t=e.value;return t.startsWith(L)&&t.replace(L,"").length>0}function K(e,t){if(!t)return[];if("literal"===e.type){var n=N(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return R(e,t.name)})):void 0}var G=n(76),W=n.n(G);function q(e){var t=W.a.tz.guess();return"Browser"===e?t:e}function V(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function $(e,t,n){var r=b()(b()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var a=K(r,t).reduce((function(e,t){var r=V(t),a=null==r?void 0:r.nested.path;return n&&!a?[].concat(P()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):a&&!n?[].concat(P()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):a!==n?[].concat(P()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(a.length>0)throw new Error(a.join("\n"));return r}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(k.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(k.isUndefined)(t))throw new Error("value is a required argument");return{arguments:["string"==typeof e?He(e):j(e),"string"==typeof t?He(t):j(t),j(n)]}}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=B()(e.arguments,3),i=a[0],s=a[1],o=a[2],l="wildcard"===s.type&&s.value===L,u="wildcard"===i.type&&i.value===L;if(l&&u)return{match_all:{}};var c=$(i,t,null!=r&&r.nested?r.nested.path:void 0),d=Object(k.isUndefined)(s)?s:Je(s),p=o.value?"phrase":"best_fields";if(null===c.value)return"wildcard"===s.type?{query_string:{query:X(s)}}:{multi_match:{type:p,query:d,lenient:!0}};var h=t?K(c,t):[];return h&&0===h.length&&h.push({name:Je(c),scripted:!1,type:""}),!l||null!=h&&h.length&&(null==h?void 0:h.length)!==(null==t?void 0:t.fields.length)?{bool:{should:h.reduce((function(e,t){var a=function(e){var n=V(t);return"wildcard"!==c.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(l)return[].concat(P()(e),[a({exists:{field:t.name}})]);if("wildcard"===s.type)return[].concat(P()(e),[a({query_string:{fields:[t.name],query:X(s)}})]);if("date"===t.type){var i=n.dateFormatTZ?{time_zone:q(n.dateFormatTZ)}:{};return[].concat(P()(e),[a({range:y()({},t.name,b()({gte:d,lte:d},i))})])}var o="phrase"===p?"match_phrase":"match";return[].concat(P()(e),[a(y()({},o,y()({},t.name,d)))])}if(!l)return[].concat(P()(e),[{script:b()({},C(t,d))}])}),[])||[],minimum_should_match:1}}:{match_all:{}}}function Z(e){return{arguments:e}}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n.filtersInMustClause,i=e.arguments||[],s=a?"must":"filter";return{bool:y()({},s,i.map((function(e){return Je(e,t,n,r)})))}}function te(e){return{arguments:e}}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{bool:{should:(e.arguments||[]).map((function(e){return Je(e,t,n,r)})),minimum_should_match:1}}}function re(e){return{arguments:[e]}}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=B()(e.arguments,1)[0];return{bool:{must_not:Je(a,t,n,r)}}}var ie=n(113),se=n.n(ie);function oe(e,t){var n=Object(k.pick)(t,"gt","lt","gte","lte","format"),r="string"==typeof e?He(e):De.literal.buildNode(e),a=Object(k.map)(n,(function(e,t){return De.namedArg.buildNode(t,e)}));return{arguments:[r].concat(P()(a))}}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=se()(e.arguments),i=a[0],s=a.slice(1),o=$(i,t,null!=r&&r.nested?r.nested.path:void 0),l=t?K(o,t):[],u=function(e){if(e.gt&&e.gte||e.lt&&e.lte)throw new Error("range ends cannot be both inclusive and exclusive");var t=["gte","lte","format"];return e.reduce((function(e,n,r){return"namedArg"===n.type?e[n.name]=n.value:e[t[r]]=n,e}),{})}(s),c=Object(k.mapValues)(u,(function(e){return Je(e)}));return l&&0===l.length&&l.push({name:Je(o),scripted:!1,type:""}),{bool:{should:l.map((function(e){var t=function(t){var n=V(e);return"wildcard"!==o.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}};if(e.scripted)return{script:T(e,c)};if("date"===e.type){var a=n.dateFormatTZ?{time_zone:q(n.dateFormatTZ)}:{};return t({range:y()({},e.name,b()(b()({},c),a))})}return t({range:y()({},e.name,c)})})),minimum_should_match:1}}}function ue(e){return{arguments:[j(e)]}}function ce(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=B()(e.arguments,1)[0],i=N(b()(b()({},a),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(a.value):a.value})),s=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===i}));if(null!=s&&s.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:i}}}function de(e,t){t=D.a.pick(t,"topLeft","bottomRight");var n=De.literal.buildNode(e),r=D.a.map(t,(function(e,t){var n="".concat(e.lat,", ").concat(e.lon);return De.namedArg.buildNode(t,n)}));return{arguments:[n].concat(P()(r))}}function pe(e,t){var n,r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=se()(e.arguments),s=i[0],o=i.slice(1),l=b()(b()({},s),{},{value:null!=a&&a.nested?"".concat(a.nested.path,".").concat(s.value):s.value}),u=De.literal.toElasticsearchQuery(l),c=(null!==(n=null==t?void 0:t.fields)&&void 0!==n?n:[]).find((function(e){return e.name===u})),d=o.reduce((function(e,t){var n=D.a.snakeCase(t.name);return b()(b()({},e),{},y()({},n,Je(t)))}),{});if(null!=c&&c.scripted)throw new Error("Geo bounding box query does not support scripted fields");return{geo_bounding_box:(r={},y()(r,u,d),y()(r,"ignore_unmapped",!0),r)}}function he(e,t){var n=De.literal.buildNode(e),r=t.map((function(e){var t="".concat(e.lat,", ").concat(e.lon);return De.literal.buildNode(t)}));return{arguments:[n].concat(P()(r))}}function fe(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=se()(e.arguments),o=s[0],l=s.slice(1),u=b()(b()({},o),{},{value:null!=i&&i.nested?"".concat(i.nested.path,".").concat(o.value):o.value}),c=De.literal.toElasticsearchQuery(u),d=(null!==(n=null==t?void 0:t.fields)&&void 0!==n?n:[]).find((function(e){return e.name===c})),p={points:l.map((function(e){return Je(e,t,a,i)}))};if(null!=d&&d.scripted)throw new Error("Geo polygon query does not support scripted fields");return{geo_polygon:(r={},y()(r,c,p),y()(r,"ignore_unmapped",!0),r)}}function me(e,t){return{arguments:["string"==typeof e?He(e):j(e),t]}}function ge(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=B()(e.arguments,2),s=i[0],o=i[1],l=Je(s),u=null!=a&&null!==(n=a.nested)&&void 0!==n&&n.path?"".concat(a.nested.path,".").concat(l):l;return{nested:{path:u,query:Je(o,t,r,b()(b()({},a),{},{nested:{path:u}})),score_mode:"none"}}}var Ee={is:i,and:s,or:o,not:l,range:u,exists:c,geoBoundingBox:d,geoPolygon:p,nested:h};function xe(e){var t=Ee[e];if(D.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return b()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function ye(e,t){if(D.a.isUndefined(Ee[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function ve(e,t,n,r){return Ee[e.function].toElasticsearchQuery(e,t,n,r)}function be(e,t){return{type:"namedArg",name:e,value:"literal"===D.a.get(t,"type")?t:De.literal.buildNode(t)}}function ke(e){return Je(e.value)}var De={function:f,literal:r,namedArg:m,wildcard:a},Se=n(158),Ce=n.n(Se),Ae=n(160),Fe=n.n(Ae),we=n(161),Me=n.n(we),Te=n(162),Ie=n.n(Te),Pe=n(163),Oe=n.n(Pe),Be=n(164),je=n.n(Be),Ne=n(4),Le=Ne.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),_e={fieldName:Ne.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:Ne.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:Ne.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:Ne.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},ze=function(e){Ie()(n,e);var t=Oe()(n);function n(e,r){var a;Fe()(this,n);var i=e.message;if(e.expected){var s=e.expected.map((function(e){var t,n="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return _e[n]||n})),o=Object(k.uniq)(s).filter((function(e){return void 0!==e})).sort().join(", ");i=Ne.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:o,foundInput:e.found?'"'.concat(e.found,'"'):Le}})}var l=[i,r,Object(k.repeat)("-",e.location.start.offset)+"^"].join("\n");return a=t.call(this,l),y()(Me()(a),"shortMessage",void 0),a.name="KQLSyntaxError",a.shortMessage=i,a}return Ce()(n)}(je()(Error)),Ue=n(129),Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ue.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,b()(b()({},t),{},{helpers:{nodeTypes:De}}))},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Re(e,b()(b()({},t),{},{startRule:"Literal"}),Ue.parse)},Xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return Re(e,t,Ue.parse)}catch(t){throw"SyntaxError"===t.name?new ze(t,e):t}},Je=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return t&&t.type&&De[t.type]?De[t.type].toElasticsearchQuery(t,n,r,a):e(De.function.buildNode("and",[]),n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return E})),n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return D})),n.d(t,"c",(function(){return F}));var r=n(0),a=n.n(r),i=n(6),s=n(68),o=n(80);const l=({deploymentUrl:e})=>{const{docLinks:t}=Object(o.jb)(),{refresh:n}=Object(o.P)();return Object(r.useEffect)((()=>{const e=setInterval((()=>{n()}),1e4);return()=>clearInterval(e)}),[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiEmptyPrompt,{title:a.a.createElement("h2",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudSetupTitle",defaultMessage:"Enable APM & Fleet"})),body:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudSetupText",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. You can add one to your deployment by enabling APM & Fleet. For more information see the {link}",values:{link:a.a.createElement(i.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.userGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),actions:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiButton,{iconSide:"right",iconType:"popout",fill:!0,isLoading:!1,type:"submit",href:`${e}/edit`,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudDeploymentLink",defaultMessage:"Edit deployment"})))}),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiFlexItem,null,a.a.createElement(i.EuiFlexGroup,{justifyContent:"center",gutterSize:"s"},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiLoadingSpinner,{size:"m"})),a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiText,{size:"s",color:"subdued"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.waitingText",defaultMessage:"Waiting for a Fleet Server to connect..."}))))))};var u=n(69),c=n.n(u),d=n(4),p=n(81),h=n(83);const f=/^(https?):\/\/[^\s$.?#].[^\s]*$/gm,m=c()(i.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-1f9f6u4-0"})(["min-width:0px;max-width:100%;"]),g=(c()(i.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1f9f6u4-1"})(["height:100%;margin:0 auto;max-width:800px;"]),c.a.div.attrs((()=>({className:"eui-textBreakAll"}))).withConfig({displayName:"CommandCode",componentId:"sc-1f9f6u4-2"})(["margin-right:",";"],(e=>e.theme.eui.paddingSizes.m))),E=({disabled:e=!1,serviceToken:t,getServiceToken:n,isLoadingServiceToken:r})=>({title:d.i18n.translate("xpack.fleet.fleetServerSetup.stepGenerateServiceTokenTitle",{defaultMessage:"Generate a service token"}),status:e?"disabled":void 0,children:!e&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.generateServiceTokenDescription",defaultMessage:"A service token grants Fleet Server permissions to write to Elasticsearch."})),a.a.createElement(i.EuiSpacer,{size:"m"}),t?a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiCallOut,{iconType:"check",size:"s",color:"success",title:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.saveServiceTokenDescription",defaultMessage:"Save your service token information. This will be shown only once."})}),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.serviceTokenLabel",defaultMessage:"Service token"}))),a.a.createElement(m,null,a.a.createElement(i.EuiCodeBlock,{paddingSize:"m",isCopyable:!0},a.a.createElement(g,null,t))))):a.a.createElement(i.EuiFlexGroup,null,a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButton,{fill:!0,isLoading:r,isDisabled:r,onClick:()=>{n()}},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.generateServiceTokenButton",defaultMessage:"Generate service token"})))))}),x=({serviceToken:e,installCommand:t,platform:n,setPlatform:r})=>{const{docLinks:l}=Object(o.jb)();return{title:d.i18n.translate("xpack.fleet.fleetServerSetup.stepInstallAgentTitle",{defaultMessage:"Start Fleet Server"}),status:e?void 0:"disabled",children:e?a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.installAgentDescription",defaultMessage:"From the agent directory, copy and run the appropriate quick start command to start an Elastic Agent as a Fleet Server using the generated token and a self-signed certificate. See the {userGuideLink} for instructions on using your own certificates for production deployment. All commands require administrator privileges.",values:{userGuideLink:a.a.createElement(i.EuiLink,{href:l.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiButtonGroup,{options:o.e,idSelected:n,onChange:e=>r(e),legend:d.i18n.translate("xpack.fleet.fleetServerSetup.platformSelectAriaLabel",{defaultMessage:"Platform"})}),a.a.createElement(i.EuiSpacer,{size:"s"}),a.a.createElement(i.EuiCodeBlock,{fontSize:"m",isCopyable:!0,paddingSize:"m",language:"console",whiteSpace:"pre-wrap"},a.a.createElement(g,null,t)),a.a.createElement(i.EuiSpacer,{size:"s"}),a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingText",defaultMessage:"If you are having trouble connecting, see our {link}.",values:{link:a.a.createElement(i.EuiLink,{target:"_blank",external:!0,href:l.links.fleet.troubleshooting},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}))}}))):null}},y=e=>{var t,n;const{output:a,refresh:i}=Object(o.O)(),{notifications:s}=Object(o.jb)(),[l,u]=Object(r.useState)(),[c,p]=Object(r.useState)(!1),{platform:h,setPlatform:f}=Object(o.gb)(),[m,g]=Object(r.useState)("production"),{data:E,resendRequest:x}=Object(o.Y)(),y=null==E||null===(t=E.item.fleet_server_hosts)||void 0===t?void 0:t[0],v=null==a||null===(n=a.hosts)||void 0===n?void 0:n[0],b=Object(r.useMemo)((()=>l&&v?function(e,t,n,r,a,i){let s="";const o="windows"===e?"`":"\\";switch(s+=i&&a?`--url=${a} ${o}\n`:`  ${o}\n`,s+=`  --fleet-server-es=${t}`,s+=` ${o}\n  --fleet-server-service-token=${n}`,r&&(s+=` ${o}\n  --fleet-server-policy=${r}`),i?(s+=` ${o}\n  --certificate-authorities=<PATH_TO_CA>`,s+=` ${o}\n  --fleet-server-es-ca=<PATH_TO_ES_CERT>`,s+=` ${o}\n  --fleet-server-cert=<PATH_TO_FLEET_SERVER_CERT>`,s+=` ${o}\n  --fleet-server-cert-key=<PATH_TO_FLEET_SERVER_CERT_KEY>`):s+=` ${o}\n  --fleet-server-insecure-http`,e){case"linux-mac":return`sudo ./elastic-agent install ${s}`;case"windows":return`.\\elastic-agent.exe install ${s}`;case"rpm-deb":return`sudo elastic-agent enroll ${s}`;default:return""}}(h,v,l,e,y,"production"===m):""),[l,v,h,e,y,m]),k=Object(r.useCallback)((async()=>{p(!0);try{const{data:e}=await Object(o.n)();null!=e&&e.value&&u(null==e?void 0:e.value)}catch(e){s.toasts.addError(e,{title:d.i18n.translate("xpack.fleet.fleetServerSetup.errorGeneratingTokenTitleText",{defaultMessage:"Error generating token"})})}p(!1)}),[s.toasts]),D=Object(r.useCallback)((()=>Promise.all([i(),x()])),[i,x]);return{addFleetServerHost:Object(r.useCallback)((async e=>{try{await Object(o.E)({fleet_server_hosts:[e,...(null==E?void 0:E.item.fleet_server_hosts)||[]]}),await x()}catch(e){s.toasts.addError(e,{title:d.i18n.translate("xpack.fleet.fleetServerSetup.errorAddingFleetServerHostTitle",{defaultMessage:"Error adding Fleet Server host"})})}}),[x,s.toasts,null==E?void 0:E.item.fleet_server_hosts]),fleetServerHost:y,deploymentMode:m,setDeploymentMode:g,serviceToken:l,getServiceToken:k,isLoadingServiceToken:c,installCommand:b,platform:h,setPlatform:f,refresh:D}},v=({policyId:e,setPolicyId:t})=>{const{data:n}=Object(o.Q)({full:!0}),l=Object(r.useMemo)((()=>n?n.items.filter((e=>e.package_policies.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===h.g})))):[]),[n]),u=Object(r.useMemo)((()=>l.map((e=>({text:e.name,value:e.id})))),[l]);Object(r.useEffect)((()=>{if(l.length&&!e){const e=l.find((e=>e.is_default_fleet_server))||l[0];t(e.id)}}),[u,l,e,t]);const c=Object(r.useCallback)((e=>{t(e.target.value)}),[t]);return{title:d.i18n.translate("xpack.fleet.fleetServerSetup.stepSelectAgentPolicyTitle",{defaultMessage:"Select an Agent policy"}),status:void 0,children:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.selectAgentPolicyDescriptionText",defaultMessage:"Agent policies allow you to configure and manage your agents remotely. We recommend using the “Default Fleet Server policy” which includes the necessary configuration to run a Fleet Server."})),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiSelect,{prepend:a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.agentPolicySelectLabel",defaultMessage:"Agent policy"})),options:u,value:e,onChange:c,"aria-label":d.i18n.translate("xpack.fleet.fleetServerSetup.agentPolicySelectAraiLabel",{defaultMessage:"Agent policy"})}))}},b=({addFleetServerHost:e})=>({title:d.i18n.translate("xpack.fleet.fleetServerSetup.addFleetServerHostStepTitle",{defaultMessage:"Add your Fleet Server host"}),status:void 0,children:a.a.createElement(k,{addFleetServerHost:e})}),k=({addFleetServerHost:e})=>{const[t,n]=Object(r.useState)(),[l,u]=Object(r.useState)(!1),[c,p]=Object(r.useState)(""),[h,m]=Object(r.useState)(),{getModalHref:g}=Object(o.lb)(),E=Object(r.useCallback)((e=>e.match(f)?(m(void 0),!0):(m(d.i18n.translate("xpack.fleet.fleetServerSetup.addFleetServerHostInvalidUrlError",{defaultMessage:"Invalid URL"})),!1)),[m]),x=Object(r.useCallback)((async()=>{try{u(!0),E(c)?(await e(c),n(c),p("")):n("")}finally{u(!1)}}),[c,e,E]),y=Object(r.useCallback)((e=>{p(e.target.value),h&&E(e.target.value)}),[h,E,p]);return a.a.createElement(i.EuiForm,{onSubmit:x},a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostStepDescription",defaultMessage:"Specify the URL your agents will use to connect to Fleet Server. This should match the public IP address or domain of the host where Fleet Server will run. By default, Fleet Server uses port {port}.",values:{port:a.a.createElement(i.EuiCode,null,"8220")}})),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiFlexGroup,null,a.a.createElement(i.EuiFlexItem,null,a.a.createElement(i.EuiFieldText,{fullWidth:!0,placeholder:"e.g. http://127.0.0.1:8220",value:c,isInvalid:!!h,onChange:y,disabled:l,prepend:a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostInputLabel",defaultMessage:"Fleet Server host"}))}),h&&a.a.createElement(i.EuiFormErrorText,null,h)),a.a.createElement(i.EuiFlexItem,{grow:!1},a.a.createElement(i.EuiButton,{isLoading:l,onClick:x},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostButton",defaultMessage:"Add host"})))),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiCallOut,{iconType:"check",size:"s",color:"success",title:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostSuccessTitle",defaultMessage:"Added Fleet Server host"})},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostSuccessText",defaultMessage:"Added {host}. You can edit your Fleet Server hosts in {fleetSettingsLink}.",values:{host:t,fleetSettingsLink:a.a.createElement(i.EuiLink,{href:g("settings")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetSettingsLink",defaultMessage:"Fleet Settings"}))}}))))},D=({deploymentMode:e,setDeploymentMode:t})=>({title:d.i18n.translate("xpack.fleet.fleetServerSetup.stepDeploymentModeTitle",{defaultMessage:"Choose a deployment mode for security"}),status:void 0,children:a.a.createElement(S,{deploymentMode:e,setDeploymentMode:t})}),S=({deploymentMode:e,setDeploymentMode:t})=>{const n=Object(r.useCallback)((e=>{"production"!==e&&"quickstart"!==e||t(e)}),[t]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.stepDeploymentModeDescriptionText",defaultMessage:"Fleet uses Transport Layer Security (TLS) to encrypt traffic between Elastic Agents and other components in the Elastic Stack. Choose a deployment mode to determine how you wish to handle certificates. Your selection will affect the Fleet Server set up command shown in a later step."})),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiRadioGroup,{options:[{id:"quickstart",label:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.deploymentModeQuickStartOption",defaultMessage:"{quickStart} – Fleet Server will generate a self-signed certificate. Subsequent agents must be enrolled using the --insecure flag. Not recommended for production use cases.",values:{quickStart:a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.quickStartText",defaultMessage:"Quick start"}))}})},{id:"production",label:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.deploymentModeProductionOption",defaultMessage:"{production} – Provide your own certificates. This option will require agents to specify a cert key when enrolling with Fleet",values:{production:a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.productionText",defaultMessage:"Production"}))}})}],idSelected:e,onChange:n,name:"radio group"}))},C=({status:e})=>({title:d.i18n.translate("xpack.fleet.fleetServerSetup.stepWaitingForFleetServerTitle",{defaultMessage:"Waiting for Fleet Server to connect..."}),status:e,children:void 0}),A=()=>{const e=Object(o.P)();return{title:d.i18n.translate("xpack.fleet.fleetServerSetup.stepFleetServerCompleteTitle",{defaultMessage:"Fleet Server connected"}),status:"complete",children:a.a.createElement(a.a.Fragment,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.stepFleetServerCompleteDescription",defaultMessage:"You can now enroll agents with Fleet."}),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(i.EuiButton,{fill:!0,onClick:()=>{e.refresh()}},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.continueButton",defaultMessage:"Continue"})))}},F=()=>{const{notifications:e}=Object(o.jb)(),[t,n]=Object(r.useState)(),{serviceToken:l,getServiceToken:u,isLoadingServiceToken:c,installCommand:h,platform:f,setPlatform:m,refresh:g,deploymentMode:k,setDeploymentMode:S,fleetServerHost:F,addFleetServerHost:w}=y(t),{modal:M}=Object(o.lb)();Object(r.useEffect)((()=>{M||g()}),[M,g]);const{docLinks:T}=Object(o.jb)(),[I,P]=Object(r.useState)(!0);return Object(r.useEffect)((()=>{const t=setInterval((async()=>{try{var t,n,r;const e=await Object(o.r)();if(e.error)throw e.error;null===(t=e.data)||void 0===t||!t.isReady||null!==(n=e.data)&&void 0!==n&&null!==(r=n.missing_requirements)&&void 0!==r&&r.includes("fleet_server")||P(!1)}catch(t){e.toasts.addError(t,{title:d.i18n.translate("xpack.fleet.fleetServerSetup.errorRefreshingFleetServerStatus",{defaultMessage:"Error refreshing Fleet Server status"})})}}),1e4);return()=>clearInterval(t)}),[e.toasts]),a.a.createElement(a.a.Fragment,null,a.a.createElement(i.EuiText,null,a.a.createElement("h2",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupTitle",defaultMessage:"Add a Fleet Server"})),a.a.createElement(i.EuiSpacer,{size:"m"}),a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupText",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}.",values:{userGuideLink:a.a.createElement(i.EuiLink,{href:T.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})),a.a.createElement(i.EuiSpacer,{size:"l"}),a.a.createElement(i.EuiSteps,{className:"eui-textLeft",steps:[v({policyId:t,setPolicyId:n}),Object(p.f)(!0),D({deploymentMode:k,setDeploymentMode:S}),b({addFleetServerHost:w}),E({disabled:"production"===k&&!F,serviceToken:l,getServiceToken:u,isLoadingServiceToken:c}),x({serviceToken:l,installCommand:h,platform:f,setPlatform:m}),I?C({status:l?"loading":"disabled"}):A()]}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(109);Object.defineProperty(t,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return r.AllSubstringsIndexStrategy}}),Object.defineProperty(t,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return r.ExactWordIndexStrategy}}),Object.defineProperty(t,"PrefixIndexStrategy",{enumerable:!0,get:function(){return r.PrefixIndexStrategy}});var a=n(110);Object.defineProperty(t,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return a.CaseSensitiveSanitizer}}),Object.defineProperty(t,"LowerCaseSanitizer",{enumerable:!0,get:function(){return a.LowerCaseSanitizer}});var i=n(124);Object.defineProperty(t,"TfIdfSearchIndex",{enumerable:!0,get:function(){return i.TfIdfSearchIndex}}),Object.defineProperty(t,"UnorderedSearchIndex",{enumerable:!0,get:function(){return i.UnorderedSearchIndex}});var s=n(126);Object.defineProperty(t,"SimpleTokenizer",{enumerable:!0,get:function(){return s.SimpleTokenizer}}),Object.defineProperty(t,"StemmingTokenizer",{enumerable:!0,get:function(){return s.StemmingTokenizer}}),Object.defineProperty(t,"StopWordsTokenizer",{enumerable:!0,get:function(){return s.StopWordsTokenizer}});var o=n(155);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o.Search}});var l=n(127);Object.defineProperty(t,"StopWordsMap",{enumerable:!0,get:function(){return l.StopWordsMap}});var u=n(156);Object.defineProperty(t,"TokenHighlighter",{enumerable:!0,get:function(){return u.TokenHighlighter}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.AllSubstringsIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"expandToken",value:function(e){for(var t,n=[],r=0,a=e.length;r<a;++r){t="";for(var i=r;i<a;++i)t+=e.charAt(i),n.push(t)}return n}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ExactWordIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"expandToken",value:function(e){return e?[e]:[]}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.PrefixIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"expandToken",value:function(e){for(var t=[],n="",r=0,a=e.length;r<a;++r)n+=e.charAt(r),t.push(n);return t}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.CaseSensitiveSanitizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"sanitize",value:function(e){return e?e.trim():""}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.LowerCaseSanitizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"sanitize",value:function(e){return e?e.toLocaleLowerCase().trim():""}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TfIdfSearchIndex=void 0;var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(125),o=(r=s)&&r.__esModule?r:{default:r};t.TfIdfSearchIndex=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uidFieldName=t,this._tokenToIdfCache={},this._tokenMap={}}return i(e,[{key:"indexDocument",value:function(e,t,n){this._tokenToIdfCache={};var r,i=this._tokenMap;"object"!==a(i[e])?i[e]=r={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(r=i[e]).$totalNumOccurrences++;var s=r.$uidMap;"object"!==a(s[t])?(r.$numDocumentOccurrences++,s[t]={$document:n,$numTokenOccurrences:1}):s[t].$numTokenOccurrences++}},{key:"search",value:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r],o=this._tokenMap[s];if(!o)return[];if(0===r)for(var l=0,u=(c=Object.keys(o.$uidMap)).length;l<u;l++){n[d=c[l]]=o.$uidMap[d].$document}else{var c;for(l=0,u=(c=Object.keys(n)).length;l<u;l++){var d=c[l];"object"!==a(o.$uidMap[d])&&delete n[d]}}}var p=[];for(var d in n)p.push(n[d]);var h=this._createCalculateTfIdf();return p.sort((function(n,r){return h(e,r,t)-h(e,n,t)}))}},{key:"_createCalculateIdf",value:function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,r){if(!t[n]){var a=void 0!==e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(r.length/(1+a))}return t[n]}}},{key:"_createCalculateTfIdf",value:function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(r,a,i){for(var s=0,l=0,u=r.length;l<u;++l){var c,d=r[l],p=n(d,i);p===1/0&&(p=0),c=t instanceof Array?a&&(0,o.default)(a,t):a&&a[t],s+=(void 0!==e[d]&&void 0!==e[d].$uidMap[c]?e[d].$uidMap[c].$numTokenOccurrences:0)*p}return s}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.UnorderedSearchIndex=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tokenToUidToDocumentMap={}}return a(e,[{key:"indexDocument",value:function(e,t,n){"object"!==r(this._tokenToUidToDocumentMap[e])&&(this._tokenToUidToDocumentMap[e]={}),this._tokenToUidToDocumentMap[e][t]=n}},{key:"search",value:function(e,t){for(var n={},a=this._tokenToUidToDocumentMap,i=0,s=e.length;i<s;i++){var o=a[e[i]];if(!o)return[];if(0===i)for(var l=0,u=(d=Object.keys(o)).length;l<u;l++){n[c=d[l]]=o[c]}else for(l=0,u=(d=Object.keys(n)).length;l<u;l++){var c=d[l];"object"!==r(o[c])&&delete n[c]}}var d,p=[];for(i=0,u=(d=Object.keys(n)).length;i<u;i++){c=d[i];p.push(n[c])}return p}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=/[^a-zа-яё0-9\-']+/i;t.SimpleTokenizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"tokenize",value:function(e){return e.split(a).filter((function(e){return e}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.StemmingTokenizer=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stemmingFunction=t,this._tokenizer=n}return r(e,[{key:"tokenize",value:function(e){return this._tokenizer.tokenize(e).map(this._stemmingFunction)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWordsTokenizer=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(127);t.StopWordsTokenizer=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tokenizer=t}return r(e,[{key:"tokenize",value:function(e){return this._tokenizer.tokenize(e).filter((function(e){return!a.StopWordsMap[e]}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(125),s=(r=i)&&r.__esModule?r:{default:r},o=n(109),l=n(110),u=n(124),c=n(126);t.Search=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=t,this._indexStrategy=new o.PrefixIndexStrategy,this._searchIndex=new u.TfIdfSearchIndex(t),this._sanitizer=new l.LowerCaseSanitizer,this._tokenizer=new c.SimpleTokenizer,this._documents=[],this._searchableFields=[]}return a(e,[{key:"addDocument",value:function(e){this.addDocuments([e])}},{key:"addDocuments",value:function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)}},{key:"addIndex",value:function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])}},{key:"search",value:function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)}},{key:"indexDocuments_",value:function(e,t){this._initialized=!0;for(var n=this._indexStrategy,r=this._sanitizer,a=this._searchIndex,i=this._tokenizer,o=this._uidFieldName,l=0,u=e.length;l<u;l++){var c,d=e[l];c=o instanceof Array?(0,s.default)(d,o):d[o];for(var p=0,h=t.length;p<h;p++){var f,m=t[p];if(null!=(f=m instanceof Array?(0,s.default)(d,m):d[m])&&"string"!=typeof f&&f.toString&&(f=f.toString()),"string"==typeof f)for(var g=i.tokenize(r.sanitize(f)),E=0,x=g.length;E<x;E++)for(var y=g[E],v=n.expandToken(y),b=0,k=v.length;b<k;b++){var D=v[b];a.indexDocument(D,c,d)}}}}},{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenHighlighter=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(109),i=n(110);t.TokenHighlighter=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._indexStrategy=t||new a.PrefixIndexStrategy,this._sanitizer=n||new i.LowerCaseSanitizer,this._wrapperTagName=r||"mark"}return r(e,[{key:"highlight",value:function(e,t){for(var n=this._wrapText("").length,r=Object.create(null),a=0,i=t.length;a<i;a++)for(var s=this._sanitizer.sanitize(t[a]),o=this._indexStrategy.expandToken(s),l=0,u=o.length;l<u;l++){var c=o[l];r[c]?r[c].push(s):r[c]=[s]}for(var d="",p="",h=0,f=(a=0,e.length);a<f;a++){var m=e.charAt(a);" "===m?(d="",p="",h=a+1):(d+=m,p+=this._sanitizer.sanitize(m)),r[p]&&r[p].indexOf(p)>=0&&(d=this._wrapText(d),e=e.substring(0,h)+d+e.substring(a+1),a+=n,f+=n)}return e}},{key:"_wrapText",value:function(e){var t=this._wrapperTagName;return"<"+t+">"+e+"</"+t+">"}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=!1,i="_NP_";function s(e){return function(){var t=r.useContext(e);return a&&t===i&&console.warn("[constate] Component not wrapped within a Provider."),t}}t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var l=r.createContext(i),u=function(t){var i=e(t),s=n[0],o=s&&s(i);a&&Array.isArray(o)&&console.warn("[constate] Passing `createMemoDeps` as the second argument is deprecated.","Please, use `React.useMemo` in your custom hook instead.","See https://github.com/diegohaz/constate/issues/98");var u=Array.isArray(o)?r.useMemo((function(){return i}),o):i;return r.createElement(l.Provider,{value:u},t.children)};a&&e.name&&(l.displayName=e.name+".Context",u.displayName=e.name+".Provider");var c=s(l);c.Context=l,c.Provider=u;var d=[];if(n.length){var p=[],h=function(t){for(var a=e(t),i=t.children,s=0;s<p.length;s+=1){var o=p[s],l=n[s];i=r.createElement(o.Provider,{value:l(a)},i)}return i};a&&e.name&&(h.displayName=e.name+".Provider"),d.push(h);for(var f=0;f<n.length;f+=1){var m=r.createContext(i);p.push(m),d.push(s(m))}}else d.push(u,s(l));for(var g=0;g<d.length;g+=1)c[g]=d[g];return"function"==typeof Symbol&&Symbol.iterator&&(c[Symbol.iterator]=function(){return d[Symbol.iterator]()}),c}},function(e,t,n){var r=n(159);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){e.exports=n(29)(2394)},function(e,t,n){e.exports=n(29)(2387)},function(e,t,n){e.exports=n(29)(1071)},function(e,t,n){e.exports=n(29)(2396)},function(e,t,n){e.exports=n(29)(2392)},function(e,t,n){e.exports=n(29)(2406)},function(e,t,n){const r=n(31);e.exports=(e,t)=>new r(e,t).major},function(e,t,n){const r=n(31);e.exports=(e,t)=>new r(e,t).minor},function(e,t,n){const r=n(31);e.exports=(e,t)=>new r(e,t).patch},function(e,t,n){"use strict";var r=n(169),a=n(188);function i(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=n(84),e.exports.Schema=n(95),e.exports.FAILSAFE_SCHEMA=n(114),e.exports.JSON_SCHEMA=n(131),e.exports.CORE_SCHEMA=n(130),e.exports.DEFAULT_SAFE_SCHEMA=n(100),e.exports.DEFAULT_FULL_SCHEMA=n(104),e.exports.load=r.load,e.exports.loadAll=r.loadAll,e.exports.safeLoad=r.safeLoad,e.exports.safeLoadAll=r.safeLoadAll,e.exports.dump=a.dump,e.exports.safeDump=a.safeDump,e.exports.YAMLException=n(99),e.exports.MINIMAL_SCHEMA=n(114),e.exports.SAFE_SCHEMA=n(100),e.exports.DEFAULT_SCHEMA=n(104),e.exports.scan=i("scan"),e.exports.parse=i("parse"),e.exports.compose=i("compose"),e.exports.addConstructor=i("addConstructor")},function(e,t,n){"use strict";var r=n(94),a=n(99),i=n(170),s=n(100),o=n(104),l=Object.prototype.hasOwnProperty,u=1,c=2,d=3,p=4,h=1,f=2,m=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,E=/[\x85\u2028\u2029]/,x=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,v=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function b(e){return Object.prototype.toString.call(e)}function k(e){return 10===e||13===e}function D(e){return 9===e||32===e}function S(e){return 9===e||32===e||10===e||13===e}function C(e){return 44===e||91===e||93===e||123===e||125===e}function A(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function F(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function w(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var M=new Array(256),T=new Array(256),I=0;I<256;I++)M[I]=F(I)?1:0,T[I]=F(I);function P(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||o,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function O(e,t){return new a(t,new i(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function B(e,t){throw O(e,t)}function j(e,t){e.onWarning&&e.onWarning.call(null,O(e,t))}var N={YAML:function(e,t,n){var r,a,i;null!==e.version&&B(e,"duplication of %YAML directive"),1!==n.length&&B(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&B(e,"ill-formed argument of the YAML directive"),a=parseInt(r[1],10),i=parseInt(r[2],10),1!==a&&B(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&j(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,a;2!==n.length&&B(e,"TAG directive accepts exactly two arguments"),r=n[0],a=n[1],y.test(r)||B(e,"ill-formed tag handle (first argument) of the TAG directive"),l.call(e.tagMap,r)&&B(e,'there is a previously declared suffix for "'+r+'" tag handle'),v.test(a)||B(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=a}};function L(e,t,n,r){var a,i,s,o;if(t<n){if(o=e.input.slice(t,n),r)for(a=0,i=o.length;a<i;a+=1)9===(s=o.charCodeAt(a))||32<=s&&s<=1114111||B(e,"expected valid JSON character");else g.test(o)&&B(e,"the stream contains non-printable characters");e.result+=o}}function _(e,t,n,a){var i,s,o,u;for(r.isObject(n)||B(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,u=(i=Object.keys(n)).length;o<u;o+=1)s=i[o],l.call(t,s)||(t[s]=n[s],a[s]=!0)}function z(e,t,n,r,a,i,s,o){var u,c;if(Array.isArray(a))for(u=0,c=(a=Array.prototype.slice.call(a)).length;u<c;u+=1)Array.isArray(a[u])&&B(e,"nested arrays are not supported inside keys"),"object"==typeof a&&"[object Object]"===b(a[u])&&(a[u]="[object Object]");if("object"==typeof a&&"[object Object]"===b(a)&&(a="[object Object]"),a=String(a),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(i))for(u=0,c=i.length;u<c;u+=1)_(e,t,i[u],n);else _(e,t,i,n);else e.json||l.call(n,a)||!l.call(t,a)||(e.line=s||e.line,e.position=o||e.position,B(e,"duplicated mapping key")),t[a]=i,delete n[a];return t}function U(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):B(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function R(e,t,n){for(var r=0,a=e.input.charCodeAt(e.position);0!==a;){for(;D(a);)a=e.input.charCodeAt(++e.position);if(t&&35===a)do{a=e.input.charCodeAt(++e.position)}while(10!==a&&13!==a&&0!==a);if(!k(a))break;for(U(e),a=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&j(e,"deficient indentation"),r}function H(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!S(t)))}function X(e,t){1===t?e.result+=" ":t>1&&(e.result+=r.repeat("\n",t-1))}function J(e,t){var n,r,a=e.tag,i=e.anchor,s=[],o=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),r=e.input.charCodeAt(e.position);0!==r&&45===r&&S(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,R(e,!0,-1)&&e.lineIndent<=t)s.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,W(e,t,d,!1,!0),s.push(e.result),R(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)B(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=a,e.anchor=i,e.kind="sequence",e.result=s,!0)}function K(e){var t,n,r,a,i=!1,s=!1;if(33!==(a=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&B(e,"duplication of a tag property"),60===(a=e.input.charCodeAt(++e.position))?(i=!0,a=e.input.charCodeAt(++e.position)):33===a?(s=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&62!==a);e.position<e.length?(r=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):B(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!S(a);)33===a&&(s?B(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),y.test(n)||B(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),x.test(r)&&B(e,"tag suffix cannot contain flow indicator characters")}return r&&!v.test(r)&&B(e,"tag name cannot contain such characters: "+r),i?e.tag=r:l.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:B(e,'undeclared tag handle "'+n+'"'),!0}function G(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&B(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!S(n)&&!C(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&B(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function W(e,t,n,a,i){var s,o,g,E,x,y,v,b,F=1,I=!1,P=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=g=p===n||d===n,a&&R(e,!0,-1)&&(I=!0,e.lineIndent>t?F=1:e.lineIndent===t?F=0:e.lineIndent<t&&(F=-1)),1===F)for(;K(e)||G(e);)R(e,!0,-1)?(I=!0,g=s,e.lineIndent>t?F=1:e.lineIndent===t?F=0:e.lineIndent<t&&(F=-1)):g=!1;if(g&&(g=I||i),1!==F&&p!==n||(v=u===n||c===n?t:t+1,b=e.position-e.lineStart,1===F?g&&(J(e,b)||function(e,t,n){var r,a,i,s,o,l=e.tag,u=e.anchor,d={},h={},f=null,m=null,g=null,E=!1,x=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),o=e.input.charCodeAt(e.position);0!==o;){if(r=e.input.charCodeAt(e.position+1),i=e.line,s=e.position,63!==o&&58!==o||!S(r)){if(!W(e,n,c,!1,!0))break;if(e.line===i){for(o=e.input.charCodeAt(e.position);D(o);)o=e.input.charCodeAt(++e.position);if(58===o)S(o=e.input.charCodeAt(++e.position))||B(e,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(z(e,d,h,f,m,null),f=m=g=null),x=!0,E=!1,a=!1,f=e.tag,m=e.result;else{if(!x)return e.tag=l,e.anchor=u,!0;B(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!x)return e.tag=l,e.anchor=u,!0;B(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===o?(E&&(z(e,d,h,f,m,null),f=m=g=null),x=!0,E=!0,a=!0):E?(E=!1,a=!0):B(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,o=r;if((e.line===i||e.lineIndent>t)&&(W(e,t,p,!0,a)&&(E?m=e.result:g=e.result),E||(z(e,d,h,f,m,g,i,s),f=m=g=null),R(e,!0,-1),o=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==o)B(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return E&&z(e,d,h,f,m,null),x&&(e.tag=l,e.anchor=u,e.kind="mapping",e.result=d),x}(e,b,v))||function(e,t){var n,r,a,i,s,o,l,c,d,p,h=!0,f=e.tag,m=e.anchor,g={};if(91===(p=e.input.charCodeAt(e.position)))a=93,o=!1,r=[];else{if(123!==p)return!1;a=125,o=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),p=e.input.charCodeAt(++e.position);0!==p;){if(R(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=f,e.anchor=m,e.kind=o?"mapping":"sequence",e.result=r,!0;h||B(e,"missed comma between flow collection entries"),d=null,i=s=!1,63===p&&S(e.input.charCodeAt(e.position+1))&&(i=s=!0,e.position++,R(e,!0,t)),n=e.line,W(e,t,u,!1,!0),c=e.tag,l=e.result,R(e,!0,t),p=e.input.charCodeAt(e.position),!s&&e.line!==n||58!==p||(i=!0,p=e.input.charCodeAt(++e.position),R(e,!0,t),W(e,t,u,!1,!0),d=e.result),o?z(e,r,g,c,l,d):i?r.push(z(e,null,g,c,l,d)):r.push(l),R(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(h=!0,p=e.input.charCodeAt(++e.position)):h=!1}B(e,"unexpected end of the stream within a flow collection")}(e,v)?P=!0:(o&&function(e,t){var n,a,i,s,o,l=h,u=!1,c=!1,d=t,p=0,g=!1;if(124===(s=e.input.charCodeAt(e.position)))a=!1;else{if(62!==s)return!1;a=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)h===l?l=43===s?m:f:B(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(o=s)&&o<=57?o-48:-1)>=0))break;0===i?B(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?B(e,"repeat of an indentation width identifier"):(d=t+i-1,c=!0)}if(D(s)){do{s=e.input.charCodeAt(++e.position)}while(D(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!k(s)&&0!==s)}for(;0!==s;){for(U(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!c||e.lineIndent<d)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>d&&(d=e.lineIndent),k(s))p++;else{if(e.lineIndent<d){l===m?e.result+=r.repeat("\n",u?1+p:p):l===h&&u&&(e.result+="\n");break}for(a?D(s)?(g=!0,e.result+=r.repeat("\n",u?1+p:p)):g?(g=!1,e.result+=r.repeat("\n",p+1)):0===p?u&&(e.result+=" "):e.result+=r.repeat("\n",p):e.result+=r.repeat("\n",u?1+p:p),u=!0,c=!0,p=0,n=e.position;!k(s)&&0!==s;)s=e.input.charCodeAt(++e.position);L(e,n,e.position,!1)}}return!0}(e,v)||function(e,t){var n,r,a;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=a=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(L(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,a=e.position}else k(n)?(L(e,r,a,!0),X(e,R(e,!1,t)),r=a=e.position):e.position===e.lineStart&&H(e)?B(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);B(e,"unexpected end of the stream within a single quoted scalar")}(e,v)||function(e,t){var n,r,a,i,s,o,l;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return L(e,n,e.position,!0),e.position++,!0;if(92===o){if(L(e,n,e.position,!0),k(o=e.input.charCodeAt(++e.position)))R(e,!1,t);else if(o<256&&M[o])e.result+=T[o],e.position++;else if((s=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(a=s,i=0;a>0;a--)(s=A(o=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+s:B(e,"expected hexadecimal character");e.result+=w(i),e.position++}else B(e,"unknown escape sequence");n=r=e.position}else k(o)?(L(e,n,r,!0),X(e,R(e,!1,t)),n=r=e.position):e.position===e.lineStart&&H(e)?B(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}B(e,"unexpected end of the stream within a double quoted scalar")}(e,v)?P=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!S(r)&&!C(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&B(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),l.call(e.anchorMap,n)||B(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],R(e,!0,-1),!0}(e)?function(e,t,n){var r,a,i,s,o,l,u,c,d=e.kind,p=e.result;if(S(c=e.input.charCodeAt(e.position))||C(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(S(r=e.input.charCodeAt(e.position+1))||n&&C(r)))return!1;for(e.kind="scalar",e.result="",a=i=e.position,s=!1;0!==c;){if(58===c){if(S(r=e.input.charCodeAt(e.position+1))||n&&C(r))break}else if(35===c){if(S(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&H(e)||n&&C(c))break;if(k(c)){if(o=e.line,l=e.lineStart,u=e.lineIndent,R(e,!1,-1),e.lineIndent>=t){s=!0,c=e.input.charCodeAt(e.position);continue}e.position=i,e.line=o,e.lineStart=l,e.lineIndent=u;break}}s&&(L(e,a,i,!1),X(e,e.line-o),a=i=e.position,s=!1),D(c)||(i=e.position+1),c=e.input.charCodeAt(++e.position)}return L(e,a,i,!1),!!e.result||(e.kind=d,e.result=p,!1)}(e,v,u===n)&&(P=!0,null===e.tag&&(e.tag="?")):(P=!0,null===e.tag&&null===e.anchor||B(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===F&&(P=g&&J(e,b))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&B(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),E=0,x=e.implicitTypes.length;E<x;E+=1)if((y=e.implicitTypes[E]).resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else l.call(e.typeMap[e.kind||"fallback"],e.tag)?(y=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&y.kind!==e.kind&&B(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result)?(e.result=y.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):B(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):B(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||P}function q(e){var t,n,r,a,i=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(a=e.input.charCodeAt(e.position))&&(R(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==a));){for(s=!0,a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!S(a);)a=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&B(e,"directive name must not be less than one character in length");0!==a;){for(;D(a);)a=e.input.charCodeAt(++e.position);if(35===a){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&!k(a));break}if(k(a))break;for(t=e.position;0!==a&&!S(a);)a=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==a&&U(e),l.call(N,n)?N[n](e,n,r):j(e,'unknown document directive "'+n+'"')}R(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,R(e,!0,-1)):s&&B(e,"directives end mark is expected"),W(e,e.lineIndent-1,p,!1,!0),R(e,!0,-1),e.checkLineBreaks&&E.test(e.input.slice(i,e.position))&&j(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&H(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,R(e,!0,-1)):e.position<e.length-1&&B(e,"end of the stream or a document separator is expected")}function V(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new P(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,B(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)q(n);return n.documents}function $(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=V(e,n);if("function"!=typeof t)return r;for(var a=0,i=r.length;a<i;a+=1)t(r[a])}function Y(e,t){var n=V(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new a("expected a single document in the stream, but found more")}}e.exports.loadAll=$,e.exports.load=Y,e.exports.safeLoadAll=function(e,t,n){return"object"==typeof t&&null!==t&&void 0===n&&(n=t,t=null),$(e,t,r.extend({schema:s},n))},e.exports.safeLoad=function(e,t){return Y(e,r.extend({schema:s},t))}},function(e,t,n){"use strict";var r=n(94);function a(e,t,n,r,a){this.name=e,this.buffer=t,this.position=n,this.line=r,this.column=a}a.prototype.getSnippet=function(e,t){var n,a,i,s,o;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",a=this.position;a>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(a-1));)if(a-=1,this.position-a>t/2-1){n=" ... ",a+=5;break}for(i="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){i=" ... ",s-=5;break}return o=this.buffer.slice(a,s),r.repeat(" ",e)+n+o+i+"\n"+r.repeat(" ",e+this.position-a+n.length)+"^"},a.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n},e.exports=a},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var r=n(94),a=n(84);function i(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new a("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,a=0,o=!1;if(!r)return!1;if("-"!==(t=e[a])&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===r)return!0;if("b"===(t=e[++a])){for(a++;a<r;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(a++;a<r;a++)if("_"!==(t=e[a])){if(!(48<=(n=e.charCodeAt(a))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}for(;a<r;a++)if("_"!==(t=e[a])){if(!i(e.charCodeAt(a)))return!1;o=!0}return o&&"_"!==t}if("_"===t)return!1;for(;a<r;a++)if("_"!==(t=e[a])){if(":"===t)break;if(!s(e.charCodeAt(a)))return!1;o=!0}return!(!o||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(a)))},construct:function(e){var t,n,r=e,a=1,i=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(t=r[0])&&"+"!==t||("-"===t&&(a=-1),t=(r=r.slice(1))[0]),"0"===r?0:"0"===t?"b"===r[1]?a*parseInt(r.slice(2),2):"x"===r[1]?a*parseInt(r,16):a*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach((function(e){i.unshift(parseInt(e,10))})),r=0,n=1,i.forEach((function(e){r+=e*n,n*=60})),a*r):a*parseInt(r,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!r.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,n){"use strict";var r=n(94),a=n(84),i=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var s=/^[-+]?[0-9]+e/;e.exports=new a("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!i.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n,r,a;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,a=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){a.unshift(parseFloat(e,10))})),t=0,r=1,a.forEach((function(e){t+=e*r,r*=60})),n*t):n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||r.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(e))return"-0.0";return n=e.toString(10),s.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var r=n(84),a=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==a.exec(e)||null!==i.exec(e))},construct:function(e){var t,n,r,s,o,l,u,c,d=0,p=null;if(null===(t=a.exec(e))&&(t=i.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(n,r,s));if(o=+t[4],l=+t[5],u=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(p=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(p=-p)),c=new Date(Date.UTC(n,r,s,o,l,u,d)),p&&c.setTime(c.getTime()-p),c},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,n){"use strict";var r;try{r=n(38).Buffer}catch(e){}var a=n(84),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new a("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,a=e.length,s=i;for(n=0;n<a;n++)if(!((t=s.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,a=e.replace(/[\r\n=]/g,""),s=a.length,o=i,l=0,u=[];for(t=0;t<s;t++)t%4==0&&t&&(u.push(l>>16&255),u.push(l>>8&255),u.push(255&l)),l=l<<6|o.indexOf(a.charAt(t));return 0===(n=s%4*6)?(u.push(l>>16&255),u.push(l>>8&255),u.push(255&l)):18===n?(u.push(l>>10&255),u.push(l>>2&255)):12===n&&u.push(l>>4&255),r?r.from?r.from(u):new r(u):u},predicate:function(e){return r&&r.isBuffer(e)},represent:function(e){var t,n,r="",a=0,s=e.length,o=i;for(t=0;t<s;t++)t%3==0&&t&&(r+=o[a>>18&63],r+=o[a>>12&63],r+=o[a>>6&63],r+=o[63&a]),a=(a<<8)+e[t];return 0===(n=s%3)?(r+=o[a>>18&63],r+=o[a>>12&63],r+=o[a>>6&63],r+=o[63&a]):2===n?(r+=o[a>>10&63],r+=o[a>>4&63],r+=o[a<<2&63],r+=o[64]):1===n&&(r+=o[a>>2&63],r+=o[a<<4&63],r+=o[64],r+=o[64]),r}})},function(e,t,n){"use strict";var r=n(84),a=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,s,o,l=[],u=e;for(t=0,n=u.length;t<n;t+=1){if(r=u[t],o=!1,"[object Object]"!==i.call(r))return!1;for(s in r)if(a.call(r,s)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(s))return!1;l.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var r=n(84),a=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(r=o[t],"[object Object]"!==a.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;s[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,a,i,s=e;for(i=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],a=Object.keys(r),i[t]=[a[0],r[a[0]]];return i}})},function(e,t,n){"use strict";var r=n(84),a=Object.prototype.hasOwnProperty;e.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(a.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,n){"use strict";var r=n(84);e.exports=new r("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),r="";if("/"===t[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==t[t.length-r.length-1])return!1}return!0},construct:function(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";return"/"===t[0]&&(n&&(r=n[1]),t=t.slice(1,t.length-r.length-1)),new RegExp(t,r)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,n){"use strict";var r;try{r=n(187)}catch(e){"undefined"!=typeof window&&(r=window.esprima)}var a=n(84);e.exports=new a("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=r.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,n="("+e+")",a=r.parse(n,{range:!0}),i=[];if("Program"!==a.type||1!==a.body.length||"ExpressionStatement"!==a.body[0].type||"ArrowFunctionExpression"!==a.body[0].expression.type&&"FunctionExpression"!==a.body[0].expression.type)throw new Error("Failed to resolve function");return a.body[0].expression.params.forEach((function(e){i.push(e.name)})),t=a.body[0].expression.body.range,"BlockStatement"===a.body[0].expression.body.type?new Function(i,n.slice(t[0]+1,t[1]-1)):new Function(i,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(3),i=n(8),s=n(15);function o(e,t,n){var s=null,o=function(e,t){n&&n(e,t),s&&s.visit(e,t)},l="function"==typeof n?o:null,u=!1;if(t){u="boolean"==typeof t.comment&&t.comment;var c="boolean"==typeof t.attachComment&&t.attachComment;(u||c)&&((s=new r.CommentHandler).attach=c,t.comment=!0,l=o)}var d,p=!1;t&&"string"==typeof t.sourceType&&(p="module"===t.sourceType),d=t&&"boolean"==typeof t.jsx&&t.jsx?new a.JSXParser(e,t,l):new i.Parser(e,t,l);var h=p?d.parseModule():d.parseScript();return u&&s&&(h.comments=s.comments),d.config.tokens&&(h.tokens=d.tokens),d.config.tolerant&&(h.errors=d.errorHandler.errors),h}t.parse=o,t.parseModule=function(e,t,n){var r=t||{};return r.sourceType="module",o(e,r,n)},t.parseScript=function(e,t,n){var r=t||{};return r.sourceType="script",o(e,r,n)},t.tokenize=function(e,t,n){var r,a=new s.Tokenizer(e,t);r=[];try{for(;;){var i=a.getNextToken();if(!i)break;n&&(i=n(i)),r.push(i)}}catch(e){a.errorHandler.tolerate(e)}return a.errorHandler.tolerant&&(r.errors=a.errors()),r};var l=n(2);t.Syntax=l.Syntax,t.version="4.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===r.Syntax.BlockStatement&&0===e.body.length){for(var n=[],a=this.leading.length-1;a>=0;--a){var i=this.leading[a];t.end.offset>=i.start&&(n.unshift(i.comment),this.leading.splice(a,1),this.trailing.splice(a,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var r=this.trailing[n];r.start>=e.end.offset&&t.unshift(r.comment)}return this.trailing.length=0,t}var a=this.stack[this.stack.length-1];if(a&&a.node.trailingComments){var i=a.node.trailingComments[0];i&&i.range[0]>=e.end.offset&&(t=a.node.trailingComments,delete a.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,n=[];this.stack.length>0&&((i=this.stack[this.stack.length-1])&&i.start>=e.start.offset);)t=i.node,this.stack.pop();if(t){for(var r=(t.leadingComments?t.leadingComments.length:0)-1;r>=0;--r){var a=t.leadingComments[r];a.range[1]<=e.start.offset&&(n.unshift(a),t.leadingComments.splice(r,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,n}for(r=this.leading.length-1;r>=0;--r){var i;(i=this.leading[r]).start<=e.start.offset&&(n.unshift(i.comment),this.leading.splice(r,1))}return n},e.prototype.visitNode=function(e,t){if(!(e.type===r.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var n=this.findTrailingComments(t),a=this.findLeadingComments(t);a.length>0&&(e.leadingComments=a),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",r={type:n,value:e.value};if(e.range&&(r.range=e.range),e.loc&&(r.loc=e.loc),this.comments.push(r),this.attach){var a={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(a.comment.loc=e.loc),e.type=n,this.leading.push(a),this.trailing.push(a)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(5),o=n(6),l=n(7),u=n(8),c=n(13),d=n(14);function p(e){var t;switch(e.type){case o.JSXSyntax.JSXIdentifier:t=e.name;break;case o.JSXSyntax.JSXNamespacedName:var n=e;t=p(n.namespace)+":"+p(n.name);break;case o.JSXSyntax.JSXMemberExpression:var r=e;t=p(r.object)+"."+p(r.property)}return t}c.TokenName[100]="JSXIdentifier",c.TokenName[101]="JSXText";var h=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return a(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",n=!0,r=!1,a=!1,s=!1;!this.scanner.eof()&&n&&!r;){var o=this.scanner.source[this.scanner.index];if(o===e)break;if(r=";"===o,t+=o,++this.scanner.index,!r)switch(t.length){case 2:a="#"===o;break;case 3:a&&(n=(s="x"===o)||i.Character.isDecimalDigit(o.charCodeAt(0)),a=a&&!s);break;default:n=(n=n&&!(a&&!i.Character.isDecimalDigit(o.charCodeAt(0))))&&!(s&&!i.Character.isHexDigit(o.charCodeAt(0)))}}if(n&&r&&t.length>2){var l=t.substr(1,t.length-2);a&&l.length>1?t=String.fromCharCode(parseInt(l.substr(1),10)):s&&l.length>2?t=String.fromCharCode(parseInt("0"+l.substr(1),16)):a||s||!d.XHTMLEntities[l]||(t=d.XHTMLEntities[l])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:o=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,n=this.scanner.source[this.scanner.index++],r="";!this.scanner.eof()&&(l=this.scanner.source[this.scanner.index++])!==n;)r+="&"===l?this.scanXHTMLEntity(n):l;return{type:8,value:r,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var a=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),o=46===a&&46===s?"...":".";return t=this.scanner.index,this.scanner.index+=o.length,{type:7,value:o,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(i.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var l=this.scanner.source.charCodeAt(this.scanner.index);if(i.Character.isIdentifierPart(l)&&92!==l)++this.scanner.index;else{if(45!==l)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,i.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var r={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(r)),r},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var r=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(n,r))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var a=t;this.expectJSX(".");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(a,i))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),n=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=n;this.expectJSX(":");var a=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(r,a))}else e=n;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new l.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),r=this.matchJSX("/");return r&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,r,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var n=this.parseJSXElementName(),r=this.parseJSXAttributes(),a=this.matchJSX("/");return a&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(n,a,r))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var r=this.getTokenRaw(n),a=this.finalize(t,new s.JSXText(n.value,r));e.push(a)}if("{"!==this.scanner.source[this.scanner.index])break;var i=this.parseJSXExpressionContainer();e.push(i)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),r=this.parseJSXBoundaryElement();if(r.type===o.JSXSyntax.JSXOpeningElement){var a=r;if(a.selfClosing){var i=this.finalize(n,new s.JSXElement(a,[],null));e.children.push(i)}else t.push(e),e={node:n,opening:a,closing:null,children:[]}}if(r.type===o.JSXSyntax.JSXClosingElement){e.closing=r;var l=p(e.opening.name);if(l!==p(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",l),!(t.length>0))break;i=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(i),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],r=null;if(!t.selfClosing){var a=this.parseComplexJSXElement({node:e,opening:t,closing:r,children:n});n=a.children,r=a.closing}return this.finalize(e,new s.JSXElement(t,n,r))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(u.Parser);t.JSXParser=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),a=function(e){this.type=r.JSXSyntax.JSXClosingElement,this.name=e};t.JSXClosingElement=a;var i=function(e,t,n){this.type=r.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n};t.JSXElement=i;var s=function(){this.type=r.JSXSyntax.JSXEmptyExpression};t.JSXEmptyExpression=s;var o=function(e){this.type=r.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXExpressionContainer=o;var l=function(e){this.type=r.JSXSyntax.JSXIdentifier,this.name=e};t.JSXIdentifier=l;var u=function(e,t){this.type=r.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXMemberExpression=u;var c=function(e,t){this.type=r.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXAttribute=c;var d=function(e,t){this.type=r.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXNamespacedName=d;var p=function(e,t,n){this.type=r.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n};t.JSXOpeningElement=p;var h=function(e){this.type=r.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXSpreadAttribute=h;var f=function(e,t){this.type=r.JSXSyntax.JSXText,this.value=e,this.raw=t};t.JSXText=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=function(e){this.type=r.Syntax.ArrayExpression,this.elements=e};t.ArrayExpression=a;var i=function(e){this.type=r.Syntax.ArrayPattern,this.elements=e};t.ArrayPattern=i;var s=function(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1};t.ArrowFunctionExpression=s;var o=function(e,t,n){this.type=r.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n};t.AssignmentExpression=o;var l=function(e,t){this.type=r.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AssignmentPattern=l;var u=function(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0};t.AsyncArrowFunctionExpression=u;var c=function(e,t,n){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionDeclaration=c;var d=function(e,t,n){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=d;var p=function(e){this.type=r.Syntax.AwaitExpression,this.argument=e};t.AwaitExpression=p;var h=function(e,t,n){var a="||"===e||"&&"===e;this.type=a?r.Syntax.LogicalExpression:r.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n};t.BinaryExpression=h;var f=function(e){this.type=r.Syntax.BlockStatement,this.body=e};t.BlockStatement=f;var m=function(e){this.type=r.Syntax.BreakStatement,this.label=e};t.BreakStatement=m;var g=function(e,t){this.type=r.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CallExpression=g;var E=function(e,t){this.type=r.Syntax.CatchClause,this.param=e,this.body=t};t.CatchClause=E;var x=function(e){this.type=r.Syntax.ClassBody,this.body=e};t.ClassBody=x;var y=function(e,t,n){this.type=r.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n};t.ClassDeclaration=y;var v=function(e,t,n){this.type=r.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n};t.ClassExpression=v;var b=function(e,t){this.type=r.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ComputedMemberExpression=b;var k=function(e,t,n){this.type=r.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n};t.ConditionalExpression=k;var D=function(e){this.type=r.Syntax.ContinueStatement,this.label=e};t.ContinueStatement=D;var S=function(){this.type=r.Syntax.DebuggerStatement};t.DebuggerStatement=S;var C=function(e,t){this.type=r.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.Directive=C;var A=function(e,t){this.type=r.Syntax.DoWhileStatement,this.body=e,this.test=t};t.DoWhileStatement=A;var F=function(){this.type=r.Syntax.EmptyStatement};t.EmptyStatement=F;var w=function(e){this.type=r.Syntax.ExportAllDeclaration,this.source=e};t.ExportAllDeclaration=w;var M=function(e){this.type=r.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportDefaultDeclaration=M;var T=function(e,t,n){this.type=r.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n};t.ExportNamedDeclaration=T;var I=function(e,t){this.type=r.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExportSpecifier=I;var P=function(e){this.type=r.Syntax.ExpressionStatement,this.expression=e};t.ExpressionStatement=P;var O=function(e,t,n){this.type=r.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1};t.ForInStatement=O;var B=function(e,t,n){this.type=r.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n};t.ForOfStatement=B;var j=function(e,t,n,a){this.type=r.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=a};t.ForStatement=j;var N=function(e,t,n,a){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=a,this.expression=!1,this.async=!1};t.FunctionDeclaration=N;var L=function(e,t,n,a){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=a,this.expression=!1,this.async=!1};t.FunctionExpression=L;var _=function(e){this.type=r.Syntax.Identifier,this.name=e};t.Identifier=_;var z=function(e,t,n){this.type=r.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n};t.IfStatement=z;var U=function(e,t){this.type=r.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDeclaration=U;var R=function(e){this.type=r.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportDefaultSpecifier=R;var H=function(e){this.type=r.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportNamespaceSpecifier=H;var X=function(e,t){this.type=r.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.ImportSpecifier=X;var J=function(e,t){this.type=r.Syntax.LabeledStatement,this.label=e,this.body=t};t.LabeledStatement=J;var K=function(e,t){this.type=r.Syntax.Literal,this.value=e,this.raw=t};t.Literal=K;var G=function(e,t){this.type=r.Syntax.MetaProperty,this.meta=e,this.property=t};t.MetaProperty=G;var W=function(e,t,n,a,i){this.type=r.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=a,this.static=i};t.MethodDefinition=W;var q=function(e){this.type=r.Syntax.Program,this.body=e,this.sourceType="module"};t.Module=q;var V=function(e,t){this.type=r.Syntax.NewExpression,this.callee=e,this.arguments=t};t.NewExpression=V;var $=function(e){this.type=r.Syntax.ObjectExpression,this.properties=e};t.ObjectExpression=$;var Y=function(e){this.type=r.Syntax.ObjectPattern,this.properties=e};t.ObjectPattern=Y;var Q=function(e,t,n,a,i,s){this.type=r.Syntax.Property,this.key=t,this.computed=n,this.value=a,this.kind=e,this.method=i,this.shorthand=s};t.Property=Q;var Z=function(e,t,n,a){this.type=r.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:a}};t.RegexLiteral=Z;var ee=function(e){this.type=r.Syntax.RestElement,this.argument=e};t.RestElement=ee;var te=function(e){this.type=r.Syntax.ReturnStatement,this.argument=e};t.ReturnStatement=te;var ne=function(e){this.type=r.Syntax.Program,this.body=e,this.sourceType="script"};t.Script=ne;var re=function(e){this.type=r.Syntax.SequenceExpression,this.expressions=e};t.SequenceExpression=re;var ae=function(e){this.type=r.Syntax.SpreadElement,this.argument=e};t.SpreadElement=ae;var ie=function(e,t){this.type=r.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.StaticMemberExpression=ie;var se=function(){this.type=r.Syntax.Super};t.Super=se;var oe=function(e,t){this.type=r.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchCase=oe;var le=function(e,t){this.type=r.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.SwitchStatement=le;var ue=function(e,t){this.type=r.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TaggedTemplateExpression=ue;var ce=function(e,t){this.type=r.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateElement=ce;var de=function(e,t){this.type=r.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.TemplateLiteral=de;var pe=function(){this.type=r.Syntax.ThisExpression};t.ThisExpression=pe;var he=function(e){this.type=r.Syntax.ThrowStatement,this.argument=e};t.ThrowStatement=he;var fe=function(e,t,n){this.type=r.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n};t.TryStatement=fe;var me=function(e,t){this.type=r.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UnaryExpression=me;var ge=function(e,t,n){this.type=r.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n};t.UpdateExpression=ge;var Ee=function(e,t){this.type=r.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclaration=Ee;var xe=function(e,t){this.type=r.Syntax.VariableDeclarator,this.id=e,this.init=t};t.VariableDeclarator=xe;var ye=function(e,t){this.type=r.Syntax.WhileStatement,this.test=e,this.body=t};t.WhileStatement=ye;var ve=function(e,t){this.type=r.Syntax.WithStatement,this.object=e,this.body=t};t.WithStatement=ve;var be=function(e,t){this.type=r.Syntax.YieldExpression,this.argument=e,this.delegate=t};t.YieldExpression=be},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),a=n(10),i=n(11),s=n(7),o=n(12),l=n(2),u=n(13),c="ArrowParameterPlaceHolder",d=function(){function e(e,t,n){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new a.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return r.assert(t<a.length,"Message reference must be in range"),a[t]})),s=this.lastMarker.index,o=this.lastMarker.line,l=this.lastMarker.column+1;throw this.errorHandler.createError(s,o,l,i)},e.prototype.tolerateError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return r.assert(t<a.length,"Message reference must be in range"),a[t]})),s=this.lastMarker.index,o=this.scanner.lineNumber,l=this.lastMarker.column+1;this.errorHandler.tolerateError(s,o,l,i)},e.prototype.unexpectedTokenError=function(e,t){var n,r=t||i.Messages.UnexpectedToken;if(e?(t||(r=2===e.type?i.Messages.UnexpectedEOS:3===e.type?i.Messages.UnexpectedIdentifier:6===e.type?i.Messages.UnexpectedNumber:8===e.type?i.Messages.UnexpectedString:10===e.type?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?r=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(r=i.Messages.StrictReservedWord))),n=e.value):n="ILLEGAL",r=r.replace("%0",n),e&&"number"==typeof e.lineNumber){var a=e.start,s=e.lineNumber,o=this.lastMarker.index-this.lastMarker.column,l=e.start-o+1;return this.errorHandler.createError(a,s,l,r)}return a=this.lastMarker.index,s=this.lastMarker.line,l=this.lastMarker.column+1,this.errorHandler.createError(a,s,l,r)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],r=void 0;r={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(r.range=n.range),this.config.loc&&(r.loc=n.loc);var a={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(r,a)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:u.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var n=e.pattern,r=e.flags;t.regex={pattern:n,flags:r}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var n=e.start-e.lineStart,r=e.lineNumber;return n<0&&(n+=t,r--),{index:e.start,line:r,column:n}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var a=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=r,a},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var a=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError,a},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,n,r=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(r,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new s.Literal(t.value,n));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new s.Literal("true"===t.value,n));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new s.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(r,new s.RegexLiteral(t.regex,n,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(r,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(r,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var r=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,r},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters(),r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,r,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await;this.context.allowYield=!1,this.context.await=!0;var r=this.parseFormalParameters(),a=this.parsePropertyMethod(r);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new s.AsyncFunctionExpression(null,r.params,a))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),n=this.nextToken();switch(n.type){case 8:case 6:this.context.strict&&n.octal&&this.tolerateUnexpectedToken(n,i.Messages.StrictOctalLiteral);var r=this.getTokenRaw(n);e=this.finalize(t,new s.Literal(n.value,r));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(n.value));break;case 7:"["===n.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(n);break;default:e=this.throwUnexpectedToken(n)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===l.Syntax.Identifier&&e.name===t||e.type===l.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,n=this.createNode(),r=this.lookahead,a=null,o=null,l=!1,u=!1,c=!1,d=!1;if(3===r.type){var p=r.value;this.nextToken(),l=this.match("["),a=(d=!(this.hasLineTerminator||"async"!==p||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(n,new s.Identifier(p))}else this.match("*")?this.nextToken():(l=this.match("["),a=this.parseObjectPropertyKey());var h=this.qualifiedPropertyName(this.lookahead);if(3===r.type&&!d&&"get"===r.value&&h)t="get",l=this.match("["),a=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod();else if(3===r.type&&!d&&"set"===r.value&&h)t="set",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseSetterMethod();else if(7===r.type&&"*"===r.value&&h)t="init",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),u=!0;else if(a||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!d)!l&&this.isPropertyKey(a,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),o=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))o=d?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0;else if(3===r.type)if(p=this.finalize(n,new s.Identifier(r.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),c=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);o=this.finalize(n,new s.AssignmentPattern(p,f))}else c=!0,o=p;else this.throwUnexpectedToken(this.nextToken());return this.finalize(n,new s.Property(t,a,l,o,u,c))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){r.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,a=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:a},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,r=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:r},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],r=this.parseTemplateHead();for(n.push(r);!r.tail;)t.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize(e,new s.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case l.Syntax.Identifier:case l.Syntax.MemberExpression:case l.Syntax.RestElement:case l.Syntax.AssignmentPattern:break;case l.Syntax.SpreadElement:e.type=l.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case l.Syntax.ArrayExpression:e.type=l.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case l.Syntax.ObjectExpression:for(e.type=l.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case l.Syntax.AssignmentExpression:e.type=l.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:c,params:[],async:!1};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:c,params:[e],async:!1};else{var r=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var a=[];for(this.context.isAssignmentTarget=!1,a.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<a.length;i++)this.reinterpretExpressionAsPattern(a[i]);r=!0,e={type:c,params:a,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),a.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,i=0;i<a.length;i++)this.reinterpretExpressionAsPattern(a[i]);r=!0,e={type:c,params:a,async:!1}}else a.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(r)break}r||(e=this.finalize(this.startNode(t),new s.SequenceExpression(a)))}if(!r){if(this.expect(")"),this.match("=>")&&(e.type===l.Syntax.Identifier&&"yield"===e.name&&(r=!0,e={type:c,params:[e],async:!1}),!r)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===l.Syntax.SequenceExpression)for(i=0;i<e.expressions.length;i++)this.reinterpretExpressionAsPattern(e.expressions[i]);else this.reinterpretExpressionAsPattern(e);var o=e.type===l.Syntax.SequenceExpression?e.expressions:[e];e={type:c,params:o,async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),n=this.parseIdentifierName();if(r.assert("new"===n.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var a=this.parseIdentifierName();e=new s.MetaProperty(n,a)}else this.throwUnexpectedToken(this.lookahead);else{var i=this.isolateCoverGrammar(this.parseLeftHandSideExpression),o=this.match("(")?this.parseArguments():[];e=new s.NewExpression(i,o),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,n=this.matchContextualKeyword("async"),r=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var a=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,a))}else if(this.match("(")){var i=n&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var o=i?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,o)),i&&this.match("=>")){for(var l=0;l<o.length;++l)this.reinterpretExpressionAsPattern(o[l]);e={type:c,params:o,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),a=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,a));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var u=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,u))}return this.context.allowIn=r,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){r.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,n))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),t=this.finalize(e,new s.StaticMemberExpression(t,n));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var a=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,a))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var a=!0;e=this.finalize(n,new s.UpdateExpression(r.value,e,a)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=this.nextToken().value;a=!1,e=this.finalize(this.startNode(t),new s.UpdateExpression(o,e,a))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(n.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===l.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==l.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,r=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",n,r))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,r=this.binaryPrecedence(n);if(r>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var a=[e,this.lookahead],i=t,o=this.isolateCoverGrammar(this.parseExponentiationExpression),l=[i,n.value,o],u=[r];!((r=this.binaryPrecedence(this.lookahead))<=0);){for(;l.length>2&&r<=u[u.length-1];){o=l.pop();var c=l.pop();u.pop(),i=l.pop(),a.pop();var d=this.startNode(a[a.length-1]);l.push(this.finalize(d,new s.BinaryExpression(c,i,o)))}l.push(this.nextToken().value),u.push(r),a.push(this.lookahead),l.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var p=l.length-1;t=l[p];for(var h=a.pop();p>1;){var f=a.pop(),m=h&&h.lineStart;d=this.startNode(f,m),c=l[p-1],t=this.finalize(d,new s.BinaryExpression(c,l[p-2],t)),p-=2,h=f}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var a=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,r,a)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case l.Syntax.Identifier:this.validateParam(e,t,t.name);break;case l.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case l.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case l.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case l.Syntax.ObjectPattern:for(n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,n=[e],r=!1;switch(e.type){case l.Syntax.Identifier:break;case c:n=e.params,r=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var a=0;a<n.length;++a)(s=n[a]).type===l.Syntax.AssignmentPattern?s.right.type===l.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=l.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate):r&&s.type===l.Syntax.Identifier&&"await"===s.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,s),n[a]=s;if(this.context.strict||!this.context.allowYield)for(a=0;a<n.length;++a){var s;(s=n[a]).type===l.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var o=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(o,t.message)}return{simple:t.simple,params:n,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;if(e=this.parseConditionalExpression(),3===n.type&&n.lineNumber===this.lookahead.lineNumber&&"async"===n.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var r=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(r),e={type:c,params:[r],async:!0}}if(e.type===c||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var a=e.async,o=this.reinterpretAsCoverFormalsList(e);if(o){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var u=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=o.simple;var p=this.context.allowYield,h=this.context.await;this.context.allowYield=!0,this.context.await=a;var f=this.startNode(t);this.expect("=>");var m=void 0;if(this.match("{")){var g=this.context.allowIn;this.context.allowIn=!0,m=this.parseFunctionSourceElements(),this.context.allowIn=g}else m=this.isolateCoverGrammar(this.parseAssignmentExpression);var E=m.type!==l.Syntax.BlockStatement;this.context.strict&&o.firstRestricted&&this.throwUnexpectedToken(o.firstRestricted,o.message),this.context.strict&&o.stricted&&this.tolerateUnexpectedToken(o.stricted,o.message),e=a?this.finalize(f,new s.AsyncArrowFunctionExpression(o.params,m,E)):this.finalize(f,new s.ArrowFunctionExpression(o.params,m,E)),this.context.strict=u,this.context.allowStrictDirective=d,this.context.allowYield=p,this.context.await=h}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===l.Syntax.Identifier){var x=e;this.scanner.isRestrictedWord(x.name)&&this.tolerateUnexpectedToken(n,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(x.name)&&this.tolerateUnexpectedToken(n,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var y=(n=this.nextToken()).value,v=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(y,e,v)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),r=this.parsePattern([],e);this.context.strict&&r.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var a=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),a=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(i.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&r.type!==l.Syntax.Identifier||this.match("="))&&(this.expect("="),a=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new s.VariableDeclarator(r,a))},e.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;r.assert("let"===n||"const"===n,"Lexical declaration must be either let or const");var a=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(a,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var r=this.parsePattern(e,t);return this.finalize(n,new s.RestElement(r))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");for(var r=[];!this.match("]");)if(this.match(","))this.nextToken(),r.push(null);else{if(this.match("...")){r.push(this.parseBindingRestElement(e,t));break}r.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new s.ArrayPattern(r))},e.prototype.parsePropertyPattern=function(e,t){var n,r,a=this.createNode(),i=!1,o=!1;if(3===this.lookahead.type){var l=this.lookahead;n=this.parseVariableIdentifier();var u=this.finalize(a,new s.Identifier(l.value));if(this.match("=")){e.push(l),o=!0,this.nextToken();var c=this.parseAssignmentExpression();r=this.finalize(this.startNode(l),new s.AssignmentPattern(u,c))}else this.match(":")?(this.expect(":"),r=this.parsePatternWithDefault(e,t)):(e.push(l),o=!0,r=u)}else i=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),r=this.parsePatternWithDefault(e,t);return this.finalize(a,new s.Property("init",n,i,r,!1,o))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),r=[];for(this.expect("{");!this.match("}");)r.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new s.ObjectPattern(r))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.LetInLexicalBinding),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,r=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var a=this.context.allowYield;this.context.allowYield=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=a,r=this.finalize(this.startNode(n),new s.AssignmentPattern(r,i))}return r},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return 4===n.type&&"yield"===n.value?this.context.strict?this.tolerateUnexpectedToken(n,i.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):3!==n.type?this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,i.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&3===n.type&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new s.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var r=null;return this.match("=")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===l.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(n,r))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(i.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null;this.expectKeyword("if"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(t,new s.IfStatement(r,e,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(n,r))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var r=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=r}return this.finalize(t,new s.WhileStatement(n,e))},e.prototype.parseForStatement=function(){var e,t,n,r=null,a=null,o=null,u=!0,c=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){r=this.createNode(),this.nextToken();var d=this.context.allowIn;this.context.allowIn=!1;var p=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=d,1===p.length&&this.matchKeyword("in")){var h=p[0];h.init&&(h.id.type===l.Syntax.ArrayPattern||h.id.type===l.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),r=this.finalize(r,new s.VariableDeclaration(p,"var")),this.nextToken(),e=r,t=this.parseExpression(),r=null}else 1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new s.VariableDeclaration(p,"var")),this.nextToken(),e=r,t=this.parseAssignmentExpression(),r=null,u=!1):(r=this.finalize(r,new s.VariableDeclaration(p,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){r=this.createNode();var f=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(d=this.context.allowIn,this.context.allowIn=!1,p=this.parseBindingList(f,{inFor:!0}),this.context.allowIn=d,1===p.length&&null===p[0].init&&this.matchKeyword("in")?(r=this.finalize(r,new s.VariableDeclaration(p,f)),this.nextToken(),e=r,t=this.parseExpression(),r=null):1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new s.VariableDeclaration(p,f)),this.nextToken(),e=r,t=this.parseAssignmentExpression(),r=null,u=!1):(this.consumeSemicolon(),r=this.finalize(r,new s.VariableDeclaration(p,f)))):(r=this.finalize(r,new s.Identifier(f)),this.nextToken(),e=r,t=this.parseExpression(),r=null)}else{var m=this.lookahead;if(d=this.context.allowIn,this.context.allowIn=!1,r=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=d,this.matchKeyword("in"))this.context.isAssignmentTarget&&r.type!==l.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(r),e=r,t=this.parseExpression(),r=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&r.type!==l.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(r),e=r,t=this.parseAssignmentExpression(),r=null,u=!1;else{if(this.match(",")){for(var g=[r];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));r=this.finalize(this.startNode(m),new s.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(a=this.parseExpression()),this.expect(";"),this.match(")")||(o=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var E=this.context.inIteration;this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=E}return void 0===e?this.finalize(c,new s.ForStatement(r,a,o,n)):u?this.finalize(c,new s.ForInStatement(e,t,n)):this.finalize(c,new s.ForOfStatement(e,t,n))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();t=n;var r="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(i.Messages.UnknownLabel,n.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier(),r="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(i.Messages.UnknownLabel,n.name),t=n}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(n,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var r=[],a=!1;for(this.expect("{");!this.match("}");){var o=this.parseSwitchCase();null===o.test&&(a&&this.throwError(i.Messages.MultipleDefaultsInSwitch),a=!0),r.push(o)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new s.SwitchStatement(t,r))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),n=this.parseExpression();if(n.type===l.Syntax.Identifier&&this.match(":")){this.nextToken();var r=n,a="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,a)&&this.throwError(i.Messages.Redeclaration,"Label",r.name),this.context.labelSet[a]=!0;var o=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),o=this.parseClassDeclaration();else if(this.matchKeyword("function")){var u=this.lookahead,c=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(u,i.Messages.StrictFunction):c.generator&&this.tolerateUnexpectedToken(u,i.Messages.GeneratorInLegacyContext),o=c}else o=this.parseStatement();delete this.context.labelSet[a],e=new s.LabeledStatement(r,o)}else this.consumeSemicolon(),e=new s.ExpressionStatement(n);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],n=this.parsePattern(t),r={},a=0;a<t.length;a++){var o="$"+t[a].value;Object.prototype.hasOwnProperty.call(r,o)&&this.tolerateError(i.Messages.DuplicateBinding,t[a].value),r[o]=!0}this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var u=this.parseBlock();return this.finalize(e,new s.CatchClause(n,u))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,r=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||r||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,n,r))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,r=this.context.inIteration,a=this.context.inSwitch,i=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=r,this.context.inSwitch=a,this.context.inFunctionBody=i,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var r="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[r]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(n))},e.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),r=0;r<t.length;r++)this.validateParam(e,t[r],t[r].value);e.simple=e.simple&&n instanceof s.Identifier,e.params.push(n)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===n.lineNumber&&4===n.type&&"function"===n.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),n=this.matchContextualKeyword("async");n&&this.nextToken(),this.expectKeyword("function");var r,a=!n&&this.match("*");a&&this.nextToken();var o=null,l=null;if(!e||!this.match("(")){var u=this.lookahead;o=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(l=u,r=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(l=u,r=i.Messages.StrictReservedWord)}var c=this.context.await,d=this.context.allowYield;this.context.await=n,this.context.allowYield=!a;var p=this.parseFormalParameters(l),h=p.params,f=p.stricted;l=p.firstRestricted,p.message&&(r=p.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=p.simple;var E=this.parseFunctionSourceElements();return this.context.strict&&l&&this.throwUnexpectedToken(l,r),this.context.strict&&f&&this.tolerateUnexpectedToken(f,r),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=c,this.context.allowYield=d,n?this.finalize(t,new s.AsyncFunctionDeclaration(o,h,E)):this.finalize(t,new s.FunctionDeclaration(o,h,E,a))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var n,r=!t&&this.match("*");r&&this.nextToken();var a,o=null,l=this.context.await,u=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!r,!this.match("(")){var c=this.lookahead;o=this.context.strict||r||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(c.value)&&this.tolerateUnexpectedToken(c,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(c.value)?(a=c,n=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(c.value)&&(a=c,n=i.Messages.StrictReservedWord)}var d=this.parseFormalParameters(a),p=d.params,h=d.stricted;a=d.firstRestricted,d.message&&(n=d.message);var f=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&a&&this.throwUnexpectedToken(a,n),this.context.strict&&h&&this.tolerateUnexpectedToken(h,n),this.context.strict=f,this.context.allowStrictDirective=m,this.context.await=l,this.context.allowYield=u,t?this.finalize(e,new s.AsyncFunctionExpression(o,p,g)):this.finalize(e,new s.FunctionExpression(o,p,g,r))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),r=n.type===l.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,r?new s.Directive(n,r):new s.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(8!==n.type)break;var r=this.parseDirective();t.push(r);var a=r.directive;if("string"!=typeof a)break;"use strict"===a?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,i.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();n.params.length>0&&this.tolerateError(i.Messages.BadGetterArity);var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,r,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();1!==n.params.length?this.tolerateError(i.Messages.BadSetterArity):n.params[0]instanceof s.RestElement&&this.tolerateError(i.Messages.BadSetterRestParameter);var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,r,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();this.context.allowYield=!1;var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,r,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var r=this.context.allowYield;this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=r}return this.finalize(e,new s.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),r="",a=null,o=null,l=!1,u=!1,c=!1,d=!1;if(this.match("*"))this.nextToken();else if(l=this.match("["),"static"===(a=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,c=!0,l=this.match("["),this.match("*")?this.nextToken():a=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var p=this.lookahead.value;":"!==p&&"("!==p&&"*"!==p&&(d=!0,t=this.lookahead,a=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,i.Messages.ConstructorIsAsync))}var h=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&h?(r="get",l=this.match("["),a=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod()):"set"===t.value&&h&&(r="set",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseSetterMethod()):7===t.type&&"*"===t.value&&h&&(r="init",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),u=!0),!r&&a&&this.match("(")&&(r="init",o=d?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0),r||this.throwUnexpectedToken(this.lookahead),"init"===r&&(r="method"),l||(c&&this.isPropertyKey(a,"prototype")&&this.throwUnexpectedToken(t,i.Messages.StaticPrototype),!c&&this.isPropertyKey(a,"constructor")&&(("method"!==r||!u||o&&o.generator)&&this.throwUnexpectedToken(t,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,i.Messages.DuplicateConstructor):e.value=!0,r="constructor")),this.finalize(n,new s.MethodDefinition(a,l,o,r,c))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),a=null;this.matchKeyword("extends")&&(this.nextToken(),a=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=n,this.finalize(t,new s.ClassDeclaration(r,a,i))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=3===this.lookahead.type?this.parseVariableIdentifier():null,r=null;this.matchKeyword("extends")&&(this.nextToken(),r=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var a=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(n,r,a))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var n=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var r=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(n,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(n))}else this.matchKeyword("class")?(n=this.parseClassDeclaration(!0),e=this.finalize(t,new s.ExportDefaultDeclaration(n))):this.matchContextualKeyword("async")?(n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new s.ExportDefaultDeclaration(n))):(this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new s.ExportDefaultDeclaration(n)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var r=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken();var a=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(a))}else if(4===this.lookahead.type){switch(n=void 0,this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction())n=this.parseFunctionDeclaration(),e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null));else{var o=[],l=null,u=!1;for(this.expect("{");!this.match("}");)u=u||this.matchKeyword("default"),o.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),l=this.parseModuleSpecifier(),this.consumeSemicolon()):u?(r=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause,this.throwError(r,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new s.ExportNamedDeclaration(null,o,l))}return e},e}();t.Parser=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=new Error(e);try{throw n}catch(e){Object.create&&Object.defineProperty&&(n=Object.create(e),Object.defineProperty(n,"column",{value:t}))}return n},e.prototype.createError=function(e,t,n,r){var a="Line "+t+": "+r,i=this.constructError(a,n);return i.index=e,i.lineNumber=t,i.description=r,i},e.prototype.throwError=function(e,t,n,r){throw this.createError(e,t,n,r)},e.prototype.tolerateError=function(e,t,n,r){var a=this.createError(e,t,n,r);if(!this.tolerant)throw a;this.recordError(a)},e}();t.ErrorHandler=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),a=n(4),i=n(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function o(e){return"01234567".indexOf(e)}var l=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,n,r=[];for(this.trackComment&&(r=[],t=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,a.Character.isLineTerminator(i)){if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:n};r.push(s)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,r}}return this.trackComment&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:n},r.push(s)),r},e.prototype.skipMultiLineComment=function(){var e,t,n=[];for(this.trackComment&&(n=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var r=this.source.charCodeAt(this.index);if(a.Character.isLineTerminator(r))13===r&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===r){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};n.push(i)}return n}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},i={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},n.push(i)),this.tolerateUnexpectedToken(),n},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(a.Character.isWhiteSpace(n))++this.index;else if(a.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var r=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(r)),t=!0}else{if(42!==n)break;this.index+=2,r=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(r))}else if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,r=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(r))}else{if(60!==n||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,r=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(r))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,r=0;r<t;++r){if(this.eof()||!a.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+s(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],a.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),a.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!a.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=a.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&a.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),n=e);!this.eof()&&(t=this.codePointAt(this.index),a.Character.isIdentifierPart(t));)n+=e=a.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&a.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),n+=e);return n},e.prototype.octalToDecimal=function(e){var t="0"!==e,n=o(e);return!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+o(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+o(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,n=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===n.length?3:this.isKeyword(n)?4:"null"===n?5:"true"===n||"false"===n?1:3)&&t+n.length!==this.index){var r=this.index;this.index=t,this.tolerateUnexpectedToken(i.Messages.InvalidEscapedReservedWord),this.index=r}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&a.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(a.Character.isIdentifierStart(t)||a.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",r=!1;for(a.Character.isOctalDigit(e.charCodeAt(0))?(r=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return r||0!==n.length||this.throwUnexpectedToken(),(a.Character.isIdentifierStart(this.source.charCodeAt(this.index))||a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!a.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];r.assert(a.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&a.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];r.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var n=!1,s="";!this.eof();){var o=this.source[this.index++];if(o===t){t="";break}if("\\"===o)if((o=this.source[this.index++])&&a.Character.isLineTerminator(o.charCodeAt(0)))++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(o){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var l=this.scanHexEscape(o);null===l&&this.throwUnexpectedToken(),s+=l}break;case"x":var u=this.scanHexEscape(o);null===u&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),s+=u;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=o,this.tolerateUnexpectedToken();break;default:if(o&&a.Character.isOctalDigit(o.charCodeAt(0))){var c=this.octalToDecimal(o);n=c.octal||n,s+=String.fromCharCode(c.code)}else s+=o}else{if(a.Character.isLineTerminator(o.charCodeAt(0)))break;s+=o}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,r="`"===this.source[n],s=!1,o=2;for(++this.index;!this.eof();){var l=this.source[this.index++];if("`"===l){o=1,s=!0,t=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=l}else if("\\"===l)if(l=this.source[this.index++],a.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var u=this.index,c=this.scanHexEscape(l);null!==c?e+=c:(this.index=u,e+=l)}break;case"x":var d=this.scanHexEscape(l);null===d&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),e+=d;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===l?(a.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):a.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=l}else a.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=l}return t||this.throwUnexpectedToken(),r||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-o),cooked:e,head:r,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n=e,r=this;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,n){var a=parseInt(t||n,16);return a>1114111&&r.throwUnexpectedToken(i.Messages.InvalidRegExp),a<=65535?String.fromCharCode(a):"￿"})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(n)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];r.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],n=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],a.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(a.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){s=!0;break}"["===e&&(n=!0)}return s||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!a.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var n=this.index,r=this.scanHexEscape("u");if(null!==r)for(e+=r;n<this.index;++n)this.source[n];else this.index=n,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:n,regex:this.testRegExp(t,n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return a.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?a.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():a.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&a.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),a=n(12),i=n(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var n=this.values[this.paren-1];t="if"===n||"while"===n||"for"===n||"with"===n;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(r=this.values[this.curly-4])&&!this.beforeFunctionExpression(r);else if("function"===this.values[this.curly-4]){var r;t=!(r=this.values[this.curly-5])||!this.beforeFunctionExpression(r)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),o=function(){function e(e,t){this.errorHandler=new r.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new a.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],r=this.scanner.source.slice(n.slice[0],n.slice[1]),a={type:n.multiLine?"BlockComment":"LineComment",value:r};this.trackRange&&(a.range=n.range),this.trackLoc&&(a.loc=n.loc),this.buffer.push(a)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var o="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(o);var l={type:i.TokenName[o.type],value:this.scanner.source.slice(o.start,o.end)};if(this.trackRange&&(l.range=[o.start,o.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=s),9===o.type){var u=o.pattern,c=o.flags;l.regex={pattern:u,flags:c}}this.buffer.push(l)}}return this.buffer.shift()},e}();t.Tokenizer=o}])},e.exports=r()},function(e,t,n){"use strict";var r=n(94),a=n(99),i=n(104),s=n(100),o=Object.prototype.toString,l=Object.prototype.hasOwnProperty,u=9,c=10,d=13,p=32,h=33,f=34,m=35,g=37,E=38,x=39,y=42,v=44,b=45,k=58,D=61,S=62,C=63,A=64,F=91,w=93,M=96,T=123,I=124,P=125,O={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},B=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function j(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else{if(!(e<=4294967295))throw new a("code point within a string may not be greater than 0xFFFFFFFF");n="U",i=8}return"\\"+n+r.repeat("0",i-t.length)+t}function N(e){this.schema=e.schema||i,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=r.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,a,i,s,o,u;if(null===t)return{};for(n={},a=0,i=(r=Object.keys(t)).length;a<i;a+=1)s=r[a],o=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=e.compiledTypeMap.fallback[s])&&l.call(u.styleAliases,o)&&(o=u.styleAliases[o]),n[s]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function L(e,t){for(var n,a=r.repeat(" ",t),i=0,s=-1,o="",l=e.length;i<l;)-1===(s=e.indexOf("\n",i))?(n=e.slice(i),i=l):(n=e.slice(i,s+1),i=s+1),n.length&&"\n"!==n&&(o+=a),o+=n;return o}function _(e,t){return"\n"+r.repeat(" ",e.indent*t)}function z(e){return e===p||e===u}function U(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function R(e,t){return U(e)&&65279!==e&&e!==v&&e!==F&&e!==w&&e!==T&&e!==P&&e!==k&&(e!==m||t&&function(e){return U(e)&&!z(e)&&65279!==e&&e!==d&&e!==c}(t))}function H(e){return/^\n* /.test(e)}var X=1,J=2,K=3,G=4,W=5;function q(e,t,n,r,a){var i,s,o,l,u=!1,d=!1,p=-1!==r,O=-1,B=U(l=e.charCodeAt(0))&&65279!==l&&!z(l)&&l!==b&&l!==C&&l!==k&&l!==v&&l!==F&&l!==w&&l!==T&&l!==P&&l!==m&&l!==E&&l!==y&&l!==h&&l!==I&&l!==D&&l!==S&&l!==x&&l!==f&&l!==g&&l!==A&&l!==M&&!z(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!U(s=e.charCodeAt(i)))return W;o=i>0?e.charCodeAt(i-1):null,B=B&&R(s,o)}else{for(i=0;i<e.length;i++){if((s=e.charCodeAt(i))===c)u=!0,p&&(d=d||i-O-1>r&&" "!==e[O+1],O=i);else if(!U(s))return W;o=i>0?e.charCodeAt(i-1):null,B=B&&R(s,o)}d=d||p&&i-O-1>r&&" "!==e[O+1]}return u||d?n>9&&H(e)?W:d?G:K:B&&!a(e)?X:J}function V(e,t,n,r){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==B.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),o=r||e.flowLevel>-1&&n>=e.flowLevel;switch(q(t,o,e.indent,s,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}))){case X:return t;case J:return"'"+t.replace(/'/g,"''")+"'";case K:return"|"+$(t,e.indent)+Y(L(t,i));case G:return">"+$(t,e.indent)+Y(L(function(e,t){var n,r,a=/(\n+)([^\n]*)/g,i=(o=e.indexOf("\n"),o=-1!==o?o:e.length,a.lastIndex=o,Q(e.slice(0,o),t)),s="\n"===e[0]||" "===e[0];var o;for(;r=a.exec(e);){var l=r[1],u=r[2];n=" "===u[0],i+=l+(s||n||""===u?"":"\n")+Q(u,t),s=n}return i}(t,s),i));case W:return'"'+function(e){for(var t,n,r,a="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(n=e.charCodeAt(i+1))>=56320&&n<=57343?(a+=j(1024*(t-55296)+n-56320+65536),i++):a+=!(r=O[t])&&U(t)?e[i]:r||j(t);return a}(t)+'"';default:throw new a("impossible error: invalid scalar style")}}()}function $(e,t){var n=H(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function Y(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Q(e,t){if(""===e||" "===e[0])return e;for(var n,r,a=/ [^ ]/g,i=0,s=0,o=0,l="";n=a.exec(e);)(o=n.index)-i>t&&(r=s>i?s:o,l+="\n"+e.slice(i,r),i=r+1),s=o;return l+="\n",e.length-i>t&&s>i?l+=e.slice(i,s)+"\n"+e.slice(s+1):l+=e.slice(i),l.slice(1)}function Z(e,t,n){var r,i,s,u,c,d;for(s=0,u=(i=n?e.explicitTypes:e.implicitTypes).length;s<u;s+=1)if(((c=i[s]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(e.tag=n?c.tag:"?",c.represent){if(d=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===o.call(c.represent))r=c.represent(t,d);else{if(!l.call(c.represent,d))throw new a("!<"+c.tag+'> tag resolver accepts not "'+d+'" style');r=c.represent[d](t,d)}e.dump=r}return!0}return!1}function ee(e,t,n,r,i,s){e.tag=null,e.dump=n,Z(e,n,!1)||Z(e,n,!0);var l=o.call(e.dump);r&&(r=e.flowLevel<0||e.flowLevel>t);var u,d,p="[object Object]"===l||"[object Array]"===l;if(p&&(d=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(i=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(p&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,s,o,l,u,d,p="",h=e.tag,f=Object.keys(n);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new a("sortKeys must be a boolean or a function");for(i=0,s=f.length;i<s;i+=1)d="",r&&0===i||(d+=_(e,t)),l=n[o=f[i]],ee(e,t+1,o,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&c===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,u&&(d+=_(e,t)),ee(e,t+1,l,!0,u)&&(e.dump&&c===e.dump.charCodeAt(0)?d+=":":d+=": ",p+=d+=e.dump));e.tag=h,e.dump=p||"{}"}(e,t,e.dump,i),d&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,a,i,s,o,l="",u=e.tag,c=Object.keys(n);for(r=0,a=c.length;r<a;r+=1)o="",0!==r&&(o+=", "),e.condenseFlow&&(o+='"'),s=n[i=c[r]],ee(e,t,i,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ee(e,t,s,!1,!1)&&(l+=o+=e.dump));e.tag=u,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===l){var h=e.noArrayIndent&&t>0?t-1:t;r&&0!==e.dump.length?(!function(e,t,n,r){var a,i,s="",o=e.tag;for(a=0,i=n.length;a<i;a+=1)ee(e,t+1,n[a],!0,!0)&&(r&&0===a||(s+=_(e,t)),e.dump&&c===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=o,e.dump=s||"[]"}(e,h,e.dump,i),d&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,a,i="",s=e.tag;for(r=0,a=n.length;r<a;r+=1)ee(e,t,n[r],!1,!1)&&(0!==r&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=s,e.dump="["+i+"]"}(e,h,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump))}else{if("[object String]"!==l){if(e.skipInvalid)return!1;throw new a("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&V(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function te(e,t){var n,r,a=[],i=[];for(ne(e,a,i),n=0,r=i.length;n<r;n+=1)t.duplicates.push(a[i[n]]);t.usedDuplicates=new Array(r)}function ne(e,t,n){var r,a,i;if(null!==e&&"object"==typeof e)if(-1!==(a=t.indexOf(e)))-1===n.indexOf(a)&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,i=e.length;a<i;a+=1)ne(e[a],t,n);else for(a=0,i=(r=Object.keys(e)).length;a<i;a+=1)ne(e[r[a]],t,n)}function re(e,t){var n=new N(t=t||{});return n.noRefs||te(e,n),ee(n,0,e,!0,!0)?n.dump+"\n":""}e.exports.dump=re,e.exports.safeDump=function(e,t){return re(e,r.extend({schema:s},t))}},function(e,t,n){"use strict";var r=n(190),a=n(191),i=n(192),s=n(199),o=n(200),l=n(201),u=n(202);e.exports=function e(){var t=[],n=s(),y={},v=!1,b=-1;return k.data=function(e,t){if(o(e))return 2===arguments.length?(g("data",v),y[e]=t,k):d.call(y,e)&&y[e]||null;if(e)return g("data",v),y=e,k;return y},k.freeze=D,k.attachers=t,k.use=function(e){var n;if(g("use",v),null==e);else if(l(e))o.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?s(e):a(e)}n&&(y.settings=r(y.settings||{},n));return k;function a(e){s(e.plugins),e.settings&&(n=r(n||{},e.settings))}function i(e){if(l(e))o(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?o.apply(null,e):a(e)}}function s(e){var t,n;if(null==e);else{if("object"!=typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)i(e[n])}}function o(e,n){var a=S(e);a?(u(a[1])&&u(n)&&(n=r(a[1],n)),a[1]=n):t.push(c.call(arguments))}},k.parse=function(e){var t,n=i(e);if(D(),f("parse",t=k.Parser),h(t))return new t(String(n),n).parse();return t(String(n),n)},k.stringify=function(e,t){var n,r=i(t);if(D(),m("stringify",n=k.Compiler),E(e),h(n))return new n(e,r).compile();return n(e,r)},k.run=C,k.runSync=function(e,t){var n,r=!1;return C(e,t,i),x("runSync","run",r),n;function i(e,t){r=!0,a(e),n=t}},k.process=A,k.processSync=function(e){var t,n=!1;return D(),f("processSync",k.Parser),m("processSync",k.Compiler),A(t=i(e),r),x("processSync","process",n),t;function r(e){n=!0,a(e)}},k;function k(){for(var n=e(),a=t.length,i=-1;++i<a;)n.use.apply(null,t[i]);return n.data(r(!0,{},y)),n}function D(){var e,r,a,i;if(v)return k;for(;++b<t.length;)r=(e=t[b])[0],null,!1!==(a=e[1])&&(!0===a&&(e[1]=void 0),i=r.apply(k,e.slice(1)),l(i)&&n.use(i));return v=!0,b=1/0,k}function S(e){for(var n,r=t.length,a=-1;++a<r;)if((n=t[a])[0]===e)return n}function C(e,t,r){if(E(e),D(),!r&&l(t)&&(r=t,t=null),!r)return new Promise(a);function a(a,s){n.run(e,i(t),(function(t,n,i){n=n||e,t?s(t):a?a(n):r(null,n,i)}))}a(null,r)}function A(e,t){if(D(),f("process",k.Parser),m("process",k.Compiler),!t)return new Promise(n);function n(n,r){var a=i(e);p.run(k,{file:a},(function(e){e?r(e):n?n(a):t(null,a)}))}n(null,t)}}().freeze();var c=[].slice,d={}.hasOwnProperty,p=s().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,a){e?n(e):(t.tree=r,t.file=a,n())}))})).use((function(e,t){t.file.contents=e.stringify(t.tree,t.file)}));function h(e){return l(e)&&function(e){var t;for(t in e)return!0;return!1}(e.prototype)}function f(e,t){if(!l(t))throw new Error("Cannot `"+e+"` without `Parser`")}function m(e,t){if(!l(t))throw new Error("Cannot `"+e+"` without `Compiler`")}function g(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function E(e){if(!e||!o(e.type))throw new Error("Expected node, got `"+e+"`")}function x(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},function(e,t,n){e.exports=n(29)(3064)},function(e,t,n){e.exports=n(29)(3062)},function(e,t,n){"use strict";var r=n(193),a=n(195);e.exports=a;var i=a.prototype;function s(e,t,n){var a=this.path,i=new r(e,t,n);return a&&(i.name=a+":"+i.name,i.file=a),i.fatal=!1,this.messages.push(i),i}i.message=s,i.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},i.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e},i.warn=s},function(e,t,n){"use strict";var r=n(194);function a(){}e.exports=s,a.prototype=Error.prototype,s.prototype=new a;var i=s.prototype;function s(e,t,n){var a,i,s;"string"==typeof t&&(n=t,t=null),a=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),i=r(t)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(s=t,t=t.start):s.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=i,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=s,this.source=a[0],this.ruleId=a[1]}i.file="",i.name="",i.reason="",i.message="",i.stack="",i.fatal=null,i.column=null,i.line=null},function(e,t,n){"use strict";var r={}.hasOwnProperty;function a(e){return e&&"object"==typeof e||(e={}),s(e.line)+":"+s(e.column)}function i(e){return e&&"object"==typeof e||(e={}),a(e.start)+"-"+a(e.end)}function s(e){return e&&"number"==typeof e?e:1}e.exports=function(e){if(!e||"object"!=typeof e)return null;if(r.call(e,"position")||r.call(e,"type"))return i(e.position);if(r.call(e,"start")||r.call(e,"end"))return i(e);if(r.call(e,"line")||r.call(e,"column"))return a(e);return null}},function(e,t,n){"use strict";(function(t){var r=n(196),a=n(197),i=n(198);e.exports=u;var s={}.hasOwnProperty,o=u.prototype;o.toString=function(e){var t=this.contents||"";return i(t)?t.toString(e):String(t)};var l=["history","path","basename","stem","extname","dirname"];function u(e){var n,r,a;if(e){if("string"==typeof e||i(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof u))return new u(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),r=-1,a=l.length;++r<a;)n=l[r],s.call(e,n)&&(this[n]=e[n]);for(n in e)-1===l.indexOf(n)&&(this[n]=e[n])}function c(e,t){if(-1!==e.indexOf(r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+r.sep+"`")}function d(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function p(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}Object.defineProperty(o,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){d(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(o,"dirname",{get:function(){return"string"==typeof this.path?r.dirname(this.path):void 0},set:function(e){p(this.path,"dirname"),this.path=r.join(e||"",this.basename)}}),Object.defineProperty(o,"basename",{get:function(){return"string"==typeof this.path?r.basename(this.path):void 0},set:function(e){d(e,"basename"),c(e,"basename"),this.path=r.join(this.dirname||"",e)}}),Object.defineProperty(o,"extname",{get:function(){return"string"==typeof this.path?r.extname(this.path):void 0},set:function(e){var t=e||"";if(c(t,"extname"),p(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=a(this.path,t)}}),Object.defineProperty(o,"stem",{get:function(){return"string"==typeof this.path?r.basename(this.path,this.extname):void 0},set:function(e){d(e,"stem"),c(e,"stem"),this.path=r.join(this.dirname||"",e+(this.extname||""))}})}).call(this,n(50))},function(e,t,n){e.exports=n(29)(1346)},function(e,t,n){e.exports=n(29)(3071)},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){e.exports=n(29)(3066)},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return"[object String]"===n.call(e)}},function(e,t){e.exports=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===r.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";var r=n(204),a=n(91),i=n(205);function s(e){var t=r(i);t.prototype.options=a(t.prototype.options,this.data("settings"),e),this.Parser=t}e.exports=s,s.Parser=i},function(e,t,n){e.exports=n(29)(3073)},function(e,t,n){"use strict";var r=n(91),a=n(206),i=n(207),s=n(208),o=n(209),l=n(215);function u(e,t){this.file=t,this.offset={},this.options=r(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=i(t).toOffset,this.unescape=s(this,"escape"),this.decode=o(this)}e.exports=u;var c=u.prototype;function d(e){var t,n=[];for(t in e)n.push(t);return n}c.setOptions=n(216),c.parse=n(219),c.options=n(132),c.exitStart=a("atStart",!0),c.enterList=a("inList",!1),c.enterLink=a("inLink",!1),c.enterBlock=a("inBlock",!1),c.interruptParagraph=[["thematicBreak"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],c.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],c.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}],["footnote",{commonmark:!1}]],c.blockTokenizers={newline:n(223),indentedCode:n(224),fencedCode:n(225),blockquote:n(226),atxHeading:n(227),thematicBreak:n(228),list:n(229),setextHeading:n(231),html:n(232),footnote:n(233),definition:n(235),table:n(236),paragraph:n(237)},c.inlineTokenizers={escape:n(238),autoLink:n(240),url:n(241),html:n(243),link:n(245),reference:n(246),strong:n(247),emphasis:n(249),deletion:n(252),code:n(254),break:n(256),text:n(258)},c.blockMethods=d(c.blockTokenizers),c.inlineMethods=d(c.inlineTokenizers),c.tokenizeBlock=l("block"),c.tokenizeInline=l("inline"),c.tokenizeFactory=l},function(e,t,n){e.exports=n(29)(3076)},function(e,t,n){"use strict";function r(e){return function(t){var n=-1,r=e.length;if(t<0)return{};for(;++n<r;)if(e[n]>t)return{line:n+1,column:t-(e[n-1]||0)+1,offset:t};return{}}}function a(e){return function(t){var n=t&&t.line,r=t&&t.column;if(!isNaN(n)&&!isNaN(r)&&n-1 in e)return(e[n-2]||0)+r-1||0;return-1}}e.exports=function(e){var t=function(e){var t=[],n=e.indexOf("\n");for(;-1!==n;)t.push(n+1),n=e.indexOf("\n",n+1);return t.push(e.length+1),t}(String(e));return{toPosition:r(t),toOffset:a(t)}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(n){var r,a=0,i=n.indexOf("\\"),s=e[t],o=[];for(;-1!==i;)o.push(n.slice(a,i)),a=i+1,(r=n.charAt(a))&&-1!==s.indexOf(r)||o.push("\\"),i=n.indexOf("\\",a);return o.push(n.slice(a)),o.join("")}}},function(e,t,n){"use strict";var r=n(91),a=n(116);e.exports=function(e){return i.raw=function(e,i,s){return a(e,r(s,{position:t(i),warning:n}))},i;function t(t){for(var n=e.offset,r=t.line,a=[];++r&&r in n;)a.push((n[r]||0)+1);return{start:t,indent:a}}function n(t,n,r){3!==r&&e.file.message(t,n)}function i(r,i,s){a(r,{position:t(i),warning:n,text:s,reference:s,textContext:e,referenceContext:e})}}},function(e,t,n){e.exports=n(29)(2682)},function(e,t,n){e.exports=n(29)(2683)},function(e,t,n){e.exports=n(29)(2684)},function(e,t,n){e.exports=n(29)(2685)},function(e,t,n){"use strict";var r;e.exports=function(e){var t,n="&"+e+";";if((r=r||document.createElement("i")).innerHTML=n,";"===(t=r.textContent).slice(-1)&&"semi"!==e)return!1;return t!==n&&t}},function(e,t,n){"use strict";e.exports=function(e){return function(t,n){var i,s,o,l,u,c=this,d=c.offset,p=[],h=c[e+"Methods"],f=c[e+"Tokenizers"],m=n.line,g=n.column;if(!t)return p;S.now=y,S.file=c.file,E("");for(;t;){for(i=-1,s=h.length,l=!1;++i<s&&(!(o=f[h[i]])||o.onlyAtStart&&!c.atStart||o.notInList&&c.inList||o.notInBlock&&c.inBlock||o.notInLink&&c.inLink||(u=t.length,o.apply(c,[S,t]),!(l=u!==t.length))););l||c.file.fail(new Error("Infinite loop"),S.now())}return c.eof=y(),p;function E(e){for(var t=-1,n=e.indexOf("\n");-1!==n;)m++,t=n,n=e.indexOf("\n",n+1);-1===t?g+=e.length:g=e.length-t,m in d&&(-1!==t?g+=d[m]:g<=d[m]&&(g=d[m]+1))}function x(){var e=[],t=m+1;return function(){for(var n=m+1;t<n;)e.push((d[t]||0)+1),t++;return e}}function y(){var e={line:m,column:g};return e.offset=c.toOffset(e),e}function v(e){this.start=e,this.end=y()}function b(e){t.substring(0,e.length)!==e&&c.file.fail(new Error("Incorrectly eaten value: please report this warning on http://git.io/vg5Ft"),y())}function k(){var e=y();return t;function t(t,n){var r=t.position,a=r?r.start:e,i=[],s=r&&r.end.line,o=e.line;if(t.position=new v(a),r&&n&&r.indent){if(i=r.indent,s<o){for(;++s<o;)i.push((d[s]||0)+1);i.push(e.column)}n=i.concat(n)}return t.position.indent=n||[],t}}function D(e,t){var n=t?t.children:p,i=n[n.length-1];return i&&e.type===i.type&&e.type in r&&a(i)&&a(e)&&(e=r[e.type].call(c,i,e)),e!==i&&n.push(e),c.atStart&&0!==p.length&&c.exitStart(),e}function S(e){var n=x(),r=k(),a=y();return b(e),i.reset=s,s.test=o,i.test=o,t=t.substring(e.length),E(e),n=n(),i;function i(e,t){return r(D(r(e),t),n)}function s(){var n=i.apply(null,arguments);return m=a.line,g=a.column,t=e+t,n}function o(){var n=r({});return m=a.line,g=a.column,t=e+t,n.position}}}};var r={text:function(e,t){return e.value+=t.value,e},blockquote:function(e,t){if(this.options.commonmark)return t;return e.children=e.children.concat(t.children),e}};function a(e){var t,n;return"text"!==e.type||!e.position||(t=e.position.start,n=e.position.end,t.line!==n.line||n.column-t.column===e.value.length)}},function(e,t,n){"use strict";var r=n(91),a=n(217),i=n(132);e.exports=function(e){var t,n,s=this,o=s.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=r(e)}for(t in i){if(null==(n=e[t])&&(n=o[t]),"blocks"!==t&&"boolean"!=typeof n||"blocks"===t&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+t+"`");e[t]=n}return s.options=e,s.escape=a(e),s}},function(e,t,n){e.exports=n(29)(3082)},function(e){e.exports=JSON.parse('["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]')},function(e,t,n){"use strict";var r=n(91),a=n(220);e.exports=function(){var e,t=this,n=String(t.file),o={line:1,column:1,offset:0},l=r(o);65279===(n=n.replace(s,i)).charCodeAt(0)&&(n=n.slice(1),l.column++,l.offset++);e={type:"root",children:t.tokenizeBlock(n,l),position:{start:o,end:t.eof||r(o)}},t.options.position||a(e,!0);return e};var i="\n",s=/\r\n|\r/g},function(e,t,n){"use strict";var r=n(105);function a(e){delete e.position}function i(e){e.position=void 0}e.exports=function(e,t){return r(e,t?a:i),e}},function(e,t,n){"use strict";e.exports=o;var r=n(222),a=!0,i="skip",s=!1;function o(e,t,n,a){var o;function u(e,r,c){var d,p=[];return(t&&!o(e,r,c[c.length-1]||null)||(p=l(n(e,c)))[0]!==s)&&e.children&&p[0]!==i?(d=l(function(e,t){var n,r=-1,i=a?-1:1,o=(a?e.length:r)+i;for(;o>r&&o<e.length;){if((n=u(e[o],o,t))[0]===s)return n;o="number"==typeof n[1]?n[1]:o+i}}(e.children,c.concat(e))),d[0]===s?d:p):p}"function"==typeof t&&"function"!=typeof n&&(a=n,n=t,t=null),o=r(t),u(e,null,[])}function l(e){return null!==e&&"object"==typeof e&&"length"in e?e:"number"==typeof e?[a,e]:[e]}o.CONTINUE=a,o.SKIP=i,o.EXIT=s},function(e,t,n){"use strict";function r(e){if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if(null==e)return s;if("object"==typeof e)return("length"in e?i:a)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function a(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function i(e){var t=function(e){for(var t=[],n=e.length,a=-1;++a<n;)t[a]=r(e[a]);return t}(e),n=t.length;return function(){var e=-1;for(;++e<n;)if(t[e].apply(this,arguments))return!0;return!1}}function s(){return!0}e.exports=r},function(e,t,n){"use strict";var r=n(88);e.exports=function(e,t,n){var a,i,s,o,l=t.charAt(0);if("\n"!==l)return;if(n)return!0;o=1,a=t.length,i=l,s="";for(;o<a&&(l=t.charAt(o),r(l));)s+=l,"\n"===l&&(i+=s,s=""),o++;e(i)}},function(e,t,n){"use strict";var r=n(118),a=n(119);e.exports=function(e,t,n){var r,u,c,d=-1,p=t.length,h="",f="",m="",g="";for(;++d<p;)if(r=t.charAt(d),c)if(c=!1,h+=m,f+=g,m="",g="",r===i)m=r,g=r;else for(h+=r,f+=r;++d<p;){if(!(r=t.charAt(d))||r===i){g=r,m=r;break}h+=r,f+=r}else if(r===o&&t.charAt(d+1)===r&&t.charAt(d+2)===r&&t.charAt(d+3)===r)m+=l,d+=3,c=!0;else if(r===s)m+=r,c=!0;else{for(u="";r===s||r===o;)u+=r,r=t.charAt(++d);if(r!==i)break;m+=u+r,g+=r}if(f)return!!n||e(h)({type:"code",lang:null,value:a(f)})};var i="\n",s="\t",o=" ",l=r(o,4)},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var d,p,h,f,m,g,E,x,y,v,b,k=this,D=k.options,S=t.length+1,C=0,A="";if(!D.gfm)return;for(;C<S&&((h=t.charAt(C))===s||h===i);)A+=h,C++;if(v=C,(h=t.charAt(C))!==o&&h!==l)return;C++,p=h,d=1,A+=h;for(;C<S&&(h=t.charAt(C))===p;)A+=h,d++,C++;if(d<u)return;for(;C<S&&((h=t.charAt(C))===s||h===i);)A+=h,C++;f="",m="";for(;C<S&&(h=t.charAt(C))!==a&&h!==o&&h!==l;)h===s||h===i?m+=h:(f+=m+h,m=""),C++;if((h=t.charAt(C))&&h!==a)return;if(n)return!0;(b=e.now()).column+=A.length,b.offset+=A.length,A+=f,f=k.decode.raw(k.unescape(f),b),m&&(A+=m);m="",x="",y="",g="",E="";for(;C<S;)if(g+=x,E+=y,x="",y="",(h=t.charAt(C))===a){for(g?(x+=h,y+=h):A+=h,m="",C++;C<S&&(h=t.charAt(C))===s;)m+=h,C++;if(x+=m,y+=m.slice(v),!(m.length>=c)){for(m="";C<S&&(h=t.charAt(C))===p;)m+=h,C++;if(x+=m,y+=m,!(m.length<d)){for(m="";C<S&&((h=t.charAt(C))===s||h===i);)x+=h,y+=h,C++;if(!h||h===a)break}}}else g+=h,y+=h,C++;return e(A+=g+x)({type:"code",lang:f||null,value:r(E)})};var a="\n",i="\t",s=" ",o="~",l="`",u=3,c=4},function(e,t,n){"use strict";var r=n(96),a=n(120);e.exports=function(e,t,n){var u,c,d,p,h,f,m,g,E,x=this,y=x.offset,v=x.blockTokenizers,b=x.interruptBlockquote,k=e.now(),D=k.line,S=t.length,C=[],A=[],F=[],w=0;for(;w<S&&((c=t.charAt(w))===o||c===s);)w++;if(t.charAt(w)!==l)return;if(n)return!0;w=0;for(;w<S;){for(m=w,g=!1,-1===(p=t.indexOf(i,w))&&(p=S);w<S&&((c=t.charAt(w))===o||c===s);)w++;if(t.charAt(w)===l?(w++,g=!0,t.charAt(w)===o&&w++):w=m,h=t.slice(w,p),!g&&!r(h)){w=m;break}if(!g&&(d=t.slice(w),a(b,v,x,[e,d,!0])))break;f=m===w?h:t.slice(m,p),F.push(w-m),C.push(f),A.push(h),w=p+1}w=-1,S=F.length,u=e(C.join(i));for(;++w<S;)y[D]=(y[D]||0)+F[w],D++;return E=x.enterBlock(),A=x.tokenizeBlock(A.join(i),k),E(),u({type:"blockquote",children:A})};var i="\n",s="\t",o=" ",l=">"},function(e,t,n){"use strict";e.exports=function(e,t,n){var l,u,c,d=this.options,p=t.length+1,h=-1,f=e.now(),m="",g="";for(;++h<p;){if((l=t.charAt(h))!==i&&l!==a){h--;break}m+=l}c=0;for(;++h<=p;){if((l=t.charAt(h))!==s){h--;break}m+=l,c++}if(c>o)return;if(!c||!d.pedantic&&t.charAt(h+1)===s)return;p=t.length+1,u="";for(;++h<p;){if((l=t.charAt(h))!==i&&l!==a){h--;break}u+=l}if(!d.pedantic&&0===u.length&&l&&l!==r)return;if(n)return!0;m+=u,u="",g="";for(;++h<p&&(l=t.charAt(h))&&l!==r;)if(l===i||l===a||l===s){for(;l===i||l===a;)u+=l,l=t.charAt(++h);for(;l===s;)u+=l,l=t.charAt(++h);for(;l===i||l===a;)u+=l,l=t.charAt(++h);h--}else g+=u+l,u="";return f.column+=m.length,f.offset+=m.length,e(m+=g+u)({type:"heading",depth:c,children:this.tokenizeInline(g,f)})};var r="\n",a="\t",i=" ",s="#",o=6},function(e,t,n){"use strict";e.exports=function(e,t,n){var c,d,p,h,f=-1,m=t.length+1,g="";for(;++f<m&&((c=t.charAt(f))===a||c===i);)g+=c;if(c!==s&&c!==l&&c!==o)return;d=c,g+=c,p=1,h="";for(;++f<m;)if((c=t.charAt(f))===d)p++,g+=h+d,h="";else{if(c!==i)return p>=u&&(!c||c===r)?(g+=h,!!n||e(g)({type:"thematicBreak"})):void 0;h+=c}};var r="\n",a="\t",i=" ",s="*",o="_",l="-",u=3},function(e,t,n){"use strict";var r=n(96),a=n(118),i=n(117),s=n(133),o=n(230),l=n(120);e.exports=function(e,t,n){var a,s,o,m,E,x,y,v,b,A,F,w,M,T,I,P,O,B,j,N,L,_,z,U,R=this,H=R.options.commonmark,X=R.options.pedantic,J=R.blockTokenizers,K=R.interruptList,G=0,W=t.length,q=null,V=0;for(;G<W;){if((m=t.charAt(G))===f)V+=g-V%g;else{if(m!==p)break;V++}G++}if(V>=g)return;if(m=t.charAt(G),a=H?S:D,!0===k[m])E=m,o=!1;else{for(o=!0,s="";G<W&&(m=t.charAt(G),i(m));)s+=m,G++;if(m=t.charAt(G),!s||!0!==a[m])return;q=parseInt(s,10),E=m}if((m=t.charAt(++G))!==p&&m!==f)return;if(n)return!0;G=0,T=[],I=[],P=[];for(;G<W;){for(y=G,v=!1,U=!1,-1===(x=t.indexOf(h,G))&&(x=W),z=G+g,V=0;G<W;){if((m=t.charAt(G))===f)V+=g-V%g;else{if(m!==p)break;V++}G++}if(V>=g&&(U=!0),O&&V>=O.indent&&(U=!0),m=t.charAt(G),b=null,!U){if(!0===k[m])b=m,G++,V++;else{for(s="";G<W&&(m=t.charAt(G),i(m));)s+=m,G++;m=t.charAt(G),G++,s&&!0===a[m]&&(b=m,V+=s.length+1)}if(b)if((m=t.charAt(G))===f)V+=g-V%g,G++;else if(m===p){for(z=G+g;G<z&&t.charAt(G)===p;)G++,V++;G===z&&t.charAt(G)===p&&(G-=g-1,V-=g-1)}else m!==h&&""!==m&&(b=null)}if(b){if(!X&&E!==b)break;v=!0}else H||U||t.charAt(y)!==p?H&&O&&(U=V>=O.indent||V>g):U=!0,v=!1,G=y;if(F=t.slice(y,x),A=y===G?F:t.slice(G,x),(b===u||b===c||b===d)&&J.thematicBreak.call(R,e,F,!0))break;if(w=M,M=!r(A).length,U&&O)O.value=O.value.concat(P,F),I=I.concat(P,F),P=[];else if(v)0!==P.length&&(O.value.push(""),O.trail=P.concat()),O={value:[F],indent:V,trail:[]},T.push(O),I=I.concat(P,F),P=[];else if(M){if(w)break;P.push(F)}else{if(w)break;if(l(K,J,R,[e,F,!0]))break;O.value=O.value.concat(P,F),I=I.concat(P,F),P=[]}G=x+1}L=e(I.join(h)).reset({type:"list",ordered:o,start:q,loose:null,children:[]}),B=R.enterList(),j=R.enterBlock(),N=!1,G=-1,W=T.length;for(;++G<W;)O=T[G].value.join(h),_=e.now(),(O=e(O)(C(R,O,_),L)).loose&&(N=!0),O=T[G].trail.join(h),G!==W-1&&(O+=h),e(O);return B(),j(),L.loose=N,L};var u="*",c="_",d="-",p=" ",h="\n",f="\t",m="x",g=4,E=/\n\n(?!\s*$)/,x=/^\[([ \t]|x|X)][ \t]/,y=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,v=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,b=/^( {1,4}|\t)?/gm,k={};k[u]=!0,k["+"]=!0,k[d]=!0;var D={".":!0},S={};function C(e,t,n){var r,a,i=e.offset,s=null;return t=(e.options.pedantic?A:F).apply(null,arguments),e.options.gfm&&(r=t.match(x))&&(a=r[0].length,s=r[1].toLowerCase()===m,i[n.line]+=a,t=t.slice(a)),{type:"listItem",loose:E.test(t)||t.charAt(t.length-1)===h,checked:s,children:e.tokenizeBlock(t,n)}}function A(e,t,n){var r=e.offset,a=n.line;return t=t.replace(v,i),a=n.line,t.replace(b,i);function i(e){return r[a]=(r[a]||0)+e.length,a++,""}}function F(e,t,n){var r,i,l,u,c,d,f,m=e.offset,g=n.line;for(u=(t=t.replace(y,(function(e,t,n,s,o){i=t+n+s,l=o,Number(n)<10&&i.length%2==1&&(n=p+n);return(r=t+a(p,n.length)+s)+l}))).split(h),(c=o(t,s(r).indent).split(h))[0]=l,m[g]=(m[g]||0)+i.length,g++,d=0,f=u.length;++d<f;)m[g]=(m[g]||0)+u[d].length-c[d].length,g++;return c.join(h)}S["."]=!0,S[")"]=!0},function(e,t,n){"use strict";var r=n(96),a=n(118),i=n(133);e.exports=function(e,t){var n,u,c,d,p=e.split(o),h=p.length+1,f=1/0,m=[];p.unshift(a(s,t)+"!");for(;h--;)if(u=i(p[h]),m[h]=u.stops,0!==r(p[h]).length){if(!u.indent){f=1/0;break}u.indent>0&&u.indent<f&&(f=u.indent)}if(f!==1/0)for(h=p.length;h--;){for(c=m[h],n=f;n&&!(n in c);)n--;d=0!==r(p[h]).length&&f&&n!==f?l:"",p[h]=d+p[h].slice(n in c?c[n]+1:0)}return p.shift(),p.join(o)};var s=" ",o="\n",l="\t"},function(e,t,n){"use strict";e.exports=function(e,t,n){var l,u,c,d,p,h=e.now(),f=t.length,m=-1,g="";for(;++m<f;){if((c=t.charAt(m))!==i||m>=s){m--;break}g+=c}l="",u="";for(;++m<f;){if((c=t.charAt(m))===r){m--;break}c===i||c===a?u+=c:(l+=u+c,u="")}if(h.column+=g.length,h.offset+=g.length,g+=l+u,c=t.charAt(++m),d=t.charAt(++m),c!==r||!o[d])return;g+=c,u=d,p=o[d];for(;++m<f;){if((c=t.charAt(m))!==d){if(c!==r)return;m--;break}u+=c}if(n)return!0;return e(g+u)({type:"heading",depth:p,children:this.tokenizeInline(l,h)})};var r="\n",a="\t",i=" ",s=3,o={};o["="]=1,o["-"]=2},function(e,t,n){"use strict";var r=n(134).openCloseTag;e.exports=function(e,t,n){var l,u,c,d,p,h,f,m=this.options.blocks,g=t.length,E=0,x=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Za-z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+m.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(r.source+"\\s*$"),/^$/,!1]];for(;E<g&&((d=t.charAt(E))===a||d===i);)E++;if(t.charAt(E)!==o)return;l=-1===(l=t.indexOf(s,E+1))?g:l,u=t.slice(E,l),c=-1,p=x.length;for(;++c<p;)if(x[c][0].test(u)){h=x[c];break}if(!h)return;if(n)return h[2];if(E=l,!h[1].test(u))for(;E<g;){if(l=-1===(l=t.indexOf(s,E+1))?g:l,u=t.slice(E+1,l),h[1].test(u)){u&&(E=l);break}E=l}return f=t.slice(0,E),e(f)({type:"html",value:f})};var a="\t",i=" ",s="\n",o="<"},function(e,t,n){"use strict";var r=n(88),a=n(121);e.exports=f,f.notInList=!0,f.notInBlock=!0;var i="\\",s="\n",o="\t",l=" ",u="[",c="]",d="^",p=":",h=/^( {4}|\t)?/gm;function f(e,t,n){var f,m,g,E,x,y,v,b,k,D,S,C,A=this,F=A.offset;if(A.options.footnotes){for(f=0,m=t.length,g="",E=e.now(),x=E.line;f<m&&(k=t.charAt(f),r(k));)g+=k,f++;if(t.charAt(f)===u&&t.charAt(f+1)===d){for(f=(g+=u+d).length,v="";f<m&&(k=t.charAt(f))!==c;)k===i&&(v+=k,f++,k=t.charAt(f)),v+=k,f++;if(v&&t.charAt(f)===c&&t.charAt(f+1)===p){if(n)return!0;for(D=a(v),f=(g+=v+c+p).length;f<m&&((k=t.charAt(f))===o||k===l);)g+=k,f++;for(E.column+=g.length,E.offset+=g.length,v="",y="",b="";f<m;){if((k=t.charAt(f))===s){for(b=k,f++;f<m&&(k=t.charAt(f))===s;)b+=k,f++;for(v+=b,b="";f<m&&(k=t.charAt(f))===l;)b+=k,f++;if(0===b.length)break;v+=b}v&&(y+=v,v=""),y+=k,f++}return g+=y,y=y.replace(h,(function(e){return F[x]=(F[x]||0)+e.length,x++,""})),S=e(g),C=A.enterBlock(),y=A.tokenizeBlock(y,E),C(),S({type:"footnoteDefinition",identifier:D,children:y})}}}}},function(e,t,n){e.exports=n(29)(3099)},function(e,t,n){"use strict";var r=n(88),a=n(121);e.exports=x,x.notInList=!0,x.notInBlock=!0;var i='"',s="'",o="\\",l="\n",u="\t",c=" ",d="[",p="]",h="(",f=")",m=":",g="<",E=">";function x(e,t,n){for(var r,E,x,b,k,D,S,C,A=this,F=A.options.commonmark,w=0,M=t.length,T="";w<M&&((b=t.charAt(w))===c||b===u);)T+=b,w++;if((b=t.charAt(w))===d){for(w++,T+=b,x="";w<M&&(b=t.charAt(w))!==p;)b===o&&(x+=b,w++,b=t.charAt(w)),x+=b,w++;if(x&&t.charAt(w)===p&&t.charAt(w+1)===m){for(D=x,w=(T+=x+p+m).length,x="";w<M&&((b=t.charAt(w))===u||b===c||b===l);)T+=b,w++;if(x="",r=T,(b=t.charAt(w))===g){for(w++;w<M&&y(b=t.charAt(w));)x+=b,w++;if((b=t.charAt(w))===y.delimiter)T+=g+x+b,w++;else{if(F)return;w-=x.length+1,x=""}}if(!x){for(;w<M&&v(b=t.charAt(w));)x+=b,w++;T+=x}if(x){for(S=x,x="";w<M&&((b=t.charAt(w))===u||b===c||b===l);)x+=b,w++;if(k=null,(b=t.charAt(w))===i?k=i:b===s?k=s:b===h&&(k=f),k){if(!x)return;for(w=(T+=x+b).length,x="";w<M&&(b=t.charAt(w))!==k;){if(b===l){if(w++,(b=t.charAt(w))===l||b===k)return;x+=l}x+=b,w++}if((b=t.charAt(w))!==k)return;E=T,T+=x+b,w++,C=x,x=""}else x="",w=T.length;for(;w<M&&((b=t.charAt(w))===u||b===c);)T+=b,w++;return(b=t.charAt(w))&&b!==l?void 0:!!n||(r=e(r).test().end,S=A.decode.raw(A.unescape(S),r,{nonTerminated:!1}),C&&(E=e(E).test().end,C=A.decode.raw(A.unescape(C),E)),e(T)({type:"definition",identifier:a(D),title:C||null,url:S}))}}}}function y(e){return e!==E&&e!==d&&e!==p}function v(e){return e!==d&&e!==p&&!r(e)}y.delimiter=E},function(e,t,n){"use strict";var r=n(88);e.exports=function(e,t,n){var x,y,v,b,k,D,S,C,A,F,w,M,T,I,P,O,B,j,N,L,_,z,U,R;if(!this.options.gfm)return;x=0,j=0,D=t.length+1,S=[];for(;x<D;){if(z=t.indexOf(c,x),U=t.indexOf(o,x+1),-1===z&&(z=t.length),-1===U||U>z){if(j<h)return;break}S.push(t.slice(x,z)),j++,x=z+1}b=S.join(c),y=S.splice(1,1)[0]||[],x=0,D=y.length,j--,v=!1,w=[];for(;x<D;){if((A=y.charAt(x))===o){if(F=null,!1===v){if(!1===R)return}else w.push(v),v=!1;R=!1}else if(A===s)F=!0,v=v||E;else if(A===l)v=v===f?m:F&&v===E?g:f;else if(!r(A))return;x++}!1!==v&&w.push(v);if(w.length<p)return;if(n)return!0;B=-1,L=[],_=e(b).reset({type:"table",align:w,children:L});for(;++B<j;){for(N=S[B],k={type:"tableRow",children:[]},B&&e(c),e(N).reset(k,_),D=N.length+1,x=0,C="",M="",T=!0,I=null,P=null;x<D;)if((A=N.charAt(x))!==d&&A!==u){if(""===A||A===o)if(T)e(A);else{if(A&&P){C+=A,x++;continue}!M&&!A||T||(b=M,C.length>1&&(A?(b+=C.slice(0,C.length-1),C=C.charAt(C.length-1)):(b+=C,C="")),O=e.now(),e(b)({type:"tableCell",children:this.tokenizeInline(M,O)},k)),e(C+A),C="",M=""}else if(C&&(M+=C,C=""),M+=A,A===a&&x!==D-2&&(M+=N.charAt(x+1),x++),A===i){for(I=1;N.charAt(x+1)===A;)M+=A,x++,I++;P?I>=P&&(P=0):P=I}T=!1,x++}else M?C+=A:e(A),x++;B||e(c+y)}return _};var a="\\",i="`",s="-",o="|",l=":",u=" ",c="\n",d="\t",p=1,h=2,f="left",m="center",g="right",E=null},function(e,t,n){"use strict";var r=n(96),a=n(117),i=n(119),s=n(120);e.exports=function(e,t,n){var d,p,h,f,m,g=this,E=g.options,x=E.commonmark,y=E.gfm,v=g.blockTokenizers,b=g.interruptParagraph,k=t.indexOf(o),D=t.length;for(;k<D;){if(-1===k){k=D;break}if(t.charAt(k+1)===o)break;if(x){for(f=0,d=k+1;d<D;){if((h=t.charAt(d))===l){f=c;break}if(h!==u)break;f++,d++}if(f>=c){k=t.indexOf(o,k+1);continue}}if(p=t.slice(k+1),s(b,v,g,[e,p,!0]))break;if(v.list.call(g,e,p,!0)&&(g.inList||x||y&&!a(r.left(p).charAt(0))))break;if(d=k,-1!==(k=t.indexOf(o,k+1))&&""===r(t.slice(d,k))){k=d;break}}if(p=t.slice(0,k),""===r(p))return e(p),null;if(n)return!0;return m=e.now(),p=i(p),e(p)({type:"paragraph",children:g.tokenizeInline(p,m)})};var o="\n",l="\t",u=" ",c=4},function(e,t,n){"use strict";var r=n(239);function a(e,t,n){var r,a;if("\\"===t.charAt(0)&&(r=t.charAt(1),-1!==this.escape.indexOf(r)))return!!n||(a="\n"===r?{type:"break"}:{type:"text",value:r},e("\\"+r)(a))}e.exports=a,a.locator=r},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("\\",t)}},function(e,t,n){"use strict";var r=n(88),a=n(116),i=n(135);e.exports=p,p.locator=i,p.notInLink=!0;var s="<",o=">",l="@",u="/",c="mailto:",d=c.length;function p(e,t,n){var i,p,h,f,m,g,E,x,y,v,b,k;if(t.charAt(0)===s){for(i=this,p="",h=t.length,f=0,m="",E=!1,x="",f++,p=s;f<h&&(g=t.charAt(f),!(r(g)||g===o||g===l||":"===g&&t.charAt(f+1)===u));)m+=g,f++;if(m){if(x+=m,m="",x+=g=t.charAt(f),f++,g===l)E=!0;else{if(":"!==g||t.charAt(f+1)!==u)return;x+=u,f++}for(;f<h&&(g=t.charAt(f),!r(g)&&g!==o);)m+=g,f++;if(g=t.charAt(f),m&&g===o)return!!n||(v=x+=m,p+=x+g,(y=e.now()).column++,y.offset++,E&&(x.slice(0,d).toLowerCase()===c?(v=v.substr(d),y.column+=d,y.offset+=d):x=c+x),b=i.inlineTokenizers,i.inlineTokenizers={text:b.text},k=i.enterLink(),v=i.tokenizeInline(v,y),i.inlineTokenizers=b,k(),e(p)({type:"link",title:null,url:a(x,{nonTerminated:!1}),children:v}))}}}},function(e,t,n){"use strict";var r=n(116),a=n(88),i=n(242);e.exports=m,m.locator=i,m.notInLink=!0;var s="[",o="]",l="(",u=")",c="<",d="@",p="mailto:",h=["http://","https://",p],f=h.length;function m(e,t,n){var i,m,g,E,x,y,v,b,k,D,S,C,A=this;if(A.options.gfm){for(i="",E=-1,b=f;++E<b;)if(y=h[E],(v=t.slice(0,y.length)).toLowerCase()===y){i=v;break}if(i){for(E=i.length,b=t.length,k="",D=0;E<b&&(g=t.charAt(E),!a(g)&&g!==c)&&("."!==g&&","!==g&&":"!==g&&";"!==g&&'"'!==g&&"'"!==g&&")"!==g&&"]"!==g||(S=t.charAt(E+1))&&!a(S))&&(g!==l&&g!==s||D++,g!==u&&g!==o||!(--D<0));)k+=g,E++;if(k){if(m=i+=k,y===p){if(-1===(x=k.indexOf(d))||x===b-1)return;m=m.substr(p.length)}return!!n||(C=A.enterLink(),m=A.tokenizeInline(m,e.now()),C(),e(i)({type:"link",title:null,url:r(i,{nonTerminated:!1}),children:m}))}}}}},function(e,t,n){"use strict";e.exports=function(e,t){var n,a=r.length,i=-1,s=-1;if(!this.options.gfm)return-1;for(;++i<a;)-1!==(n=e.indexOf(r[i],t))&&(n<s||-1===s)&&(s=n);return s};var r=["https://","http://","mailto:"]},function(e,t,n){"use strict";var r=n(244),a=n(135),i=n(134).tag;e.exports=l,l.locator=a;var s=/^<a /i,o=/^<\/a>/i;function l(e,t,n){var a,l,u=this,c=t.length;if(!("<"!==t.charAt(0)||c<3)&&(a=t.charAt(1),(r(a)||"?"===a||"!"===a||"/"===a)&&(l=t.match(i))))return!!n||(l=l[0],!u.inLink&&s.test(l)?u.inLink=!0:u.inLink&&o.test(l)&&(u.inLink=!1),e(l)({type:"html",value:l}))}},function(e,t,n){e.exports=n(29)(516)},function(e,t,n){"use strict";var r=n(88),a=n(136);e.exports=x,x.locator=a;var i={}.hasOwnProperty,s="\\",o="[",l="]",u="(",c=")",d="<",p=">",h="`",f='"',m="'",g={};g[f]=f,g[m]=m;var E={};function x(e,t,n){var a,f,m,x,y,v,b,k,D,S,C,A,F,w,M,T,I,P,O,B=this,j="",N=0,L=t.charAt(0),_=B.options.pedantic,z=B.options.commonmark,U=B.options.gfm;if("!"===L&&(D=!0,j=L,L=t.charAt(++N)),L===o&&(D||!B.inLink)){for(j+=L,M="",N++,A=t.length,w=0,(I=e.now()).column+=N,I.offset+=N;N<A;){if(v=L=t.charAt(N),L===h){for(f=1;t.charAt(N+1)===h;)v+=L,N++,f++;m?f>=m&&(m=0):m=f}else if(L===s)N++,v+=t.charAt(N);else if(m&&!U||L!==o){if((!m||U)&&L===l){if(!w){if(!_)for(;N<A&&(L=t.charAt(N+1),r(L));)v+=L,N++;if(t.charAt(N+1)!==u)return;v+=u,a=!0,N++;break}w--}}else w++;M+=v,v="",N++}if(a){for(S=M,j+=M+v,N++;N<A&&(L=t.charAt(N),r(L));)j+=L,N++;if(L=t.charAt(N),k=z?E:g,M="",x=j,L===d){for(N++,x+=d;N<A&&(L=t.charAt(N))!==p;){if(z&&"\n"===L)return;M+=L,N++}if(t.charAt(N)!==p)return;j+=d+M+p,T=M,N++}else{for(L=null,v="";N<A&&(L=t.charAt(N),!v||!i.call(k,L));){if(r(L)){if(!_)break;v+=L}else{if(L===u)w++;else if(L===c){if(0===w)break;w--}M+=v,v="",L===s&&(M+=s,L=t.charAt(++N)),M+=L}N++}T=M,N=(j+=M).length}for(M="";N<A&&(L=t.charAt(N),r(L));)M+=L,N++;if(L=t.charAt(N),j+=M,M&&i.call(k,L))if(N++,j+=L,M="",C=k[L],y=j,z){for(;N<A&&(L=t.charAt(N))!==C;)L===s&&(M+=s,L=t.charAt(++N)),N++,M+=L;if((L=t.charAt(N))!==C)return;for(F=M,j+=M+L,N++;N<A&&(L=t.charAt(N),r(L));)j+=L,N++}else for(v="";N<A;){if((L=t.charAt(N))===C)b&&(M+=C+v,v=""),b=!0;else if(b){if(L===c){j+=M+C+v,F=M;break}r(L)?v+=L:(M+=C+v+L,v="",b=!1)}else M+=L;N++}if(t.charAt(N)===c)return!!n||(j+=c,T=B.decode.raw(B.unescape(T),e(x).test().end,{nonTerminated:!1}),F&&(y=e(y).test().end,F=B.decode.raw(B.unescape(F),y)),O={type:D?"image":"link",title:F||null,url:T},D?O.alt=B.decode.raw(B.unescape(S),I)||null:(P=B.enterLink(),O.children=B.tokenizeInline(S,I),P()),e(j)(O))}}}E[f]=f,E[m]=m,E[u]=c},function(e,t,n){"use strict";var r=n(88),a=n(136),i=n(121);e.exports=g,g.locator=a;var s="link",o="image",l="footnote",u="shortcut",c="collapsed",d="full",p="^",h="\\",f="[",m="]";function g(e,t,n){var a,g,E,x,y,v,b,k,D=this,S=t.charAt(0),C=0,A=t.length,F="",w="",M=s,T=u;if("!"===S&&(M=o,w=S,S=t.charAt(++C)),S===f){if(C++,w+=S,v="",D.options.footnotes&&t.charAt(C)===p){if(M===o)return;w+=p,C++,M=l}for(k=0;C<A;){if((S=t.charAt(C))===f)b=!0,k++;else if(S===m){if(!k)break;k--}S===h&&(v+=h,S=t.charAt(++C)),v+=S,C++}if(F=v,a=v,(S=t.charAt(C))===m){for(C++,F+=S,v="";C<A&&(S=t.charAt(C),r(S));)v+=S,C++;if(S=t.charAt(C),M!==l&&S===f){for(g="",v+=S,C++;C<A&&(S=t.charAt(C))!==f&&S!==m;)S===h&&(g+=h,S=t.charAt(++C)),g+=S,C++;(S=t.charAt(C))===m?(T=g?d:c,v+=g+S,C++):g="",F+=v,v=""}else{if(!a)return;g=a}if(T===d||!b)return F=w+F,M===s&&D.inLink?null:!!n||(M===l&&-1!==a.indexOf(" ")?e(F)({type:"footnote",children:this.tokenizeInline(a,e.now())}):((E=e.now()).column+=w.length,E.offset+=w.length,x={type:M+"Reference",identifier:i(g=T===d?g:a)},M!==s&&M!==o||(x.referenceType=T),M===s?(y=D.enterLink(),x.children=D.tokenizeInline(a,E),y()):M===o&&(x.alt=D.decode.raw(D.unescape(a),E)||null),e(F)(x)))}}}},function(e,t,n){"use strict";var r=n(96),a=n(88),i=n(248);e.exports=l,l.locator=i;var s="*",o="_";function l(e,t,n){var i,l,u,c,d,p,h,f=0,m=t.charAt(f);if(!(m!==s&&m!==o||t.charAt(++f)!==m||(l=this.options.pedantic,d=(u=m)+u,p=t.length,f++,c="",m="",l&&a(t.charAt(f)))))for(;f<p;){if(h=m,!((m=t.charAt(f))!==u||t.charAt(f+1)!==u||l&&a(h))&&(m=t.charAt(f+2))!==u){if(!r(c))return;return!!n||((i=e.now()).column+=2,i.offset+=2,e(d+c+d)({type:"strong",children:this.tokenizeInline(c,i)}))}l||"\\"!==m||(c+=m,m=t.charAt(++f)),c+=m,f++}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("**",t),r=e.indexOf("__",t);if(-1===r)return n;if(-1===n)return r;return r<n?r:n}},function(e,t,n){"use strict";var r=n(96),a=n(250),i=n(88),s=n(251);e.exports=u,u.locator=s;var o="*",l="_";function u(e,t,n){var s,u,c,d,p,h,f,m=0,g=t.charAt(m);if(!(g!==o&&g!==l||(u=this.options.pedantic,p=g,c=g,h=t.length,m++,d="",g="",u&&i(t.charAt(m)))))for(;m<h;){if(f=g,!((g=t.charAt(m))!==c||u&&i(f))){if((g=t.charAt(++m))!==c){if(!r(d)||f===c)return;if(!u&&c===l&&a(g)){d+=c;continue}return!!n||((s=e.now()).column++,s.offset++,e(p+d+c)({type:"emphasis",children:this.tokenizeInline(d,s)}))}d+=c}u||"\\"!==g||(d+=g,g=t.charAt(++m)),d+=g,m++}}},function(e,t,n){e.exports=n(29)(3116)},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("*",t),r=e.indexOf("_",t);if(-1===r)return n;if(-1===n)return r;return r<n?r:n}},function(e,t,n){"use strict";var r=n(88),a=n(253);e.exports=o,o.locator=a;var i="~",s="~~";function o(e,t,n){var a,o,l,u="",c="",d="",p="";if(this.options.gfm&&t.charAt(0)===i&&t.charAt(1)===i&&!r(t.charAt(2)))for(a=1,o=t.length,(l=e.now()).column+=2,l.offset+=2;++a<o;){if(!((u=t.charAt(a))!==i||c!==i||d&&r(d)))return!!n||e(s+p+s)({type:"delete",children:this.tokenizeInline(p,l)});p+=c,d=c,c=u}}},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("~~",t)}},function(e,t,n){"use strict";var r=n(88),a=n(255);e.exports=s,s.locator=a;var i="`";function s(e,t,n){for(var a,s,o,l,u,c,d,p,h=t.length,f=0,m="",g="";f<h&&t.charAt(f)===i;)m+=i,f++;if(m){for(u=m,l=f,m="",p=t.charAt(f),o=0;f<h;){if(c=p,p=t.charAt(f+1),c===i?(o++,g+=c):(o=0,m+=c),o&&p!==i){if(o===l){u+=m+g,d=!0;break}m+=g,g=""}f++}if(!d){if(l%2!=0)return;m=""}if(n)return!0;for(a="",s="",h=m.length,f=-1;++f<h;)c=m.charAt(f),r(c)?s+=c:(s&&(a&&(a+=s),s=""),a+=c);return e(u)({type:"inlineCode",value:a})}}},function(e,t,n){"use strict";e.exports=function(e,t){return e.indexOf("`",t)}},function(e,t,n){"use strict";var r=n(257);e.exports=i,i.locator=r;var a=2;function i(e,t,n){for(var r,i=t.length,s=-1,o="";++s<i;){if("\n"===(r=t.charAt(s))){if(s<a)return;return!!n||e(o+=r)({type:"break"})}if(" "!==r)return;o+=r}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.indexOf("\n",t);for(;n>t&&" "===e.charAt(n-1);)n--;return n}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,i,s,o,l,u,c,d,p,h=this;if(n)return!0;r=h.inlineMethods,s=r.length,a=h.inlineTokenizers,i=-1,d=t.length;for(;++i<s;)"text"!==(c=r[i])&&a[c]&&((u=a[c].locator)||e.file.fail("Missing locator: `"+c+"`"),-1!==(l=u.call(h,t,1))&&l<d&&(d=l));o=t.slice(0,d),p=e.now(),h.decode(o,p,(function(t,n,r){e(r||t)({type:"text",value:t})}))}},function(e,t,n){e.exports=n(29)(7)},function(e,t,n){var r=n(261);e.exports=function(){return function(e){return r(e,"list",(function(e,t){var n,r,a=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(a+=1);for(n=0,r=e.children.length;n<r;n++){var i=e.children[n];i.index=n,i.ordered=e.ordered}e.depth=a})),e}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=[];"function"==typeof t&&(n=t,t=null);function a(e){var i;return t&&e.type!==t||(i=n(e,r.concat())),e.children&&!1!==i?function(e,t){var n,i=e.length,s=-1;r.push(t);for(;++s<i;)if((n=e[s])&&!1===a(n))return!1;return r.pop(),!0}(e.children,e):i}a(e)}},function(e,t,n){"use strict";var r=n(105),a="virtualHtml",i=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,s=/^<(\/?)([a-z]+)\s*>$/;e.exports=function(e){var t,n;return r(e,"html",(function(e,r,o){n!==o&&(t=[],n=o);var l=function(e){var t=e.value.match(i);return!!t&&t[1]}(e);if(l)return o.children.splice(r,1,{type:a,tag:l,position:e.position}),!0;var u=function(e,t){var n=e.value.match(s);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!u)return!0;var c=function(e,t){var n=e.length;for(;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,u.tag);return c?o.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),i=n.children.indexOf(t.node),s=n.children.splice(r,i-r+1),o=s.slice(1,-1);return{type:a,children:o,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(u,c,o)):u.opening||t.push(u),!0}),!0),e}},function(e,t,n){"use strict";var r=n(105);function a(e,t,n,r){if("remove"===r)n.children.splice(t,1);else if("unwrap"===r){var a=[t,1];e.children&&(a=a.concat(e.children)),Array.prototype.splice.apply(n.children,a)}}t.ofType=function(e,t){return function(t){return e.forEach((function(e){return r(t,e,n,!0)})),t};function n(e,n,r){r&&a(e,n,r,t)}},t.ifNotMatch=function(e,t){return function(e){return r(e,n,!0),e};function n(n,r,i){i&&!e(n,r,i)&&a(n,r,i,t)}}},function(e,t,n){"use strict";var r=n(0),a=n(91),i=n(265),s={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=t.renderers[e.type];void 0===e.position&&(e.position=n.node&&n.node.position||s);var d=e.position.start,p=[e.type,d.line,d.column,u].join("-");if(!i.isValidElementType(c))throw new Error("Renderer for type `".concat(e.type,"` not defined or is not renderable"));var h=function(e,t,n,i,s,u){var c={key:t},d="string"==typeof i;n.sourcePos&&e.position&&(c["data-sourcepos"]=function(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}(e.position));n.rawSourcePos&&!d&&(c.sourcePosition=e.position);n.includeNodeIndex&&s.node&&s.node.children&&!d&&(c.index=s.node.children.indexOf(e),c.parentChildCount=s.node.children.length);var p=null!==e.identifier&&void 0!==e.identifier?n.definitions[e.identifier]||{}:null;switch(e.type){case"root":l(c,{className:n.className});break;case"text":c.nodeKey=t,c.children=e.value;break;case"heading":c.level=e.depth;break;case"list":c.start=e.start,c.ordered=e.ordered,c.tight=!e.loose,c.depth=e.depth;break;case"listItem":c.checked=e.checked,c.tight=!e.loose,c.ordered=e.ordered,c.index=e.index,c.children=function(e,t){if(e.loose)return e.children;if(t.node&&e.index>0&&t.node.children[e.index-1].loose)return e.children;return function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children||[]:[t])}),[])}(e)}(e,s).map((function(t,r){return o(t,n,{node:e,props:c},r)}));break;case"definition":l(c,{identifier:e.identifier,title:e.title,url:e.url});break;case"code":l(c,{language:e.lang&&e.lang.split(/\s/,1)[0]});break;case"inlineCode":c.children=e.value,c.inline=!0;break;case"link":l(c,{title:e.title||void 0,target:"function"==typeof n.linkTarget?n.linkTarget(e.url,e.children,e.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(e.url,e.children,e.title):e.url});break;case"image":l(c,{alt:e.alt||void 0,title:e.title||void 0,src:n.transformImageUri?n.transformImageUri(e.url,e.children,e.title,e.alt):e.url});break;case"linkReference":l(c,a(p,{href:n.transformLinkUri?n.transformLinkUri(p.href):p.href}));break;case"imageReference":l(c,{src:n.transformImageUri&&p.href?n.transformImageUri(p.href,e.children,p.title,e.alt):p.href,title:p.title||void 0,alt:e.alt||void 0});break;case"table":case"tableHead":case"tableBody":c.columnAlignment=e.align;break;case"tableRow":c.isHeader="tableHead"===s.node.type,c.columnAlignment=s.props.columnAlignment;break;case"tableCell":l(c,{isHeader:s.props.isHeader,align:s.props.columnAlignment[u]});break;case"virtualHtml":c.tag=e.tag;break;case"html":c.isBlock=e.position.start.line!==e.position.end.line,c.escapeHtml=n.escapeHtml,c.skipHtml=n.skipHtml;break;case"parsedHtml":var h;e.children&&(h=e.children.map((function(t,r){return o(t,n,{node:e,props:c},r)}))),c.escapeHtml=n.escapeHtml,c.skipHtml=n.skipHtml,c.element=function(e,t){var n=e.element;if(Array.isArray(n)){var a=r.Fragment||"div";return r.createElement(a,null,n)}if(n.props.children||t){var i=r.Children.toArray(n.props.children).concat(t);return r.cloneElement(n,null,i)}return r.cloneElement(n,null)}(e,h);break;default:l(c,a(e,{type:void 0,position:void 0,children:void 0}))}!d&&e.value&&(c.value=e.value);return c}(e,p,t,c,n,u);return r.createElement(c,h,h.children||e.children&&e.children.map((function(n,r){return o(n,t,{node:e,props:h},r)}))||void 0)}function l(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}e.exports=o},function(e,t,n){e.exports=n(29)(352)},function(e,t,n){"use strict";var r=n(105);function a(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}e.exports=function(e){return r(e,"table",a),e}},function(e,t,n){"use strict";e.exports=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t.children||[]).reduce((function(t,n){return"definition"===n.type&&(t[n.identifier]={href:n.url,title:n.title}),e(n,t)}),n)}},function(e,t,n){"use strict";var r=["http","https","mailto","tel"];e.exports=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var a=t.indexOf(":");if(-1===a)return t;for(var i=r.length,s=-1;++s<i;){var o=r[s];if(a===o.length&&t.slice(0,o.length).toLowerCase()===o)return t}return-1!==(s=t.indexOf("?"))&&a>s||-1!==(s=t.indexOf("#"))&&a>s?t:"javascript:void(0)"}},function(e,t,n){"use strict";var r=n(91),a=n(0),i=parseInt((a.version||"16").slice(0,2),10)>=16,s=a.createElement;function o(e,t){return s(e,l(t),t.children)}function l(e){return e["data-sourcepos"]?{"data-sourcepos":e["data-sourcepos"]}:{}}e.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:o.bind(null,"table"),tableHead:o.bind(null,"thead"),tableBody:o.bind(null,"tbody"),tableRow:o.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=l(e);return s(e.isHeader?"th":"td",t?r({style:t},n):n,e.children)},root:function(e){var t=!e.className,n=t&&a.Fragment||"div";return s(n,t?null:e,e.children)},text:function(e){return i?e.children:s("span",null,e.children)},list:function(e){var t=l(e);null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString());return s(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=s("input",{type:"checkbox",checked:n,readOnly:!0})}return s("li",l(e),t,e.children)},definition:function(){return null},heading:function(e){return s("h".concat(e.level),l(e),e.children)},inlineCode:function(e){return s("code",l(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=s("code",t?{className:t}:null,e.value);return s("pre",l(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.isBlock?"div":"span";if(e.escapeHtml){var n=a.Fragment||t;return s(n,null,e.value)}var r={dangerouslySetInnerHTML:{__html:e.value}};return s(t,r)},virtualHtml:function(e){return s(e.tag,l(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?a.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}}},function(e,t,n){"use strict";var r="__RMD_HTML_PARSER__";t.HtmlParser="undefined"==typeof Symbol?r:Symbol(r)},,,,,,,,,,function(e,t,n){const r=n(48);e.exports=(e,t,n)=>r(e,t,n)>0}])]);