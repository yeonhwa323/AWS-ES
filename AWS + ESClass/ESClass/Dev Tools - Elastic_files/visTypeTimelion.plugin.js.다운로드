!function(e){function t(t){for(var n,i,s=t[0],o=t[1],a=0,c=[];a<s.length;a++)i=s[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=s);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"visTypeTimelion.chunk."+e+".js"}(e);var u=new Error;o=function(t){a.onerror=a.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",u.name="ChunkLoadError",u.type=i,u.request=s,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.visTypeTimelion_bundle_jsonpfunction=window.visTypeTimelion_bundle_jsonpfunction||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var u=o;i(i.s=17)}([function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return c}));var r=n(7);const[i,s]=Object(r.createGetterSetter)("IndexPatterns"),[o,a]=Object(r.createGetterSetter)("Search"),[u,c]=Object(r.createGetterSetter)("Charts")},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=async e=>{const{parseTimelionExpression:t}=await n.e(4).then(n.bind(null,26));return t(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),i=n(1),s=n(0);function o(){const e=Object(i.c)();async function t(t){const n=t.find((({name:e})=>"index"===e));if(!n)return;const i=Object(r.get)(n,"value.text");return(await e.find(i)).find((e=>e.title===i))}function n(e,t){return!e||t.name.includes(e)}const o={es:{async index(t){const n=t?`${t}*`:"*";return(await e.find(n,25)).map((({title:e})=>({name:e,insertText:e})))},async metric(e,r){if(!e||!e.includes(":"))return[{name:"avg:"},{name:"cardinality:"},{name:"count"},{name:"max:"},{name:"min:"},{name:"percentiles:"},{name:"sum:"}];const i=await t(r);if(!i)return[];const o=e.split(":");return i.fields.getByType(s.KBN_FIELD_TYPES.NUMBER).filter((e=>e.aggregatable&&n(o[1],e)&&!s.indexPatterns.isNestedField(e))).map((e=>{const t=e.name.replaceAll(":","\\:");return{name:`${o[0]}:${t}`,help:e.type,insertText:t}}))},async split(e,r){const i=await t(r);return i?i.fields.getAll().filter((t=>t.aggregatable&&[s.KBN_FIELD_TYPES.NUMBER,s.KBN_FIELD_TYPES.BOOLEAN,s.KBN_FIELD_TYPES.DATE,s.KBN_FIELD_TYPES.IP,s.KBN_FIELD_TYPES.STRING].includes(t.type)&&n(e,t)&&!s.indexPatterns.isNestedField(t))).map((e=>({name:e.name,help:e.type,insertText:e.name}))):[]},async timefield(e,r){const i=await t(r);return i?i.fields.getByType(s.KBN_FIELD_TYPES.DATE).filter((t=>n(e,t)&&!s.indexPatterns.isNestedField(t))).map((e=>({name:e.name,insertText:e.name}))):[]}}};return{hasDynamicSuggestionsForArgument:(e,t)=>o[e]&&o[e][t],getDynamicSuggestionsForArgument:async(e,t,n,r="")=>await o[e][t](r,n),getStaticSuggestionsForInput:(e="",t=[])=>e?t.filter((t=>t.name.includes(e))):t}}},function(e,t,n){e.exports=n(16)(1076)},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(18),__kbnBundles__.define("plugin/visTypeTimelion/public",n,19)},function(e,t,n){n.p=window.__kbnPublicPath__.visTypeTimelion},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return E}));var r=n(3),i=n(2),s=n(0),o=n(8),a=n.n(o);var u=n(1);function c({uiSettings:e,http:t,timefilter:n}){const r=function(e){if(e.isDefault("dateFormat:tz")){return a.a.tz.guess()||a()().format("Z")}return e.get("dateFormat:tz","Browser")}(e);return async function({timeRange:o,filters:a,query:c,visParams:l,searchSessionId:p,executionContext:d}){const f=Object(u.b)(),_=l.expression;if(!_)throw new Error(i.i18n.translate("timelion.emptyExpressionErrorMessage",{defaultMessage:"Timelion error: No expression provided"}));const m=s.esQuery.getEsQueryConfig(e),b=n.calculateBounds(o),g=f.session.isCurrentSession(p)&&f.session.trackSearch({abort:()=>{}});try{const e=f.session.getSearchOptions(p);return await t.post("/api/timelion/run",{body:JSON.stringify({sheet:[_],extended:{es:{filter:s.esQuery.buildEsQuery(void 0,c,a,m)}},time:{from:b.min,to:b.max,interval:l.interval,timezone:r},...e&&{searchSession:e}}),context:d})}catch(e){if(e&&e.body){const t=new Error(`${i.i18n.translate("timelion.requestHandlerErrorTitle",{defaultMessage:"Timelion request error"})}:${e.body.title?" "+e.body.title:""} ${e.body.message}`);throw t.stack=e.stack,t}throw e}finally{g&&f.session.isCurrentSession(p)&&g()}}}var l=n(15),p=n.n(l),d=n(5),f=n(12),_=n(9);const m=e=>{const{expression:t,interval:n}=e.params,r=Object(_.buildExpressionFunction)("timelion_vis",{expression:t,interval:n});return Object(_.buildExpression)([r]).toAst()};var b=n(13),g=n(6),y=n(4);const v=Object(d.lazy)((()=>n.e(3).then(n.bind(null,64)))),h="timelion";var x=n(14),O=n(10),S=n(11);const j="timelion:legacyChartsLibrary",T=Object(d.lazy)((()=>n.e(1).then(n.bind(null,63)))),P=Object(d.lazy)((()=>n.e(2).then(n.bind(null,65))));class plugin_TimelionVisPlugin{constructor(e){this.initializerContext=e}setup({uiSettings:e,http:t},{expressions:n,visualizations:s,data:o,charts:a}){const l={http:t,uiSettings:e,timefilter:o.query.timefilter.timefilter};var d;n.registerFunction((()=>(e=>({name:"timelion_vis",type:"render",inputTypes:["kibana_context","null"],help:i.i18n.translate("timelion.function.help",{defaultMessage:"Timelion visualization"}),args:{expression:{types:["string"],aliases:["_"],default:'".es(*)"',help:""},interval:{types:["string"],default:"auto",help:""}},async fn(t,n,{getSearchSessionId:i,getExecutionContext:s}){const o=c(e),a={expression:n.expression,interval:n.interval},u=await o({timeRange:Object(r.get)(t,"timeRange"),query:Object(r.get)(t,"query"),filters:Object(r.get)(t,"filters"),visParams:a,searchSessionId:i(),executionContext:s()});return u.visType=h,{type:"render",as:"timelion_vis",value:{visParams:a,visType:h,visData:u}}}}))(l))),n.registerRenderer((d=l,{name:"timelion_vis",displayName:"Timelion visualization",reuseDomNode:!0,render:(e,{visData:t,visParams:n},r)=>{r.onDestroy((()=>{Object(O.unmountComponentAtNode)(e)}));const[i]=t.sheet,s=!i||!i.list.length,o=d.uiSettings.get(j,!1)?P:T;Object(O.render)(Object(y.jsx)(g.VisualizationContainer,{handlers:r,showNoResult:s},Object(y.jsx)(S.KibanaContextProvider,{services:{...d}},Object(y.jsx)(o,{interval:n.interval,seriesList:i,renderComplete:r.done,onBrushEvent:e=>{r.event({name:"applyFilter",data:{timeFieldName:"*",filters:[{query:{range:{"*":e}}}]}})}}))),e)}})),s.createBaseVisualization(function(e){return{name:h,title:"Timelion",icon:"visTimelion",description:i.i18n.translate("timelion.timelionDescription",{defaultMessage:"Show time series data on a graph."}),visConfig:{defaults:{expression:".es(*)",interval:"auto"}},editorConfig:{optionsTemplate:t=>Object(y.jsx)(v,p()({services:e},t)),defaultSize:f.DefaultEditorSize.MEDIUM},toExpressionAst:m,inspectorAdapters:{},getSupportedTriggers:()=>[g.VIS_EVENT_TO_TRIGGER.applyFilter],getUsedIndexPattern:async e=>{try{var t,n;const r=(null!==(t=null===(n=await Object(b.a)(e.expression))||void 0===n?void 0:n.args)&&void 0!==t?t:[]).find((({type:e,name:t,function:n})=>"namedArg"===e&&"es"===n&&"index"===t));if(null!=r&&r.value.text)return Object(u.c)().find(r.value.text)}catch{}return[]},options:{showIndexSelection:!1,showQueryBar:!1,showFilterBar:!1},requiresSearch:!0}}(l))}start(e,{data:t,charts:n}){return Object(u.f)(t.indexPatterns),Object(u.e)(t.search),Object(u.d)(n),{getArgValueSuggestions:x.a}}}function E(e){return new plugin_TimelionVisPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.Jquery},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},,function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);