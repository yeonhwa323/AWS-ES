!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=15)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,s){e.exports=s(12)(1075)},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,s){s.r(t);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,s){"use strict";var i,a=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},n=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),r=[];function o(e){for(var t=-1,s=0;s<r.length;s++)if(r[s].identifier===e){t=s;break}return t}function c(e,t){for(var s={},i=[],a=0;a<e.length;a++){var n=e[a],c=t.base?n[0]+t.base:n[0],l=s[c]||0,d="".concat(c," ").concat(l);s[c]=l+1;var u=o(d),p={css:n[1],media:n[2],sourceMap:n[3]};-1!==u?(r[u].references++,r[u].updater(p)):r.push({identifier:d,updater:v(p,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var a=s.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=n(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function p(e,t,s,i){var a=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var n=document.createTextNode(a),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}function h(e,t,s){var i=s.css,a=s.media,n=s.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var b=null,f=0;function v(e,t){var s,i,a;if(t.singleton){var n=f++;s=b||(b=l(t)),i=p.bind(null,s,n,!1),a=p.bind(null,s,n,!0)}else s=l(t),i=h.bind(null,s,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var s=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var a=o(s[i]);r[a].references--}for(var n=c(e,t),l=0;l<s.length;l++){var d=o(s[l]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}s=n}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",i=e[3];if(!i)return s;if(t&&"function"==typeof btoa){var a=(r=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),n=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[s].concat(n).concat([a]).join("\n")}var r,o,c;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(i)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(a[r]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);i&&a[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),t.push(c))}},t}},function(e,t,s){s.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,s){s.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,s){e.exports=s(12)(1076)},function(e,t,s){s(16),__kbnBundles__.define("plugin/savedObjects/public",s,26)},function(e,t,s){s.p=window.__kbnPublicPath__.savedObjects},function(e,t,s){switch(window.__kbnThemeTag__){case"v7dark":return s(18);case"v7light":return s(20);case"v8dark":return s(22);case"v8light":return s(24)}},function(e,t,s){var i=s(8),a=s(19);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var n={insert:"head",singleton:!1};i(a,n);e.exports=a.locals||{}},function(e,t,s){(t=s(9)(!1)).push([e.i,".kbnSavedObjectSaveModal{width:400px}.kbnSavedObjectsSaveModal--wide{width:800px}\n",""]),e.exports=t},function(e,t,s){var i=s(8),a=s(21);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var n={insert:"head",singleton:!1};i(a,n);e.exports=a.locals||{}},function(e,t,s){(t=s(9)(!1)).push([e.i,".kbnSavedObjectSaveModal{width:400px}.kbnSavedObjectsSaveModal--wide{width:800px}\n",""]),e.exports=t},function(e,t,s){var i=s(8),a=s(23);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var n={insert:"head",singleton:!1};i(a,n);e.exports=a.locals||{}},function(e,t,s){(t=s(9)(!1)).push([e.i,".kbnSavedObjectSaveModal{width:400px}.kbnSavedObjectsSaveModal--wide{width:800px}\n",""]),e.exports=t},function(e,t,s){var i=s(8),a=s(25);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var n={insert:"head",singleton:!1};i(a,n);e.exports=a.locals||{}},function(e,t,s){(t=s(9)(!1)).push([e.i,".kbnSavedObjectSaveModal{width:400px}.kbnSavedObjectsSaveModal--wide{width:800px}\n",""]),e.exports=t},function(e,t,s){"use strict";s.r(t),s.d(t,"SavedObjectSaveModal",(function(){return saved_object_save_modal_SavedObjectSaveModal})),s.d(t,"SavedObjectSaveModalOrigin",(function(){return T})),s.d(t,"showSaveModal",(function(){return F})),s.d(t,"getSavedObjectFinder",(function(){return I})),s.d(t,"SavedObjectFinderUi",(function(){return saved_object_finder_SavedObjectFinderUi})),s.d(t,"SavedObjectLoader",(function(){return saved_object_loader_SavedObjectLoader})),s.d(t,"checkForDuplicateTitle",(function(){return g})),s.d(t,"saveWithConfirmation",(function(){return x})),s.d(t,"isErrorNonFatal",(function(){return O})),s.d(t,"PER_PAGE_SETTING",(function(){return w})),s.d(t,"LISTING_LIMIT_SETTING",(function(){return _})),s.d(t,"plugin",(function(){return L}));var i=s(3),a=s.n(i),n=(s(17),s(4));var r=s(7);const o=e=>Object(n.mapValues)(e,(e=>{const t=Object(n.isString)(e)?{type:e}:e,s={type:r.ES_FIELD_TYPES.TEXT,_serialize(e){if(e)return JSON.stringify(e)},_deserialize(e){if(e)return JSON.parse(e)}};return"json"===t.type?s:t}));var c=s(10);var l=s(2);const d=l.i18n.translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"}),u=l.i18n.translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});var p=s(5),h=s.n(p),b=s(1),f=s(13),v=s(0);function j(e="",t="",s="",i){return new Promise(((a,n)=>{const r=l.i18n.translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),o=i.openModal(Object(f.toMountPoint)(Object(v.jsx)(b.EuiConfirmModal,{onCancel:()=>{o.close(),n()},onConfirm:()=>{o.close(),a(!0)},confirmButtonText:s,cancelButtonText:r,title:t},e)))}))}async function g(e,t,s,i){const{savedObjectsClient:a,overlays:n}=i;if(t)return!0;if(e.title===e.lastSavedTitle&&!e.copyOnSave)return!0;const r=await async function(e,t,s){if(!s)return;return(await e.find({type:t,perPage:10,search:`"${s}"`,searchFields:["title"],fields:["title"]})).savedObjects.find((e=>e.get("title").toLowerCase()===s.toLowerCase()))}(a,e.getEsType(),e.title);return!r||r.id===e.id||(s?(s(),Promise.reject(new Error(u))):function(e,t){const s=l.i18n.translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:e.title,name:e.getDisplayName()}}),i=l.i18n.translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:e.getDisplayName()}});try{return j(s,"",i,t)}catch(e){return Promise.reject(new Error(u))}}(e,n))}function O(e){return!!e&&(e.message===d||e.message===u)}async function S(e,t,{confirmOverwrite:s=!1,isTitleDuplicateConfirmed:i=!1,onTitleDuplicate:a}={},r){const{savedObjectsClient:o,chrome:c}=r,u=t.type||"",p=t.extractReferences,h=e.id;e.copyOnSave&&delete e.id;let{attributes:b,references:f}=e._serialize();if(p&&({attributes:b,references:f}=p({attributes:b,references:f})),!f)throw new Error("References not returned from extractReferences");try{await g(e,i,a,r),e.isSaving=!0;const t=s?await async function(e,t,s,i={},a){const{savedObjectsClient:r,overlays:o}=a;try{return await r.create(s,e,i)}catch(a){return 409===Object(n.get)(a,"res.status")?j(l.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:t.title}}),l.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:t.getDisplayName()}}),l.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"}),o).then((()=>r.create(s,e,t.creationOpts({overwrite:!0,...i})))).catch((()=>Promise.reject(new Error(d)))):await Promise.reject(a)}}(b,e,u,e.creationOpts({references:f}),r):await o.create(u,b,e.creationOpts({references:f,overwrite:!0}));return e.id=t.id,e.showInRecentlyAccessed&&e.getFullPath&&c.recentlyAccessed.add(e.getFullPath(),e.title,String(e.id)),e.isSaving=!1,e.lastSavedTitle=e.title,e.id}catch(t){return e.isSaving=!1,e.id=h,O(t)?"":Promise.reject(t)}}const m=(e,t,s)=>{s.forEach((s=>{s.decorateConfig(t),s.decorateObject(e)}))};function y(e,t,s,i=[]){m(e,t,i);const{indexPatterns:a,savedObjectsClient:l}=s,d=t.type||"";e.getDisplayName=()=>d,e.getEsType=()=>d,e.isSaving=!1,e.defaults=t.defaults||{},e.searchSource=t.searchSource?s.search.searchSource.createEmpty():void 0,e.id=t.id||void 0,e.migrationVersion=t.migrationVersion,e.copyOnSave=!1,e.hydrateIndexPattern=s=>async function(e,t,s,i){const a=i.indexPattern;if(!t.searchSource)return null;const n=e||a||t.searchSource.getOwnField("index");if("string"!=typeof n||!n)return null;const r=await s.get(n);return t.searchSource.setField("index",r),r}(s||"",e,a,t),e.init=Object(n.once)((()=>async function(e,t,s){const i=s.type;if(!i)throw new Error("You must define a type name to use SavedObject objects.");if(!e.id)return Object(n.assign)(e,e.defaults),await e.hydrateIndexPattern(),"function"==typeof s.afterESResp&&(e=await s.afterESResp(e)),e;const a=await t.get(i,e.id),r={_id:a.id,_type:a.type,_source:Object(n.cloneDeep)(a.attributes),references:a.references,found:!!a._version};return await e.applyESResp(r),"function"==typeof s.init&&await s.init.call(e),e}(e,l,t))),e.applyESResp=i=>async function(e,t,s,i){var a;const l=o(null!==(a=s.mapping)&&void 0!==a?a:{}),d=s.type||"";if(t._source=Object(n.cloneDeep)(e._source),"boolean"==typeof e.found&&!e.found)throw new c.SavedObjectNotFound(d,t.id||"");const u=e._source.kibanaSavedObjectMeta||{};if(delete e._source.kibanaSavedObjectMeta,!s.indexPattern&&t._source.indexPattern&&(s.indexPattern=t._source.indexPattern,delete t._source.indexPattern),Object(n.defaults)(t._source,t.defaults),Object(n.forOwn)(l,((e,s)=>{e._deserialize&&"string"==typeof s&&(t._source[s]=e._deserialize(t._source[s]))})),Object(n.assign)(t,t._source),t.lastSavedTitle=t.title,u.searchSourceJSON)try{let a=Object(r.parseSearchSourceJSON)(u.searchSourceJSON);s.searchSource?(a=Object(r.injectSearchSourceReferences)(a,e.references),t.searchSource=await i.search.searchSource.create(a)):t.searchSourceFields=a}catch(e){throw Object(c.isSavedObjectNotFoundError)(e)&&"index-pattern"===e.savedObjectType&&(t.unresolvedIndexPatternReference={name:"kibanaSavedObjectMeta.searchSourceJSON.index",id:JSON.parse(u.searchSourceJSON).index,type:"index-pattern"}),e}const p=s.injectReferences;return p&&e.references&&e.references.length>0&&p(t,e.references),"function"==typeof s.afterESResp&&(t=await s.afterESResp(t)),t}(i,e,t,s),e._serialize=()=>function(e,t){var s;const i=o(null!==(s=t.mapping)&&void 0!==s?s:{}),a={},c=[];if(Object(n.forOwn)(i,((t,s)=>{if("string"!=typeof s)return;const i=e[s];null!=i&&(a[s]=t._serialize?t._serialize(i):i)})),e.searchSource){const{searchSourceJSON:t,references:s}=e.searchSource.serialize();a.kibanaSavedObjectMeta={searchSourceJSON:t},c.push(...s)}if(e.searchSourceFields){const[t,s]=Object(r.extractSearchSourceReferences)(e.searchSourceFields),i=JSON.stringify(t);a.kibanaSavedObjectMeta={searchSourceJSON:i},c.push(...s)}return e.unresolvedIndexPatternReference&&c.push(e.unresolvedIndexPatternReference),{attributes:a,references:c}}(e,t),e.isTitleChanged=()=>e._source&&e._source.title!==e.title,e.creationOpts=(t={})=>({id:e.id,migrationVersion:e.migrationVersion,...t}),e.save=async i=>{try{const a=await S(e,t,i,s);return Promise.resolve(a)}catch(e){return Promise.reject(e)}},e.destroy=()=>{},e.delete=()=>e.id?l.delete(d,e.id):Promise.reject(new Error("Deleting a saved Object requires type and id"))}class StringUtils{static upperFirst(e=""){return e?e.charAt(0).toUpperCase()+e.slice(1):""}}class saved_object_loader_SavedObjectLoader{constructor(e,t){a()(this,"Class",void 0),a()(this,"type",void 0),a()(this,"lowercaseType",void 0),a()(this,"loaderProperties",void 0),this.savedObjectsClient=t,this.type=e.type,this.Class=e,this.lowercaseType=this.type.toLowerCase(),this.loaderProperties={name:`${this.lowercaseType}s`,noun:StringUtils.upperFirst(this.type),nouns:`${this.lowercaseType}s`}}async get(e){return new this.Class(e).init()}urlFor(e){return`#/${this.lowercaseType}/${encodeURIComponent(e)}`}async delete(e){const t=(Array.isArray(e)?e:[e]).map((e=>new this.Class(e).delete()));await Promise.all(t)}mapHitSource(e,t,s=[]){return e.id=t,e.url=this.urlFor(t),e.references=s,e}mapSavedObjectApiHits({attributes:e,id:t,references:s=[]}){return this.mapHitSource(e,t,s)}findAll(e="",{size:t=100,fields:s,hasReference:i}){return this.savedObjectsClient.find({type:this.lowercaseType,search:e?`${e}*`:void 0,perPage:t,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:s,hasReference:i}).then((e=>({total:e.total,hits:e.savedObjects.map((e=>this.mapSavedObjectApiHits(e)))})))}find(e="",t=100){const s="number"==typeof t?{size:t}:t;return this.findAll(e,s).then((e=>({total:e.total,hits:e.hits.filter((e=>!e.error))})))}}async function x(e,t,s,i){const{savedObjectsClient:a,overlays:r}=i;try{return await a.create(t.getEsType(),e,s)}catch(i){if(409===Object(n.get)(i,"res.status")){return j(l.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:t.title}}),l.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:t.displayName}}),l.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"}),r).then((()=>a.create(t.getEsType(),e,{overwrite:!0,...s}))).catch((()=>Promise.reject(new Error(d))))}return await Promise.reject(i)}}class registry_SavedObjectDecoratorRegistry{constructor(){a()(this,"registry",new Map)}register(e){if(this.registry.has(e.id))throw new Error(`A decorator is already registered for id ${e.id}`);if([...this.registry.values()].find((({priority:t})=>t===e.priority)))throw new Error(`A decorator is already registered for priority ${e.priority}`);this.registry.set(e.id,e)}getOrderedDecorators(e){return[...this.registry.values()].sort(((e,t)=>e.priority-t.priority)).map((({factory:t})=>t(e)))}}const w="savedObjects:perPage",_="savedObjects:listingLimit";class plugin_SavedObjectsPublicPlugin{constructor(){a()(this,"decoratorRegistry",new registry_SavedObjectDecoratorRegistry)}setup(){return{registerDecorator:e=>this.decoratorRegistry.register(e)}}start(e,{data:t}){return{SavedObjectClass:(s={indexPatterns:t.indexPatterns,savedObjectsClient:e.savedObjects.client,search:t.search,chrome:e.chrome,overlays:e.overlays},i=this.decoratorRegistry,class SavedObjectClass{constructor(e={}){y(this,e,s,i.getOrderedDecorators(s))}}),settings:{getPerPage:()=>e.uiSettings.get(w),getListingLimit:()=>e.uiSettings.get(_)}};var s,i}}var M=s(6);const C=Object(b.htmlIdGenerator)();class saved_object_save_modal_SavedObjectSaveModal extends h.a.Component{constructor(...e){super(...e),a()(this,"warning",h.a.createRef()),a()(this,"state",{title:this.props.title,copyOnSave:Boolean(this.props.initialCopyOnSave),isTitleDuplicateConfirmed:!1,hasTitleDuplicate:!1,isLoading:!1,visualizationDescription:this.props.description?this.props.description:""}),a()(this,"renderViewDescription",(()=>{if(this.props.showDescription)return Object(v.jsx)(b.EuiFormRow,{fullWidth:!0,label:Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},Object(v.jsx)(b.EuiTextArea,{"data-test-subj":"viewDescription",value:this.state.visualizationDescription,onChange:this.onDescriptionChange}))})),a()(this,"onDescriptionChange",(e=>{this.setState({visualizationDescription:e.target.value})})),a()(this,"onTitleDuplicate",(()=>{this.setState({isLoading:!1,isTitleDuplicateConfirmed:!0,hasTitleDuplicate:!0}),this.warning.current&&this.warning.current.focus()})),a()(this,"saveSavedObject",(async()=>{this.state.isLoading||(this.setState({isLoading:!0}),await this.props.onSave({newTitle:this.state.title,newCopyOnSave:this.state.copyOnSave,isTitleDuplicateConfirmed:this.state.isTitleDuplicateConfirmed,onTitleDuplicate:this.onTitleDuplicate,newDescription:this.state.visualizationDescription}))})),a()(this,"onTitleChange",(e=>{this.setState({title:e.target.value,isTitleDuplicateConfirmed:!1,hasTitleDuplicate:!1})})),a()(this,"onCopyOnSaveChange",(e=>{this.setState({copyOnSave:e.target.checked}),this.props.onCopyOnSaveChange&&this.props.onCopyOnSaveChange(e.target.checked)})),a()(this,"onFormSubmit",(e=>{e.preventDefault(),this.saveSavedObject()})),a()(this,"renderConfirmButton",(()=>{const{isLoading:e,title:t}=this.state;let s=l.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});this.props.confirmButtonLabel&&(s=this.props.confirmButtonLabel);const i=void 0===this.props.isValid||this.props.isValid;return Object(v.jsx)(b.EuiButton,{fill:!0,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:e,isDisabled:0===t.length||!i,type:"submit"},s)})),a()(this,"renderDuplicateTitleCallout",(e=>{if(this.state.hasTitleDuplicate)return Object(v.jsx)(h.a.Fragment,null,Object(v.jsx)("div",{ref:this.warning,tabIndex:-1},Object(v.jsx)(b.EuiCallOut,{title:Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"This {objectType} already exists",values:{objectType:this.props.objectType}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:e},Object(v.jsx)("p",null,Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Saving '{title}' creates a duplicate title.",values:{title:this.state.title}})))),Object(v.jsx)(b.EuiSpacer,null))})),a()(this,"renderCopyOnSave",(()=>{if(this.props.showCopyOnSave)return Object(v.jsx)(h.a.Fragment,null,Object(v.jsx)(b.EuiSpacer,null),Object(v.jsx)(b.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:this.state.copyOnSave,onChange:this.onCopyOnSaveChange,label:Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:this.props.objectType}})}))}))}render(){const{isTitleDuplicateConfirmed:e,hasTitleDuplicate:t,title:s}=this.state,i=C(),a=!!this.props.rightOptions,n=Object(v.jsx)(h.a.Fragment,null,Object(v.jsx)(b.EuiFormRow,{fullWidth:!0,label:Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},Object(v.jsx)(b.EuiFieldText,{fullWidth:!0,autoFocus:!0,"data-test-subj":"savedObjectTitle",value:s,onChange:this.onTitleChange,isInvalid:!e&&t||0===s.length,"aria-describedby":this.state.hasTitleDuplicate?i:void 0})),this.renderViewDescription(),"function"==typeof this.props.options?this.props.options(this.state):this.props.options),r=a?Object(v.jsx)(b.EuiFlexGroup,{gutterSize:"m"},Object(v.jsx)(b.EuiFlexItem,null,n),Object(v.jsx)(b.EuiFlexItem,null,"function"==typeof this.props.rightOptions?this.props.rightOptions(this.state):this.props.rightOptions)):n;return Object(v.jsx)(b.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"kbnSavedObjectSaveModal"+(a?" kbnSavedObjectsSaveModal--wide":""),onClose:this.props.onClose},Object(v.jsx)("form",{onSubmit:this.onFormSubmit,className:"euiModal__flex"},Object(v.jsx)(b.EuiModalHeader,null,Object(v.jsx)(b.EuiModalHeaderTitle,null,Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),Object(v.jsx)(b.EuiModalBody,null,this.renderDuplicateTitleCallout(i),Object(v.jsx)(b.EuiForm,null,!this.props.showDescription&&this.props.description&&Object(v.jsx)(b.EuiText,{size:"s",color:"subdued"},this.props.description),r,this.renderCopyOnSave())),Object(v.jsx)(b.EuiModalFooter,null,Object(v.jsx)(b.EuiButtonEmpty,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton())))}}function T(e){const[t,s]=Object(p.useState)(Boolean(e.originatingApp)),{documentInfo:i}=e,a=l.i18n.translate("savedObjects.saveModalOrigin.returnToOriginLabel",{defaultMessage:"Return"}),n=l.i18n.translate("savedObjects.saveModalOrigin.addToOriginLabel",{defaultMessage:"Add"}),r=t?l.i18n.translate("savedObjects.saveModalOrigin.saveAndReturnLabel",{defaultMessage:"Save and return"}):null;return Object(v.jsx)(saved_object_save_modal_SavedObjectSaveModal,{onSave:s=>{e.onSave({...s,returnToOrigin:t})},onClose:e.onClose,title:i.title,showCopyOnSave:!!i.id,initialCopyOnSave:Boolean(i.id)&&t,confirmButtonLabel:r,objectType:e.objectType,options:r=>{const o="function"==typeof e.options?e.options(r):e.options;if(!e.originatingApp)return o;const c=e.getAppNameFromId&&e.getAppNameFromId(e.originatingApp)||e.originatingApp;if(r.copyOnSave&&"dashboards"!==e.originatingApp)return s(!1),o;{var l;const d=!i.id||r.copyOnSave?n:a;return Object(v.jsx)(p.Fragment,null,o,Object(v.jsx)(b.EuiFormRow,null,Object(v.jsx)(b.EuiSwitch,{"data-test-subj":"returnToOriginModeSwitch",checked:t,onChange:e=>{s(e.target.checked)},label:null!==(l=e.returnToOriginSwitchLabel)&&void 0!==l?l:Object(v.jsx)(M.FormattedMessage,{id:"savedObjects.saveModalOrigin.originAfterSavingSwitchLabel",defaultMessage:"{originVerb} to {origin} after saving",values:{originVerb:d,origin:c}})})))}},description:i.description,showDescription:!0})}var P=s(11),D=s.n(P);function F(e,t,s){const i=document.createElement("div"),a=()=>{D.a.unmountComponentAtNode(i),document.body.removeChild(i)},n=e.props.onSave;document.body.appendChild(i);const r=h.a.cloneElement(e,{onSave:async(...e)=>{const t=await n(...e);return Boolean("id"in t?t.id:t.error)&&a(),t},onClose:a}),o=s?Object(v.jsx)(t,null,Object(v.jsx)(s,null,r)):Object(v.jsx)(t,null,r);D.a.render(o,i)}var E=s(14),k=s.n(E);class saved_object_finder_SavedObjectFinderUi extends h.a.Component{constructor(e){super(e),a()(this,"isComponentMounted",!1),a()(this,"debouncedFetch",Object(n.debounce)((async e=>{const t=this.getSavedObjectMetaDataMap(),s=Object.values(t).map((e=>e.includeFields||[])).reduce(((e,t)=>e.concat(t)),["title"]),i=this.props.uiSettings.get(_),a=await this.props.savedObjects.client.find({type:Object.keys(t),fields:[...new Set(s)],search:e?`${e}*`:void 0,page:1,perPage:i,searchFields:["title^3","description"],defaultSearchOperator:"AND"});a.savedObjects=a.savedObjects.filter((e=>{const s=t[e.type];return!s.showSavedObject||s.showSavedObject(e)})),this.isComponentMounted&&e===this.state.query&&this.setState({isFetchingItems:!1,page:0,items:a.savedObjects.map((e=>{const{attributes:{title:t},id:s,type:i}=e;return{title:"string"==typeof t?t:"",id:s,type:i,savedObject:e}}))})}),300)),a()(this,"getPageOfItems",(()=>{const e=this.state.items.slice(),{sortDirection:t}=this.state;!t&&this.state.query||e.sort((({title:e},{title:s})=>{let i=1;return"desc"===t&&(i=-1),i*(e||"").toLowerCase().localeCompare((s||"").toLowerCase())}));const s=this.state.page*this.state.perPage,i=s+this.state.perPage;return e.filter((e=>0===this.state.filteredTypes.length||this.state.filteredTypes.includes(e.type))).slice(s,i)})),a()(this,"fetchItems",(()=>{this.setState({isFetchingItems:!0},this.debouncedFetch.bind(null,this.state.query))})),this.state={items:[],isFetchingItems:!1,page:0,perPage:e.initialPageSize||e.fixedPageSize||10,query:"",filterOpen:!1,filteredTypes:[],sortOpen:!1}}componentWillUnmount(){this.isComponentMounted=!1,this.debouncedFetch.cancel()}componentDidMount(){this.isComponentMounted=!0,this.fetchItems()}render(){return Object(v.jsx)(h.a.Fragment,null,this.renderSearchBar(),this.renderListing())}getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce(((e,t)=>({...e,[t.type]:t})),{})}getPageCount(){return Math.ceil((0===this.state.filteredTypes.length?this.state.items.length:this.state.items.filter((e=>0===this.state.filteredTypes.length||this.state.filteredTypes.includes(e.type))).length)/this.state.perPage)}getAvailableSavedObjectMetaData(){const e=new Set;return this.state.items.forEach((t=>{e.add(t.type)})),this.props.savedObjectMetaData.filter((t=>e.has(t.type)))}getSortOptions(){const e=[Object(v.jsx)(b.EuiContextMenuItem,{key:"asc",icon:"asc"===this.state.sortDirection||""===this.state.query&&"desc"!==this.state.sortDirection?"check":"empty",onClick:()=>{this.setState({sortDirection:"asc"})}},l.i18n.translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),Object(v.jsx)(b.EuiContextMenuItem,{key:"desc",icon:"desc"===this.state.sortDirection?"check":"empty",onClick:()=>{this.setState({sortDirection:"desc"})}},l.i18n.translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];return this.state.query&&e.push(Object(v.jsx)(b.EuiContextMenuItem,{key:"auto",icon:this.state.sortDirection?"empty":"check",onClick:()=>{this.setState({sortDirection:void 0})}},l.i18n.translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"}))),e}renderSearchBar(){const e=this.getAvailableSavedObjectMetaData();return Object(v.jsx)(b.EuiFlexGroup,{gutterSize:"m"},Object(v.jsx)(b.EuiFlexItem,{grow:!0},Object(v.jsx)(b.EuiFieldSearch,{placeholder:l.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),"aria-label":l.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),fullWidth:!0,value:this.state.query,onChange:e=>{this.setState({query:e.target.value},this.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),Object(v.jsx)(b.EuiFlexItem,{grow:!1},Object(v.jsx)(b.EuiFilterGroup,null,Object(v.jsx)(b.EuiPopover,{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:()=>this.setState({sortOpen:!1}),button:Object(v.jsx)(b.EuiFilterButton,{onClick:()=>this.setState((({sortOpen:e})=>({sortOpen:!e}))),iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},l.i18n.translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},Object(v.jsx)(b.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&Object(v.jsx)(b.EuiPopover,{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:()=>this.setState({filterOpen:!1}),button:Object(v.jsx)(b.EuiFilterButton,{onClick:()=>this.setState((({filterOpen:e})=>({filterOpen:!e}))),iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},l.i18n.translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},Object(v.jsx)(b.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map((t=>Object(v.jsx)(b.EuiContextMenuItem,{key:t.type,disabled:!e.includes(t),icon:this.state.filteredTypes.includes(t.type)?"check":"empty","data-test-subj":`savedObjectFinderFilter-${t.type}`,onClick:()=>{this.setState((({filteredTypes:e})=>({filteredTypes:e.includes(t.type)?e.filter((e=>e!==t.type)):[...e,t.type],page:0})))}},t.name)))})))),this.props.children?Object(v.jsx)(b.EuiFlexItem,{grow:!1},this.props.children):null)}renderListing(){const e=0===this.state.items.length?[]:this.getPageOfItems(),{onChoose:t,savedObjectMetaData:s}=this.props;return Object(v.jsx)(h.a.Fragment,null,this.state.isFetchingItems&&0===this.state.items.length&&Object(v.jsx)(b.EuiFlexGroup,{justifyContent:"center"},Object(v.jsx)(b.EuiFlexItem,{grow:!1},Object(v.jsx)(b.EuiSpacer,null),Object(v.jsx)(b.EuiLoadingSpinner,{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),e.length>0?Object(v.jsx)(b.EuiListGroup,{"data-test-subj":"savedObjectFinderItemList",maxWidth:!1},e.map((e=>{const i=s.find((t=>t.type===e.type)),a=i.getTooltipForSavedObject?i.getTooltipForSavedObject(e.savedObject):`${e.title} (${i.name})`,n=(i||{getIconForSavedObject:()=>"document"}).getIconForSavedObject(e.savedObject);return Object(v.jsx)(b.EuiListGroupItem,{key:e.id,iconType:n,label:e.title,onClick:t?()=>{t(e.id,e.type,a,e.savedObject)}:void 0,title:a,"data-test-subj":`savedObjectTitle${(e.title||"").split(" ").join("-")}`})}))):!this.state.isFetchingItems&&Object(v.jsx)(b.EuiEmptyPrompt,{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?Object(v.jsx)(b.EuiPagination,{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:e=>{this.setState({page:e})}}):Object(v.jsx)(b.EuiTablePagination,{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:e=>{this.setState({page:e})},onChangeItemsPerPage:e=>{this.setState({perPage:e})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}const I=(e,t)=>s=>Object(v.jsx)(saved_object_finder_SavedObjectFinderUi,k()({},s,{savedObjects:e,uiSettings:t})),L=()=>new plugin_SavedObjectsPublicPlugin}]);