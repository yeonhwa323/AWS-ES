!function(e){function t(t){for(var n,o,i=t[0],a=t[1],s=0,l=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&l.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(d&&d(t);l.length;)l.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"indexPatternFieldEditor.chunk."+e+".js"}(e);var d=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",d.name="ChunkLoadError",d.type=o,d.request=i,n[1](d)}r[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var i=window.indexPatternFieldEditor_bundle_jsonpfunction=window.indexPatternFieldEditor_bundle_jsonpfunction||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=a;o(o.s=37)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){e.exports=n(36)(1075)},function(e,t,n){"use strict";n(8),n(15);var r=n(9);n.d(t,"g",(function(){return r.createKibanaReactContext})),n.d(t,"j",(function(){return r.toMountPoint})),n.d(t,"a",(function(){return r.CodeEditor}));n(18);var o=n(6);n.d(t,"k",(function(){return o.useForm})),n.d(t,"m",(function(){return o.useFormData})),n.d(t,"l",(function(){return o.useFormContext})),n.d(t,"n",(function(){return o.useFormIsModified})),n.d(t,"b",(function(){return o.Form})),n.d(t,"f",(function(){return o.UseField}));var i=n(22);n.d(t,"h",(function(){return i.fieldValidators}));var a=n(10);n.d(t,"d",(function(){return a.TextField})),n.d(t,"e",(function(){return a.ToggleField})),n.d(t,"c",(function(){return a.NumericField}));var s=n(23);n.d(t,"i",(function(){return s.sendRequest}))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.r(t),n.d(t,"convertSampleInput",(function(){return u})),n.d(t,"defaultState",(function(){return c})),n.d(t,"DefaultFormatEditor",(function(){return DefaultFormatEditor}));var r=n(4),o=n.n(r),i=n(1),a=n.n(i),s=n(2),d=n(12),l=n(0);const u=(e,t)=>{let n,r=[];try{r=t.map((t=>({input:t,output:e(t)})))}catch(e){n=s.i18n.translate("indexPatternFieldEditor.defaultErrorMessage",{defaultMessage:"An error occurred while trying to use this format configuration: {message}",values:{message:e.message}})}return{error:n,samples:r}},c={sampleInputs:[],sampleConverterType:"text",error:void 0,samples:[],sampleInputsByType:{}};class DefaultFormatEditor extends i.PureComponent{constructor(...e){super(...e),o()(this,"state",c),o()(this,"onChange",((e={})=>{const{onChange:t,formatParams:n}=this.props;t({...n,...e})}))}static getDerivedStateFromProps(e,t){const{format:n,formatParams:r,onError:o}=e,{sampleInputsByType:i,sampleInputs:a,sampleConverterType:s}=t,d=n.getConverterFor(s),l="object"==typeof i&&r.type?i[r.type]||[]:a,c=u(d,l);return o(c.error),c}render(){return Object(l.jsx)(a.a.Fragment,null)}}o()(DefaultFormatEditor,"formatId",d.a)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));const r="index_pattern_field_editor",o="indexPatternFieldEditorFlyout"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="default"},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){"use strict";var r=n(12),o=n(7);n.d(t,"a",(function(){return o.defaultState}));r.a},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="number"},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),o=n.n(r),i=n(2),a=n(3),s=n(0);const d=e=>{let t="",n="";if(e){const r=1===e.length;t=r?i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.deleteSingleTitle",{defaultMessage:"Remove field '{name}'",values:{name:e[0]}}):i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.deleteMultipleTitle",{defaultMessage:"Remove {count} fields",values:{count:e.length}}),n=r?i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.removeButtonLabel",{defaultMessage:"Remove field"}):i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.removeMultipleButtonLabel",{defaultMessage:"Remove fields"})}return{modalTitle:t,confirmButtonText:n,cancelButtonText:i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),warningMultipleFields:i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.multipleDeletionDescription",{defaultMessage:"You are about to remove these runtime fields:"}),typeConfirm:i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.typeConfirm",{defaultMessage:"Enter REMOVE to confirm"}),warningRemovingFields:i.i18n.translate("indexPatternFieldEditor.deleteRuntimeField.confirmModal.warningRemovingFields",{defaultMessage:"Removing fields can break searches and visualizations that rely on this field."})}};function l({fieldsToDelete:e,closeModal:t,confirmDelete:n}){const i=d(e),{modalTitle:l,confirmButtonText:u,cancelButtonText:c,warningMultipleFields:f}=i,m=Boolean(e.length>1),[p,b]=Object(r.useState)("");return Object(s.jsx)(a.EuiConfirmModal,{title:l,"data-test-subj":"runtimeFieldDeleteConfirmModal",onCancel:t,onConfirm:n,cancelButtonText:c,buttonColor:"danger",confirmButtonText:u,confirmButtonDisabled:"REMOVE"!==(null==p?void 0:p.toUpperCase())},Object(s.jsx)(a.EuiCallOut,{color:"warning",title:i.warningRemovingFields,iconType:"alert",size:"s"},m&&Object(s.jsx)(o.a.Fragment,null,Object(s.jsx)("p",null,f),Object(s.jsx)("ul",null,e.map((e=>Object(s.jsx)("li",{key:e},e)))))),Object(s.jsx)(a.EuiSpacer,null),Object(s.jsx)(a.EuiFormRow,{label:i.typeConfirm},Object(s.jsx)(a.EuiFieldText,{value:p,onChange:e=>b(e.target.value),"data-test-subj":"deleteModalConfirmText"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return field_format_editor_FormatSelectEditor})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return y})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return M})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return I})),n.d(t,"m",(function(){return B})),n.d(t,"g",(function(){return L}));var r=n(4),o=n.n(r),i=n(1),a=n.n(i),s=n(3),d=n(13),l=n(2),u=n(8),c=n(16),f=n(0);const m=Object(c.memoize)((e=>e?a.a.lazy((()=>e().then((e=>({default:e}))))):null));class format_editor_FormatEditor extends i.PureComponent{constructor(e){super(e),this.state={EditorComponent:m(e.fieldFormatEditors.getById(e.fieldFormatId))}}static getDerivedStateFromProps(e){return{EditorComponent:m(e.fieldFormatEditors.getById(e.fieldFormatId))}}render(){const{EditorComponent:e}=this.state,{fieldType:t,fieldFormat:n,fieldFormatParams:r,onChange:o,onError:i}=this.props;return Object(f.jsx)(a.a.Fragment,null,e?Object(f.jsx)(a.a.Suspense,{fallback:Object(f.jsx)("div",{style:{minHeight:430,marginTop:8}},Object(f.jsx)(s.EuiDelayRender,null,Object(f.jsx)(s.EuiLoadingContent,{lines:4})))},Object(f.jsx)(e,{fieldType:t,format:n,formatParams:r,onChange:o,onError:i})):null)}}const p=(e,t,n)=>{const r=n.getByFieldType(e).map((({id:e,title:t})=>({id:e,title:t})));return[{id:"",defaultFieldFormat:t,title:l.i18n.translate("indexPatternFieldEditor.defaultFormatDropDown",{defaultMessage:"- Default -"})},...r]};class field_format_editor_FormatSelectEditor extends i.PureComponent{constructor(e){super(e),o()(this,"onFormatChange",((e,t)=>this.props.onChange(e?{id:e,params:t||{}}:void 0))),o()(this,"onFormatParamsChange",(e=>{const{fieldFormatId:t}=this.state;this.onFormatChange(t,e)}));const{fieldFormats:t,esTypes:n}=e,r=Object(u.castEsToKbnFieldTypeName)(n[0]||"keyword");this.state={fieldTypeFormats:p(r,t.getDefaultType(r,n),t),kbnType:r}}render(){const{fieldFormatEditors:e,onError:t,value:n,fieldFormats:r,esTypes:o}=this.props,i=null==n?void 0:n.id,l=null==n?void 0:n.params,{kbnType:u}=this.state,{fieldTypeFormats:c}=this.state,m=c[0].defaultFieldFormat.title,p=null!=n&&n.id?r.getInstance(null==n?void 0:n.id,null==n?void 0:n.params):r.getDefaultInstance(u,o),b=m?Object(f.jsx)(d.FormattedMessage,{id:"indexPatternFieldEditor.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:Object(f.jsx)(s.EuiCode,null,m)}}):Object(f.jsx)(d.FormattedMessage,{id:"indexPatternFieldEditor.formatHeader",defaultMessage:"Format"});return Object(f.jsx)(a.a.Fragment,null,Object(f.jsx)(s.EuiFormRow,{label:b},Object(f.jsx)(s.EuiSelect,{value:i||"",options:c.map((e=>({value:e.id||"",text:e.title}))),"data-test-subj":"editorSelectedFormatId",onChange:e=>{this.onFormatChange(e.target.value)}})),i?Object(f.jsx)(format_editor_FormatEditor,{fieldType:u,fieldFormat:p,fieldFormatId:i,fieldFormatParams:l||{},fieldFormatEditors:e,onChange:e=>{this.onFormatChange(i,e)},onError:t}):null)}}n(14);var b=n(24);const F=()=>n.e(2).then(n.bind(null,90)).then((e=>e.BytesFormatEditor));F.formatId=b.a;var g=n(25);const h=()=>n.e(12).then(n.bind(null,91)).then((e=>e.ColorFormatEditor));h.formatId=g.a;var _=n(26);const v=()=>n.e(4).then(n.bind(null,92)).then((e=>e.DateFormatEditor));v.formatId=_.a;var x=n(27);const j=()=>n.e(5).then(n.bind(null,93)).then((e=>e.DateNanosFormatEditor));j.formatId=x.a;var E=n(28);const y=()=>n.e(6).then(n.bind(null,94)).then((e=>e.DurationFormatEditor));y.formatId=E.a;var P=n(17);const O=()=>n.e(8).then(n.bind(null,58)).then((e=>e.NumberFormatEditor));O.formatId=P.a;var C=n(29);const S=()=>n.e(3).then(n.bind(null,95)).then((e=>e.PercentFormatEditor));S.formatId=C.a;var D=n(30);const M=()=>n.e(13).then(n.bind(null,96)).then((e=>e.StaticLookupFormatEditor));M.formatId=D.a;var T=n(31);const k=()=>n.e(9).then(n.bind(null,97)).then((e=>e.StringFormatEditor));k.formatId=T.a;var w=n(32);const I=()=>n.e(10).then(n.bind(null,101)).then((e=>e.TruncateFormatEditor));I.formatId=w.a;var R=n(33);const B=()=>n.e(11).then(n.bind(null,98)).then((e=>e.UrlFormatEditor));B.formatId=R.a;var N=n(34);const L=()=>n.e(7).then(n.bind(null,99)).then((e=>e.HistogramFormatEditor));L.formatId=N.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5);const o=e=>({getFieldPreview:({index:t,context:n,script:o,document:i,documentId:a})=>Object(r.i)(e,{path:"/api/index_pattern_field_editor/field_preview",method:"post",body:{index:t,context:n,script:o,document:i,documentId:a}})})},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="bytes"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="color"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="date"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="date_nanos"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="duration"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="percent"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="static_lookup"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="string"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="truncate"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="url"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="histogram"},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(38),__kbnBundles__.define("plugin/indexPatternFieldEditor/public",n,39)},function(e,t,n){n.p=window.__kbnPublicPath__.indexPatternFieldEditor},function(e,t,n){"use strict";n.r(t),n.d(t,"DefaultFormatEditor",(function(){return _.DefaultFormatEditor})),n.d(t,"plugin",(function(){return v}));var r=n(4),o=n.n(r),i=n(1),a=n.n(i),s=n(2),d=n(5),l=n(11),u=n(3),c=n(0);const f=e=>{const[t,r]=Object(i.useState)(null),o=Object(i.useCallback)((async()=>{const{FieldEditorFlyoutContentContainer:e}=await n.e(1).then(n.bind(null,100));r((()=>e))}),[]);return Object(i.useEffect)((()=>{o()}),[o]),t?Object(c.jsx)(t,e):Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(u.EuiFlyoutHeader,null),Object(c.jsx)(u.EuiFlyoutBody,null),Object(c.jsx)(u.EuiFlyoutFooter,null))},m=({core:e,indexPatternService:t,fieldFormats:n,fieldFormatEditors:r,search:o,usageCollection:i,apiService:a})=>u=>{const{uiSettings:m,overlays:p,docLinks:b,notifications:F}=e,{Provider:g}=Object(d.g)({uiSettings:m,docLinks:b,http:e.http});let h=null;const _={current:()=>!0},v=e=>{_.current=e.canCloseValidator};return(({onSave:e,fieldName:u,ctx:{indexPattern:x}})=>{const j=()=>{h&&(h.close(),h=null)},E=u?x.getFieldByName(u):void 0;if(u&&!E){const e=s.i18n.translate("indexPatternFieldEditor.noSuchFieldName",{defaultMessage:"Field named '{fieldName}' not found on index pattern",values:{fieldName:u}});return F.toasts.addDanger(e),j}const y=!u,P=E&&E.runtimeField&&!E.isMapped,O=y||P?"runtime":"concrete";return h=p.openFlyout(Object(d.j)(Object(c.jsx)(g,null,Object(c.jsx)(f,{onSave:t=>{j(),e&&e(t)},onCancel:j,onMounted:v,docLinks:b,field:E,fieldTypeToProcess:O,indexPattern:x,search:o,indexPatternService:t,notifications:F,usageCollection:i,apiService:a,fieldFormatEditors:r,fieldFormats:n,uiSettings:m}))),{className:l.a,maxWidth:708,size:"l",ownFocus:!0,hideCloseButton:!0,"aria-label":y?s.i18n.translate("indexPatternFieldEditor.createField.flyoutAriaLabel",{defaultMessage:"Create field"}):s.i18n.translate("indexPatternFieldEditor.editField.flyoutAriaLabel",{defaultMessage:"Edit {fieldName} field",values:{fieldName:u}}),onClose:e=>{_.current()&&e.close()}}),j})(u)};class field_format_editors_FieldFormatEditors{constructor(){o()(this,"editors",[])}setup(e=[]){return this.editors=e,{register:e=>{this.editors.push(e)}}}start(){return{getAll:()=>[...this.editors],getById:e=>this.editors.find((t=>t.formatId===e))}}}var p=n(20);class format_editor_service_FormatEditorService{constructor(){o()(this,"fieldFormatEditors",void 0),this.fieldFormatEditors=new field_format_editors_FieldFormatEditors}setup(){const e=[p.b,p.c,p.d,p.e,p.f,p.h,p.i,p.j,p.k,p.l,p.m,p.g];return{fieldFormatEditors:this.fieldFormatEditors.setup(e)}}start(){return{fieldFormatEditors:this.fieldFormatEditors.start()}}stop(){}}var b=n(19),F=n(35);const g=({core:e,indexPatternService:t,usageCollection:n})=>r=>{const{overlays:o,notifications:i}=e;let a=null;return(({onDelete:e,fieldName:r,ctx:{indexPattern:u}})=>{const f=Array.isArray(r)?r:[r],m=()=>{a&&(a.close(),a=null)};return a=o.openModal(Object(d.j)(Object(c.jsx)(b.a,{fieldsToDelete:f,closeModal:m,confirmDelete:async()=>{m(),await async function(e,t,n){e.forEach((e=>{t.removeRuntimeField(e)}));try{n.usageCollection.reportUiCounter(l.b,F.METRIC_TYPE.COUNT,"delete_runtime")}catch{}try{await n.indexPatternService.updateSavedObject(t)}catch(e){const t=s.i18n.translate("indexPatternFieldEditor.save.deleteErrorTitle",{defaultMessage:"Failed to save field removal"});n.notifications.toasts.addError(e,{title:t})}}(f,u,{indexPatternService:t,usageCollection:n,notifications:i}),e&&e(f)}}))),m})(r)};var h=n(21);class plugin_IndexPatternFieldEditorPlugin{constructor(){o()(this,"formatEditorService",new format_editor_service_FormatEditorService)}setup(e,t){const{fieldFormatEditors:n}=this.formatEditorService.setup();return{fieldFormatEditors:n}}start(e,t){const{fieldFormatEditors:n}=this.formatEditorService.start(),{application:{capabilities:r},http:o}=e,{data:s,usageCollection:d}=t,l=g({core:e,indexPatternService:s.indexPatterns,usageCollection:d});return{fieldFormatEditors:n,openEditor:m({core:e,indexPatternService:s.indexPatterns,apiService:Object(h.a)(o),fieldFormats:s.fieldFormats,fieldFormatEditors:n,search:s.search,usageCollection:d}),openDeleteModal:l,userPermissions:{editIndexPattern:()=>r.management.kibana.indexPatterns},DeleteRuntimeFieldProvider:(u=l,a.a.memo((({indexPattern:e,children:t,onDelete:n})=>{const r=Object(i.useRef)(null),o=Object(i.useCallback)((async t=>{r.current&&r.current(),r.current=u({ctx:{indexPattern:e},fieldName:t,onDelete:n})}),[n,e]);return Object(i.useEffect)((()=>()=>{r.current&&r.current()}),[]),Object(c.jsx)(a.a.Fragment,null,t(o))})))};var u}stop(){return{}}}var _=n(7);function v(){return new plugin_IndexPatternFieldEditorPlugin}},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.ReactDomServer},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.Moment}]);