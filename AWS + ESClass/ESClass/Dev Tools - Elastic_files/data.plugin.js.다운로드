!function(e){function t(t){for(var a,n,i=t[0],s=t[1],o=0,u=[];o<i.length;o++)n=i[o],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&u.push(r[n][0]),r[n]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(l&&l(t);u.length;)u.shift()()}var a={},r={2:0};function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=function(e){return n.p+"data.chunk."+e+".js"}(e);var l=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,a[1](l)}r[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},n.m=e,n.c=a,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.oe=function(e){throw console.error(e),e};var i=window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var l=s;n(n.s=86)}([function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,a){"use strict";a.r(t),a.d(t,"DEFAULT_QUERY_LANGUAGE",(function(){return r.a})),a.d(t,"KIBANA_USER_QUERY_LANGUAGE_KEY",(function(){return r.b})),a.d(t,"UI_SETTINGS",(function(){return r.c})),a.d(t,"getEsQueryConfig",(function(){return n.t})),a.d(t,"COMPARE_ALL_OPTIONS",(function(){return n.a})),a.d(t,"compareFilters",(function(){return n.n})),a.d(t,"enableFilter",(function(){return n.r})),a.d(t,"pinFilter",(function(){return n.K})),a.d(t,"toggleFilterDisabled",(function(){return n.M})),a.d(t,"disableFilter",(function(){return n.q})),a.d(t,"fromKueryExpression",(function(){return n.s})),a.d(t,"toElasticsearchQuery",(function(){return n.L})),a.d(t,"nodeTypes",(function(){return n.I})),a.d(t,"buildEsQuery",(function(){return n.f})),a.d(t,"buildQueryFromFilters",(function(){return n.l})),a.d(t,"luceneStringToDsl",(function(){return n.G})),a.d(t,"decorateQuery",(function(){return n.o})),a.d(t,"getPhraseFilterField",(function(){return n.u})),a.d(t,"getPhraseFilterValue",(function(){return n.v})),a.d(t,"isFilterPinned",(function(){return n.z})),a.d(t,"nodeBuilder",(function(){return n.H})),a.d(t,"isFilters",(function(){return n.A})),a.d(t,"isExistsFilter",(function(){return n.w})),a.d(t,"isMatchAllFilter",(function(){return n.B})),a.d(t,"isPhraseFilter",(function(){return n.C})),a.d(t,"isPhrasesFilter",(function(){return n.D})),a.d(t,"isRangeFilter",(function(){return n.F})),a.d(t,"isQueryStringFilter",(function(){return n.E})),a.d(t,"buildQueryFilter",(function(){return n.k})),a.d(t,"buildPhrasesFilter",(function(){return n.j})),a.d(t,"buildPhraseFilter",(function(){return n.i})),a.d(t,"buildRangeFilter",(function(){return n.m})),a.d(t,"buildCustomFilter",(function(){return n.d})),a.d(t,"buildFilter",(function(){return n.h})),a.d(t,"buildEmptyFilter",(function(){return n.e})),a.d(t,"buildExistsFilter",(function(){return n.g})),a.d(t,"toggleFilterNegated",(function(){return n.N})),a.d(t,"FILTERS",(function(){return n.b})),a.d(t,"isFilter",(function(){return n.x})),a.d(t,"isFilterDisabled",(function(){return n.y})),a.d(t,"dedupFilters",(function(){return n.p})),a.d(t,"onlyDisabledFiltersChanged",(function(){return n.J})),a.d(t,"uniqFilters",(function(){return n.O})),a.d(t,"FilterStateStore",(function(){return n.c})),a.d(t,"castEsToKbnFieldTypeName",(function(){return s})),a.d(t,"getKbnFieldType",(function(){return l})),a.d(t,"getKbnTypeNames",(function(){return u})),a.d(t,"getFilterableKbnTypeNames",(function(){return o})),a.d(t,"KbnFieldType",(function(){return i.KbnFieldType})),a.d(t,"calculateBounds",(function(){return b})),a.d(t,"getAbsoluteTimeRange",(function(){return y})),a.d(t,"getTime",(function(){return _})),a.d(t,"getRelativeTime",(function(){return v})),a.d(t,"isTimeRange",(function(){return k})),a.d(t,"isQuery",(function(){return x})),a.d(t,"AggConfig",(function(){return E.a})),a.d(t,"AggConfigs",(function(){return E.b})),a.d(t,"AggGroupNames",(function(){return E.d})),a.d(t,"AggGroupLabels",(function(){return E.c})),a.d(t,"AggType",(function(){return E.f})),a.d(t,"getAggTypes",(function(){return E.wc})),a.d(t,"getAggTypesFunctions",(function(){return E.xc})),a.d(t,"AggTypesRegistry",(function(){return E.g})),a.d(t,"aggsRequiredUiSettings",(function(){return E.Wb})),a.d(t,"AggsCommonService",(function(){return E.h})),a.d(t,"autoInterval",(function(){return E.Xb})),a.d(t,"isAutoInterval",(function(){return E.xd})),a.d(t,"intervalOptions",(function(){return E.ud})),a.d(t,"BucketAggType",(function(){return E.k})),a.d(t,"isBucketAggType",(function(){return E.yd})),a.d(t,"BUCKET_TYPES",(function(){return E.i})),a.d(t,"aggDateHistogramFnName",(function(){return E.X})),a.d(t,"aggDateHistogram",(function(){return E.W})),a.d(t,"isDateHistogramBucketAggConfig",(function(){return E.Ad})),a.d(t,"getDateHistogramBucketAgg",(function(){return E.Ic})),a.d(t,"aggDateRangeFnName",(function(){return E.Z})),a.d(t,"aggDateRange",(function(){return E.Y})),a.d(t,"getDateRangeBucketAgg",(function(){return E.Kc})),a.d(t,"aggFilterFnName",(function(){return E.db})),a.d(t,"aggFilter",(function(){return E.cb})),a.d(t,"getFilterBucketAgg",(function(){return E.Oc})),a.d(t,"aggFiltersFnName",(function(){return E.hb})),a.d(t,"aggFilters",(function(){return E.gb})),a.d(t,"getFiltersBucketAgg",(function(){return E.Qc})),a.d(t,"aggGeoHashFnName",(function(){return E.nb})),a.d(t,"aggGeoHash",(function(){return E.mb})),a.d(t,"getGeoHashBucketAgg",(function(){return E.Tc})),a.d(t,"aggGeoTileFnName",(function(){return E.pb})),a.d(t,"aggGeoTile",(function(){return E.ob})),a.d(t,"getGeoTitleBucketAgg",(function(){return E.Uc})),a.d(t,"aggHistogramFnName",(function(){return E.rb})),a.d(t,"aggHistogram",(function(){return E.qb})),a.d(t,"getHistogramBucketAgg",(function(){return E.Vc})),a.d(t,"aggIpRangeFnName",(function(){return E.tb})),a.d(t,"aggIpRange",(function(){return E.sb})),a.d(t,"IP_RANGE_TYPES",(function(){return E.q})),a.d(t,"getIpRangeBucketAgg",(function(){return E.Wc})),a.d(t,"CidrMask",(function(){return E.l})),a.d(t,"convertDateRangeToString",(function(){return E.dc})),a.d(t,"convertIPRangeToString",(function(){return E.ec})),a.d(t,"boundsDescendingRaw",(function(){return E.Yb})),a.d(t,"calcAutoIntervalNear",(function(){return E.ac})),a.d(t,"calcAutoIntervalLessThan",(function(){return E.Zb})),a.d(t,"isType",(function(){return E.Hd})),a.d(t,"isNumberType",(function(){return E.Dd})),a.d(t,"isStringType",(function(){return E.Gd})),a.d(t,"isStringOrNumberType",(function(){return E.Fd})),a.d(t,"migrateIncludeExcludeFormat",(function(){return E.Qd})),a.d(t,"aggRangeFnName",(function(){return E.Hb})),a.d(t,"aggRange",(function(){return E.Gb})),a.d(t,"getRangeBucketAgg",(function(){return E.gd})),a.d(t,"aggSignificantTermsFnName",(function(){return E.Lb})),a.d(t,"aggSignificantTerms",(function(){return E.Kb})),a.d(t,"getSignificantTermsBucketAgg",(function(){return E.ld})),a.d(t,"aggTermsFnName",(function(){return E.Tb})),a.d(t,"aggTerms",(function(){return E.Sb})),a.d(t,"termsAggFilter",(function(){return E.oe})),a.d(t,"getTermsBucketAgg",(function(){return E.pd})),a.d(t,"aggAvgFnName",(function(){return E.H})),a.d(t,"aggAvg",(function(){return E.G})),a.d(t,"getAvgMetricAgg",(function(){return E.zc})),a.d(t,"aggBucketAvgFnName",(function(){return E.J})),a.d(t,"aggBucketAvg",(function(){return E.I})),a.d(t,"getBucketAvgMetricAgg",(function(){return E.Ac})),a.d(t,"aggBucketMaxFnName",(function(){return E.L})),a.d(t,"aggBucketMax",(function(){return E.K})),a.d(t,"getBucketMaxMetricAgg",(function(){return E.Bc})),a.d(t,"aggBucketMinFnName",(function(){return E.N})),a.d(t,"aggBucketMin",(function(){return E.M})),a.d(t,"getBucketMinMetricAgg",(function(){return E.Cc})),a.d(t,"aggBucketSumFnName",(function(){return E.P})),a.d(t,"aggBucketSum",(function(){return E.O})),a.d(t,"getBucketSumMetricAgg",(function(){return E.Dc})),a.d(t,"aggFilteredMetricFnName",(function(){return E.fb})),a.d(t,"aggFilteredMetric",(function(){return E.eb})),a.d(t,"getFilteredMetricAgg",(function(){return E.Pc})),a.d(t,"aggCardinalityFnName",(function(){return E.R})),a.d(t,"aggCardinality",(function(){return E.Q})),a.d(t,"getCardinalityMetricAgg",(function(){return E.Fc})),a.d(t,"getCountMetricAgg",(function(){return E.Gc})),a.d(t,"aggCountFnName",(function(){return E.T})),a.d(t,"aggCount",(function(){return E.S})),a.d(t,"aggCumulativeSumFnName",(function(){return E.V})),a.d(t,"aggCumulativeSum",(function(){return E.U})),a.d(t,"getCumulativeSumMetricAgg",(function(){return E.Hc})),a.d(t,"aggDerivativeFnName",(function(){return E.bb})),a.d(t,"aggDerivative",(function(){return E.ab})),a.d(t,"getDerivativeMetricAgg",(function(){return E.Lc})),a.d(t,"aggGeoBoundsFnName",(function(){return E.jb})),a.d(t,"aggGeoBounds",(function(){return E.ib})),a.d(t,"getGeoBoundsMetricAgg",(function(){return E.Rc})),a.d(t,"aggGeoCentroidFnName",(function(){return E.lb})),a.d(t,"aggGeoCentroid",(function(){return E.kb})),a.d(t,"getGeoCentroidMetricAgg",(function(){return E.Sc})),a.d(t,"parentPipelineType",(function(){return E.Ud})),a.d(t,"parentPipelineAggHelper",(function(){return E.Td})),a.d(t,"siblingPipelineType",(function(){return E.je})),a.d(t,"siblingPipelineAggHelper",(function(){return E.ie})),a.d(t,"aggMaxFnName",(function(){return E.vb})),a.d(t,"aggMax",(function(){return E.ub})),a.d(t,"getMaxMetricAgg",(function(){return E.Yc})),a.d(t,"aggMedianFnName",(function(){return E.xb})),a.d(t,"aggMedian",(function(){return E.wb})),a.d(t,"getMedianMetricAgg",(function(){return E.Zc})),a.d(t,"aggSinglePercentileFnName",(function(){return E.Nb})),a.d(t,"aggSinglePercentile",(function(){return E.Mb})),a.d(t,"getSinglePercentileMetricAgg",(function(){return E.md})),a.d(t,"MetricAggType",(function(){return E.w})),a.d(t,"isMetricAggType",(function(){return E.Cd})),a.d(t,"METRIC_TYPES",(function(){return E.v})),a.d(t,"aggMinFnName",(function(){return E.zb})),a.d(t,"aggMin",(function(){return E.yb})),a.d(t,"getMinMetricAgg",(function(){return E.ad})),a.d(t,"aggMovingAvgFnName",(function(){return E.Bb})),a.d(t,"aggMovingAvg",(function(){return E.Ab})),a.d(t,"getMovingAvgMetricAgg",(function(){return E.bd})),a.d(t,"aggPercentileRanksFnName",(function(){return E.Db})),a.d(t,"aggPercentileRanks",(function(){return E.Cb})),a.d(t,"getPercentileRanksMetricAgg",(function(){return E.dd})),a.d(t,"aggPercentilesFnName",(function(){return E.Fb})),a.d(t,"aggPercentiles",(function(){return E.Eb})),a.d(t,"getPercentilesMetricAgg",(function(){return E.ed})),a.d(t,"aggSerialDiffFnName",(function(){return E.Jb})),a.d(t,"aggSerialDiff",(function(){return E.Ib})),a.d(t,"getSerialDiffMetricAgg",(function(){return E.kd})),a.d(t,"aggStdDeviationFnName",(function(){return E.Pb})),a.d(t,"aggStdDeviation",(function(){return E.Ob})),a.d(t,"getStdDeviationMetricAgg",(function(){return E.nd})),a.d(t,"aggSumFnName",(function(){return E.Rb})),a.d(t,"aggSum",(function(){return E.Qb})),a.d(t,"getSumMetricAgg",(function(){return E.od})),a.d(t,"aggTopHitFnName",(function(){return E.Vb})),a.d(t,"aggTopHit",(function(){return E.Ub})),a.d(t,"getTopHitMetricAgg",(function(){return E.qd})),a.d(t,"AggParamType",(function(){return E.e})),a.d(t,"BaseParamType",(function(){return E.j})),a.d(t,"FieldParamType",(function(){return E.p})),a.d(t,"JsonParamType",(function(){return E.u})),a.d(t,"OptionedParamType",(function(){return E.x})),a.d(t,"StringParamType",(function(){return E.F})),a.d(t,"getCalculateAutoTimeExpression",(function(){return E.Ec})),a.d(t,"getNumberHistogramIntervalByDatatableColumn",(function(){return E.cd})),a.d(t,"getDateHistogramMetaDataByDatatableColumn",(function(){return E.Jc})),a.d(t,"dateHistogramInterval",(function(){return E.gc})),a.d(t,"InvalidEsCalendarIntervalError",(function(){return E.r})),a.d(t,"InvalidEsIntervalFormatError",(function(){return E.s})),a.d(t,"isValidEsInterval",(function(){return E.Id})),a.d(t,"isValidInterval",(function(){return E.Jd})),a.d(t,"splitStringInterval",(function(){return E.ke})),a.d(t,"parseInterval",(function(){return E.Wd})),a.d(t,"parseEsInterval",(function(){return E.Vd})),a.d(t,"toAbsoluteDates",(function(){return E.qe})),a.d(t,"getAggsFormats",(function(){return E.yc})),a.d(t,"IpAddress",(function(){return E.t})),a.d(t,"propFilter",(function(){return E.be})),a.d(t,"inferTimeZone",(function(){return E.sd})),a.d(t,"parseTimeShift",(function(){return E.Yd})),a.d(t,"cidrFunction",(function(){return E.bc})),a.d(t,"cidrToAst",(function(){return E.cc})),a.d(t,"dateRangeFunction",(function(){return E.hc})),a.d(t,"dateRangeToAst",(function(){return E.ic})),a.d(t,"extendedBoundsFunction",(function(){return E.lc})),a.d(t,"extendedBoundsToAst",(function(){return E.mc})),a.d(t,"geoBoundingBoxFunction",(function(){return E.sc})),a.d(t,"geoBoundingBoxToAst",(function(){return E.tc})),a.d(t,"geoPointFunction",(function(){return E.uc})),a.d(t,"geoPointToAst",(function(){return E.vc})),a.d(t,"ipRangeFunction",(function(){return E.vd})),a.d(t,"ipRangeToAst",(function(){return E.wd})),a.d(t,"kibana",(function(){return E.Kd})),a.d(t,"getKibanaContextFn",(function(){return E.Xc})),a.d(t,"kqlFunction",(function(){return E.Od})),a.d(t,"luceneFunction",(function(){return E.Pd})),a.d(t,"numericalRangeFunction",(function(){return E.Rd})),a.d(t,"numericalRangeToAst",(function(){return E.Sd})),a.d(t,"queryFilterFunction",(function(){return E.ce})),a.d(t,"queryFilterToAst",(function(){return E.de})),a.d(t,"queryToAst",(function(){return E.ee})),a.d(t,"timerangeToAst",(function(){return E.pe})),a.d(t,"kibanaContext",(function(){return E.Ld})),a.d(t,"getEsaggsMeta",(function(){return E.Mc})),a.d(t,"handleEsaggsRequest",(function(){return E.rd})),a.d(t,"functionWrapper",(function(){return E.rc})),a.d(t,"rangeFunction",(function(){return E.ge})),a.d(t,"fieldFunction",(function(){return E.oc})),a.d(t,"phraseFilterFunction",(function(){return E.Zd})),a.d(t,"existsFilterFunction",(function(){return E.kc})),a.d(t,"rangeFilterFunction",(function(){return E.fe})),a.d(t,"kibanaFilterFunction",(function(){return E.Md})),a.d(t,"filtersToAst",(function(){return E.pc})),a.d(t,"kibanaTimerangeFunction",(function(){return E.Nd})),a.d(t,"esRawResponse",(function(){return E.jc})),a.d(t,"getEsdslFn",(function(){return E.Nc})),a.d(t,"createSearchSource",(function(){return E.fc})),a.d(t,"injectReferences",(function(){return E.td})),a.d(t,"extractReferences",(function(){return E.nc})),a.d(t,"parseSearchSourceJSON",(function(){return E.Xd})),a.d(t,"getResponseInspectorStats",(function(){return E.hd})),a.d(t,"getSearchParams",(function(){return E.id})),a.d(t,"getSearchParamsFromRequest",(function(){return E.jd})),a.d(t,"getPreference",(function(){return E.fd})),a.d(t,"RequestFailure",(function(){return E.y})),a.d(t,"searchSourceRequiredUiSettings",(function(){return E.he})),a.d(t,"SearchSource",(function(){return E.C})),a.d(t,"SearchSourceService",(function(){return E.D})),a.d(t,"SortDirection",(function(){return E.E})),a.d(t,"tabifyDocs",(function(){return E.me})),a.d(t,"flattenHit",(function(){return E.qc})),a.d(t,"tabifyAggResponse",(function(){return E.le})),a.d(t,"tabifyGetColumns",(function(){return E.ne})),a.d(t,"isErrorResponse",(function(){return E.Bd})),a.d(t,"isCompleteResponse",(function(){return E.zd})),a.d(t,"isPartialResponse",(function(){return E.Ed})),a.d(t,"SearchSessionStatus",(function(){return E.B})),a.d(t,"SEARCH_SESSION_TYPE",(function(){return E.A})),a.d(t,"SEARCH_SESSIONS_TABLE_ID",(function(){return E.z})),a.d(t,"pollSearch",(function(){return E.ae})),a.d(t,"ES_SEARCH_STRATEGY",(function(){return E.o})),a.d(t,"EQL_SEARCH_STRATEGY",(function(){return E.n})),a.d(t,"ENHANCED_ES_SEARCH_STRATEGY",(function(){return E.m})),a.d(t,"ES_FIELD_TYPES",(function(){return T.a})),a.d(t,"KBN_FIELD_TYPES",(function(){return T.b})),a.d(t,"datatableToCSV",(function(){return P})),a.d(t,"CSV_MIME_TYPE",(function(){return N})),a.d(t,"createEscapeValue",(function(){return O})),a.d(t,"CSV_FORMULA_CHARS",(function(){return I})),a.d(t,"cellHasFormulas",(function(){return A})),a.d(t,"tableHasFormulas",(function(){return M})),a.d(t,"RUNTIME_FIELD_TYPES",(function(){return C.RUNTIME_FIELD_TYPES})),a.d(t,"FLEET_ASSETS_TO_IGNORE",(function(){return C.FLEET_ASSETS_TO_IGNORE})),a.d(t,"META_FIELDS",(function(){return C.META_FIELDS})),a.d(t,"DATA_VIEW_SAVED_OBJECT_TYPE",(function(){return C.DATA_VIEW_SAVED_OBJECT_TYPE})),a.d(t,"INDEX_PATTERN_SAVED_OBJECT_TYPE",(function(){return C.INDEX_PATTERN_SAVED_OBJECT_TYPE})),a.d(t,"isFilterable",(function(){return C.isFilterable})),a.d(t,"fieldList",(function(){return C.fieldList})),a.d(t,"DataViewField",(function(){return C.DataViewField})),a.d(t,"IndexPatternField",(function(){return C.IndexPatternField})),a.d(t,"DataViewType",(function(){return C.DataViewType})),a.d(t,"IndexPatternType",(function(){return C.IndexPatternType})),a.d(t,"IndexPatternsService",(function(){return C.IndexPatternsService})),a.d(t,"DataViewsService",(function(){return C.DataViewsService})),a.d(t,"IndexPattern",(function(){return C.IndexPattern})),a.d(t,"DataView",(function(){return C.DataView})),a.d(t,"DuplicateDataViewError",(function(){return C.DuplicateDataViewError})),a.d(t,"DataViewSavedObjectConflictError",(function(){return C.DataViewSavedObjectConflictError})),a.d(t,"getIndexPatternLoadMeta",(function(){return C.getIndexPatternLoadMeta})),a.d(t,"isNestedField",(function(){return C.isNestedField})),a.d(t,"isMultiField",(function(){return C.isMultiField})),a.d(t,"getFieldSubtypeMulti",(function(){return C.getFieldSubtypeMulti})),a.d(t,"getFieldSubtypeNested",(function(){return C.getFieldSubtypeNested}));var r=a(37),n=a(44),i=a(33);const s=i.castEsToKbnFieldTypeName,o=i.getFilterableKbnTypeNames,l=i.getKbnFieldType,u=i.getKbnTypeNames;var c=a(19),d=a.n(c),g=a(1),p=a(5);const h=(e,t)=>d.a.parse(e,{forceNow:t}),f=(e,t)=>d.a.parse(e,{roundUp:!0,forceNow:t}),m=e=>e.includes("now");function b(e,t={}){return{min:h(e.from,t.forceNow),max:f(e.to,t.forceNow)}}function y(e,{forceNow:t}={}){const{min:a,max:r}=b(e,{forceNow:t});return{from:a?a.toISOString():e.from,to:r?r.toISOString():e.to}}function _(e,t,a){return S(e,t,(null==a?void 0:a.fieldName)||(null==e?void 0:e.timeFieldName),null==a?void 0:a.forceNow,!0)}function v(e,t,a){return S(e,t,(null==a?void 0:a.fieldName)||(null==e?void 0:e.timeFieldName),null==a?void 0:a.forceNow,!1)}function S(e,t,a,r,n=!0){if(!e)return;const i=e.fields.find((t=>t.name===(a||e.timeFieldName)));if(!i)return;let s={format:"strict_date_optional_time"};if(n){var o,l;const e=b(t,{forceNow:r});if(!e)return;s.gte=null===(o=e.min)||void 0===o?void 0:o.toISOString(),s.lte=null===(l=e.max)||void 0===l?void 0:l.toISOString()}else{var u,c;s.gte=m(t.from)?t.from:null===(u=h(t.from,r))||void 0===u?void 0:u.toISOString(),s.lte=m(t.to)?t.to:null===(c=f(t.to,r))||void 0===c?void 0:c.toISOString()}return s=Object(g.omitBy)(s,(e=>null==e)),Object(p.m)(i,s,e)}const k=e=>!!e&&"object"==typeof e&&"string"==typeof e.from&&"string"==typeof e.to;a(52);const x=e=>!!e&&"object"==typeof e&&"string"==typeof e.language&&("string"==typeof e.query||"object"==typeof e.query&&!!e.query);var E=a(11),T=a(40);const I=["=","+","-","@"],w=/[^a-zA-Z0-9]/,F=/"/g,A=e=>I.some((t=>Object(g.startsWith)(e,t))),M=(e,t)=>e.some((({name:e})=>A(e)))||t.some((t=>e.some((({id:e})=>A(t[e])))));function O(e,t){return function(a){if(a&&"string"==typeof a){const r=t&&A(a)?"'"+a:a;if(e&&w.test(r))return`"${r.replace(F,'""')}"`}return null==a?"":a.toString()}}const R="\r\n",N="text/plain;charset=utf-8";function P({columns:e,rows:t},{csvSeparator:a,quoteValues:r,formatFactory:n,raw:i,escapeFormulaValues:s}){const o=O(r,s),l=e.map((e=>o(e.name))),u=e.reduce(((e,{id:t,meta:a})=>(e[t]=n(null==a?void 0:a.params),e)),{}),c=t.map((t=>e.map((e=>o(i?t[e.id]:u[e.id].convert(t[e.id]))))));return 0===l.length?"":[l,...c].map((e=>e.join(a))).join(R)+R}var C=a(17)},function(e,t,a){e.exports=a(29)(1075)},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,a){"use strict";a.d(t,"K",(function(){return _e})),a.d(t,"f",(function(){return Ut})),a.d(t,"l",(function(){return Dt})),a.d(t,"J",(function(){return Gt})),a.d(t,"p",(function(){return qt})),a.d(t,"q",(function(){return F})),a.d(t,"T",(function(){return A})),a.d(t,"o",(function(){return w})),a.d(t,"a",(function(){return E})),a.d(t,"n",(function(){return me})),a.d(t,"y",(function(){return he})),a.d(t,"B",(function(){return fe})),a.d(t,"O",(function(){return ge})),a.d(t,"A",(function(){return ie})),a.d(t,"N",(function(){return ye})),a.d(t,"s",(function(){return ce})),a.d(t,"r",(function(){return de})),a.d(t,"z",(function(){return se})),a.d(t,"R",(function(){return le})),a.d(t,"Q",(function(){return oe})),a.d(t,"S",(function(){return ue})),a.d(t,"U",(function(){return pe})),a.d(t,"x",(function(){return Y})),a.d(t,"C",(function(){return ae})),a.d(t,"D",(function(){return N})),a.d(t,"E",(function(){return q})),a.d(t,"G",(function(){return $})),a.d(t,"F",(function(){return re})),a.d(t,"k",(function(){return ne})),a.d(t,"j",(function(){return G})),a.d(t,"i",(function(){return L})),a.d(t,"m",(function(){return K})),a.d(t,"d",(function(){return Z})),a.d(t,"h",(function(){return J})),a.d(t,"e",(function(){return X})),a.d(t,"g",(function(){return W})),a.d(t,"w",(function(){return j})),a.d(t,"v",(function(){return C})),a.d(t,"H",(function(){return P})),a.d(t,"I",(function(){return H})),a.d(t,"u",(function(){return te})),a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return m})),a.d(t,"P",(function(){return Ct})),a.d(t,"M",(function(){return pt})),a.d(t,"L",(function(){return gt})),a.d(t,"t",(function(){return Nt}));var r={};a.r(r),a.d(r,"buildNode",(function(){return Ee})),a.d(r,"toElasticsearchQuery",(function(){return Te}));var n={};a.r(n),a.d(n,"wildcardSymbol",(function(){return Ie})),a.d(n,"buildNode",(function(){return Ae})),a.d(n,"test",(function(){return Me})),a.d(n,"toElasticsearchQuery",(function(){return Oe})),a.d(n,"toQueryStringQuery",(function(){return Re})),a.d(n,"hasLeadingWildcard",(function(){return Ne}));var i={};a.r(i),a.d(i,"buildNodeParams",(function(){return qe})),a.d(i,"toElasticsearchQuery",(function(){return Ge}));var s={};a.r(s),a.d(s,"buildNodeParams",(function(){return Qe})),a.d(s,"toElasticsearchQuery",(function(){return Ue}));var o={};a.r(o),a.d(o,"buildNodeParams",(function(){return ze})),a.d(o,"toElasticsearchQuery",(function(){return $e}));var l={};a.r(l),a.d(l,"buildNodeParams",(function(){return He})),a.d(l,"toElasticsearchQuery",(function(){return Ke}));var u={};a.r(u),a.d(u,"buildNodeParams",(function(){return We})),a.d(u,"toElasticsearchQuery",(function(){return Je}));var c={};a.r(c),a.d(c,"buildNodeParams",(function(){return Xe})),a.d(c,"toElasticsearchQuery",(function(){return Ze}));var d={};a.r(d),a.d(d,"buildNodeParams",(function(){return et})),a.d(d,"toElasticsearchQuery",(function(){return tt}));var g={};a.r(g),a.d(g,"buildNodeParams",(function(){return at})),a.d(g,"toElasticsearchQuery",(function(){return rt}));var p={};a.r(p),a.d(p,"buildNodeParams",(function(){return nt})),a.d(p,"toElasticsearchQuery",(function(){return it}));var h={};a.r(h),a.d(h,"buildNode",(function(){return ot})),a.d(h,"buildNodeWithArgumentNodes",(function(){return lt})),a.d(h,"toElasticsearchQuery",(function(){return ut}));var f={};a.r(f),a.d(f,"buildNode",(function(){return ct})),a.d(f,"toElasticsearchQuery",(function(){return dt}));var m,b,y=a(3),_=a.n(y),v=a(9),S=a.n(v),k=a(1),x=a.n(k),E={index:!0,disabled:!0,negate:!0,state:!0,alias:!0},T=function(e,t,a){var r,n,i=Object(k.omit)(e,a);return t.index&&(i.index=null===(r=e.meta)||void 0===r?void 0:r.index),t.negate&&(i.negate=e.meta&&Boolean(e.meta.negate)),t.disabled&&(i.disabled=e.meta&&Boolean(e.meta.disabled)),t.alias&&(i.alias=null===(n=e.meta)||void 0===n?void 0:n.alias),i},I=function(e,t,a){return Object(k.map)(e,(function(e){return T(e,t,a)}))},w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r,n=["$$hashKey","meta"];return(r=Object(k.defaults)(a||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1})).state||n.push("$state"),Array.isArray(e)&&Array.isArray(t)?Object(k.isEqual)(I(e,r,n),I(t,r,n)):!Array.isArray(e)&&!Array.isArray(t)&&Object(k.isEqual)(T(e,r,n),T(t,r,n))},F=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(t)||(t=[t]),Object(k.filter)(t,(function(t){return!Object(k.find)(e,(function(e){return w(e,t,a)}))}))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];return Object(k.each)(e,(function(e){a=Object(k.union)(a,F(a,[e],t))})),a},M=a(48),O=a.n(M),R=function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t},N=function(e){var t=Object(k.has)(e,"query.match_phrase"),a=Object(k.get)(e,"query.match",[]),r=void 0!==Object.values(a).find((function(e){return"phrase"===e.type}));return t||r},P=function(e){return Object(k.has)(e,"query.script.script.params.value")},C=function(e){var t,a,r=null!==(t=null!==(a=e.query.match_phrase)&&void 0!==a?a:e.query.match)&&void 0!==t?t:{};return Object.keys(r)[0]},j=function(e){if(N(e)){var t=e.query.match_phrase||e.query.match||{},a=Object.values(t)[0];return Object(k.isPlainObject)(a)?a.query:a}var r,n,i,s;return null===(r=e.query)||void 0===r||null===(n=r.script)||void 0===n||null===(i=n.script)||void 0===i||null===(s=i.params)||void 0===s?void 0:s.value},L=function(e,t,a){var r=R(e,t);return e.scripted?{meta:{index:a.id,field:e.name},query:{script:D(e,t)}}:{meta:{index:a.id},query:{match_phrase:_()({},e.name,r)}}},D=function(e,t){var a=R(e,t);return{script:{source:B(e),lang:e.lang,params:{value:a}}}},B=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(m||(m={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(b||(b={}));var q=function(e){var t;return(null==e||null===(t=e.meta)||void 0===t?void 0:t.type)===m.PHRASES},G=function(e,t,a){var r,n=a.id,i=m.PHRASES,s=e.name;return r=e.scripted?t.map((function(t){return{script:D(e,t)}})):t.map((function(t){return{match_phrase:_()({},e.name,t)}})),{meta:{index:n,type:i,key:s,params:t},query:{bool:{should:r,minimum_should_match:1}}}},Q={gt:">",gte:">=",lte:"<=",lt:"<"},U={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},z={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},$=function(e){return Object(k.has)(e,"query.range")},H=function(e){return function(e){return Boolean(Object(k.keys)(e).find((function(e){return["gte","gt","lte","lt","from","to"].includes(e)})))}(Object(k.get)(e,"query.script.script.params",{}))},K=function(e,t,a,r){if("gte"in(t=Object(k.mapValues)(t,(function(t){return"number"===e.type?parseFloat(t):t})))&&"gt"in t)throw new Error("gte and gt are mutually exclusive");if("lte"in t&&"lt"in t)throw new Error("lte and lt are mutually exclusive");var n=["gt","lt"].reduce((function(e,a){var r=a in t?a:"".concat(a,"e");return Math.abs(Object(k.get)(t,r))===1/0&&(e++,delete t[r]),e}),0),i=S()({index:a.id,params:{},field:e.name},r?{formattedValue:r}:{});if(2===n)return{meta:i,query:{match_all:{}}};if(e.scripted){var s=V(e,t);return s.script.params.value=function(e){return Object(k.map)(e,(function(e,t){return Object(k.get)(Q,t)+e})).join(" ")}(s.script.params),{meta:i,query:{script:s}}}return{meta:i,query:{range:_()({},e.name,t)}}},V=function(e,t){var a=Object(k.mapValues)(Object(k.pickBy)(t,(function(e,t){return t in Q})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(k.map)(a,(function(t,a){return"("+e.script+")"+Object(k.get)(Q,a)+a})).join(" && ");if("painless"===e.lang){var n="date"===e.type?z:U,i=Object(k.reduce)(a,(function(e,t,a){return e.concat(Object(k.get)(n,a))}),[]).join(" "),s=Object(k.map)(a,(function(t,a){return"".concat(a,"(() -> { ").concat(e.script," }, params.").concat(a,")")})).join(" && ");r="".concat(i).concat(s)}return{script:{source:r,params:a,lang:e.lang}}},Y=function(e){return Object(k.has)(e,"query.exists")},W=function(e,t){return{meta:{index:t.id},query:{exists:{field:e.name}}}};function J(e,t,a,r,n,i,s,o){var l=function(e,t,a,r){switch(a){case"phrase":return L(t,r,e);case"phrases":return G(t,r,e);case"range":var n=r,i=n.from,s=n.to;return K(t,{lt:s,gte:i},e);case"range_from_value":return K(t,r,e);case"exists":return W(t,e);default:throw new Error("Unknown filter type: ".concat(a))}}(e,t,a,i);return l.meta.alias=s,l.meta.negate=r,l.meta.disabled=n,o&&(l.$state={store:o}),l}var X=function(e,t){return{meta:{disabled:!1,negate:!1,alias:null,index:t},$state:{store:e?b.GLOBAL_STATE:b.APP_STATE}}};function Z(e,t,a,r,n,i){var s={index:e,type:m.CUSTOM,disabled:a,negate:r,alias:n},o=S()(S()({},t),{},{meta:s});return o.$state={store:i},o}var ee=function(e){return Y(e)?function(e){return e.query.exists&&e.query.exists.field}(e):N(e)?C(e):q(e)?function(e){return e.meta.key}(e):$(e)?function(e){return e.query.range&&Object.keys(e.query.range)[0]}(e):void 0};function te(e){switch(e.meta.type){case m.PHRASE:return e.meta.params.query;case m.PHRASES:return e.meta.params;case m.RANGE:var t=e.meta.params,a=t.gte,r=t.gt,n=t.lte,i=t.lt;return{from:null!=a?a:r,to:null!=i?i:n}}}var ae=function(e){return Object(k.has)(e,"query.match_all")},re=function(e){return Object(k.has)(e,"query.query_string")},ne=function(e,t,a){return{query:e,meta:{index:t,alias:a}}},ie=function(e){return e.$state&&e.$state.store===b.GLOBAL_STATE},se=function(e){return Object(k.get)(e,"meta.disabled",!1)},oe=function(e){var t=!e.meta.disabled,a=S()(S()({},e.meta),{},{disabled:t});return S()(S()({},e),{},{meta:a})},le=function(e){var t=!e.meta.negate,a=S()(S()({},e.meta),{},{negate:t});return S()(S()({},e),{},{meta:a})},ue=function(e){var t=ie(e)?b.APP_STATE:b.GLOBAL_STATE,a=S()(S()({},e.$state),{},{store:t});return S()(S()({},e),{},{$state:a})},ce=function(e){return e.meta.disabled?oe(e):e},de=function(e){return e.meta.disabled?e:oe(e)},ge=function(e){return ie(e)?e:ue(e)},pe=function(e){return ie(e)?ue(e):e},he=function(e){return!!e&&"object"===O()(e)&&!!e.meta&&"object"===O()(e.meta)&&"boolean"==typeof e.meta.disabled},fe=function(e){return Array.isArray(e)&&!e.find((function(e){return!he(e)}))},me=function(e){return Object(k.omit)(e,["meta","$state"])},be=function(e){return e&&e.meta&&!e.meta.disabled},ye=function(e,t){var a=Object(k.filter)(e||[],be),r=Object(k.filter)(t||[],be);return w(r,a,E)};function _e(e,t){if(function(e){var t,a,r=Object.keys(null!==(t=e.match||(null===(a=e.query)||void 0===a?void 0:a.match))&&void 0!==t?t:{})[0];return Boolean(r&&("phrase"===Object(k.get)(e,["query","match",r,"type"])||"phrase"===Object(k.get)(e,["match",r,"type"])))}(e)){var a=e.match||e.query.match,r=Object.keys(a)[0],n=Object(k.get)(a,[r]),i=n.query;if(t){var s=t.fields.find((function(e){return e.name===r}));s&&(i=R(s,n.query))}return{meta:e.meta,$state:e.$state,query:{match_phrase:_()({},r,Object(k.omit)(S()(S()({},n),{},{query:i}),"type"))}}}return e.query?e=Object(k.pick)(e,["meta","query","$state"]):e.query={},e.exists&&(e.query.exists=e.exists,delete e.exists),e.range&&(e.query.range=e.range,delete e.range),e.match_all&&(e.query.match_all=e.match_all,delete e.match_all),Object.keys(e).forEach((function(t){"meta"!==t&&"query"!==t&&"$state"!==t&&(e.query[t]=e[t],delete e[t])})),e}var ve=a(12),Se=a.n(ve),ke=a(38),xe=a.n(ke);function Ee(e){return{type:"literal",value:e}}function Te(e){return e.value}var Ie="@kuery-wildcard@";function we(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Fe(e){return e.replace(/[+\-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function Ae(e){return e.includes(Ie)?{type:"wildcard",value:e}:Rt(e)}function Me(e,t){var a=e.value.split(Ie).map(we).join("[\\s\\S]*");return new RegExp("^".concat(a,"$")).test(t)}function Oe(e){return e.value.split(Ie).join("*")}function Re(e){return e.value.split(Ie).map(Fe).join("*")}function Ne(e){var t=e.value;return t.startsWith(Ie)&&t.replace(Ie,"").length>0}function Pe(e,t){if(!t)return[];if("literal"===e.type){var a=Te(e),r=t.fields.find((function(e){return e.name===a}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return Me(e,t.name)})):void 0}var Ce=a(36),je=a.n(Ce);function Le(e){var t=je.a.tz.guess();return"Browser"===e?t:e}function De(e){return function(e){var t,a=null==e?void 0:e.subType;return!(null==a||null===(t=a.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function Be(e,t,a){var r=S()(S()({},e),{},{value:a?"".concat(a,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!a)return r;var n=Pe(r,t).reduce((function(e,t){var r=De(t),n=null==r?void 0:r.nested.path;return a&&!n?[].concat(Se()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(a,'" in the KQL expression.')]):n&&!a?[].concat(Se()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):n!==a?[].concat(Se()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(n.length>0)throw new Error(n.join("\n"));return r}function qe(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(k.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(k.isUndefined)(t))throw new Error("value is a required argument");return{arguments:["string"==typeof e?Rt(e):Ee(e),"string"==typeof t?Rt(t):Ee(t),Ee(a)]}}function Ge(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=xe()(e.arguments,3),i=n[0],s=n[1],o=n[2],l="wildcard"===s.type&&s.value===Ie,u="wildcard"===i.type&&i.value===Ie;if(l&&u)return{match_all:{}};var c=Be(i,t,null!=r&&r.nested?r.nested.path:void 0),d=Object(k.isUndefined)(s)?s:Pt(s),g=o.value?"phrase":"best_fields";if(null===c.value)return"wildcard"===s.type?{query_string:{query:Re(s)}}:{multi_match:{type:g,query:d,lenient:!0}};var p=t?Pe(c,t):[];return p&&0===p.length&&p.push({name:Pt(c),scripted:!1,type:""}),!l||null!=p&&p.length&&(null==p?void 0:p.length)!==(null==t?void 0:t.fields.length)?{bool:{should:p.reduce((function(e,t){var n=function(e){var a=De(t);return"wildcard"!==c.type||null==a||!a.nested||null!=r&&r.nested?e:{nested:{path:a.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(l)return[].concat(Se()(e),[n({exists:{field:t.name}})]);if("wildcard"===s.type)return[].concat(Se()(e),[n({query_string:{fields:[t.name],query:Re(s)}})]);if("date"===t.type){var i=a.dateFormatTZ?{time_zone:Le(a.dateFormatTZ)}:{};return[].concat(Se()(e),[n({range:_()({},t.name,S()({gte:d,lte:d},i))})])}var o="phrase"===g?"match_phrase":"match";return[].concat(Se()(e),[n(_()({},o,_()({},t.name,d)))])}if(!l)return[].concat(Se()(e),[{script:S()({},D(t,d))}])}),[])||[],minimum_should_match:1}}:{match_all:{}}}function Qe(e){return{arguments:e}}function Ue(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=a.filtersInMustClause,i=e.arguments||[],s=n?"must":"filter";return{bool:_()({},s,i.map((function(e){return Pt(e,t,a,r)})))}}function ze(e){return{arguments:e}}function $e(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{bool:{should:(e.arguments||[]).map((function(e){return Pt(e,t,a,r)})),minimum_should_match:1}}}function He(e){return{arguments:[e]}}function Ke(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=xe()(e.arguments,1)[0];return{bool:{must_not:Pt(n,t,a,r)}}}var Ve=a(45),Ye=a.n(Ve);function We(e,t){var a=Object(k.pick)(t,"gt","lt","gte","lte","format"),r="string"==typeof e?Rt(e):pt.literal.buildNode(e),n=Object(k.map)(a,(function(e,t){return pt.namedArg.buildNode(t,e)}));return{arguments:[r].concat(Se()(n))}}function Je(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=Ye()(e.arguments),i=n[0],s=n.slice(1),o=Be(i,t,null!=r&&r.nested?r.nested.path:void 0),l=t?Pe(o,t):[],u=function(e){if(e.gt&&e.gte||e.lt&&e.lte)throw new Error("range ends cannot be both inclusive and exclusive");var t=["gte","lte","format"];return e.reduce((function(e,a,r){return"namedArg"===a.type?e[a.name]=a.value:e[t[r]]=a,e}),{})}(s),c=Object(k.mapValues)(u,(function(e){return Pt(e)}));return l&&0===l.length&&l.push({name:Pt(o),scripted:!1,type:""}),{bool:{should:l.map((function(e){var t=function(t){var a=De(e);return"wildcard"!==o.type||null==a||!a.nested||r.nested?t:{nested:{path:a.nested.path,query:t,score_mode:"none"}}};if(e.scripted)return{script:V(e,c)};if("date"===e.type){var n=a.dateFormatTZ?{time_zone:Le(a.dateFormatTZ)}:{};return t({range:_()({},e.name,S()(S()({},c),n))})}return t({range:_()({},e.name,c)})})),minimum_should_match:1}}}function Xe(e){return{arguments:[Ee(e)]}}function Ze(e,t){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=xe()(e.arguments,1)[0],i=Te(S()(S()({},n),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(n.value):n.value})),s=null==t||null===(a=t.fields)||void 0===a?void 0:a.find((function(e){return e.name===i}));if(null!=s&&s.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:i}}}function et(e,t){t=x.a.pick(t,"topLeft","bottomRight");var a=pt.literal.buildNode(e),r=x.a.map(t,(function(e,t){var a="".concat(e.lat,", ").concat(e.lon);return pt.namedArg.buildNode(t,a)}));return{arguments:[a].concat(Se()(r))}}function tt(e,t){var a,r,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Ye()(e.arguments),s=i[0],o=i.slice(1),l=S()(S()({},s),{},{value:null!=n&&n.nested?"".concat(n.nested.path,".").concat(s.value):s.value}),u=pt.literal.toElasticsearchQuery(l),c=(null!==(a=null==t?void 0:t.fields)&&void 0!==a?a:[]).find((function(e){return e.name===u})),d=o.reduce((function(e,t){var a=x.a.snakeCase(t.name);return S()(S()({},e),{},_()({},a,Pt(t)))}),{});if(null!=c&&c.scripted)throw new Error("Geo bounding box query does not support scripted fields");return{geo_bounding_box:(r={},_()(r,u,d),_()(r,"ignore_unmapped",!0),r)}}function at(e,t){var a=pt.literal.buildNode(e),r=t.map((function(e){var t="".concat(e.lat,", ").concat(e.lon);return pt.literal.buildNode(t)}));return{arguments:[a].concat(Se()(r))}}function rt(e,t){var a,r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=Ye()(e.arguments),o=s[0],l=s.slice(1),u=S()(S()({},o),{},{value:null!=i&&i.nested?"".concat(i.nested.path,".").concat(o.value):o.value}),c=pt.literal.toElasticsearchQuery(u),d=(null!==(a=null==t?void 0:t.fields)&&void 0!==a?a:[]).find((function(e){return e.name===c})),g={points:l.map((function(e){return Pt(e,t,n,i)}))};if(null!=d&&d.scripted)throw new Error("Geo polygon query does not support scripted fields");return{geo_polygon:(r={},_()(r,c,g),_()(r,"ignore_unmapped",!0),r)}}function nt(e,t){return{arguments:["string"==typeof e?Rt(e):Ee(e),t]}}function it(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=xe()(e.arguments,2),s=i[0],o=i[1],l=Pt(s),u=null!=n&&null!==(a=n.nested)&&void 0!==a&&a.path?"".concat(n.nested.path,".").concat(l):l;return{nested:{path:u,query:Pt(o,t,r,S()(S()({},n),{},{nested:{path:u}})),score_mode:"none"}}}var st={is:i,and:s,or:o,not:l,range:u,exists:c,geoBoundingBox:d,geoPolygon:g,nested:p};function ot(e){var t=st[e];if(x.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return S()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function lt(e,t){if(x.a.isUndefined(st[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function ut(e,t,a,r){return st[e.function].toElasticsearchQuery(e,t,a,r)}function ct(e,t){return{type:"namedArg",name:e,value:"literal"===x.a.get(t,"type")?t:pt.literal.buildNode(t)}}function dt(e){return Pt(e.value)}var gt={is:function(e,t){return pt.function.buildNodeWithArgumentNodes("is",[pt.literal.buildNode(e),"string"==typeof t?pt.literal.buildNode(t):t,pt.literal.buildNode(!1)])},or:function(e){return e.length>1?pt.function.buildNode("or",e):e[0]},and:function(e){return e.length>1?pt.function.buildNode("and",e):e[0]}},pt={function:h,literal:r,namedArg:f,wildcard:n},ht=a(74),ft=a.n(ht),mt=a(75),bt=a.n(mt),yt=a(76),_t=a.n(yt),vt=a(77),St=a.n(vt),kt=a(78),xt=a.n(kt),Et=a(79),Tt=a.n(Et),It=a(0),wt=It.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Ft={fieldName:It.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:It.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:It.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:It.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},At=function(e){St()(a,e);var t=xt()(a);function a(e,r){var n;bt()(this,a);var i=e.message;if(e.expected){var s=e.expected.map((function(e){var t,a="other"===(t=e).type?t.description:"literal"===t.type?'"'.concat(t.text,'"'):"end"===t.type?"end of input":t.text||t.description||"";return Ft[a]||a})),o=Object(k.uniq)(s).filter((function(e){return void 0!==e})).sort().join(", ");i=It.i18n.translate("esQuery.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:o,foundInput:e.found?'"'.concat(e.found,'"'):wt}})}var l=[i,r,Object(k.repeat)("-",e.location.start.offset)+"^"].join("\n");return n=t.call(this,l),_()(_t()(n),"shortMessage",void 0),n.name="KQLSyntaxError",n.shortMessage=i,n}return ft()(a)}(Tt()(Error)),Mt=a(69),Ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return a(e,S()(S()({},t),{},{helpers:{nodeTypes:pt}}))},Rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ot(e,S()(S()({},t),{},{startRule:"Literal"}),Mt.parse)},Nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return Ot(e,t,Mt.parse)}catch(t){throw"SyntaxError"===t.name?new At(t,e):t}},Pt=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return t&&t.type&&pt[t.type]?pt[t.type].toElasticsearchQuery(t,a,r,n):e(pt.function.buildNode("and",[]),a)},Ct=function(){return Pt.apply(void 0,arguments)};function jt(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=pt.function.buildNode("and",t),n=Ct(r,e,a);return Object.assign({must:[],filter:[],should:[],must_not:[]},n.bool)}(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(e){return Nt(e.query,{allowLeadingWildcards:t})})),{dateFormatTZ:a,filtersInMustClause:r})}var Lt=function(e){return e.query||e},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=e.filter((function(e){return e&&!se(e)}));var r=function(r){return e.filter((function(e){return!!e})).filter((n=r,function(e){return Object(k.isUndefined)(e.meta)||Object(k.isUndefined)(e.meta.negate)?!n:e.meta&&e.meta.negate===n})).filter((function(e){return!a||function(e,t){var a,r;return null===(a=e.meta)||void 0===a||!a.key||!t||("custom"===(null===(r=e.meta)||void 0===r?void 0:r.type)?e.meta.index===t.id:t.fields.some((function(t){return t.name===e.meta.key})))}(e,t)})).map((function(e){return _e(e,t)})).map((function(e){return function(e,t){if(!t)return e;var a=ee(e);if(!a)return e;var r=t.fields.find((function(e){return e.name===a})),n=r&&De(r);if(!n)return e;var i=me(e);return{meta:e.meta,query:{nested:{path:n.nested.path,query:i.query||i}}}}(e,t)})).map(me).map(Lt);var n};return{must:[],filter:r(!1),should:[],must_not:r(!0)}},Bt=function(e){return Object(k.has)(e,"query_string.query")};function qt(e,t,a){return Bt(e)&&("string"==typeof t&&(t=JSON.parse(t)),Object(k.extend)(e.query_string,t),a&&Object(k.defaults)(e.query_string,{time_zone:Le(a)})),e}function Gt(e){return Object(k.isString)(e)?""===e.trim()?{match_all:{}}:{query_string:{query:e}}:e}function Qt(e){return e.filter((function(e){return!e||"object"!==O()(e)||!Object(k.isEqual)(e,{match_all:{}})}))}function Ut(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{allowLeadingWildcards:!1,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:!1};t=Array.isArray(t)?t:[t],a=Array.isArray(a)?a:[a];var n=t.filter((function(e){return Object(k.has)(e,"query")})),i=Object(k.groupBy)(n,"language"),s=jt(e,i.kuery,r.allowLeadingWildcards,r.dateFormatTZ,r.filtersInMustClause),o=function(e,t,a){return{must:(e||[]).map((function(e){return qt(Gt(e.query),t,a)})),filter:[],should:[],must_not:[]}}(i.lucene,r.queryStringOptions,r.dateFormatTZ),l=Dt(a,e,r.ignoreFilterIfFieldNotInIndex);return{bool:{must:Qt([].concat(Se()(s.must),Se()(o.must),Se()(l.must))),filter:Qt([].concat(Se()(s.filter),Se()(o.filter),Se()(l.filter))),should:Qt([].concat(Se()(s.should),Se()(o.should),Se()(l.should))),must_not:[].concat(Se()(s.must_not),Se()(o.must_not),Se()(l.must_not))}}}},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,a){e.exports=a(29)(2398)},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return r.b})),a.d(t,"d",(function(){return r.d})),a.d(t,"c",(function(){return r.c})),a.d(t,"f",(function(){return r.f})),a.d(t,"wc",(function(){return r.Ub})),a.d(t,"xc",(function(){return r.Vb})),a.d(t,"g",(function(){return r.g})),a.d(t,"Wb",(function(){return r.Mb})),a.d(t,"h",(function(){return r.h})),a.d(t,"Xb",(function(){return r.Nb})),a.d(t,"xd",(function(){return r.Kc})),a.d(t,"ud",(function(){return r.Jc})),a.d(t,"k",(function(){return r.k})),a.d(t,"yd",(function(){return r.Lc})),a.d(t,"i",(function(){return r.i})),a.d(t,"X",(function(){return r.N})),a.d(t,"W",(function(){return r.M})),a.d(t,"Ad",(function(){return r.Mc})),a.d(t,"Ic",(function(){return r.gc})),a.d(t,"Z",(function(){return r.P})),a.d(t,"Y",(function(){return r.O})),a.d(t,"Kc",(function(){return r.ic})),a.d(t,"db",(function(){return r.T})),a.d(t,"cb",(function(){return r.S})),a.d(t,"Oc",(function(){return r.kc})),a.d(t,"hb",(function(){return r.X})),a.d(t,"gb",(function(){return r.W})),a.d(t,"Qc",(function(){return r.mc})),a.d(t,"nb",(function(){return r.db})),a.d(t,"mb",(function(){return r.cb})),a.d(t,"Tc",(function(){return r.pc})),a.d(t,"pb",(function(){return r.fb})),a.d(t,"ob",(function(){return r.eb})),a.d(t,"Uc",(function(){return r.qc})),a.d(t,"rb",(function(){return r.hb})),a.d(t,"qb",(function(){return r.gb})),a.d(t,"Vc",(function(){return r.rc})),a.d(t,"tb",(function(){return r.jb})),a.d(t,"sb",(function(){return r.ib})),a.d(t,"q",(function(){return r.n})),a.d(t,"Wc",(function(){return r.sc})),a.d(t,"l",(function(){return r.l})),a.d(t,"dc",(function(){return r.Rb})),a.d(t,"ec",(function(){return r.Sb})),a.d(t,"Yb",(function(){return r.Ob})),a.d(t,"ac",(function(){return r.Qb})),a.d(t,"Zb",(function(){return r.Pb})),a.d(t,"Hd",(function(){return r.Rc})),a.d(t,"Dd",(function(){return r.Oc})),a.d(t,"Gd",(function(){return r.Qc})),a.d(t,"Fd",(function(){return r.Pc})),a.d(t,"Qd",(function(){return r.Uc})),a.d(t,"Hb",(function(){return r.xb})),a.d(t,"Gb",(function(){return r.wb})),a.d(t,"gd",(function(){return r.Ac})),a.d(t,"Lb",(function(){return r.Bb})),a.d(t,"Kb",(function(){return r.Ab})),a.d(t,"ld",(function(){return r.Cc})),a.d(t,"Tb",(function(){return r.Jb})),a.d(t,"Sb",(function(){return r.Ib})),a.d(t,"oe",(function(){return r.ed})),a.d(t,"pd",(function(){return r.Gc})),a.d(t,"H",(function(){return r.x})),a.d(t,"G",(function(){return r.w})),a.d(t,"zc",(function(){return r.Xb})),a.d(t,"J",(function(){return r.z})),a.d(t,"I",(function(){return r.y})),a.d(t,"Ac",(function(){return r.Yb})),a.d(t,"L",(function(){return r.B})),a.d(t,"K",(function(){return r.A})),a.d(t,"Bc",(function(){return r.Zb})),a.d(t,"N",(function(){return r.D})),a.d(t,"M",(function(){return r.C})),a.d(t,"Cc",(function(){return r.ac})),a.d(t,"P",(function(){return r.F})),a.d(t,"O",(function(){return r.E})),a.d(t,"Dc",(function(){return r.bc})),a.d(t,"fb",(function(){return r.V})),a.d(t,"eb",(function(){return r.U})),a.d(t,"Pc",(function(){return r.lc})),a.d(t,"R",(function(){return r.H})),a.d(t,"Q",(function(){return r.G})),a.d(t,"Fc",(function(){return r.dc})),a.d(t,"Gc",(function(){return r.ec})),a.d(t,"T",(function(){return r.J})),a.d(t,"S",(function(){return r.I})),a.d(t,"V",(function(){return r.L})),a.d(t,"U",(function(){return r.K})),a.d(t,"Hc",(function(){return r.fc})),a.d(t,"bb",(function(){return r.R})),a.d(t,"ab",(function(){return r.Q})),a.d(t,"Lc",(function(){return r.jc})),a.d(t,"jb",(function(){return r.Z})),a.d(t,"ib",(function(){return r.Y})),a.d(t,"Rc",(function(){return r.nc})),a.d(t,"lb",(function(){return r.bb})),a.d(t,"kb",(function(){return r.ab})),a.d(t,"Sc",(function(){return r.oc})),a.d(t,"Ud",(function(){return r.Wc})),a.d(t,"Td",(function(){return r.Vc})),a.d(t,"je",(function(){return r.cd})),a.d(t,"ie",(function(){return r.bd})),a.d(t,"vb",(function(){return r.lb})),a.d(t,"ub",(function(){return r.kb})),a.d(t,"Yc",(function(){return r.tc})),a.d(t,"xb",(function(){return r.nb})),a.d(t,"wb",(function(){return r.mb})),a.d(t,"Zc",(function(){return r.uc})),a.d(t,"Nb",(function(){return r.Db})),a.d(t,"Mb",(function(){return r.Cb})),a.d(t,"md",(function(){return r.Dc})),a.d(t,"w",(function(){return r.t})),a.d(t,"Cd",(function(){return r.Nc})),a.d(t,"v",(function(){return r.s})),a.d(t,"zb",(function(){return r.pb})),a.d(t,"yb",(function(){return r.ob})),a.d(t,"ad",(function(){return r.vc})),a.d(t,"Bb",(function(){return r.rb})),a.d(t,"Ab",(function(){return r.qb})),a.d(t,"bd",(function(){return r.wc})),a.d(t,"Db",(function(){return r.tb})),a.d(t,"Cb",(function(){return r.sb})),a.d(t,"dd",(function(){return r.yc})),a.d(t,"Fb",(function(){return r.vb})),a.d(t,"Eb",(function(){return r.ub})),a.d(t,"ed",(function(){return r.zc})),a.d(t,"Jb",(function(){return r.zb})),a.d(t,"Ib",(function(){return r.yb})),a.d(t,"kd",(function(){return r.Bc})),a.d(t,"Pb",(function(){return r.Fb})),a.d(t,"Ob",(function(){return r.Eb})),a.d(t,"nd",(function(){return r.Ec})),a.d(t,"Rb",(function(){return r.Hb})),a.d(t,"Qb",(function(){return r.Gb})),a.d(t,"od",(function(){return r.Fc})),a.d(t,"Vb",(function(){return r.Lb})),a.d(t,"Ub",(function(){return r.Kb})),a.d(t,"qd",(function(){return r.Hc})),a.d(t,"e",(function(){return r.e})),a.d(t,"j",(function(){return r.j})),a.d(t,"p",(function(){return r.m})),a.d(t,"u",(function(){return r.r})),a.d(t,"x",(function(){return r.u})),a.d(t,"F",(function(){return r.v})),a.d(t,"Ec",(function(){return r.cc})),a.d(t,"cd",(function(){return r.xc})),a.d(t,"Jc",(function(){return r.hc})),a.d(t,"gc",(function(){return r.Tb})),a.d(t,"r",(function(){return r.o})),a.d(t,"s",(function(){return r.p})),a.d(t,"Id",(function(){return r.Sc})),a.d(t,"Jd",(function(){return r.Tc})),a.d(t,"ke",(function(){return r.dd})),a.d(t,"Wd",(function(){return r.Yc})),a.d(t,"Vd",(function(){return r.Xc})),a.d(t,"qe",(function(){return r.fd})),a.d(t,"yc",(function(){return r.Wb})),a.d(t,"t",(function(){return r.q})),a.d(t,"be",(function(){return r.ad})),a.d(t,"sd",(function(){return r.Ic})),a.d(t,"Yd",(function(){return r.Zc})),a.d(t,"bc",(function(){return n.a})),a.d(t,"cc",(function(){return n.b})),a.d(t,"hc",(function(){return n.c})),a.d(t,"ic",(function(){return n.d})),a.d(t,"lc",(function(){return n.g})),a.d(t,"mc",(function(){return n.h})),a.d(t,"sc",(function(){return n.l})),a.d(t,"tc",(function(){return n.m})),a.d(t,"uc",(function(){return n.n})),a.d(t,"vc",(function(){return n.o})),a.d(t,"vd",(function(){return n.t})),a.d(t,"wd",(function(){return n.u})),a.d(t,"Kd",(function(){return n.v})),a.d(t,"Xc",(function(){return n.r})),a.d(t,"Od",(function(){return n.z})),a.d(t,"Pd",(function(){return n.A})),a.d(t,"Rd",(function(){return n.B})),a.d(t,"Sd",(function(){return n.C})),a.d(t,"ce",(function(){return n.E})),a.d(t,"de",(function(){return n.F})),a.d(t,"ee",(function(){return n.G})),a.d(t,"pe",(function(){return n.J})),a.d(t,"Ld",(function(){return n.w})),a.d(t,"Mc",(function(){return n.p})),a.d(t,"rd",(function(){return n.s})),a.d(t,"rc",(function(){return n.k})),a.d(t,"ge",(function(){return n.I})),a.d(t,"oc",(function(){return n.i})),a.d(t,"Zd",(function(){return n.D})),a.d(t,"kc",(function(){return n.f})),a.d(t,"fe",(function(){return n.H})),a.d(t,"Md",(function(){return n.x})),a.d(t,"pc",(function(){return n.j})),a.d(t,"Nd",(function(){return n.y})),a.d(t,"jc",(function(){return n.e})),a.d(t,"Nc",(function(){return n.q})),a.d(t,"fc",(function(){return I})),a.d(t,"td",(function(){return w})),a.d(t,"nc",(function(){return E})),a.d(t,"Xd",(function(){return F})),a.d(t,"hd",(function(){return k})),a.d(t,"id",(function(){return y})),a.d(t,"jd",(function(){return v})),a.d(t,"fd",(function(){return _})),a.d(t,"y",(function(){return request_error_RequestFailure})),a.d(t,"he",(function(){return T})),a.d(t,"C",(function(){return search_source_SearchSource})),a.d(t,"D",(function(){return search_source_service_SearchSourceService})),a.d(t,"E",(function(){return A})),a.d(t,"me",(function(){return M.c})),a.d(t,"qc",(function(){return M.a})),a.d(t,"le",(function(){return M.b})),a.d(t,"ne",(function(){return M.d})),a.d(t,"Bd",(function(){return O})),a.d(t,"zd",(function(){return R})),a.d(t,"Ed",(function(){return N})),a.d(t,"B",(function(){return P})),a.d(t,"A",(function(){return C})),a.d(t,"z",(function(){return j})),a.d(t,"ae",(function(){return L})),a.d(t,"o",(function(){return D})),a.d(t,"n",(function(){return B})),a.d(t,"m",(function(){return q}));var r=a(30),n=a(15),i=a(1);var s=a(3),o=a.n(s),l=a(81),u=a(7),c=a(8),d=a(5);function g(e,t,a={}){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t,a){const[[r,n]]=Object.entries(e),i="object"==typeof n?n:{order:n};if(t&&"string"!=typeof t){const e=t.fields.find((({name:e})=>e===r));if(e&&e.scripted&&e.sortable)return{_script:{script:{source:e.script,lang:e.lang},type:p(e.type),...i}}}"string"==typeof a&&(a=JSON.parse(a));const{unmapped_type:s,...o}=a;return{[r]:{...i,..."_score"===r?o:a}}}(e,t,a)}))}function p(e){if(["number"].includes(e))return"number";if(["string","boolean"].includes(e))return"string";throw new Error(`Unsupported script sort type: ${e}`)}var h=a(26),f=a(2),m=a(37);const b=Date.now();function y(e){return{preference:_(e)}}function _(e){const t=e(m.c.COURIER_SET_REQUEST_PREFERENCE);return"sessionId"===t?b:"custom"===t?e(m.c.COURIER_CUSTOM_REQUEST_PREFERENCE):void 0}function v(e,t){const{getConfig:a}=t,r=y(a),{track_total_hits:n,...i}=e.body;return{index:e.index.title||e.index,body:i,track_total_hits:n,...r}}class request_error_RequestFailure extends h.KbnError{constructor(e=null,t){super(`Request to Elasticsearch failed: ${JSON.stringify((null==t?void 0:t.rawResponse)||(null==e?void 0:e.message))}`),o()(this,"resp",void 0),this.resp=t}}var S=a(0);function k(e,t){var a;const r=(null==t?void 0:t.history)&&t.history[t.history.length-1],n={};if(e&&e.took&&(n.queryTime={label:S.i18n.translate("data.search.searchSource.queryTimeLabel",{defaultMessage:"Query time"}),value:S.i18n.translate("data.search.searchSource.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:e.took}}),description:S.i18n.translate("data.search.searchSource.queryTimeDescription",{defaultMessage:"The time it took to process the query. Does not include the time to send the request or parse it in the browser."})}),e&&void 0!==(null===(a=e.hits)||void 0===a?void 0:a.total)){let t;if("number"==typeof e.hits.total)t=`${e.hits.total}`;else{const a=e.hits.total;t="eq"===a.relation?`${a.value}`:`> ${a.value}`}n.hitsTotal={label:S.i18n.translate("data.search.searchSource.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:t,description:S.i18n.translate("data.search.searchSource.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})}}return e&&e.hits&&(n.hits={label:S.i18n.translate("data.search.searchSource.hitsLabel",{defaultMessage:"Hits"}),value:`${e.hits.hits.length}`,description:S.i18n.translate("data.search.searchSource.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}),r&&(0===r.ms||r.ms)&&(n.requestTime={label:S.i18n.translate("data.search.searchSource.requestTimeLabel",{defaultMessage:"Request time"}),value:S.i18n.translate("data.search.searchSource.requestTimeValue",{defaultMessage:"{requestTime}ms",values:{requestTime:r.ms}}),description:S.i18n.translate("data.search.searchSource.requestTimeDescription",{defaultMessage:"The time of the request from the browser to Elasticsearch and back. Does not include the time the requested waited in the queue."})}),n}var x=a(42);const E=e=>{let t={...e};const a=[];if(t.index){const e=t.index.id||t.index,r="kibanaSavedObjectMeta.searchSourceJSON.index";a.push({name:r,type:f.DATA_VIEW_SAVED_OBJECT_TYPE,id:e}),t={...t,indexRefName:r,index:void 0}}return t.filter&&(t={...t,filter:t.filter.map(((e,t)=>{if(!e.meta||!e.meta.index)return e;const r=`kibanaSavedObjectMeta.searchSourceJSON.filter[${t}].meta.index`;return a.push({name:r,type:f.DATA_VIEW_SAVED_OBJECT_TYPE,id:e.meta.index}),{...e,meta:{...e.meta,indexRefName:r,index:void 0}}}))}),[t,a]},T=["dateFormat:tz",f.UI_SETTINGS.COURIER_BATCH_SEARCHES,f.UI_SETTINGS.COURIER_CUSTOM_REQUEST_PREFERENCE,f.UI_SETTINGS.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX,f.UI_SETTINGS.COURIER_MAX_CONCURRENT_SHARD_REQUESTS,f.UI_SETTINGS.COURIER_SET_REQUEST_PREFERENCE,f.UI_SETTINGS.DOC_HIGHLIGHT,f.UI_SETTINGS.META_FIELDS,f.UI_SETTINGS.QUERY_ALLOW_LEADING_WILDCARDS,f.UI_SETTINGS.QUERY_STRING_OPTIONS,f.UI_SETTINGS.SEARCH_INCLUDE_FROZEN,f.UI_SETTINGS.SORT_OPTIONS];class search_source_SearchSource{constructor(e={},t){o()(this,"id",Object(i.uniqueId)("data_source")),o()(this,"shouldOverwriteDataViewType",!1),o()(this,"overwriteDataViewType",void 0),o()(this,"parent",void 0),o()(this,"requestStartHandlers",[]),o()(this,"inheritOptions",{}),o()(this,"history",[]),o()(this,"fields",void 0),o()(this,"dependencies",void 0),o()(this,"getFieldName",(e=>"string"==typeof e?e:e.field));const{parent:a,...r}=e;this.fields=r,this.dependencies=t,a&&this.setParent(new search_source_SearchSource(a,t))}setOverwriteDataViewType(e){!1===e?(this.shouldOverwriteDataViewType=!1,this.overwriteDataViewType=void 0):(this.shouldOverwriteDataViewType=!0,this.overwriteDataViewType=e)}setField(e,t){return null==t?this.removeField(e):(this.fields[e]=t,this)}removeField(e){return delete this.fields[e],this}setFields(e){return this.fields=e,this}getId(){return this.id}getFields(){return{...this.fields}}getField(e,t=!0){if(!t||void 0!==this.fields[e])return this.fields[e];const a=this.getParent();return a&&a.getField(e)}getOwnField(e){return this.getField(e,!1)}create(){return new search_source_SearchSource({},this.dependencies)}createCopy(){const e=new search_source_SearchSource({},this.dependencies);return e.setFields({...this.fields}),e.setField("index",this.getField("index")),e.setParent(this.getParent()),e}createChild(e={}){const t=new search_source_SearchSource({},this.dependencies);return t.setParent(this,e),t}setParent(e,t={}){return this.parent=e,this.inheritOptions=t,this}getParent(){return this.parent}fetch$(e={}){const{getConfig:t}=this.dependencies,a=t(f.UI_SETTINGS.COURIER_BATCH_SEARCHES);null!=e&&e.strategy||!a||(e.strategy=f.ES_SEARCH_STRATEGY,e.sessionId=void 0);const r=Object(c.defer)((()=>this.requestIsStarting(e))).pipe(Object(u.switchMap)((()=>{const t=this.flatten();return this.history=[t],t.index&&(e.indexPattern=t.index),this.fetchSearch$(t,e)})),Object(u.tap)((e=>{if(!e||e.error)throw new request_error_RequestFailure(null,e)})),Object(u.shareReplay)());return this.inspectSearch(r,e)}fetch(e={}){return this.fetch$(e).toPromise().then((e=>e.rawResponse))}onRequestStart(e){this.requestStartHandlers.push(e)}getSearchRequestBody(){return this.flatten().body}destroy(){this.requestStartHandlers.length=0}inspectSearch(e,t){const{id:a,title:r,description:n,adapter:i}=t.inspector||{title:""},s=null==i?void 0:i.start(r,{id:a,description:n,searchSessionId:t.sessionId}),o=()=>{try{null==s||s.json(this.getSearchRequestBody())}catch(e){}},l=e.pipe(Object(u.first)(void 0,null),Object(u.tap)((()=>{null==s||s.stats(function(e){const t={},a=e.getField("index");return a&&(t.indexPattern={label:S.i18n.translate("data.search.searchSource.indexPatternLabel",{defaultMessage:"Index pattern"}),value:a.title,description:S.i18n.translate("data.search.searchSource.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})},t.indexPatternId={label:S.i18n.translate("data.search.searchSource.indexPatternIdLabel",{defaultMessage:"Index pattern ID"}),value:a.id,description:S.i18n.translate("data.search.searchSource.indexPatternIdDescription",{defaultMessage:"The ID in the {kibanaIndexPattern} index.",values:{kibanaIndexPattern:".kibana"}})}),t}(this)),o()})),Object(u.catchError)((()=>(o(),c.EMPTY))),Object(u.finalize)((()=>{l.unsubscribe()}))).subscribe(),d=e.pipe(Object(u.catchError)((e=>(null==s||s.error({json:e}),c.EMPTY))),Object(u.last)(void 0,null),Object(u.tap)((e=>{e&&(null==s||s.stats(k(e.rawResponse,this)),null==s||s.ok({json:e}))})),Object(u.finalize)((()=>{d.unsubscribe()}))).subscribe();return e}hasPostFlightRequests(){const e=this.getField("aggs");return e instanceof f.AggConfigs&&e.aggs.some((e=>e.enabled&&"function"==typeof e.type.postFlightRequest))}postFlightTransform(e){const t=this.getField("aggs");return t instanceof f.AggConfigs?t.postFlightTransform(e):e}async fetchOthers(e,t){const a=this.getField("aggs");if(a instanceof f.AggConfigs)for(const n of a.aggs){var r;if(n.enabled&&"function"==typeof n.type.postFlightRequest)e=await n.type.postFlightRequest(e,a,n,this,null===(r=t.inspector)||void 0===r?void 0:r.adapter,t.abortSignal,t.sessionId)}return e}fetchSearch$(e,t){const{search:a,getConfig:r,onResponse:n}=this.dependencies;return a({params:v(e,{getConfig:r}),indexType:e.indexType},t).pipe(Object(u.switchMap)((e=>new c.Observable((a=>{if(Object(f.isErrorResponse)(e))a.error(e);else if(Object(f.isPartialResponse)(e))a.next(this.postFlightTransform(e));else if(this.hasPostFlightRequests()){a.next({...this.postFlightTransform(e),isPartial:!0,isRunning:!0});const r=Object(c.from)(this.fetchOthers(e.rawResponse,t)).subscribe({next:t=>{a.next(this.postFlightTransform({...e,rawResponse:t}))},error:e=>{a.error(e),r.unsubscribe()},complete:()=>{a.complete(),r.unsubscribe()}})}else a.next(this.postFlightTransform(e)),a.complete()})))),Object(u.map)((t=>n(e,t))))}requestIsStarting(e={}){const t=[...this.requestStartHandlers];if(this.inheritOptions.callParentStartHandlers){let e=this.getParent();for(;e;)t.push(...e.requestStartHandlers),e=e.getParent()}return Promise.all(t.map((t=>t(this,e))))}mergeProp(e,t,a){if(null==(t="function"==typeof t?t(this):t)||!a)return;const r=(t,a)=>{e[t]=a},n=(t,a)=>{null==e.body[t]&&(e.body[t]=a)},{getConfig:i}=this.dependencies;switch(a){case"filter":return r("filters",(e.filters||[]).concat(t));case"query":return r(a,(e[a]||[]).concat(t));case"fields":return n("fields",t);case"fieldsFromSource":return r(a,[...new Set((e[a]||[]).concat(t))]);case"index":case"type":case"highlightAll":return a&&null==e[a]&&r(a,t);case"searchAfter":return n("search_after",t);case"trackTotalHits":return n("track_total_hits",t);case"source":return n("_source",t);case"sort":return n(a,g(t,this.getField("index"),i(f.UI_SETTINGS.SORT_OPTIONS)));case"aggs":return t instanceof f.AggConfigs?n("aggs",t.toDsl()):n("aggs",t);default:return n(a,t)}}mergeProps(e=this,t={body:{}}){return Object.entries(this.fields).forEach((([e,a])=>{this.mergeProp(t,a,e)})),this.parent&&this.parent.mergeProps(e,t),t}getIndexType(e){return this.shouldOverwriteDataViewType?this.overwriteDataViewType:null==e?void 0:e.type}getFieldsWithoutSourceFilters(e,t){var a;if(!e)return t;const{fields:r}=e,n=e.getSourceFiltering();if(!n||0===(null===(a=n.excludes)||void 0===a?void 0:a.length)||0===t.length)return t;const i=n.excludes,s=t.find((e=>"*"===e||"*"===e.field)),o=Object(h.fieldWildcardFilter)(i,this.dependencies.getConfig(f.UI_SETTINGS.META_FIELDS)),l=e=>e&&o(e);return s?r.filter((e=>l(e.name))).map((e=>({field:e.name}))):t.filter((e=>l(this.getFieldName(e))))}getFieldFromDocValueFieldsOrIndexPattern(e,t,a){if("string"==typeof t)return t;const r=this.getFieldName(t),n={...e[r],...t};if(!a)return n;const{fields:i}=a,s=i.getByType("date").find((e=>e.name===r));if(!s)return n;const{esTypes:o}=s;return null!=o&&o.includes("date_nanos")?n.format="strict_date_optional_time_nanos":null!=o&&o.includes("date")&&(n.format="strict_date_optional_time"),n}flatten(){var e,t;const{getConfig:a}=this.dependencies,r=this.mergeProps();r.body=r.body||{};const{body:n,index:s,query:o,filters:u,highlightAll:c}=r;r.indexType=this.getIndexType(s);const g=null!==(e=a(f.UI_SETTINGS.META_FIELDS))&&void 0!==e?e:[],{docvalueFields:p,scriptFields:m,storedFields:b,runtimeFields:y}=s?s.getComputedFields():{docvalueFields:[],scriptFields:{},storedFields:["*"],runtimeFields:{}},_=!!n.fields;let v=r.fieldsFromSource||[];n.fields=n.fields||[],n.script_fields={...n.script_fields,...m},n.stored_fields=b,n.runtime_mappings=y||{};let S=p;if(s){const e=s.getSourceFiltering();n.hasOwnProperty("_source")||(n._source=e);const t=Object(h.fieldWildcardFilter)(n._source.excludes,g);n.fields=n.fields.filter((e=>t(this.getFieldName(e)))),v=v.filter((e=>t(this.getFieldName(e)))),S=S.filter((e=>t(this.getFieldName(e))))}if(_||v.length){const e=n.fields.map((e=>this.getFieldName(e))),t=[...new Set([...e,...v])];t.includes("*")||(n.script_fields=Object(i.pick)(n.script_fields,Object.keys(n.script_fields).filter((e=>t.includes(e)))));const a=Object(i.difference)(t,[...Object.keys(n.script_fields),...Object.keys(n.runtime_mappings)]).filter((e=>!!e&&(!n._source||!n._source.excludes||!n._source.excludes.includes(e))));if(n.stored_fields=[...new Set(a)],v.length)Object(i.isEqual)(a,v)||Object(l.setWith)(n,"_source.includes",a,(e=>Object(i.isObject)(e)?{}:e)),n.fields=[...n.fields,...S.filter((e=>v.includes(this.getFieldName(e))&&!(n.docvalue_fields||[]).map((e=>this.getFieldName(e))).includes(this.getFieldName(e))))],_||0!==n.fields.length||delete n.fields;else{n._source=!1;const e=Object(i.keyBy)(S,"field"),t=this.getFieldsWithoutSourceFilters(s,n.fields);n.fields=Object(i.uniqWith)(t.concat(S),((e,t)=>this.getFieldName(e)===this.getFieldName(t))).filter((e=>!g.includes(this.getFieldName(e)))).map((t=>{const a=this.getFieldName(t);return Object.keys(e).includes(a)?"string"==typeof t?e[t]:this.getFieldFromDocValueFieldsOrIndexPattern(e,t,s):t}))}}else n.fields=S;0===n.size&&(delete n._source,delete n.fields);const k=(null!==(t=n.sort)&&void 0!==t?t:[]).some((e=>e.hasOwnProperty("_score"))),E={...Object(f.getEsQueryConfig)({get:a}),filtersInMustClause:k};return n.query=Object(d.f)(s,o,u,E),c&&n.query&&(n.highlight=Object(x.getHighlightRequest)(a(f.UI_SETTINGS.DOC_HIGHLIGHT)),delete r.highlightAll),r}getSerializedFields(e=!1){const{filter:t,size:a,...r}=this.getFields();let n={...r,index:r.index?r.index.id:void 0};if(t){const e=this.getFilters(t);n={...n,filter:e}}return e&&this.getParent()&&(n.parent=this.getParent().getSerializedFields(e)),n}serialize(){const[e,t]=E(this.getSerializedFields());return{searchSourceJSON:JSON.stringify(e),references:t}}getFilters(e){return e?Array.isArray(e)?e:Object(i.isFunction)(e)?this.getFilters(e()):[e]:[]}}const I=(e,t)=>async(a={})=>{const r={...a};r.index&&"string"==typeof r.index&&(r.index=await e.get(a.index));const n=new search_source_SearchSource(r,t),s=n.getOwnField("query");return void 0!==s&&n.setField("query",function(e){return Object(i.has)(e,"language")?e:{query:e,language:"lucene"}}(s)),n},w=(e,t)=>{const a={...e};if(e.indexRefName){const r=t.find((t=>t.name===e.indexRefName));if(!r)throw new Error(`Could not find reference for ${e.indexRefName}`);a.index=r.id,delete a.indexRefName}return a.filter&&Array.isArray(a.filter)&&a.filter.forEach((e=>{if(!e.meta||!e.meta.indexRefName)return;const a=t.find((t=>t.name===e.meta.indexRefName));if(!a)throw new Error(`Could not find reference for ${e.meta.indexRefName}`);e.meta.index=a.id,delete e.meta.indexRefName})),a},F=e=>{let t;try{t=JSON.parse(e)}catch(t){throw new h.InvalidJSONProperty(`Invalid JSON in search source. ${t.message} JSON: ${e}`)}if(!t||"object"!=typeof t)throw new h.InvalidJSONProperty("Invalid JSON in search source.");return t};class search_source_service_SearchSourceService{setup(){}start(e,t){return{create:I(e,t),createEmpty:()=>new search_source_SearchSource({},t)}}stop(){}}let A;!function(e){e.asc="asc",e.desc="desc"}(A||(A={}));var M=a(65);const O=e=>!e||!e.rawResponse||!e.isRunning&&!!e.isPartial,R=e=>Boolean(e&&!e.isRunning&&!e.isPartial),N=e=>Boolean(e&&e.isRunning&&e.isPartial);let P;!function(e){e.IN_PROGRESS="in_progress",e.ERROR="error",e.COMPLETE="complete",e.CANCELLED="cancelled",e.EXPIRED="expired"}(P||(P={}));const C="search-session",j="searchSessionsMgmtUiTable",L=(e,t,{pollInterval:a=1e3,abortSignal:r}={})=>Object(c.defer)((()=>{if(null!=r&&r.aborted)throw new h.AbortError;t&&(null==r||r.addEventListener("abort",t,{once:!0}));const n=(r?Object(c.fromEvent)(r,"abort"):c.EMPTY).pipe(Object(u.map)((()=>{throw new h.AbortError})));return Object(c.from)(e()).pipe(Object(u.expand)((()=>Object(c.timer)(a).pipe(Object(u.switchMap)(e)))),Object(u.tap)((e=>{if(Object(f.isErrorResponse)(e))throw e?new Error("Received partial response"):new h.AbortError})),Object(u.takeWhile)(f.isPartialResponse,!0),Object(u.takeUntil)(n))})),D="es",B="eql",q="ese"},function(e,t,a){e.exports=a(29)(2403)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,a){"use strict";let r;a.d(t,"a",(function(){return r})),function(e){e.FILTER="filter",e.FILTERS="filters",e.HISTOGRAM="histogram",e.IP_RANGE="ip_range",e.DATE_RANGE="date_range",e.RANGE="range",e.TERMS="terms",e.SIGNIFICANT_TERMS="significant_terms",e.GEOHASH_GRID="geohash_grid",e.GEOTILE_GRID="geotile_grid",e.DATE_HISTOGRAM="date_histogram"}(r||(r={}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"h",(function(){return d})),a.d(t,"l",(function(){return g})),a.d(t,"m",(function(){return f})),a.d(t,"n",(function(){return m})),a.d(t,"o",(function(){return p})),a.d(t,"t",(function(){return b})),a.d(t,"u",(function(){return y})),a.d(t,"v",(function(){return v})),a.d(t,"r",(function(){return x})),a.d(t,"z",(function(){return E})),a.d(t,"A",(function(){return T})),a.d(t,"B",(function(){return I})),a.d(t,"C",(function(){return w})),a.d(t,"E",(function(){return F})),a.d(t,"F",(function(){return M})),a.d(t,"G",(function(){return A})),a.d(t,"J",(function(){return O})),a.d(t,"w",(function(){return R})),a.d(t,"p",(function(){return B})),a.d(t,"s",(function(){return D})),a.d(t,"k",(function(){return q})),a.d(t,"I",(function(){return G})),a.d(t,"i",(function(){return Q})),a.d(t,"D",(function(){return U})),a.d(t,"f",(function(){return z})),a.d(t,"H",(function(){return $})),a.d(t,"x",(function(){return H})),a.d(t,"j",(function(){return K})),a.d(t,"y",(function(){return V})),a.d(t,"e",(function(){return J})),a.d(t,"q",(function(){return X.a}));var r=a(0);const n={name:"cidr",type:"cidr",inputTypes:["null"],help:r.i18n.translate("data.search.functions.cidr.help",{defaultMessage:"Create a CIDR-based range"}),args:{mask:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.cidr.cidr.help",{defaultMessage:"Specify the CIDR block"})}},fn:(e,{mask:t})=>({mask:t,type:"cidr"})};var i=a(10);const s=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("cidr",e)]).toAst(),o={name:"dateRange",type:"date_range",inputTypes:["null"],help:r.i18n.translate("data.search.functions.dateRange.help",{defaultMessage:"Create a date range"}),args:{from:{types:["number","string"],help:r.i18n.translate("data.search.functions.dateRange.from.help",{defaultMessage:"Specify the starting date"})},to:{types:["number","string"],help:r.i18n.translate("data.search.functions.dateRange.to.help",{defaultMessage:"Specify the ending date"})}},fn:(e,{from:t,to:a})=>({from:t,to:a,type:"date_range"})},l=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("dateRange",e)]).toAst();var u=a(1);const c={name:"extendedBounds",type:"extended_bounds",inputTypes:["null"],help:r.i18n.translate("data.search.functions.extendedBounds.help",{defaultMessage:"Create extended bounds"}),args:{min:{types:["number"],help:r.i18n.translate("data.search.functions.extendedBounds.min.help",{defaultMessage:"Specify the lower boundary value"})},max:{types:["number"],help:r.i18n.translate("data.search.functions.extendedBounds.max.help",{defaultMessage:"Specify the upper boundary value"})}},fn:(e,{min:t,max:a})=>({type:"extended_bounds",...Object(u.omitBy)({min:t,max:a},u.isNil)})},d=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("extendedBounds",e)]).toAst();const g={name:"geoBoundingBox",type:"geo_bounding_box",inputTypes:["null"],help:r.i18n.translate("data.search.functions.geoBoundingBox.help",{defaultMessage:"Create a geo bounding box"}),args:{top:{types:["number"],help:r.i18n.translate("data.search.functions.geoBoundingBox.top.help",{defaultMessage:"Specify the top coordinate"})},left:{types:["number"],help:r.i18n.translate("data.search.functions.geoBoundingBox.left.help",{defaultMessage:"Specify the left coordinate"})},bottom:{types:["number"],help:r.i18n.translate("data.search.functions.geoBoundingBox.bottom.help",{defaultMessage:"Specify the bottom coordinate"})},right:{types:["number"],help:r.i18n.translate("data.search.functions.geoBoundingBox.right.help",{defaultMessage:"Specify the right coordinate"})},wkt:{types:["string"],help:r.i18n.translate("data.search.functions.geoBoundingBox.wkt.help",{defaultMessage:"Specify the Well-Known Text (WKT)"})},topLeft:{types:["geo_point"],help:r.i18n.translate("data.search.functions.geoBoundingBox.top_left.help",{defaultMessage:"Specify the top left corner"})},bottomRight:{types:["geo_point"],help:r.i18n.translate("data.search.functions.geoBoundingBox.bottom_right.help",{defaultMessage:"Specify the bottom right corner"})},topRight:{types:["geo_point"],help:r.i18n.translate("data.search.functions.geoBoundingBox.top_right.help",{defaultMessage:"Specify the top right corner"})},bottomLeft:{types:["geo_point"],help:r.i18n.translate("data.search.functions.geoBoundingBox.bottom_left.help",{defaultMessage:"Specify the bottom left corner"})}},fn(e,t){if(null!=(null==(a=t)?void 0:a.wkt))return{...Object(u.pick)(t,"wkt"),type:"geo_bounding_box"};var a;if(function(e){return null!=(null==e?void 0:e.top)&&null!=(null==e?void 0:e.left)&&null!=(null==e?void 0:e.bottom)&&null!=(null==e?void 0:e.right)}(t))return{...Object(u.pick)(t,["top","left","bottom","right"]),type:"geo_bounding_box"};if(function(e){return null!=(null==e?void 0:e.topLeft)&&null!=(null==e?void 0:e.bottomRight)||null!=(null==e?void 0:e.topRight)&&null!=(null==e?void 0:e.bottomLeft)}(t))return{...Object(u.chain)(t).pick(["topLeft","bottomRight","topRight","bottomLeft"]).omitBy(u.isNil).mapKeys(((e,t)=>Object(u.snakeCase)(t))).mapValues((({value:e})=>e)).value(),type:"geo_bounding_box"};throw new Error(r.i18n.translate("data.search.functions.geoBoundingBox.arguments.error",{defaultMessage:"At least one of the following groups of parameters must be provided: {parameters}.",values:{parameters:[["wkt"],["top","left","bottom","right"],["topLeft","bottomRight"],["topRight","bottomLeft"]].map((e=>e.join(", "))).join("; ")}}))}},p=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("geoPoint","object"!=typeof e||Array.isArray(e)?{point:Array.isArray(e)?e:[e]}:e)]).toAst(),h=["top_left","bottom_right","top_right","bottom_left"],f=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("geoBoundingBox",{...Object(u.omit)(e,h),...Object(u.chain)(e).pick(h).omitBy(u.isNil).mapKeys(((e,t)=>Object(u.camelCase)(t))).mapValues((e=>p(e))).value()})]).toAst(),m={name:"geoPoint",type:"geo_point",inputTypes:["null"],help:r.i18n.translate("data.search.functions.geoPoint.help",{defaultMessage:"Create a geo point"}),args:{lat:{types:["number"],help:r.i18n.translate("data.search.functions.geoPoint.lat.help",{defaultMessage:"Specify the latitude"})},lon:{types:["number"],help:r.i18n.translate("data.search.functions.geoPoint.lon.help",{defaultMessage:"Specify the longitude"})},point:{aliases:["_"],types:["number","string"],multi:!0,help:r.i18n.translate("data.search.functions.geoPoint.point.help",{defaultMessage:"Specify the point as a string with comma-separated coordinates or as two numeric values"})}},fn(e,{lat:t,lon:a,point:n}){if(null!=t&&null!=a)return{type:"geo_point",value:{lat:t,lon:a}};if(!n)throw new Error(r.i18n.translate("data.search.functions.geoPoint.arguments.error",{defaultMessage:'Either "lat" and "lon" or "point" parameters should be specified.'}));const[i]=n;if("string"==typeof i)return{value:i,type:"geo_point"};if(2!==n.length)throw new Error(r.i18n.translate("data.search.functions.geoPoint.point.error",{defaultMessage:"The point parameter should either be a string or two numeric values."}));return{type:"geo_point",value:[...n]}}},b={name:"ipRange",type:"ip_range",inputTypes:["null"],help:r.i18n.translate("data.search.functions.ipRange.help",{defaultMessage:"Create an IP range"}),args:{from:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.ipRange.from.help",{defaultMessage:"Specify the starting address"})},to:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.ipRange.to.help",{defaultMessage:"Specify the ending address"})}},fn:(e,{from:t,to:a})=>({from:t,to:a,type:"ip_range"})},y=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("ipRange",e)]).toAst(),_=e=>e?Array.isArray(e)?e:[e]:[],v={name:"kibana",type:"kibana_context",inputTypes:["kibana_context","null"],help:r.i18n.translate("data.search.functions.kibana.help",{defaultMessage:"Gets kibana global context"}),args:{},fn:(e,t,{getSearchContext:a})=>({...e,type:"kibana_context",query:[..._(a().query),..._((e||{}).query)],filters:[...a().filters||[],...(e||{}).filters||[]],timeRange:a().timeRange||(e?e.timeRange:void 0)})};var S=a(5);const k=(e=[],t)=>Object(u.uniqBy)([...Array.isArray(e)?e:[e],...Array.isArray(t)?t:[t]],(e=>JSON.stringify(e.query))),x=e=>({name:"kibana_context",type:"kibana_context",inputTypes:["kibana_context","null"],help:r.i18n.translate("data.search.functions.kibana_context.help",{defaultMessage:"Updates kibana global context"}),args:{q:{types:["kibana_query","null"],aliases:["query","_"],default:null,help:r.i18n.translate("data.search.functions.kibana_context.q.help",{defaultMessage:"Specify Kibana free form text query"})},filters:{types:["kibana_filter","null"],multi:!0,help:r.i18n.translate("data.search.functions.kibana_context.filters.help",{defaultMessage:"Specify Kibana generic filters"})},timeRange:{types:["timerange","null"],default:null,help:r.i18n.translate("data.search.functions.kibana_context.timeRange.help",{defaultMessage:"Specify Kibana time range filter"})},savedSearchId:{types:["string","null"],default:null,help:r.i18n.translate("data.search.functions.kibana_context.savedSearchId.help",{defaultMessage:"Specify saved search ID to be used for queries and filters"})}},extract(e){const t=[];if(e.savedSearchId.length&&"string"==typeof e.savedSearchId[0]){const a="kibana_context.savedSearchId";return t.push({name:a,type:"search",id:e.savedSearchId[0]}),{state:{...e,savedSearchId:[a]},references:t}}return{state:e,references:t}},inject(e,t){const a=t.find((e=>"kibana_context.savedSearchId"===e.name));return a&&(e.savedSearchId[0]=a.id),e},async fn(t,a,{getKibanaRequest:r}){var n;const{savedObjectsClient:s}=await e(r),o=a.timeRange||(null==t?void 0:t.timeRange);let l=k(null==t?void 0:t.query,(null==a?void 0:a.q)||[]),u=[...(null==t?void 0:t.filters)||[],...(null==a||null===(n=a.filters)||void 0===n?void 0:n.map(i.unboxExpressionValue))||[]];if(a.savedSearchId){const e=(await s.get("search",a.savedSearchId)).attributes.kibanaSavedObjectMeta.searchSourceJSON,{query:t,filter:r}=(d={},"string"==typeof(c=e)&&c.length&&JSON.parse(c)||d);t&&(l=k(l,t)),r&&(u=[...u,...Array.isArray(r)?r:[r]])}var c,d;return{type:"kibana_context",query:l,filters:Object(S.T)(u.filter((e=>{var t;return!(null!==(t=e.meta)&&void 0!==t&&t.disabled)}))),timeRange:o}}}),E={name:"kql",type:"kibana_query",inputTypes:["null"],help:r.i18n.translate("data.search.functions.kql.help",{defaultMessage:"Create kibana kql query"}),args:{q:{types:["string"],required:!0,aliases:["query","_"],help:r.i18n.translate("data.search.functions.kql.q.help",{defaultMessage:"Specify Kibana KQL free form text query"})}},fn:(e,t)=>({type:"kibana_query",language:"kuery",query:t.q})},T={name:"lucene",type:"kibana_query",inputTypes:["null"],help:r.i18n.translate("data.search.functions.lucene.help",{defaultMessage:"Create kibana lucene query"}),args:{q:{types:["string"],required:!0,aliases:["query","_"],help:r.i18n.translate("data.search.functions.lucene.q.help",{defaultMessage:"Specify Lucene free form text query"})}},fn:(e,t)=>({type:"kibana_query",language:"lucene",query:JSON.parse(t.q)})},I={name:"numericalRange",type:"numerical_range",inputTypes:["null"],help:r.i18n.translate("data.search.functions.numericalRange.help",{defaultMessage:"Create a numerical range"}),args:{from:{types:["number"],help:r.i18n.translate("data.search.functions.numericalRange.from.help",{defaultMessage:"Specify the starting value"})},to:{types:["number"],help:r.i18n.translate("data.search.functions.numericalRange.to.help",{defaultMessage:"Specify the ending value"})},label:{types:["string"],help:r.i18n.translate("data.search.functions.numericalRange.label.help",{defaultMessage:"Specify the range label"})}},fn:(e,{from:t,to:a,label:r})=>({type:"numerical_range",...Object(u.omitBy)({from:t,to:a,label:r},u.isNil)})},w=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("numericalRange",e)]).toAst(),F={name:"queryFilter",type:"kibana_query_filter",inputTypes:["null"],help:r.i18n.translate("data.search.functions.queryFilter.help",{defaultMessage:"Create a query filter"}),args:{input:{types:["kibana_query"],aliases:["_"],required:!0,help:r.i18n.translate("data.search.functions.queryFilter.input.help",{defaultMessage:"Specify the query filter"})},label:{types:["string"],help:r.i18n.translate("data.search.functions.queryFilter.label.help",{defaultMessage:"Specify the filter label"})}},fn:(e,{input:t,label:a})=>({type:"kibana_query_filter",input:Object(u.omit)(t,"type"),...Object(u.omitBy)({label:a},u.isNil)})},A=e=>"kuery"===e.language?Object(i.buildExpression)([Object(i.buildExpressionFunction)("kql",{q:e.query})]).toAst():Object(i.buildExpression)([Object(i.buildExpressionFunction)("lucene",{q:JSON.stringify(e.query)})]).toAst(),M=({input:e,label:t})=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("queryFilter",{label:t,input:A(e)})]).toAst(),O=e=>Object(i.buildExpression)([Object(i.buildExpressionFunction)("timerange",e)]).toAst(),R={name:"kibana_context",from:{null:()=>({type:"kibana_context"})},to:{null:()=>({type:"null"})}};var N=a(30),P=a(8),C=a(7),j=a(2),L=a(65);const D=({abortSignal:e,aggs:t,filters:a,indexPattern:n,inspectorAdapters:i,partialRows:s,query:o,searchSessionId:l,searchSourceService:u,timeFields:c,timeRange:d,getNow:g,executionContext:p})=>Object(P.defer)((async()=>{var e;const r=null==g?void 0:g(),i=await u.create();i.setField("index",n),i.setField("size",0);const s=i.createChild({callParentStartHandlers:!0}),l=s.createChild({callParentStartHandlers:!0}),p=null==n||null===(e=n.getTimeField)||void 0===e?void 0:e.call(n),h=p?[p.name]:[],f=null!=c&&c.length?c:h;return t.setTimeRange(d),t.setForceNow(r),t.setTimeFields(f),Object.defineProperty(l,"history",{get:()=>i.history,set:e=>i.history=e}),l.setField("aggs",t),l.onRequestStart(((e,a)=>t.onSearchRequestStart(e,a))),d&&f.length>0&&s.setField("filter",(()=>t.getSearchSourceTimeFilter(r))),l.setField("filter",a),l.setField("query",o),{allTimeFields:f,forceNow:r,requestSearchSource:l}})).pipe(Object(C.switchMap)((({allTimeFields:a,forceNow:n,requestSearchSource:o})=>o.fetch$({abortSignal:e,sessionId:l,inspector:{adapter:i.requests,title:r.i18n.translate("data.functions.esaggs.inspector.dataRequest.title",{defaultMessage:"Data"}),description:r.i18n.translate("data.functions.esaggs.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})},executionContext:p}).pipe(Object(C.map)((({rawResponse:e})=>{const r=d?Object(j.calculateBounds)(d,{forceNow:n}):null,i={metricsAtAllLevels:t.hierarchical,partialRows:s,timeRange:r?{from:r.min,to:r.max,timeFields:a}:void 0};return Object(L.b)(t,e,i)})))))),B=()=>({name:"esaggs",type:"datatable",inputTypes:["kibana_context","null"],help:r.i18n.translate("data.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["index_pattern"],required:!0,help:r.i18n.translate("data.search.functions.esaggs.index.help",{defaultMessage:"Index pattern retrieved with indexPatternLoad"})},aggs:{types:["agg_type"],multi:!0,default:`{${Object(i.buildExpressionFunction)(N.J,{}).toString()}}`,help:r.i18n.translate("data.search.functions.esaggs.aggConfigs.help",{defaultMessage:"List of aggs configured with agg_type functions"})},metricsAtAllLevels:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.esaggs.metricsAtAllLevels.help",{defaultMessage:"Whether to include columns with metrics for each bucket level"})},partialRows:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.esaggs.partialRows.help",{defaultMessage:"Whether to return rows that only contain partial data"})},timeFields:{types:["string"],multi:!0,help:r.i18n.translate("data.search.functions.esaggs.timeFields.help",{defaultMessage:"Provide time fields to get the resolved time ranges for the query"})}}}),q=e=>{const t=Object(u.mapValues)(e.args,(e=>e.default));return(a,r={},n={})=>e.fn(a,{...t,...r},n)},G={name:"range",type:"kibana_range",inputTypes:["null"],help:r.i18n.translate("data.search.functions.range.help",{defaultMessage:"Create kibana range filter"}),args:{gt:{types:["string","number"],help:r.i18n.translate("data.search.functions.range.gt.help",{defaultMessage:"Greater than"})},lt:{types:["string","number"],help:r.i18n.translate("data.search.functions.range.lt.help",{defaultMessage:"Less than"})},gte:{types:["string","number"],help:r.i18n.translate("data.search.functions.range.gte.help",{defaultMessage:"Greater or equal than"})},lte:{types:["string","number"],help:r.i18n.translate("data.search.functions.range.lte.help",{defaultMessage:"Less or equal than"})}},fn(e,t){if(void 0===t.lt&&void 0===t.lte)throw new Error("lt or lte must be provided");if(void 0===t.gt&&void 0===t.gte)throw new Error("gt or gte must be provided");return{type:"kibana_range",...t}}},Q={name:"field",type:"kibana_field",inputTypes:["null"],help:r.i18n.translate("data.search.functions.field.help",{defaultMessage:"Create a Kibana field."}),args:{name:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.field.name.help",{defaultMessage:"Name of the field"})},type:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.field.type.help",{defaultMessage:"Type of the field"})},script:{types:["string"],help:r.i18n.translate("data.search.functions.field.script.help",{defaultMessage:"A field script, in case the field is scripted."})}},fn:(e,t)=>({type:"kibana_field",spec:{name:t.name,type:t.type,scripted:!!t.script,script:t.script}})},U={name:"rangeFilter",type:"kibana_filter",inputTypes:["null"],help:r.i18n.translate("data.search.functions.phraseFilter.help",{defaultMessage:"Create kibana phrase or phrases filter"}),args:{field:{types:["kibana_field"],required:!0,help:r.i18n.translate("data.search.functions.phraseFilter.field.help",{defaultMessage:"Specify the field you want to filter on. Use `field` function."})},phrase:{types:["string"],multi:!0,required:!0,help:r.i18n.translate("data.search.functions.phraseFilter.phrase.help",{defaultMessage:"Specify the phrases"})},negate:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.phraseFilter.negate.help",{defaultMessage:"Should the filter be negated"})}},fn:(e,t)=>1===t.phrase.length?{type:"kibana_filter",...Object(S.h)({},t.field.spec,S.b.PHRASE,t.negate||!1,!1,t.phrase[0],null)}:{type:"kibana_filter",...Object(S.h)({},t.field.spec,S.b.PHRASES,t.negate||!1,!1,t.phrase,null)}},z={name:"existsFilter",type:"kibana_filter",inputTypes:["null"],help:r.i18n.translate("data.search.functions.existsFilter.help",{defaultMessage:"Create kibana exists filter"}),args:{field:{types:["kibana_field"],required:!0,help:r.i18n.translate("data.search.functions.existsFilter.field.help",{defaultMessage:"Specify the field you want to filter on. Use `field` function."})},negate:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.existsFilter.negate.help",{defaultMessage:"Should the filter be negated."})}},fn:(e,t)=>({type:"kibana_filter",...Object(S.h)({},t.field.spec,S.b.EXISTS,t.negate||!1,!1,{},null)})},$={name:"rangeFilter",type:"kibana_filter",inputTypes:["null"],help:r.i18n.translate("data.search.functions.rangeFilter.help",{defaultMessage:"Create kibana range filter"}),args:{field:{types:["kibana_field"],required:!0,help:r.i18n.translate("data.search.functions.rangeFilter.field.help",{defaultMessage:"Specify the field you want to filter on. Use `field` function."})},range:{types:["kibana_range"],required:!0,help:r.i18n.translate("data.search.functions.rangeFilter.range.help",{defaultMessage:"Specify the range, use `range` function."})},negate:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.rangeFilter.negate.help",{defaultMessage:"Should the filter be negated"})}},fn:(e,t)=>({type:"kibana_filter",...Object(S.h)({},t.field.spec,S.b.RANGE,t.negate||!1,!1,{from:t.range.gt||t.range.gte,to:t.range.lt||t.range.lte},null)})},H={name:"kibanaFilter",type:"kibana_filter",inputTypes:["null"],help:r.i18n.translate("data.search.functions.kibanaFilter.help",{defaultMessage:"Create kibana filter"}),args:{query:{types:["string"],aliases:["q","_"],required:!0,help:r.i18n.translate("data.search.functions.kibanaFilter.field.help",{defaultMessage:"Specify free form esdsl query"})},negate:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.kibanaFilter.negate.help",{defaultMessage:"Should the filter be negated"})},disabled:{types:["boolean"],default:!1,help:r.i18n.translate("data.search.functions.kibanaFilter.disabled.help",{defaultMessage:"Should the filter be disabled"})}},fn:(e,t)=>({type:"kibana_filter",meta:{negate:t.negate||!1,alias:"",disabled:t.disabled||!1},query:JSON.parse(t.query)})},K=e=>(Array.isArray(e)?e:[e]).map((e=>{const{meta:t,$state:a,query:r,...n}=e;return Object(i.buildExpression)([Object(i.buildExpressionFunction)("kibanaFilter",{query:JSON.stringify(r||n),negate:t.negate,disabled:t.disabled})]).toAst()})),V={name:"timerange",type:"timerange",inputTypes:["null"],help:r.i18n.translate("data.search.functions.timerange.help",{defaultMessage:"Create kibana timerange"}),args:{from:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.timerange.from.help",{defaultMessage:"Specify the start date"})},to:{types:["string"],required:!0,help:r.i18n.translate("data.search.functions.timerange.to.help",{defaultMessage:"Specify the end date"})},mode:{types:["string"],options:["absolute","relative"],help:r.i18n.translate("data.search.functions.timerange.mode.help",{defaultMessage:"Specify the mode (absolute or relative)"})}},fn:(e,t)=>({type:"timerange",from:t.from,to:t.to,mode:t.mode})};function Y(e,t=""){let a={};const r=[],n=t?t+".":"";return Object.keys(e).forEach((t=>{if(Array.isArray(e[t]))r.push(...e[t].map((e=>Y(e,n+t))).reduce(((e,t)=>[...e,...t]),[]));else if("object"==typeof e[t]&&null!==e[t]){const i=Y(e[t],n+t);1===i.length?a={...a,...i[0]}:r.push(...i)}else a[n+t]=e[t]})),0===r.length?[a]:r.map((e=>({...e,...a})))}const W=e=>e.aggregations?Y(e.aggregations):e.hits.hits.map((e=>e.fields||e._source)).filter((e=>e)),J={name:"es_raw_response",to:{datatable:e=>{const t=W(e.body);return{type:"datatable",meta:{type:"esdsl",source:"*"},columns:t.length?Object.keys(t[0]).map((e=>({id:e,name:e,meta:{type:typeof t[0][e],field:e,params:{}}}))):[],rows:t}}}};var X=a(63)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){"use strict";a.d(t,"a",(function(){return BucketAggType})),a.d(t,"b",(function(){return o}));var r=a(3),n=a.n(r),i=a(43);const s="buckets";class BucketAggType extends i.a{getShiftedKey(e,t,a){return t}getTimeShiftInterval(e){}orderBuckets(e,t,a){return Number(t.key)-Number(a.key)}constructor(e){super(e),n()(this,"getKey",void 0),n()(this,"type",s),this.getKey=e.getKey||((e,t)=>t||e.key),e.getShiftedKey&&(this.getShiftedKey=e.getShiftedKey),e.orderBuckets&&(this.orderBuckets=e.orderBuckets),e.getTimeShiftInterval&&(this.getTimeShiftInterval=e.getTimeShiftInterval),e.splitForTimeShift&&(this.splitForTimeShift=e.splitForTimeShift)}}function o(e){return e&&e.type===s}},function(e,t,a){e.exports=a(29)(114)},function(e,t,a){"use strict";a.d(t,"j",(function(){return p})),a.d(t,"l",(function(){return h})),a.d(t,"o",(function(){return d})),a.d(t,"q",(function(){return y})),a.d(t,"s",(function(){return v})),a.d(t,"b",(function(){return query_service_QueryService})),a.d(t,"a",(function(){return filter_manager_FilterManager})),a.d(t,"p",(function(){return j})),a.d(t,"k",(function(){return U})),a.d(t,"m",(function(){return H})),a.d(t,"n",(function(){return $})),a.d(t,"c",(function(){return time_history_TimeHistory})),a.d(t,"d",(function(){return X})),a.d(t,"f",(function(){return J})),a.d(t,"h",(function(){return Z})),a.d(t,"i",(function(){return ee})),a.d(t,"g",(function(){return re})),a.d(t,"e",(function(){return se})),a.d(t,"r",(function(){return le}));var r=a(3),n=a.n(r),i=a(1),s=a.n(i),o=a(8),l=a(7);const u=(e,t)=>s.a.isEqual(e,t);class persisted_log_PersistedLog{constructor(e,t={},a){n()(this,"name",void 0),n()(this,"maxLength",void 0),n()(this,"filterDuplicates",void 0),n()(this,"isDuplicate",void 0),n()(this,"storage",void 0),n()(this,"items",void 0),n()(this,"update$",new o.BehaviorSubject(void 0)),this.name=e,this.maxLength="string"==typeof t.maxLength?this.maxLength=parseInt(t.maxLength,10):t.maxLength,this.filterDuplicates=t.filterDuplicates||!1,this.isDuplicate=t.isDuplicate||u,this.storage=a,this.items=this.storage.get(this.name)||[],void 0===this.maxLength||isNaN(this.maxLength)||(this.items=s.a.take(this.items,this.maxLength))}add(e){return null==e||(this.filterDuplicates&&s.a.remove(this.items,(t=>this.isDuplicate(t,e))),this.items.unshift(e),this.maxLength&&!isNaN(this.maxLength)&&(this.items=s.a.take(this.items,this.maxLength)),this.storage.set(this.name,this.items),this.update$.next(void 0)),this.items}get(){return s.a.cloneDeep(this.items)}get$(){return this.update$.pipe(Object(l.map)((()=>this.get())))}}var c=a(2);function d(e,t,a,r){return new persisted_log_PersistedLog(`typeahead:${a}-${r}`,{maxLength:e.get(c.UI_SETTINGS.HISTORY_LIMIT),filterDuplicates:!0},t)}function g({storage:e,uiSettings:t}){return function(a,{language:r,query:n}){d(t,e,a,r).add(n)}}function p(e){if(s.a.isEmpty(e))return"";if(s.a.isObject(e))return e;if("string"==typeof(e=e||"")){const t=e.trim();if(0===t.length)return"";if("{"!==t[0])return e;try{return JSON.parse(t)}catch(t){return e}}}function h(e="kuery"){return{query:"",language:e}}const f=["()","[]","{}","''",'""'],m=f.map((e=>e[0])),b=f.map((e=>e[1]));function y({value:e,selectionStart:t,selectionEnd:a,key:r,metaKey:n,updateQuery:i,preventDefault:s}){if(function(e,t,a,r){if(!b.includes(e))return!1;if(a!==r)return!1;return t.charAt(r)===e}(r,e,t,a))s(),i(e,t+1,a+1);else if(function(e,t,a,r){if(!m.includes(e))return!1;if(a!==r)return!0;const n=t.charAt(a-1),i=t.charAt(a+1);if("\\"===n)return!1;return!(['"',"'"].includes(e)&&(_(n)||_(i)))}(r,e,t,a)){s();i(e.substr(0,t)+r+e.substring(t,a)+b[m.indexOf(r)]+e.substr(a),t+1,a+1)}else if(function(e,t,a,r,n){if("Backspace"!==e||t)return!1;if(r!==n)return!1;return f.includes(a.substr(n-1,2))}(r,n,e,t,a)){s();i(e.substr(0,a-1)+e.substr(a+1),t-1,a-1)}}function _(e=""){return e.match(/[a-zA-Z0-9_]/)}function v(e){return null==e?"":"object"==typeof e?e.query_string?v(e.query_string.query):JSON.stringify(e):""+e}var S=a(5);const k=({$state:e},{$state:t})=>e.store===t.store?0:e.store===c.FilterStateStore.GLOBAL_STATE&&t.store!==c.FilterStateStore.GLOBAL_STATE?-1:1,x=e=>{var t,a;if(e.meta&&e.meta.key&&e.meta.alias&&e.meta.type===S.b.SPATIAL_FILTER)return{key:e.meta.key,type:e.meta.type,value:""};if(e.meta&&e.meta.type===S.b.SPATIAL_FILTER&&e.meta.isMultiIndex&&null!==(t=e.query)&&void 0!==t&&null!==(a=t.bool)&&void 0!==a&&a.should)return{key:"query",type:e.meta.type,value:""};throw e},E=e=>{if(Object(S.C)(e))return{type:S.b.MATCH_ALL,key:e.meta.field,value:e.meta.formattedValue||"all"};throw e},T=e=>{const t=(e=>Object(i.get)(e,["query","script","script","params","value"]))(e),a=Boolean(t)?e.meta.field||"":Object(S.v)(e),r=t||Object(S.w)(e);return{key:a,params:{query:r},type:S.b.PHRASE,value:(n=r,e=>e?e.convert(n):n)};var n},I=e=>{if(!(e=>Object(S.D)(e)||Object(S.H)(e))(e))throw e;return T(e)},w=e=>t=>e.map((e=>t?t.convert(e):e)).join(", "),F=e=>{if(!Object(S.E)(e))throw e;const{type:t,key:a,params:r}=e.meta;return{type:t,key:a,value:w(r),params:r}};function A(e){const t=Object(S.I)(e),a=(t?e.meta.field:(e=>e.query.range&&Object.keys(e.query.range)[0])(e))||"",r=t?Object(i.get)(e.query,"script.script.params"):((e,t)=>Object(i.get)(e.query,["range",t]))(e,a);let n=Object(i.hasIn)(r,"gte")?r.gte:r.gt;null==n&&(n=-1/0);let s=Object(i.hasIn)(r,"lte")?r.lte:r.lt;null==s&&(s=1/0);const o=((e,t)=>a=>{let r=`${e} to ${t}`;if(a){const n=a.getConverterFor("text");r=`${n(e)} to ${n(t)}`}return r})(n,s);return{type:S.b.RANGE,key:a,value:o,params:r}}const M=e=>{if(!(e=>Object(S.G)(e)||Object(S.I)(e))(e))throw e;return A(e)},O=e=>{if(Object(S.x)(e))return{type:S.b.EXISTS,value:S.b.EXISTS,key:Object(i.get)(e,"query.exists.field")};throw e},R=e=>{var t,a;if(Object(S.F)(e))return{type:S.b.QUERY_STRING,key:"query",value:null===(t=e.query)||void 0===t||null===(a=t.query_string)||void 0===a?void 0:a.query};throw e},N=e=>{const t=/(^\$|meta)/,a=Object(i.find)(Object(i.keys)(e),(e=>!e.match(t)));if(a){return{type:S.b.CUSTOM,key:a,value:JSON.stringify(Object(i.get)(e,a,{}))}}throw e},P=()=>{throw new Error("No mappings have been found for filter.")},C=(e,t=P)=>a=>{try{return e(a)}catch(e){if(e===a)return t(a);throw e}};const j=e=>Object(i.compact)(Object(i.flatten)(e)).map((e=>Object(S.K)(e))).map((e=>function(e){const t=[x,E,M,I,F,O,R,N],a=Object(i.reduceRight)(t,((e,t)=>C(t,e)),(()=>{throw new Error("No mappings have been found for filter.")}))(e);return e.meta=e.meta||{},e.meta.type=a.type,e.meta.key=a.key,e.meta.value=a.value,e.meta.params=a.params,e.meta.disabled=Boolean(e.meta.disabled),e.meta.negate=Boolean(e.meta.negate),e.meta.alias=e.meta.alias||null,e}(e)));var L=a(66),D=a.n(L);const B=e=>{const t=[];return{state:e.map((e=>{var a;if(null!==(a=e.meta)&&void 0!==a&&a.index){const a=D()();return t.push({type:c.DATA_VIEW_SAVED_OBJECT_TYPE,name:a,id:e.meta.index}),{...e,meta:{...e.meta,index:a}}}return e})),references:t}},q=(e,t)=>e.map((e=>{if(!e.meta.index)return e;const a=t.find((t=>t.name===e.meta.index));return{...e,meta:{...e.meta,index:a&&a.id}}})),G=(e,t)=>({}),Q=()=>({});class filter_manager_FilterManager{constructor(e){n()(this,"filters",[]),n()(this,"updated$",new o.Subject),n()(this,"fetch$",new o.Subject),n()(this,"uiSettings",void 0),n()(this,"extract",B),n()(this,"inject",q),n()(this,"telemetry",G),n()(this,"getAllMigrations",Q),this.uiSettings=e}mergeIncomingFilters(e){const t=e.globalFilters,a=e.appFilters,r=[];return s.a.each(a,(function(e,a){const n=s.a.find(t,(function(t){return Object(c.compareFilters)(t,e)}));if(!n)return r.push(e);s.a.assignIn(n.meta,e.meta)})),filter_manager_FilterManager.mergeFilters(r,t)}static mergeFilters(e,t){return Object(c.uniqFilters)(e.reverse().concat(t.reverse())).reverse()}static partitionFilters(e){const[t,a]=s.a.partition(e,S.A);return{globalFilters:t,appFilters:a}}handleStateUpdate(e){e.sort(k);const t=!Object(c.compareFilters)(this.filters,e,c.COMPARE_ALL_OPTIONS),a=Object(S.N)(e,this.filters);this.filters=e,t&&(this.updated$.next(),a||this.fetch$.next())}getFilters(){return s.a.cloneDeep(this.filters)}getAppFilters(){const{appFilters:e}=this.getPartitionedFilters();return e}getGlobalFilters(){const{globalFilters:e}=this.getPartitionedFilters();return e}getPartitionedFilters(){return filter_manager_FilterManager.partitionFilters(this.getFilters())}getUpdates$(){return this.updated$.asObservable()}getFetches$(){return this.fetch$.asObservable()}addFilters(e,t=this.uiSettings.get(c.UI_SETTINGS.FILTERS_PINNED_BY_DEFAULT)){if(Array.isArray(e)||(e=[e]),0===e.length)return;const a=t?c.FilterStateStore.GLOBAL_STATE:c.FilterStateStore.APP_STATE;filter_manager_FilterManager.setFiltersStore(e,a);const r=j(e),n=filter_manager_FilterManager.partitionFilters(r),i=this.getPartitionedFilters();i.appFilters.push(...n.appFilters),i.globalFilters.push(...n.globalFilters);const s=this.mergeIncomingFilters(i);this.handleStateUpdate(s)}setFilters(e,t=this.uiSettings.get(c.UI_SETTINGS.FILTERS_PINNED_BY_DEFAULT)){const a=t?c.FilterStateStore.GLOBAL_STATE:c.FilterStateStore.APP_STATE;filter_manager_FilterManager.setFiltersStore(e,a);const r=j(e),n=filter_manager_FilterManager.partitionFilters(r),i=this.mergeIncomingFilters(n);this.handleStateUpdate(i)}setGlobalFilters(e){e=j(e),filter_manager_FilterManager.setFiltersStore(e,c.FilterStateStore.GLOBAL_STATE,!0);const{appFilters:t}=this.getPartitionedFilters(),a=this.mergeIncomingFilters({appFilters:t,globalFilters:e});this.handleStateUpdate(a)}setAppFilters(e){e=j(e),filter_manager_FilterManager.setFiltersStore(e,c.FilterStateStore.APP_STATE,!0);const{globalFilters:t}=this.getPartitionedFilters(),a=this.mergeIncomingFilters({globalFilters:t,appFilters:e});this.handleStateUpdate(a)}removeFilter(e){const t=s.a.findIndex(this.filters,(t=>s.a.isEqual(t.meta,e.meta)&&s.a.isEqual(t.query,e.query)));if(t>=0){const e=s.a.cloneDeep(this.filters);e.splice(t,1),this.handleStateUpdate(e)}}removeAll(){this.setFilters([])}static setFiltersStore(e,t,a=!1){s.a.map(e,(e=>{(a||void 0===e.$state)&&(e.$state={store:t})}))}}function U(e,t,a,r,n){a=Array.isArray(a)?s.a.uniq(a):[a];const i=s.a.isObject(t)?t:{name:t},o=i.name,l=[],u=e.getAppFilters(),c="-"===r;let d;return s.a.each(a,(function(e){var t;const a=function(e,t,a){return s.a.find(e,(function(e){if(e){if("_exists_"===t&&Object(S.x)(e))return e.query.exists.field===a;if(Object(S.D)(e))return Object(S.v)(e)===t&&Object(S.w)(e)===a;var r,n,i,s;if(Object(S.H)(e))return e.meta.field===t&&(null===(r=e.query)||void 0===r||null===(n=r.script)||void 0===n||null===(i=n.script)||void 0===i||null===(s=i.params)||void 0===s?void 0:s.value)===a}}))}(u,o,e);if(a)!function(e,t){e.meta.disabled=!1,e.meta.negate!==t&&(e.meta.negate=!e.meta.negate)}(a,c),d=a;else if(null!==(t=i.type)&&void 0!==t&&t.includes("range")&&e&&"object"==typeof e){const t={id:n};d=Object(S.h)(t,i,S.b.RANGE_FROM_VALUE,!1,!1,e,null,S.c.APP_STATE)}else{const t={id:n},a="_exists_"===o?S.b.EXISTS:S.b.PHRASE,r="_exists_"===o?{name:e}:i,s=null==e;d=Object(S.h)(t,r,s?S.b.EXISTS:a,s?!c:c,!1,e,null,S.c.APP_STATE)}l.push(d)})),l}var z=a(0);function $(e,t){return t.find((t=>t.id===e.meta.index))}function H(e,t){const{key:a,value:r}=e.meta;if("function"==typeof r){const n=function(e,t){if(!e||!e.getFormatterForField||!t)return;const a=e.fields.find((e=>e.name===t));if(!a)throw new Error(z.i18n.translate("data.filter.filterBar.fieldNotFound",{defaultMessage:"Field {key} not found in index pattern {indexPattern}",values:{key:t,indexPattern:e.title}}));return e.getFormatterForField(a)}($(e,t),a);return r(n)}return r||""}class timefilter_service_TimefilterService{constructor(e){this.nowProvider=e}setup({uiSettings:e,storage:t}){const a={timeDefaults:e.get(c.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),refreshIntervalDefaults:e.get(c.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS)},r=new time_history_TimeHistory(t);return{timefilter:new timefilter_Timefilter(a,r,this.nowProvider),history:r}}start(){}stop(){}}var K=a(6),V=a.n(K);const Y=function(e){if(e)return e.valueOf()};class timefilter_Timefilter{constructor(e,t,a){n()(this,"enabledUpdated$",new o.BehaviorSubject(!1)),n()(this,"timeUpdate$",new o.Subject),n()(this,"refreshIntervalUpdate$",new o.Subject),n()(this,"fetch$",new o.Subject),n()(this,"_time",void 0),n()(this,"_isTimeTouched",!1),n()(this,"_refreshInterval",void 0),n()(this,"_history",void 0),n()(this,"_isTimeRangeSelectorEnabled",!1),n()(this,"_isAutoRefreshSelectorEnabled",!1),n()(this,"timeDefaults",void 0),n()(this,"refreshIntervalDefaults",void 0),n()(this,"autoRefreshLoop",(()=>{let e=0;const t=new o.Subject;let a,r=0;function n(){if(s(),0===r)return;const i=window.setTimeout((()=>{let r=e;t.next((()=>{i===a&&(r--,0===r&&n())}))}),r);a=i}function s(){window.clearTimeout(a),a=-1}return{stop:()=>{r=0,s()},start:t=>{r=t,e>0&&n()},loop$:Object(o.defer)((()=>(e++,n(),t.pipe(Object(l.map)((e=>Object(i.once)(e))))))).pipe(Object(l.finalize)((()=>{e--,0===e?s():n()})))}})()),n()(this,"getEnabledUpdated$",(()=>this.enabledUpdated$.asObservable())),n()(this,"getTimeUpdate$",(()=>this.timeUpdate$.asObservable())),n()(this,"getRefreshIntervalUpdate$",(()=>this.refreshIntervalUpdate$.asObservable())),n()(this,"getAutoRefreshFetch$",(()=>this.autoRefreshLoop.loop$)),n()(this,"getFetch$",(()=>this.fetch$.asObservable())),n()(this,"getTime",(()=>{const{from:e,to:t}=this._time;return{...this._time,from:V.a.isMoment(e)?e.toISOString():e,to:V.a.isMoment(t)?t.toISOString():t}})),n()(this,"setTime",(e=>{const t=Object.assign(this.getTime(),e);var a,r;a=this.getTime(),r=t,(a&&r&&s.a.isObject(a)&&s.a.isObject(r)?Y(a.to)===Y(r.to)&&Y(a.from)===Y(r.from):s.a.isEqual(a,r))||(this._time={from:t.from,to:t.to},this._isTimeTouched=!0,this._history.add(this._time),this.timeUpdate$.next(),this.fetch$.next())})),n()(this,"getRefreshInterval",(()=>s.a.clone(this._refreshInterval))),n()(this,"setRefreshInterval",(e=>{const t=this.getRefreshInterval(),a={...t,...e};var r,n;a.value<=0&&(a.value=0,a.pause=!0),this._refreshInterval={value:a.value,pause:a.pause},t&&(r=t,n=a,s.a.isObject(r)&&s.a.isObject(n)?Y(r.value)!==Y(n.value)||Y(r.pause)!==Y(n.pause):!s.a.isEqual(r,n))&&(this.refreshIntervalUpdate$.next(),a.pause||0===a.value||this.fetch$.next()),this.autoRefreshLoop.stop(),a.pause||0===a.value||this.autoRefreshLoop.start(a.value)})),n()(this,"createFilter",((e,t)=>Object(c.getTime)(e,t||this._time,{forceNow:this.nowProvider.get()}))),n()(this,"createRelativeFilter",((e,t)=>Object(c.getRelativeTime)(e,t||this._time,{forceNow:this.nowProvider.get()}))),n()(this,"enableTimeRangeSelector",(()=>{this._isTimeRangeSelectorEnabled=!0,this.enabledUpdated$.next(!0)})),n()(this,"disableTimeRangeSelector",(()=>{this._isTimeRangeSelectorEnabled=!1,this.enabledUpdated$.next(!1)})),n()(this,"enableAutoRefreshSelector",(()=>{this._isAutoRefreshSelectorEnabled=!0,this.enabledUpdated$.next(!0)})),n()(this,"disableAutoRefreshSelector",(()=>{this._isAutoRefreshSelectorEnabled=!1,this.enabledUpdated$.next(!1)})),this.nowProvider=a,this._history=t,this.timeDefaults=e.timeDefaults,this.refreshIntervalDefaults=e.refreshIntervalDefaults,this._time=e.timeDefaults,this.setRefreshInterval(e.refreshIntervalDefaults)}isTimeRangeSelectorEnabled(){return this._isTimeRangeSelectorEnabled}isAutoRefreshSelectorEnabled(){return this._isAutoRefreshSelectorEnabled}isTimeTouched(){return this._isTimeTouched}getAbsoluteTime(){return Object(c.getAbsoluteTimeRange)(this._time,{forceNow:this.nowProvider.get()})}getBounds(){return this.calculateBounds(this._time)}calculateBounds(e){return Object(c.calculateBounds)(e,{forceNow:this.nowProvider.get()})}getActiveBounds(){if(this.isTimeRangeSelectorEnabled())return this.getBounds()}getTimeDefaults(){return s.a.cloneDeep(this.timeDefaults)}getRefreshIntervalDefaults(){return s.a.cloneDeep(this.refreshIntervalDefaults)}}class time_history_TimeHistory{constructor(e){n()(this,"history",void 0);this.history=new persisted_log_PersistedLog("kibana.timepicker.timeHistory",{maxLength:10,filterDuplicates:!0,isDuplicate:(e,t)=>e.from===t.from&&e.to===t.to},e)}add(e){if(!e||!e.from||!e.to)return;const t={from:V.a.isMoment(e.from)?e.from.toISOString():e.from,to:V.a.isMoment(e.to)?e.to.toISOString():e.to};this.history.add(t)}get(){return this.history.get()}}function W(e){const t=Object(i.keys)(e.query.range)[0],a=e.query.range[t];return{from:V()(a.gt||a.gte),to:V()(a.lt||a.lte)}}function J(e){const{from:t,to:a}=W(e);return{from:null==t?void 0:t.toISOString(),to:null==a?void 0:a.toISOString()}}function X(e,t){e.setTime(W(t))}function Z(e,t){const[a,r]=Object(i.partition)(t,(t=>{let a;return Object(S.G)(t)&&(a=Object(i.keys)(t.query.range)[0]),Boolean(a&&a===e)}));return{restOfFilters:r,timeRangeFilter:a[0]}}function ee(e,t){if(!t)return{restOfFilters:e,timeRange:void 0};const{timeRangeFilter:a,restOfFilters:r}=Z(t,e);return{restOfFilters:r,timeRange:a?J(a):void 0}}var te=a(19),ae=a.n(te);const re=e=>({createQuery:async(t,{overwrite:a=!1}={})=>await e.post("/api/saved_query/_create",{body:JSON.stringify(t)}),updateQuery:async(t,a)=>await e.put(`/api/saved_query/${t}`,{body:JSON.stringify(a)}),getAllSavedQueries:async()=>{const{savedQueries:t}=await e.post("/api/saved_query/_find",{body:JSON.stringify({perPage:1e4})});return t},findSavedQueries:async(t="",a=50,r=1)=>{const{total:n,savedQueries:i}=await e.post("/api/saved_query/_find",{body:JSON.stringify({page:r,perPage:a,search:t})});return{total:n,queries:i}},getSavedQuery:t=>e.get(`/api/saved_query/${t}`),deleteSavedQuery:t=>e.delete(`/api/saved_query/${t}`),getSavedQueryCount:async()=>e.get("/api/saved_query/_count")});var ne=a(24);class query_string_manager_QueryStringManager{constructor(e,t){n()(this,"query$",void 0),n()(this,"getUpdates$",(()=>this.query$.asObservable().pipe(Object(l.skip)(1)))),n()(this,"getQuery",(()=>this.query$.getValue())),n()(this,"setQuery",(e=>{const t=this.query$.getValue();(null==e?void 0:e.language)===t.language&&(null==e?void 0:e.query)===t.query||this.query$.next(e)})),n()(this,"clearQuery",(()=>{this.setQuery(this.getDefaultQuery())})),this.storage=e,this.uiSettings=t,this.query$=new o.BehaviorSubject(this.getDefaultQuery())}getDefaultLanguage(){return this.storage.get(c.KIBANA_USER_QUERY_LANGUAGE_KEY)||this.uiSettings.get(c.UI_SETTINGS.SEARCH_QUERY_LANGUAGE)}getDefaultQuery(){return{query:"",language:this.getDefaultLanguage()}}formatQuery(e){return e?"string"==typeof e?{query:e,language:this.getDefaultLanguage()}:e:this.getDefaultQuery()}}var ie=a(22);class query_service_QueryService{constructor(){n()(this,"filterManager",void 0),n()(this,"timefilter",void 0),n()(this,"queryStringManager",void 0),n()(this,"state$",void 0)}setup({storage:e,uiSettings:t,nowProvider:a}){this.filterManager=new filter_manager_FilterManager(t);const r=new timefilter_service_TimefilterService(a);return this.timefilter=r.setup({uiSettings:t,storage:e}),this.queryStringManager=new query_string_manager_QueryStringManager(e,t),this.state$=function({timefilter:{timefilter:e},filterManager:t,queryString:a}){return new o.Observable((r=>{const n=Object(ne.createStateContainer)({time:e.getTime(),refreshInterval:e.getRefreshInterval(),filters:t.getFilters(),query:a.getQuery()});let i={};const s=[a.getUpdates$().subscribe((()=>{i.query=!0,n.set({...n.get(),query:a.getQuery()})})),e.getTimeUpdate$().subscribe((()=>{i.time=!0,n.set({...n.get(),time:e.getTime()})})),e.getRefreshIntervalUpdate$().subscribe((()=>{i.refreshInterval=!0,n.set({...n.get(),refreshInterval:e.getRefreshInterval()})})),t.getUpdates$().subscribe((()=>{i.filters=!0;const{filters:e}=n.get(),a=null==e?void 0:e.filter((e=>Object(S.A)(e))),r=null==e?void 0:e.filter((e=>!Object(S.A)(e))),s=t.getGlobalFilters(),o=t.getAppFilters();a&&Object(c.compareFilters)(a,s,c.COMPARE_ALL_OPTIONS)||(i.globalFilters=!0),r&&Object(c.compareFilters)(r,o,c.COMPARE_ALL_OPTIONS)||(i.appFilters=!0),n.set({...n.get(),filters:t.getFilters()})})),n.state$.pipe(Object(l.map)((e=>({state:e,changes:i}))),Object(l.tap)((()=>{i={}}))).subscribe(r)];return()=>{s.forEach((e=>e.unsubscribe()))}}))}({filterManager:this.filterManager,timefilter:this.timefilter,queryString:this.queryStringManager}).pipe(Object(l.share)()),{filterManager:this.filterManager,timefilter:this.timefilter,queryString:this.queryStringManager,state$:this.state$}}start({storage:e,uiSettings:t,http:a}){return{addToQueryLog:g({storage:e,uiSettings:t}),filterManager:this.filterManager,queryString:this.queryStringManager,savedQueries:re(a),state$:this.state$,timefilter:this.timefilter,getEsQuery:(e,t)=>{const a=this.timefilter.timefilter.createFilter(e,t);return Object(S.f)(e,this.queryStringManager.getQuery(),[...this.filterManager.getFilters(),...a?[a]:[]],Object(c.getEsQueryConfig)(Object(ie.e)()))}}}stop(){}}const se=({timefilter:{timefilter:e},filterManager:t,queryString:a,state$:r},n,i)=>{const o=[];if(i.time&&o.push("time"),i.query&&o.push("query"),i.refreshInterval&&o.push("refreshInterval"),i.filters)switch(i.filters){case!0:o.push("filters");break;case c.FilterStateStore.APP_STATE:o.push("appFilters");break;case c.FilterStateStore.GLOBAL_STATE:o.push("globalFilters")}const u={...n.get()};let d=!1;i.time&&!s.a.isEqual(u.time,e.getTime())&&(u.time=e.getTime(),d=!0),i.refreshInterval&&!s.a.isEqual(u.refreshInterval,e.getRefreshInterval())&&(u.refreshInterval=e.getRefreshInterval(),d=!0),i.filters&&(!0===i.filters?u.filters&&Object(c.compareFilters)(u.filters,t.getFilters(),c.COMPARE_ALL_OPTIONS)||(u.filters=t.getFilters(),d=!0):i.filters===c.FilterStateStore.GLOBAL_STATE?u.filters&&Object(c.compareFilters)(u.filters,t.getGlobalFilters(),{...c.COMPARE_ALL_OPTIONS,state:!1})||(u.filters=t.getGlobalFilters(),d=!0):i.filters===c.FilterStateStore.APP_STATE&&(u.filters&&Object(c.compareFilters)(u.filters,t.getAppFilters(),{...c.COMPARE_ALL_OPTIONS,state:!1})||(u.filters=t.getAppFilters(),d=!0))),d&&n.set({...n.get(),...u});let g=!1;const p=[r.pipe(Object(l.filter)((({changes:e,state:t})=>!g&&o.some((t=>e[t])))),Object(l.map)((({changes:r})=>{const n={};return i.time&&r.time&&(n.time=e.getTime()),i.query&&r.query&&(n.query=a.getQuery()),i.refreshInterval&&r.refreshInterval&&(n.refreshInterval=e.getRefreshInterval()),i.filters&&(!0===i.filters&&r.filters?n.filters=t.getFilters():i.filters===c.FilterStateStore.GLOBAL_STATE&&r.globalFilters?n.filters=t.getGlobalFilters():i.filters===c.FilterStateStore.APP_STATE&&r.appFilters&&(n.filters=t.getAppFilters())),n}))).subscribe((e=>{n.set({...n.get(),...e})})),n.state$.subscribe((r=>{if(g=!0,i.time){const t=function(e){if(!e)return!1;const t=ae.a.parse(e.from),a=ae.a.parse(e.to);return!!(t&&t.isValid()&&a&&a.isValid())}(r.time)?r.time:e.getTimeDefaults();s.a.isEqual(t,e.getTime())||e.setTime(s.a.cloneDeep(t))}if(i.refreshInterval){const t=r.refreshInterval||e.getRefreshIntervalDefaults();s.a.isEqual(t,e.getRefreshInterval())||e.setRefreshInterval(s.a.cloneDeep(t))}if(i.query){const e=r.query||a.getQuery();s.a.isEqual(e,a.getQuery())||a.setQuery(s.a.cloneDeep(e))}if(i.filters){const e=r.filters||[];!0===i.filters?Object(c.compareFilters)(e,t.getFilters(),c.COMPARE_ALL_OPTIONS)||t.setFilters(s.a.cloneDeep(e)):i.filters===c.FilterStateStore.APP_STATE?Object(c.compareFilters)(e,t.getAppFilters(),{...c.COMPARE_ALL_OPTIONS,state:!1})||t.setAppFilters(s.a.cloneDeep(e)):i.filters===c.FilterStateStore.GLOBAL_STATE&&(Object(c.compareFilters)(e,t.getGlobalFilters(),{...c.COMPARE_ALL_OPTIONS,state:!1})||t.setGlobalFilters(s.a.cloneDeep(e)))}g=!1}))];return()=>{p.forEach((e=>e.unsubscribe()))}},oe="_g",le=(e,t)=>{const{timefilter:{timefilter:a},filterManager:r}=e,n={time:a.getTime(),refreshInterval:a.getRefreshInterval(),filters:r.getGlobalFilters()},i=t.get(oe),s=Boolean(i&&Object.keys(i).length),o={...n,...i},l=Object(ne.createStateContainer)(o),u=se(e,l,{refreshInterval:!0,time:!0,filters:c.FilterStateStore.GLOBAL_STATE});i||t.set(oe,o,{replace:!0}),l.set(o);const{start:d,stop:g}=Object(ne.syncState)({stateStorage:t,stateContainer:{...l,set:e=>{e&&l.set(e)}},storageKey:oe});return d(),{stop:()=>{u(),g()},hasInheritedQueryFromUrl:s}}},function(e,t,a){"use strict";a.d(t,"f",(function(){return T})),a.d(t,"h",(function(){return w})),a.d(t,"g",(function(){return F})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError})),a.d(t,"b",(function(){return invalid_es_interval_format_error_InvalidEsIntervalFormatError})),a.d(t,"j",(function(){return h})),a.d(t,"k",(function(){return y})),a.d(t,"p",(function(){return S})),a.d(t,"m",(function(){return k})),a.d(t,"l",(function(){return g})),a.d(t,"q",(function(){return x})),a.d(t,"e",(function(){return P})),a.d(t,"c",(function(){return ip_address_IpAddress})),a.d(t,"o",(function(){return L})),a.d(t,"i",(function(){return D})),a.d(t,"n",(function(){return q}));var r=a(6),n=a.n(r),i=a(37),s=a(67),o=a(19),l=a.n(o),u=a(0);class invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError extends Error{constructor(e,t,a,r){super(u.i18n.translate("data.parseEsInterval.invalidEsCalendarIntervalErrorMessage",{defaultMessage:"Invalid calendar interval: {interval}, value must be 1",values:{interval:e}})),this.interval=e,this.value=t,this.unit=a,this.type=r,this.name="InvalidEsCalendarIntervalError",this.value=t,this.unit=a,this.type=r,Error.captureStackTrace&&Error.captureStackTrace(this,invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError),Object.setPrototypeOf(this,invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError.prototype)}}class invalid_es_interval_format_error_InvalidEsIntervalFormatError extends Error{constructor(e){super(u.i18n.translate("data.parseEsInterval.invalidEsIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format: {interval}",values:{interval:e}})),this.interval=e,this.name="InvalidEsIntervalFormatError",Error.captureStackTrace&&Error.captureStackTrace(this,invalid_es_interval_format_error_InvalidEsIntervalFormatError),Object.setPrototypeOf(this,invalid_es_interval_format_error_InvalidEsIntervalFormatError.prototype)}}const c=new RegExp("^([1-9][0-9]*)\\s*("+l.a.units.join("|")+")$"),d=e=>{switch(e){case"minute":return"1m";case"hour":return"1h";case"day":return"1d";case"week":return"1w";case"month":return"1M";case"quarter":return"1q";case"year":return"1y"}return e};function g(e){const t=String(d(e)).trim().match(c);if(!t)throw new invalid_es_interval_format_error_InvalidEsIntervalFormatError(e);const a=parseFloat(t[1]),r=t[2],n=l.a.unitsMap[r].type;if("calendar"===n&&1!==a)throw new invalid_es_calendar_interval_error_InvalidEsCalendarIntervalError(e,a,r,n);return{value:a,unit:r,type:"mixed"===n&&1===a||"calendar"===n?"calendar":"fixed"}}function p(e){const{type:t}=g(e);return"calendar"===t?{calendar_interval:e}:{fixed_interval:e}}function h(e){try{return g(e),!0}catch{return!1}}function f(e,t){return 0===e?Math.abs(t):f(t%e,e)}function m(e,t){return Math.abs(e*t/f(e,t))}function b(e,t){try{return function(e,t){const{unitsMap:a,unitsDesc:r}=l.a,n=g(e),i=g(t);if(e===t)return e;const s=a[n.unit],o=a[i.unit];if(n.type!==i.type)throw Error(`Incompatible intervals: ${e} (${n.type}), ${t} (${i.type})`);if("calendar"===n.type||"calendar"===i.type)return s.weight>o.weight?`${n.value}${n.unit}`:`${i.value}${i.unit}`;const u=n.value*s.base,c=i.value*o.base,d=m(u,c);if(d===c)return t.replace(/\s/g,"");if(d===u)return e.replace(/\s/g,"");const p=r.find((e=>{const t=a[e];return!("calendar"===t.type||d%t.base!=0)}));if(!p)throw Error(`Unable to find common interval for: ${e}, ${t}`);return`${d/a[p].base}${p}`}(t,e)===e.replace(/\s/g,"")}catch(e){return!1}}function y(e,t){return t?b(e,t):h(e)}var _=a(1);const v=new RegExp("^([0-9\\.]*)\\s*("+l.a.units.join("|")+")$"),S=e=>{if(e){const t=e.toString().trim().match(v);if(t)return{value:parseFloat(t[1])||1,unit:t[2]}}return null};function k(e){const t=S(e);if(!t)return null;try{const{value:e,unit:a}=t,r=n.a.duration(e,a),i=Object(_.find)(l.a.units,(e=>Math.abs(r.as(e))>=1));return l.a.units.indexOf(i)<l.a.units.indexOf(a)?r:n.a.duration(r.as(i),i)}catch(e){return null}}function x(e){const t=l.a.parse(e.from),a=l.a.parse(e.to,{roundUp:!0});if(t&&a)return{from:t.toDate(),to:a.toDate()}}var E=a(23);function T(e){return function(t){const a=x(t);if(!a)return;const r=new s.a({"histogram:maxBars":e(i.c.HISTOGRAM_MAX_BARS),"histogram:barTarget":e(i.c.HISTOGRAM_BAR_TARGET),dateFormat:e("dateFormat"),"dateFormat:scaled":e("dateFormat:scaled")});return r.setInterval(E.a),r.setBounds({min:n()(a.from),max:n()(a.to)}),r.getInterval().expression}}var I=a(14);const w=e=>{var t;if("esaggs"!==e.meta.source)return;if((null===(t=e.meta.sourceParams)||void 0===t?void 0:t.type)!==I.a.HISTOGRAM)return;const a=e.meta.sourceParams.params;return a.used_interval&&"string"!=typeof a.used_interval?a.used_interval:void 0},F=(e,t={})=>{var a;if("esaggs"!==e.meta.source)return;if((null===(a=e.meta.sourceParams)||void 0===a?void 0:a.type)!==I.a.DATE_HISTOGRAM)return;const r=e.meta.sourceParams.params;let n;return r.used_interval&&"auto"!==r.used_interval&&(n=r.used_interval),{interval:n,timeZone:r.used_time_zone||t.timeZone,timeRange:e.meta.sourceParams.appliedTimeRange}};var A=a(3),M=a.n(A),O=a(42),R=a(58),N=a(59);function P(e){var t,a,r,n;return[(t=class AggsRangeFieldFormat extends O.FieldFormat{constructor(...t){super(...t),M()(this,"textConvert",(t=>{const a=this._params;if(t.label)return t.label;const r=a,n=e({id:r.id,params:r.params});let i=n.convert(t.gte),s=n.convert(t.lt);if(a.replaceInfinity&&null==r.id){const e="",a="+";i=isFinite(t.gte)?i:e,s=isFinite(t.lt)?s:a}return"arrow_right"===a.template?u.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessageArrowRight",{defaultMessage:"{from}  {to}",values:{from:i,to:s}}):u.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:"",from:i,lt:"<",to:s}})}))}},M()(t,"id","range"),M()(t,"hidden",!0),t),(a=class AggsDateRangeFieldFormat extends O.FieldFormat{constructor(...t){super(...t),M()(this,"textConvert",(t=>{const a=this._params,r=e({id:a.id,params:a.params});return Object(R.a)(t,r.convert.bind(r))}))}},M()(a,"id","date_range"),M()(a,"hidden",!0),a),(r=class AggsIpRangeFieldFormat extends O.FieldFormat{constructor(...t){super(...t),M()(this,"textConvert",(t=>{const a=this._params,r=e({id:a.id,params:a.params});return Object(N.a)(t,r.convert.bind(r))}))}},M()(r,"id","ip_range"),M()(r,"hidden",!0),r),(n=class AggsTermsFieldFormat extends O.FieldFormat{constructor(...t){super(...t),M()(this,"convert",((t,a)=>{const r=this._params,n=e({id:r.id,params:r});return"__other__"===t?r.otherBucketLabel:"__missing__"===t?r.missingBucketLabel:n.convert(t,a)})),M()(this,"getConverterFor",(e=>t=>this.convert(t,e)))}},M()(n,"id","terms"),M()(n,"hidden",!0),n)]}var C=a(49),j=a.n(C);class ip_address_IpAddress{constructor(e){M()(this,"value",void 0);try{this.value=Array.isArray(e)?j.a.fromByteArray(e):j.a.parse(`${e}`)}catch{throw Error("Invalid IP address: "+e)}}toString(){return"ipv6"===this.value.kind()?this.value.toRFC5952String():this.value.toString()}}function L(e){return function(t,a=[]){if(Object(_.isFunction)(a))return t.filter((t=>a(t[e])));if(Array.isArray(a)||(a=a.split(",")),0===a.length)return t;if(a.includes("*"))return t;const r=a.reduce(((e,t)=>{let a="include",r=t;return"!"===t.charAt(0)&&(a="exclude",r=t.substr(1)),e[a]||(e[a]=[]),e[a].push(r),e}),{});return t.filter((t=>{const a=t[e];if(r.exclude&&r.exclude.includes(a))return!1;return!(r.include&&!r.include.includes(a))}))}}function D(e,t,a,r){let i=e.time_zone;if(!i&&e.field){var s,o,l,u;const a="string"==typeof e.field?e.field:e.field.name;i=null===(s=t.typeMeta)||void 0===s||null===(o=s.aggs)||void 0===o||null===(l=o.date_histogram)||void 0===l||null===(u=l[a])||void 0===u?void 0:u.time_zone}if(!i){const e=n.a.tz.guess(),t=n()().format("Z");i=a()?e||t:r("dateFormat:tz")}return i}const B=["s","m","h","d","w","M","y"],q=e=>{const t=e.trim();if("previous"===t)return"previous";const[,a,r]=t.match(/^(\d+)\s*(\w)$/)||[],i=Number(a);return Number.isNaN(i)||!B.includes(r)?"invalid":n.a.duration(Number(a),r)}},function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"j",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"h",(function(){return u})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return g})),a.d(t,"i",(function(){return p}));var r=a(24);const[n,i]=Object(r.createGetterSetter)("Notifications"),[s,o]=Object(r.createGetterSetter)("UiSettings"),[l,u]=Object(r.createGetterSetter)("Overlays"),[c,d]=Object(r.createGetterSetter)("IndexPatterns"),[g,p]=Object(r.createGetterSetter)("Search")},function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return s}));var r=a(0);const n="auto",i=e=>e===n,s=[{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.autoDisplayName",{defaultMessage:"Auto"}),val:n,enabled:e=>e.fieldIsTimeField()},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.millisecondDisplayName",{defaultMessage:"Millisecond"}),val:"ms"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.secondDisplayName",{defaultMessage:"Second"}),val:"s"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.minuteDisplayName",{defaultMessage:"Minute"}),val:"m"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.hourlyDisplayName",{defaultMessage:"Hour"}),val:"h"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.dailyDisplayName",{defaultMessage:"Day"}),val:"d"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.weeklyDisplayName",{defaultMessage:"Week"}),val:"w"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.monthlyDisplayName",{defaultMessage:"Month"}),val:"M"},{display:r.i18n.translate("data.search.aggs.buckets.intervalOptions.yearlyDisplayName",{defaultMessage:"Year"}),val:"y"}]},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){"use strict";a.d(t,"a",(function(){return BaseParamType}));var r=a(3),n=a.n(r);class BaseParamType{constructor(e){n()(this,"name",void 0),n()(this,"type",void 0),n()(this,"displayName",void 0),n()(this,"required",void 0),n()(this,"advanced",void 0),n()(this,"default",void 0),n()(this,"write",void 0),n()(this,"serialize",void 0),n()(this,"deserialize",void 0),n()(this,"toExpressionAst",void 0),n()(this,"options",void 0),n()(this,"valueType",void 0),n()(this,"modifyAggConfigOnSearchRequestStart",void 0),this.name=e.name,this.type=e.type,this.displayName=e.displayName||this.name,this.required=!0===e.required,this.advanced=e.advanced||!1,this.onChange=e.onChange,this.shouldShow=e.shouldShow,this.default=e.default;this.write=e.write||((e,t)=>{e.params[this.name]&&(t.params[this.name]=e.params[this.name]||this.default)}),this.serialize=e.serialize,this.deserialize=e.deserialize,this.toExpressionAst=e.toExpressionAst,this.options=e.options,this.modifyAggConfigOnSearchRequestStart=e.modifyAggConfigOnSearchRequestStart||function(){},this.valueType=e.valueType||e.type}}},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,a){"use strict";a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return agg_configs_AggConfigs})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return p})),a.d(t,"f",(function(){return b.a})),a.d(t,"Ub",(function(){return dr})),a.d(t,"Vb",(function(){return gr})),a.d(t,"g",(function(){return agg_types_registry_AggTypesRegistry})),a.d(t,"Mb",(function(){return hr})),a.d(t,"h",(function(){return aggs_service_AggsCommonService})),a.d(t,"Nb",(function(){return y.a})),a.d(t,"Kc",(function(){return y.c})),a.d(t,"Jc",(function(){return y.b})),a.d(t,"k",(function(){return _.a})),a.d(t,"Lc",(function(){return _.b})),a.d(t,"i",(function(){return v.a})),a.d(t,"N",(function(){return S})),a.d(t,"M",(function(){return k})),a.d(t,"Mc",(function(){return q})),a.d(t,"gc",(function(){return G})),a.d(t,"P",(function(){return Q})),a.d(t,"O",(function(){return U})),a.d(t,"ic",(function(){return K})),a.d(t,"T",(function(){return V})),a.d(t,"S",(function(){return Y})),a.d(t,"kc",(function(){return X})),a.d(t,"X",(function(){return Z})),a.d(t,"W",(function(){return ee})),a.d(t,"mc",(function(){return re})),a.d(t,"db",(function(){return ne})),a.d(t,"cb",(function(){return ie})),a.d(t,"pc",(function(){return le})),a.d(t,"fb",(function(){return ue})),a.d(t,"eb",(function(){return ce})),a.d(t,"qc",(function(){return ge})),a.d(t,"hb",(function(){return pe})),a.d(t,"gb",(function(){return he})),a.d(t,"rc",(function(){return _e})),a.d(t,"jb",(function(){return Se})),a.d(t,"ib",(function(){return ke})),a.d(t,"n",(function(){return we})),a.d(t,"sc",(function(){return Fe})),a.d(t,"l",(function(){return cidr_mask_CidrMask})),a.d(t,"Rb",(function(){return Ae.a})),a.d(t,"Sb",(function(){return Me.a})),a.d(t,"Ob",(function(){return Oe.a})),a.d(t,"Qb",(function(){return Oe.c})),a.d(t,"Pb",(function(){return Oe.b})),a.d(t,"Rc",(function(){return Re})),a.d(t,"Oc",(function(){return Ne})),a.d(t,"Qc",(function(){return Pe})),a.d(t,"Pc",(function(){return Ce})),a.d(t,"Uc",(function(){return je})),a.d(t,"xb",(function(){return Le})),a.d(t,"wb",(function(){return De})),a.d(t,"Ac",(function(){return Qe})),a.d(t,"Bb",(function(){return Ue})),a.d(t,"Ab",(function(){return ze})),a.d(t,"Cc",(function(){return Ke})),a.d(t,"Jb",(function(){return Ve})),a.d(t,"Ib",(function(){return Ye})),a.d(t,"ed",(function(){return et})),a.d(t,"Gc",(function(){return at})),a.d(t,"x",(function(){return rt})),a.d(t,"w",(function(){return nt})),a.d(t,"Xb",(function(){return st})),a.d(t,"z",(function(){return ot})),a.d(t,"y",(function(){return lt})),a.d(t,"Yb",(function(){return bt})),a.d(t,"B",(function(){return yt})),a.d(t,"A",(function(){return _t})),a.d(t,"Zb",(function(){return kt})),a.d(t,"D",(function(){return xt})),a.d(t,"C",(function(){return Et})),a.d(t,"ac",(function(){return wt})),a.d(t,"F",(function(){return Ft})),a.d(t,"E",(function(){return At})),a.d(t,"bc",(function(){return Rt})),a.d(t,"V",(function(){return Nt})),a.d(t,"U",(function(){return Pt})),a.d(t,"lc",(function(){return Lt})),a.d(t,"H",(function(){return Dt})),a.d(t,"G",(function(){return Bt})),a.d(t,"dc",(function(){return Gt})),a.d(t,"ec",(function(){return zt})),a.d(t,"J",(function(){return Qt})),a.d(t,"I",(function(){return Ut})),a.d(t,"L",(function(){return $t})),a.d(t,"K",(function(){return Ht})),a.d(t,"fc",(function(){return Zt})),a.d(t,"R",(function(){return ea})),a.d(t,"Q",(function(){return ta})),a.d(t,"jc",(function(){return na})),a.d(t,"Z",(function(){return ia})),a.d(t,"Y",(function(){return sa})),a.d(t,"nc",(function(){return ua})),a.d(t,"bb",(function(){return ca})),a.d(t,"ab",(function(){return da})),a.d(t,"oc",(function(){return ha})),a.d(t,"Wc",(function(){return Yt})),a.d(t,"Vc",(function(){return Wt})),a.d(t,"cd",(function(){return pt})),a.d(t,"bd",(function(){return ht})),a.d(t,"lb",(function(){return fa})),a.d(t,"kb",(function(){return ma})),a.d(t,"tc",(function(){return ya})),a.d(t,"nb",(function(){return _a})),a.d(t,"mb",(function(){return va})),a.d(t,"uc",(function(){return ka})),a.d(t,"Db",(function(){return xa})),a.d(t,"Cb",(function(){return Ea})),a.d(t,"Dc",(function(){return Ia})),a.d(t,"t",(function(){return metric_agg_type_MetricAggType})),a.d(t,"Nc",(function(){return L})),a.d(t,"s",(function(){return A})),a.d(t,"pb",(function(){return wa})),a.d(t,"ob",(function(){return Fa})),a.d(t,"vc",(function(){return Ma})),a.d(t,"rb",(function(){return Oa})),a.d(t,"qb",(function(){return Ra})),a.d(t,"wc",(function(){return Ca})),a.d(t,"tb",(function(){return ja})),a.d(t,"sb",(function(){return La})),a.d(t,"yc",(function(){return Qa})),a.d(t,"vb",(function(){return Ua})),a.d(t,"ub",(function(){return za})),a.d(t,"zc",(function(){return Ka})),a.d(t,"zb",(function(){return Va})),a.d(t,"yb",(function(){return Ya})),a.d(t,"Bc",(function(){return Xa})),a.d(t,"Fb",(function(){return Za})),a.d(t,"Eb",(function(){return er})),a.d(t,"Ec",(function(){return ar})),a.d(t,"Hb",(function(){return rr})),a.d(t,"Gb",(function(){return nr})),a.d(t,"Fc",(function(){return sr})),a.d(t,"Lb",(function(){return or})),a.d(t,"Kb",(function(){return lr})),a.d(t,"Hc",(function(){return cr})),a.d(t,"e",(function(){return M.a})),a.d(t,"j",(function(){return O.a})),a.d(t,"m",(function(){return R.a})),a.d(t,"r",(function(){return N.a})),a.d(t,"u",(function(){return P.a})),a.d(t,"v",(function(){return C.a})),a.d(t,"cc",(function(){return D.f})),a.d(t,"xc",(function(){return D.h})),a.d(t,"hc",(function(){return D.g})),a.d(t,"Tb",(function(){return D.d})),a.d(t,"o",(function(){return D.a})),a.d(t,"p",(function(){return D.b})),a.d(t,"Sc",(function(){return D.j})),a.d(t,"Tc",(function(){return D.k})),a.d(t,"dd",(function(){return D.p})),a.d(t,"Yc",(function(){return D.m})),a.d(t,"Xc",(function(){return D.l})),a.d(t,"fd",(function(){return D.q})),a.d(t,"Wb",(function(){return D.e})),a.d(t,"q",(function(){return D.c})),a.d(t,"ad",(function(){return D.o})),a.d(t,"Ic",(function(){return D.i})),a.d(t,"Zc",(function(){return D.n}));var r=a(34),n=a(3),i=a.n(n),s=a(6),o=a.n(s),l=a(1),u=a.n(l),c=a(0),d=a(5);const g=Object.freeze({Buckets:"buckets",Metrics:"metrics",None:"none"}),p={[g.Buckets]:c.i18n.translate("data.search.aggs.aggGroups.bucketsText",{defaultMessage:"Buckets"}),[g.Metrics]:c.i18n.translate("data.search.aggs.aggGroups.metricsText",{defaultMessage:"Metrics"}),[g.None]:c.i18n.translate("data.search.aggs.aggGroups.noneText",{defaultMessage:"None"})};var h=a(2);function f(e){for(const t in e)if("parentAggs"===t)delete e[t];else if("object"==typeof e[t]){const a="parentAggs"in e[t];f(e[t]),a&&0===Object.keys(e[t]).length&&delete e[t]}}function m(e,t){t.parentAggs&&u.a.each(t.parentAggs,((t,a)=>{e[a]=t,m(e,t)}))}class agg_configs_AggConfigs{constructor(e,t=[],a){i()(this,"indexPattern",void 0),i()(this,"timeRange",void 0),i()(this,"timeFields",void 0),i()(this,"forceNow",void 0),i()(this,"hierarchical",!1),i()(this,"typesRegistry",void 0),i()(this,"aggs",void 0),i()(this,"createAggConfig",((e,{addToAggConfigs:t=!0}={})=>{const{type:a}=e,n=e=>{const t=this.typesRegistry.get(e);if(!t)throw new Error(c.i18n.translate("data.search.aggs.error.aggNotFound",{defaultMessage:'Unable to find a registered agg type for "{type}".',values:{type:a}}));return t};let i;return e instanceof r.a?(i=e,e.parent=this):i=new r.a(this,{...e,type:"string"==typeof a?n(a):a}),t&&this.aggs.push(i),i})),this.typesRegistry=a.typesRegistry,t=r.a.ensureIds(t),this.aggs=[],this.indexPattern=e,this.hierarchical=a.hierarchical,t.forEach((e=>this.createAggConfig(e)))}setTimeFields(e){this.timeFields=e}setForceNow(e){this.forceNow=e}setTimeRange(e){this.timeRange=e;const t=a=>{u.a.each(a.params,(e=>{e instanceof r.a&&t(e)})),"date_histogram"===u.a.get(a,"type.name")&&(a.params.timeRange=e)};this.aggs.forEach(t)}getResolvedTimeRange(){return this.timeRange&&Object(h.calculateBounds)(this.timeRange,{forceNow:this.forceNow})}clone({enabledOnly:e=!0}={}){return new agg_configs_AggConfigs(this.indexPattern,this.aggs.filter((t=>!e||t.enabled)),{typesRegistry:this.typesRegistry})}jsonDataEquals(e){if(e.length!==this.aggs.length)return!1;for(let t=0;t<this.aggs.length;t+=1)if(!u.a.isEqual(e[t].toJSON(),this.aggs[t].toJSON()))return!1;return!0}toDsl(){const e={};let t,a;const r=this.getTimeShifts(),n=Object.keys(r).length>1;if(this.hierarchical){if(n)throw new Error("Multiple time shifts not supported for hierarchical metrics");a=this.aggs.filter((function(e){return"metrics"===e.type.type&&"count"!==e.type.name})).map((e=>({config:e,dsl:e.toDsl(this)})))}const i=this.getRequestAggs(),s=i.filter((e=>!e.type.hasNoDsl)).length,l=this.getAll().findIndex((e=>"splitForTimeShift"in e.type&&e.type.splitForTimeShift(e,this)));return i.forEach(((i,c,d)=>{if(t){const e=d[c-1],a=t[e.id];t=(null==a?void 0:a.aggs)||t}else t=e;if(n&&(t=function(e,t,a,r){if("splitForTimeShift"in t.type&&!t.type.splitForTimeShift(t,e))return r;if(!e.timeFields||e.timeFields.length<1)throw new Error("Time shift can only be used with configured time field");if(!e.timeRange)throw new Error("Time shift can only be used with configured time range");const n=e.timeRange,i={},s=e.timeFields[0];return Object.entries(a).forEach((([t,a])=>{const r=Object(h.getTime)(e.indexPattern,n,{fieldName:s,forceNow:e.forceNow});r&&(i[t]={range:{[s]:{format:"strict_date_optional_time",gte:o()(r.query.range[s].gte).subtract(a).toISOString(),lte:o()(r.query.range[s].lte).subtract(a).toISOString()}}})})),r.time_offset_split={filters:{filters:i},aggs:{}},r.time_offset_split.aggs}(this,i,r,t)),i.type.hasNoDsl)return;const p=i.type.hasNoDslParams?i.toDsl(this):t[i.id]=i.toDsl(this);let f;m(t,p),i.type.type===g.Buckets&&(c<s-1||l>c)&&(f=p.aggs||(p.aggs={})),f&&u.a.each(f,(e=>{m(f,e)})),f&&a&&a.forEach((e=>{f[e.config.id]=e.dsl,e.dsl.parentAggs&&Object.entries(e.dsl.parentAggs).forEach((([e,t])=>{f[e]=t}))}))})),f(e),e}getAll(){return[...this.aggs]}byIndex(e){return this.aggs[e]}byId(e){return this.aggs.find((t=>t.id===e))}byName(e){return this.aggs.filter((t=>{var a;return(null===(a=t.type)||void 0===a?void 0:a.name)===e}))}byType(e){return this.aggs.filter((t=>{var a;return(null===(a=t.type)||void 0===a?void 0:a.type)===e}))}byTypeName(e){return this.byName(e)}bySchemaName(e){return this.aggs.filter((t=>t.schema===e))}getRequestAggs(){const e=this.aggs.filter((e=>e.enabled&&e.type)).reduce(((e,t)=>{const a=t.getRequestAggs();return a?e.concat(a):e}),[]);return u.a.sortBy(e,(e=>e.type.type===g.Metrics?1:0))}getTimeShifts(){const e={};return this.getAll().filter((e=>"metric"===e.schema)).map((e=>e.getTimeShift())).forEach((t=>{t?e[String(t.asMilliseconds())]=t:e[0]=o.a.duration(0)})),e}getTimeShiftInterval(){const e=this.getAll().filter((e=>e.type.type===g.Buckets)).find((e=>e.type.splitForTimeShift(e,this)));return null==e?void 0:e.type.getTimeShiftInterval(e)}hasTimeShifts(){return this.getAll().some((e=>e.hasTimeShift()))}getSearchSourceTimeFilter(e){var t;if(!this.timeFields||!this.timeRange)return[];const a=this.timeRange,r=this.timeFields,n=this.getTimeShifts();return this.hasTimeShifts()?[{meta:{index:null===(t=this.indexPattern)||void 0===t?void 0:t.id,params:{},alias:"",disabled:!1,negate:!1},query:{bool:{should:Object.entries(n).map((([,t])=>({bool:{filter:r.map((t=>[Object(h.getTime)(this.indexPattern,a,{fieldName:t,forceNow:e}),t])).filter((([e])=>Object(d.G)(e))).map((([e,a])=>({range:{[a]:{format:"strict_date_optional_time",gte:o()(null==e?void 0:e.query.range[a].gte).subtract(t).toISOString(),lte:o()(null==e?void 0:e.query.range[a].lte).subtract(t).toISOString()}}})))}}))),minimum_should_match:1}}}]:this.timeFields.map((t=>Object(h.getTime)(this.indexPattern,a,{fieldName:t,forceNow:e}))).filter(d.G)}postFlightTransform(e){if(!this.hasTimeShifts())return e;const t=Object(l.cloneDeep)(e.rawResponse);var a;t.aggregations||(t.aggregations={doc_count:null===(a=e.rawResponse.hits)||void 0===a?void 0:a.total});return function(e,t){const a=e.getTimeShifts(),r=Object.keys(a).length>1,n=e.getRequestAggs(),i=e.aggs.filter((e=>e.type.type===g.Buckets)),s=(e,t,a,r)=>{Object.entries(t).forEach((([o,u])=>{if("number"==typeof u&&"doc_count"===o)0===a.asMilliseconds()?e.doc_count=u:e[`doc_count_${a.asMilliseconds()}`]=u;else{if("object"!=typeof u)return;{const c=n.find((e=>o===e.getResponseId()));if(c&&c.type.type===g.Metrics){const r=c.getTimeShift();(r&&r.asMilliseconds()===a.asMilliseconds()||0===a.asMilliseconds()&&!r)&&(e[o]=t[o])}else if(c&&c===i[r]){const t=c,n="buckets"in u?u.buckets:void 0;e[o]||(e[o]={buckets:Object(l.isArray)(n)?[]:{}});const i=e[o],d="buckets"in i?i.buckets:void 0;if(Object(l.isArray)(n)&&Object(l.isArray)(d)){const e={};d.forEach((t=>{e[String(t.key)]=t})),n.forEach((n=>{const i=t.type.getShiftedKey(t,n.key,a);e[i]||(e[String(i)]={key:i}),s(e[i],n,a,r+1)})),i.buckets=Object.values(e).sort(((e,a)=>t.type.orderBuckets(t,e,a)))}else d&&n&&!Object(l.isArray)(d)&&Object.entries(n).forEach((([e,t])=>{d[e]||(d[e]={}),s(d[e],t,a,r+1)}))}}}}))},o=(t,n)=>{if(e.aggs[n].type.splitForTimeShift(e.aggs[n],e))if(r&&t.time_offset_split){const e=t.time_offset_split.buckets,r={};Object.entries(a).forEach((([t,a])=>{s(r,e[t],a,n)})),delete t.time_offset_split,Object.assign(t,r)}else{const[[,e]]=Object.entries(a),r={};s(r,t,e,n),Object.assign(t,r)}else Object.keys(t).forEach((e=>{const a=t[e];"object"==typeof a&&"buckets"in a&&(Object(l.isArray)(a.buckets)?a.buckets.forEach((e=>o(e,n+1))):Object.values(a.buckets).forEach((e=>o(e,n+1))))}))};o(t,0)}(this,t.aggregations),{...e,rawResponse:t}}getRequestAggById(e){return this.aggs.find((t=>t.id===e))}getResponseAggs(){return this.getRequestAggs().reduce((function(e,t){const a=t.getResponseAggs();return a?e.concat(a):e}),[])}getResponseAggById(e){e=String(e);const t=u.a.find(this.getRequestAggs(),(function(t){return e.substr(0,String(t.id).length)===t.id}));if(t)return u.a.find(t.getResponseAggs(),{id:e})}onSearchRequestStart(e,t){return Promise.all(this.getRequestAggs().map((a=>a.onSearchRequestStart(e,t))))}}var b=a(43),y=a(23),_=a(18),v=a(14);const S="aggDateHistogram",k=()=>({name:S,help:c.i18n.translate("data.search.aggs.function.buckets.dateHistogram.help",{defaultMessage:"Generates a serialized agg config for a Histogram agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.field.help",{defaultMessage:"Field to use for this aggregation"})},useNormalizedEsInterval:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.useNormalizedEsInterval.help",{defaultMessage:"Specifies whether to use useNormalizedEsInterval for this aggregation"})},time_zone:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.timeZone.help",{defaultMessage:"Time zone to use for this aggregation"})},format:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.format.help",{defaultMessage:"Format to use for this aggregation"})},scaleMetricValues:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.scaleMetricValues.help",{defaultMessage:"Specifies whether to use scaleMetricValues for this aggregation"})},interval:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.interval.help",{defaultMessage:"Interval to use for this aggregation"})},timeRange:{types:["timerange"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.timeRange.help",{defaultMessage:"Time Range to use for this aggregation"})},min_doc_count:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.minDocCount.help",{defaultMessage:"Minimum document count to use for this aggregation"})},drop_partials:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.dropPartials.help",{defaultMessage:"Specifies whether to use drop_partials for this aggregation"})},extended_bounds:{types:["extended_bounds"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.extendedBounds.help",{defaultMessage:'With extended_bounds setting, you now can "force" the histogram aggregation to start building buckets on a specific min value and also keep on building buckets up to a max value '})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateHistogram.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,timeRange:n,extended_bounds:i,...s})=>({type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...s,timeRange:n&&Object(l.omit)(n,"type"),extended_bounds:i&&Object(l.omit)(i,"type")},type:v.a.DATE_HISTOGRAM}})});var x=a(36),E=a.n(x),T=a(15);const I=(e,t)=>{const a=o()(t),r=e.buckets.getInterval();return Object(d.m)(e.params.field,{gte:a.toISOString(),lt:a.add(r).toISOString(),format:"strict_date_optional_time"},e.getIndexPattern())};var w=a(67),F=a(46);let A;!function(e){e.AVG="avg",e.FILTERED_METRIC="filtered_metric",e.CARDINALITY="cardinality",e.AVG_BUCKET="avg_bucket",e.MAX_BUCKET="max_bucket",e.MIN_BUCKET="min_bucket",e.SUM_BUCKET="sum_bucket",e.COUNT="count",e.CUMULATIVE_SUM="cumulative_sum",e.DERIVATIVE="derivative",e.GEO_BOUNDS="geo_bounds",e.GEO_CENTROID="geo_centroid",e.MEDIAN="median",e.SINGLE_PERCENTILE="single_percentile",e.MIN="min",e.MAX="max",e.MOVING_FN="moving_avg",e.SERIAL_DIFF="serial_diff",e.SUM="sum",e.TOP_HITS="top_hits",e.PERCENTILES="percentiles",e.PERCENTILE_RANKS="percentile_ranks",e.STD_DEV="std_dev"}(A||(A={}));var M=a(56),O=a(27),R=a(57),N=a(62),P=a(60),C=a(61);const j="metrics";class metric_agg_type_MetricAggType extends b.a{constructor(e){super(e),i()(this,"subtype",void 0),i()(this,"isScalable",void 0),i()(this,"type",j),i()(this,"getKey",(()=>{})),this.params.push(new O.a({name:"timeShift",type:"string",write:()=>{}})),this.getValue=e.getValue||((e,t)=>{const a=[A.CARDINALITY,A.SUM].includes(e.type.name);return!t[e.id]&&a?0:t[e.id]&&t[e.id].value}),this.subtype=e.subtype||c.i18n.translate("data.search.aggs.metrics.metricAggregationsSubtypeTitle",{defaultMessage:"Metric Aggregations"}),this.isScalable=e.isScalable||(()=>!1),this.splitForTimeShift=(e,t)=>t.hasTimeShifts()&&t.byType(g.Metrics)[0]===e&&!t.byType(g.Buckets).some((e=>e.type.splitForTimeShift(e,t)))}}function L(e){return e&&e.type===j}var D=a(21);const B=(e,t,a)=>{const r=e.params.timeRange&&(e.fieldIsTimeField()||Object(y.c)(e.params.interval))?t(e.params.timeRange):void 0,n=a||e.buckets;n.setBounds(r),n.setInterval(e.params.interval)};function q(e){return Boolean(e.buckets)}const G=({calculateBounds:e,isDefaultTimezone:t,getConfig:a})=>new _.a({name:v.a.DATE_HISTOGRAM,expressionName:S,title:c.i18n.translate("data.search.aggs.buckets.dateHistogramTitle",{defaultMessage:"Date Histogram"}),ordered:{date:!0},makeLabel(e){let t={};this.params&&(t=Object(F.b)(this.params,e));const a=e.getFieldDisplayName();return c.i18n.translate("data.search.aggs.buckets.dateHistogramLabel",{defaultMessage:"{fieldName} per {intervalDescription}",values:{fieldName:a,intervalDescription:t.metricScaleText||t.bucketInterval.description}})},createFilter:I,decorateAggConfig(){let t;return{buckets:{configurable:!0,get(){return t||(t=new w.a({"histogram:maxBars":a(h.UI_SETTINGS.HISTOGRAM_MAX_BARS),"histogram:barTarget":a(h.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:a("dateFormat"),"dateFormat:scaled":a("dateFormat:scaled")}),B(this,e,t),t)}}}},getSerializedFormat:e=>({id:"date",params:{pattern:e.buckets.getScaledDateFormat()}}),getShiftedKey:(e,t,a)=>E()(t).add(a).valueOf(),splitForTimeShift(e,t){var a;return t.hasTimeShifts()&&Boolean(null===(a=t.timeFields)||void 0===a?void 0:a.includes(e.fieldName()))},getTimeShiftInterval(e){const{useNormalizedEsInterval:t}=e.params;return e.buckets.getInterval(t)},params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.DATE_RANGE],default(e){var t,a,r;return null===(t=(a=e.getIndexPattern()).getTimeField)||void 0===t||null===(r=t.call(a))||void 0===r?void 0:r.name},onChange(e){Object(y.c)(Object(l.get)(e,"params.interval"))&&!e.fieldIsTimeField()&&delete e.params.interval}},{name:"timeRange",default:null,write:l.noop,toExpressionAst:T.J},{name:"useNormalizedEsInterval",default:!0,write:l.noop},{name:"scaleMetricValues",default:!1,write:l.noop,advanced:!0},{name:"interval",deserialize(e,t){if("custom"===e)return Object(l.get)(t,"params.customInterval");return Object(l.find)(y.b,{val:e})||"year"!==e?e:"y"},default:y.a,options:y.b,write(t,a,r){B(t,e);const{useNormalizedEsInterval:n,scaleMetricValues:i}=t.params,s=t.buckets.getInterval(n);if(a.bucketInterval=s,"0ms"===s.expression)return;a.params={...a.params,...Object(D.d)(s.expression)};if(i&&s.scaled&&s.scale&&s.scale<1&&r){const e=r.aggs.filter((e=>L(e.type)));var o;if(Object(l.every)(e,(e=>{const{type:t}=e;if(L(t))return t.isScalable()})))a.metricScale=s.scale,a.metricScaleText=(null===(o=s.preScaled)||void 0===o?void 0:o.description)||""}}},{name:"used_interval",default:y.a,shouldShow:()=>!1,write:()=>{},serialize(e,t){if(!t)return;const{useNormalizedEsInterval:a}=t.params;return t.buckets.getInterval(a).expression},toExpressionAst:()=>{}},{name:"time_zone",default:void 0,serialize:l.noop,write(e,r){const n=Object(D.i)(e.params,e.getIndexPattern(),t,a);r.params.time_zone=n}},{name:"used_timezone",shouldShow:()=>!1,write:()=>{},serialize(e,r){if(r)return Object(D.i)(r.params,r.getIndexPattern(),t,a)},toExpressionAst:()=>{}},{name:"drop_partials",default:!1,write:l.noop,shouldShow:e=>{const t=e.params.field;return t&&t.name&&t.name===e.getIndexPattern().timeFieldName}},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write(e,t){const a=e.params.extended_bounds;null==a.min&&null==a.max||(t.params.extended_bounds={min:E()(a.min).valueOf(),max:E()(a.max).valueOf()})},toExpressionAst:T.h}]}),Q="aggDateRange",U=()=>({name:Q,help:c.i18n.translate("data.search.aggs.function.buckets.dateRange.help",{defaultMessage:"Generates a serialized agg config for a Date Range agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateRange.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.dateRange.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateRange.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateRange.field.help",{defaultMessage:"Field to use for this aggregation"})},ranges:{types:["date_range"],multi:!0,help:c.i18n.translate("data.search.aggs.buckets.dateRange.ranges.help",{defaultMessage:"Ranges to use for this aggregation."})},time_zone:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateRange.timeZone.help",{defaultMessage:"Time zone to use for this aggregation."})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateRange.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.dateRange.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,ranges:n,...i})=>({type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...i,ranges:null==n?void 0:n.map((e=>Object(l.omit)(e,"type")))},type:v.a.DATE_RANGE}})}),z=(e,{from:t,to:a})=>{const r={};return t&&(r.gte=o()(t).toISOString()),a&&(r.lt=o()(a).toISOString()),a&&t&&(r.format="strict_date_optional_time"),Object(d.m)(e.params.field,r,e.getIndexPattern())};var $=a(39);const H=c.i18n.translate("data.search.aggs.buckets.dateRangeTitle",{defaultMessage:"Date Range"}),K=({isDefaultTimezone:e,getConfig:t})=>new _.a({name:v.a.DATE_RANGE,expressionName:Q,title:H,createFilter:z,getKey:({from:e,to:t})=>({from:e,to:t}),getSerializedFormat:e=>({id:"date_range",params:e.params.field?e.aggConfigs.indexPattern.getFormatterForField(e.params.field).toJSON():{}}),makeLabel:e=>e.getFieldDisplayName()+" date ranges",params:[{name:"field",type:"field",filterFieldTypes:[$.b.DATE,$.b.DATE_RANGE],default:e=>e.getIndexPattern().timeFieldName},{name:"ranges",default:[{from:"now-1w/w",to:"now"}],toExpressionAst:e=>null==e?void 0:e.map(T.d)},{name:"time_zone",default:void 0,serialize:()=>{},write:(a,r)=>{const n=a.getParam("field");let i=a.getParam("time_zone");if(!i&&n&&(i=Object(l.get)(a.getIndexPattern(),["typeMeta","aggs","date_range",n.name,"time_zone"])),!i){const a=E.a.tz.guess(),r=E()().format("Z");i=e()?a||r:t("dateFormat:tz")}r.params.time_zone=i}}]}),V="aggFilter",Y=()=>({name:V,help:c.i18n.translate("data.search.aggs.function.buckets.filter.help",{defaultMessage:"Generates a serialized agg config for a Filter agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filter.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.filter.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filter.schema.help",{defaultMessage:"Schema to use for this aggregation"})},geo_bounding_box:{types:["geo_bounding_box"],help:c.i18n.translate("data.search.aggs.buckets.filter.geoBoundingBox.help",{defaultMessage:"Filter results based on a point location within a bounding box"})},filter:{types:["kibana_query"],help:c.i18n.translate("data.search.aggs.buckets.filter.filter.help",{defaultMessage:"Filter results based on a kql or lucene query. Do not use together with geo_bounding_box"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filter.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filter.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,geo_bounding_box:n,filter:i,...s})=>{if(n&&i)throw new Error("filter and geo_bounding_box can't be used together");return{type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...s,geo_bounding_box:n&&Object(l.omit)(n,"type"),filter:i&&Object(l.omit)(i,"type")},type:v.a.FILTER}}}});var W=a(44);const J=c.i18n.translate("data.search.aggs.buckets.filterTitle",{defaultMessage:"Filter"}),X=({getConfig:e})=>new _.a({name:v.a.FILTER,expressionName:V,title:J,makeLabel:()=>J,params:[{name:"geo_bounding_box",toExpressionAst:T.m},{name:"filter",write(t,a){const r=t.params.filter,n=Object(l.cloneDeep)(r);if(!n)return;const i=Object(W.t)({get:e}),s=Object(d.f)(t.getIndexPattern(),[n],[],i);s?a.params=s:console.log('malformed filter agg params, missing "query" on input')},toExpressionAst:T.G}]}),Z="aggFilters",ee=()=>({name:Z,help:c.i18n.translate("data.search.aggs.function.buckets.filters.help",{defaultMessage:"Generates a serialized agg config for a Filter agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filters.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.filters.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filters.schema.help",{defaultMessage:"Schema to use for this aggregation"})},filters:{types:["kibana_query_filter"],multi:!0,help:c.i18n.translate("data.search.aggs.buckets.filters.filters.help",{defaultMessage:"Filters to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.filters.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})}},fn:(e,{id:t,enabled:a,schema:r,filters:n,...i})=>({type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...i,filters:null==n?void 0:n.map((e=>Object(l.omit)(e,"type")))},type:v.a.FILTERS}})}),te=(e,t)=>{const a=Object(l.get)(e.toDsl(),"filters.filters")[t],r=e.getIndexPattern();if(a&&r&&r.id)return Object(d.k)(a,r.id,t)},ae=c.i18n.translate("data.search.aggs.buckets.filtersTitle",{defaultMessage:"Filters",description:"The name of an aggregation, that allows to specify multiple individual filters to group data by."}),re=({getConfig:e})=>new _.a({name:v.a.FILTERS,expressionName:Z,title:ae,createFilter:te,customLabels:!1,params:[{name:"filters",default:()=>[{input:{query:"",language:e(h.UI_SETTINGS.SEARCH_QUERY_LANGUAGE)},label:""}],write(t,a){const r=t.params.filters;if(!Object(l.size)(r))return;const n=Object(l.transform)(r,(function(a,r){const n=Object(l.cloneDeep)(r.input);if(!n)return void console.log('malformed filter agg params, missing "input" query');const i=Object(h.getEsQueryConfig)({get:e}),s=Object(d.f)(t.getIndexPattern(),[n],[],i);if(!s)return void console.log('malformed filter agg params, missing "query" on input');const o=""===r.input.query?"*":"";a[r.label||o||("string"==typeof r.input.query?r.input.query:JSON.stringify(r.input.query))]=s}),{});if(!Object(l.size)(n))return;(a.params||(a.params={})).filters=n},toExpressionAst:e=>null==e?void 0:e.map(T.F)}]}),ne="aggGeoHash",ie=()=>({name:ne,help:c.i18n.translate("data.search.aggs.function.buckets.geoHash.help",{defaultMessage:"Generates a serialized agg config for a Geo Hash agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.geoHash.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.geoHash.field.help",{defaultMessage:"Field to use for this aggregation"})},useGeocentroid:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.useGeocentroid.help",{defaultMessage:"Specifies whether to use geocentroid for this aggregation"})},autoPrecision:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.autoPrecision.help",{defaultMessage:"Specifies whether to use auto precision for this aggregation"})},isFilteredByCollar:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.isFilteredByCollar.help",{defaultMessage:"Specifies whether to filter by collar"})},boundingBox:{types:["geo_bounding_box"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.boundingBox.help",{defaultMessage:"Filter results based on a point location within a bounding box"})},precision:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.precision.help",{defaultMessage:"Precision to use for this aggregation."})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoHash.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,boundingBox:n,...i})=>({type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...i,boundingBox:n&&Object(l.omit)(n,"type")},type:v.a.GEOHASH_GRID}})}),se={top_left:{lat:1,lon:1},bottom_right:{lat:0,lon:0}},oe=c.i18n.translate("data.search.aggs.buckets.geohashGridTitle",{defaultMessage:"Geohash"}),le=()=>new _.a({name:v.a.GEOHASH_GRID,expressionName:ne,title:oe,makeLabel:()=>oe,params:[{name:"field",type:"field",filterFieldTypes:h.KBN_FIELD_TYPES.GEO_POINT},{name:"autoPrecision",default:!0,write:()=>{}},{name:"precision",default:2,write(e,t){t.params.precision=e.params.precision}},{name:"useGeocentroid",default:!0,write:()=>{}},{name:"isFilteredByCollar",default:!0,write:()=>{}},{name:"boundingBox",default:null,write:()=>{},toExpressionAst:T.m}],getRequestAggs(e){const t=[],a=e.params;return a.isFilteredByCollar&&e.getField()&&t.push(e.aggConfigs.createAggConfig({type:"filter",id:"filter_agg",enabled:!0,params:{geo_bounding_box:{ignore_unmapped:!0,[e.getField().name]:a.boundingBox||se}}},{addToAggConfigs:!1})),t.push(e),a.useGeocentroid&&t.push(e.aggConfigs.createAggConfig({type:"geo_centroid",enabled:!0,params:{field:e.getField()}},{addToAggConfigs:!1})),t}}),ue="aggGeoTile",ce=()=>({name:ue,help:c.i18n.translate("data.search.aggs.function.buckets.geoTile.help",{defaultMessage:"Generates a serialized agg config for a Geo Tile agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoTile.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.geoTile.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoTile.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.geoTile.field.help",{defaultMessage:"Field to use for this aggregation"})},useGeocentroid:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.geoTile.useGeocentroid.help",{defaultMessage:"Specifies whether to use geocentroid for this aggregation"})},precision:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.geoTile.precision.help",{defaultMessage:"Precision to use for this aggregation."})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoTile.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.geoTile.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:v.a.GEOTILE_GRID,params:{...i}}}}}),de=c.i18n.translate("data.search.aggs.buckets.geotileGridTitle",{defaultMessage:"Geotile"}),ge=()=>new _.a({name:v.a.GEOTILE_GRID,expressionName:ue,title:de,params:[{name:"field",type:"field",filterFieldTypes:h.KBN_FIELD_TYPES.GEO_POINT},{name:"useGeocentroid",default:!0,write:l.noop},{name:"precision",default:0}],getRequestAggs(e){const t=[],a=e.getParam("useGeocentroid");if(t.push(e),a){const a={type:A.GEO_CENTROID,enabled:!0,params:{field:e.getField()}};t.push(e.aggConfigs.createAggConfig(a,{addToAggConfigs:!1}))}return t}}),pe="aggHistogram",he=()=>({name:pe,help:c.i18n.translate("data.search.aggs.function.buckets.histogram.help",{defaultMessage:"Generates a serialized agg config for a Histogram agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.histogram.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.histogram.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.histogram.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.histogram.field.help",{defaultMessage:"Field to use for this aggregation"})},interval:{types:["number","string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.histogram.interval.help",{defaultMessage:"Interval to use for this aggregation"})},intervalBase:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.histogram.intervalBase.help",{defaultMessage:"IntervalBase to use for this aggregation"})},min_doc_count:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.histogram.minDocCount.help",{defaultMessage:"Specifies whether to use min_doc_count for this aggregation"})},maxBars:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.histogram.maxBars.help",{defaultMessage:"Calculate interval to get approximately this many bars"})},has_extended_bounds:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.histogram.hasExtendedBounds.help",{defaultMessage:"Specifies whether to use has_extended_bounds for this aggregation"})},extended_bounds:{types:["extended_bounds"],help:c.i18n.translate("data.search.aggs.buckets.histogram.extendedBounds.help",{defaultMessage:'With extended_bounds setting, you now can "force" the histogram aggregation to start building buckets on a specific min value and also keep on building buckets up to a max value '})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.histogram.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.histogram.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,extended_bounds:n,...i})=>({type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...i,extended_bounds:n&&Object(l.omit)(n,"type")},type:v.a.HISTOGRAM}})}),fe=e=>(t,a)=>{const{deserialize:r}=e(),n=parseInt(a,10),i={gte:n,lt:n+("number"==typeof t.params.used_interval?t.params.used_interval:t.params.interval)};return Object(d.m)(t.params.field,i,t.getIndexPattern(),r(t.toSerializedFieldFormat()).convert(a))};var me=a(40);const be=(e,t,a)=>{if(e/t>a){return(e=>{const t=Math.pow(10,Math.floor(Math.log10(e)));let a=t;for(;a<e;)a+=t;return a})(e/a)}return t},ye=({interval:e,maxBucketsUiSettings:t,maxBucketsUserInput:a,intervalBase:r,values:n,esTypes:i})=>{const s=Object(y.c)(e);let o=s?0:"number"!=typeof e?parseFloat(e):e;if(Number.isNaN(o))return o;if(n){const e=n.max-n.min;e&&(o=s?((e,t,a)=>{const r=e/t;if(e<t&&a.every((e=>[me.a.INTEGER,me.a.LONG,me.a.SHORT,me.a.BYTE].includes(e))))return 1;const n=Math.pow(10,Math.floor(Math.log10(r))),i=e/n;return i>t?i/2<=t?2*n:i/5<=t?5*n:10*n:n})(e,Math.min(t,a||t),i):be(e,o,t))}r&&(o<r?o=r:o%r!=0&&(o=Math.round(o/r)*r));return o||1},_e=({getConfig:e,getFieldFormatsStart:t})=>new _.a({name:v.a.HISTOGRAM,expressionName:pe,title:c.i18n.translate("data.search.aggs.buckets.histogramTitle",{defaultMessage:"Histogram"}),ordered:{},makeLabel:e=>e.getFieldDisplayName(),createFilter:fe(t),decorateAggConfig(){let e;return{setAutoBounds:{configurable:!0,value(t){e=t}},getAutoBounds:{configurable:!0,value:()=>e}}},params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.NUMBER_RANGE]},{name:"intervalBase",default:null,write:()=>{}},{name:"interval",default:y.a,modifyAggConfigOnSearchRequestStart(e,t,a){const r=e.getField();if("number_range"===(null==r?void 0:r.type))return;const n=r.scripted?{script:{source:r.script,lang:r.lang}}:{field:r.name};return t.createChild().setField("size",0).setField("aggs",{maxAgg:{max:n},minAgg:{min:n}}).fetch(a).then((t=>{var a,r,n,i,s,o;const l=null!==(a=null===(r=t.aggregations)||void 0===r||null===(n=r.minAgg)||void 0===n?void 0:n.value)&&void 0!==a?a:0,u=null!==(i=null===(s=t.aggregations)||void 0===s||null===(o=s.maxAgg)||void 0===o?void 0:o.value)&&void 0!==i?i:0;e.setAutoBounds({min:l,max:u})})).catch((e=>{if("AbortError"!==e.name)throw new Error(c.i18n.translate("data.search.aggs.histogram.missingMaxMinValuesWarning",{defaultMessage:"Unable to retrieve max and min values to auto-scale histogram buckets. This may lead to poor visualization performance."}))}))},write(t,a){a.params.interval=ve(t,e)}},{name:"used_interval",default:y.a,shouldShow:()=>!1,write:()=>{},serialize(t,a){if(a)return ve(a,e)},toExpressionAst:()=>{}},{name:"maxBars",shouldShow(e){const t=e.getField();return"number_range"!==(null==t?void 0:t.type)&&Object(y.c)(Object(l.get)(e,"params.interval"))},write:()=>{}},{name:"min_doc_count",default:!1,write(e,t){e.params.min_doc_count?t.params.min_doc_count=0:t.params.min_doc_count=1}},{name:"has_extended_bounds",default:!1,write:()=>{}},{name:"extended_bounds",default:{min:"",max:""},write(e,t){const{min:a,max:r}=e.params.extended_bounds;!e.params.has_extended_bounds||!a&&0!==a||!r&&0!==r||(t.params.extended_bounds={min:a,max:r})},shouldShow:e=>e.params.has_extended_bounds,toExpressionAst:T.h}]});function ve(e,t){var a,r;const n=e.getAutoBounds();return ye({values:n,interval:e.params.interval,maxBucketsUiSettings:t(h.UI_SETTINGS.HISTOGRAM_MAX_BARS),maxBucketsUserInput:e.params.maxBars,intervalBase:e.params.intervalBase,esTypes:(null===(a=e.params.field)||void 0===a||null===(r=a.spec)||void 0===r?void 0:r.esTypes)||[]})}const Se="aggIpRange",ke=()=>({name:Se,help:c.i18n.translate("data.search.aggs.function.buckets.ipRange.help",{defaultMessage:"Generates a serialized agg config for a Ip Range agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.ipRange.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.ipRange.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.ipRange.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.ipRange.field.help",{defaultMessage:"Field to use for this aggregation"})},ipRangeType:{types:["string"],options:["mask","fromTo"],help:c.i18n.translate("data.search.aggs.buckets.ipRange.ipRangeType.help",{defaultMessage:"IP range type to use for this aggregation. Takes one of the following values: mask, fromTo."})},ranges:{types:["cidr","ip_range"],multi:!0,help:c.i18n.translate("data.search.aggs.buckets.ipRange.ranges.help",{defaultMessage:"Ranges to use for this aggregation."})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.ipRange.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.ipRange.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,ranges:n,...i})=>{const{ip_range:s,cidr:o}=Object(l.mapValues)(Object(l.groupBy)(n,"type"),(e=>Object(l.map)(e,(e=>Object(l.omit)(e,"type"))))),u=Object(l.omitBy)({fromTo:s,mask:o},l.isNil);return{type:"agg_type",value:{id:t,enabled:a,schema:r,type:v.a.IP_RANGE,params:{...i,ranges:Object(l.isEmpty)(u)?void 0:u}}}}});var xe=a(49),Ee=a.n(xe);class cidr_mask_CidrMask{static getNetmask(e,t){return new Array(e).fill(255).map(((e,a)=>{const r=8-Math.min(Math.max(t-8*a,0),8);return e>>r<<r}))}constructor(e){i()(this,"address",void 0),i()(this,"netmask",void 0),i()(this,"prefix",void 0);try{const[t,a]=Ee.a.parseCIDR(e);this.address=t.toByteArray(),this.netmask=cidr_mask_CidrMask.getNetmask(this.address.length,a),this.prefix=a}catch{throw Error("Invalid CIDR mask: "+e)}}getBroadcastAddress(){const e=this.address.map(((e,t)=>e|255^this.netmask[t]));return new D.c(e).toString()}getNetworkAddress(){const e=this.address.map(((e,t)=>e&this.netmask[t]));return new D.c(e).toString()}getRange(){return{from:this.getNetworkAddress(),to:this.getBroadcastAddress()}}toString(){return`${new D.c(this.address)}/${this.prefix}`}}const Te=(e,t)=>{let a;return a="mask"===t.type?new cidr_mask_CidrMask(t.mask).getRange():{from:t.from?t.from:-1/0,to:t.to?t.to:1/0},Object(d.m)(e.params.field,{gte:a.from,lte:a.to},e.getIndexPattern())},Ie=c.i18n.translate("data.search.aggs.buckets.ipRangeTitle",{defaultMessage:"IP Range"});let we;!function(e){e.FROM_TO="fromTo",e.MASK="mask"}(we||(we={}));const Fe=()=>new _.a({name:v.a.IP_RANGE,expressionName:Se,title:Ie,createFilter:Te,getKey:(e,t,a)=>a.params.ipRangeType===we.MASK?{type:"mask",mask:t}:{type:"range",from:e.from,to:e.to},getSerializedFormat:e=>({id:"ip_range",params:e.params.field?e.aggConfigs.indexPattern.getFormatterForField(e.params.field).toJSON():{}}),makeLabel:e=>c.i18n.translate("data.search.aggs.buckets.ipRangeLabel",{defaultMessage:"{fieldName} IP ranges",values:{fieldName:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:h.KBN_FIELD_TYPES.IP},{name:"ipRangeType",default:we.FROM_TO,write:l.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},write(e,t){const a=e.params.ipRangeType;let r=e.params.ranges[a];a===we.FROM_TO&&(r=Object(l.map)(r,(e=>Object(l.omitBy)(e,l.isNull)))),t.params.ranges=r},toExpressionAst:e=>[...Object(l.map)(null==e?void 0:e[we.FROM_TO],T.u),...Object(l.map)(null==e?void 0:e[we.MASK],T.b)]}]});var Ae=a(58),Me=a(59),Oe=a(47);const Re=(...e)=>t=>{const a=t.params.field;return e.some((e=>a&&a.type===e))},Ne=Re("number"),Pe=Re("string"),Ce=Re("string","number"),je={serialize(e,t){if(!this.shouldShow||this.shouldShow(t))return!e||Object(l.isString)(e)||Array.isArray(e)?e:e.pattern},write(e,t){const a=e.getParam(this.name);if(Array.isArray(a)&&a.length>0&&Ne(e)){const e=a.filter((e=>Number.isFinite(e)));e.length&&(t.params[this.name]=e)}else Object(l.isObject)(a)?t.params[this.name]=a.pattern:a&&Pe(e)&&(t.params[this.name]=a)}},Le="aggRange",De=()=>({name:Le,help:c.i18n.translate("data.search.aggs.function.buckets.range.help",{defaultMessage:"Generates a serialized agg config for a Range agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.range.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.range.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.range.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.range.field.help",{defaultMessage:"Field to use for this aggregation"})},ranges:{types:["numerical_range"],multi:!0,help:c.i18n.translate("data.search.aggs.buckets.range.ranges.help",{defaultMessage:"Serialized ranges to use for this aggregation."})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.range.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.range.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,{id:t,enabled:a,schema:r,ranges:n,...i})=>({type:"agg_type",value:{id:t,enabled:a,schema:r,params:{...i,ranges:null==n?void 0:n.map((e=>Object(l.omit)(e,"type")))},type:v.a.RANGE}})}),Be=Symbol("id");class range_key_RangeKey{findCustomLabel(e,t,a){var r;return null===(r=(a||[]).find((a=>(null==e&&null==a.from||a.from===e)&&(null==t&&null==a.to||a.to===t))))||void 0===r?void 0:r.label}constructor(e,t){i()(this,Be,void 0),i()(this,"gte",void 0),i()(this,"lt",void 0),i()(this,"label",void 0),this.gte=null==e.from?-1/0:e.from,this.lt=null==e.to?1/0:e.to,this.label=this.findCustomLabel(e.from,e.to,t),this[Be]=range_key_RangeKey.idBucket(e)}static idBucket(e){return`from:${e.from},to:${e.to}`}toString(){return this[Be]}}const qe=e=>(t,{label:a,...r})=>{const{deserialize:n}=e();return Object(d.m)(t.params.field,r,t.getIndexPattern(),n(t.toSerializedFieldFormat()).convert(r))},Ge=c.i18n.translate("data.search.aggs.buckets.rangeTitle",{defaultMessage:"Range"}),Qe=({getFieldFormatsStart:e})=>{const t=new WeakMap;return new _.a({name:v.a.RANGE,expressionName:Le,title:Ge,createFilter:qe(e),makeLabel:e=>c.i18n.translate("data.search.aggs.aggTypesLabel",{defaultMessage:"{fieldName} ranges",values:{fieldName:e.getFieldDisplayName()}}),getKey(e,a,r){let n=t.get(r);n||(n=new Map,t.set(r,n));const i=range_key_RangeKey.idBucket(e);return(a=n.get(i))||(a=new range_key_RangeKey(e,r.params.ranges),n.set(i,a)),a},getSerializedFormat(e){const t=e.params.field?e.aggConfigs.indexPattern.getFormatterForField(e.params.field).toJSON():{id:void 0,params:void 0};return{id:"range",params:{id:t.id,params:t.params}}},params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],write(e,t){var a;t.params.ranges=null===(a=e.params.ranges)||void 0===a?void 0:a.map((e=>({to:e.to,from:e.from}))),t.params.keyed=!0},toExpressionAst:e=>null==e?void 0:e.map(T.C)}]})},Ue="aggSignificantTerms",ze=()=>({name:Ue,help:c.i18n.translate("data.search.aggs.function.buckets.significantTerms.help",{defaultMessage:"Generates a serialized agg config for a Significant Terms agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.significantTerms.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.significantTerms.field.help",{defaultMessage:"Field to use for this aggregation"})},size:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.size.help",{defaultMessage:"Max number of buckets to retrieve"})},exclude:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.exclude.help",{defaultMessage:"Specific bucket values to exclude from results"})},include:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.include.help",{defaultMessage:"Specific bucket values to include in results"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.significantTerms.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:v.a.SIGNIFICANT_TERMS,params:{...i}}}}}),$e=(e,t,a)=>{const r=e.params.field,n=e.aggConfigs.indexPattern;if("__other__"===t){const e=a.terms,t=Object(d.j)(r,e,n);t.meta.negate=!0;const i=[t];return e.some((e=>"__missing__"===e))&&i.push(Object(d.g)(r,n)),i}if("__missing__"===t){const e=Object(d.g)(r,n);return e.meta.negate=!0,e}return Object(d.i)(r,t,n)},He=c.i18n.translate("data.search.aggs.buckets.significantTermsTitle",{defaultMessage:"Significant Terms"}),Ke=()=>new _.a({name:v.a.SIGNIFICANT_TERMS,expressionName:Ue,title:He,makeLabel:e=>c.i18n.translate("data.search.aggs.buckets.significantTermsLabel",{defaultMessage:"Top {size} unusual terms in {fieldName}",values:{size:e.params.size,fieldName:e.getFieldDisplayName()}}),createFilter:$e,params:[{name:"field",type:"field",scriptable:!1,filterFieldTypes:h.KBN_FIELD_TYPES.STRING},{name:"size",default:""},{name:"exclude",displayName:c.i18n.translate("data.search.aggs.buckets.significantTerms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:!0,shouldShow:Pe,...je},{name:"include",displayName:c.i18n.translate("data.search.aggs.buckets.significantTerms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:!0,shouldShow:Pe,...je}]}),Ve="aggTerms",Ye=()=>({name:Ve,help:c.i18n.translate("data.search.aggs.function.buckets.terms.help",{defaultMessage:"Generates a serialized agg config for a Terms agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.buckets.terms.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.buckets.terms.field.help",{defaultMessage:"Field to use for this aggregation"})},order:{types:["string"],options:["asc","desc"],help:c.i18n.translate("data.search.aggs.buckets.terms.order.help",{defaultMessage:"Order in which to return the results: asc or desc"})},orderBy:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.orderBy.help",{defaultMessage:"Field to order results by"})},orderAgg:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.buckets.terms.orderAgg.help",{defaultMessage:"Agg config to use for ordering results"})},size:{types:["number"],help:c.i18n.translate("data.search.aggs.buckets.terms.size.help",{defaultMessage:"Max number of buckets to retrieve"})},missingBucket:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.terms.missingBucket.help",{defaultMessage:"When set to true, groups together any buckets with missing fields"})},missingBucketLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel.help",{defaultMessage:"Default label used in charts when documents are missing a field."})},otherBucket:{types:["boolean"],help:c.i18n.translate("data.search.aggs.buckets.terms.otherBucket.help",{defaultMessage:"When set to true, groups together any buckets beyond the allowed size"})},otherBucketLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel.help",{defaultMessage:"Default label used in charts for documents in the Other bucket"})},exclude:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.exclude.help",{defaultMessage:"Specific bucket values to exclude from results"})},include:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.include.help",{defaultMessage:"Specific bucket values to include in results"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.buckets.terms.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,t)=>{var a;const{id:r,enabled:n,schema:i,...s}=t;return{type:"agg_type",value:{id:r,enabled:n,schema:i,type:v.a.TERMS,params:{...s,orderAgg:null===(a=t.orderAgg)||void 0===a?void 0:a.value}}}}}),We="",Je=(e,t)=>{if(e[t])return e[t];const a=Object(l.values)(e);let r;for(let e=0;e<a.length;e++)if(a[e].aggs&&(r=Je(a[e].aggs,t)))return r},Xe=(e,t)=>{let a=[];if(e[t]){const r=e[t].buckets.find((e=>"__missing__"===e.key));return r&&a.push(r),a}return Object(l.each)(e,(e=>{e.buckets&&Object(l.each)(e.buckets,(e=>{a=[...a,...Xe(e,t)]}))})),a},Ze=(e,t,a,r,n)=>{const i=Object(l.cloneDeep)(t);return Object(l.each)(a.aggregations["other-filter"].buckets,((t,a)=>{if(!t.doc_count||void 0===a)return;const s=a.replace(new RegExp(`^${We}`),""),o=((e,t,a,r)=>{var n;const i=r.split(We);let s=t;for(const t in i)if(i[t]){const a=Object(l.values)(s);for(let r=0;r<a.length;r++){const n=a[r],o=Object(l.keys)(s)[r],u=Object(l.find)(e.aggs,(e=>e.id===o));if(u){const e=Object(l.find)(n.buckets,((e,a)=>u.getKey(e,Object(l.isNumber)(a)?void 0:a).toString()===i[t]));if(e){s=e;break}}}}return null!==(n=s)&&void 0!==n&&n[a.id]?s[a.id].buckets:[]})(e,i.aggregations,r,s),u=((e,t,a)=>e["other-filter"].filters.filters[t].bool.must_not.filter((e=>e.match_phrase&&e.match_phrase[a.params.field.name])).map((e=>e.match_phrase[a.params.field.name])))(n,a,r),c=Object(d.j)(r.params.field,u,r.aggConfigs.indexPattern);c.meta.negate=!0,t.filters=[c],t.key="__other__",o.some((e=>"__missing__"===e.key))&&t.filters.push(Object(d.g)(r.params.field,r.aggConfigs.indexPattern)),o.push(t)})),i},et=["!top_hits","!percentiles","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"],tt=c.i18n.translate("data.search.aggs.buckets.termsTitle",{defaultMessage:"Terms"}),at=()=>new _.a({name:v.a.TERMS,expressionName:Ve,title:tt,makeLabel(e){const t=e.params;return e.getFieldDisplayName()+": "+t.order.text},getSerializedFormat(e){const t=e.params.field?e.aggConfigs.indexPattern.getFormatterForField(e.params.field).toJSON():{id:void 0,params:void 0};return{id:"terms",params:{id:t.id,otherBucketLabel:e.params.otherBucketLabel,missingBucketLabel:e.params.missingBucketLabel,...t.params}}},createFilter:$e,postFlightRequest:async(e,t,a,r,n,i,s)=>{if(!e.aggregations)return e;const o=r.createChild();if(a.params.otherBucket){const r=((e,t,a)=>{const r=e.aggs.filter((e=>e.type.type===g.Buckets&&e.enabled)),n=r.findIndex((e=>e.id===t.id)),i=e.toDsl(),s=t.aggConfigs.indexPattern,o=e.createAggConfig({type:"filters",id:"other",params:{filters:[]},enabled:!1},{addToAggConfigs:!1}),u={aggs:Je(i,t.id).aggs,filters:o.toDsl()};let c=!1,p=!0;const h=(e,a,i,o,g)=>{var f;if((null===(f=a[i])||void 0===f?void 0:f.buckets.length)<1)return void(c=!0);const m=a[i],b=e+1,y=r[b],_=r[e];if(e===n&&m&&m.sum_other_doc_count>0&&(p=!1),e<n)return void Object(l.each)(m.buckets,((e,t)=>{const a=_.getKey(e,Object(l.isNumber)(t)?void 0:t),r=Object(l.cloneDeep)(e.filters)||_.createFilter(a),n=Object(l.flatten)([...o,r]);h(b,e,y.id,n,`${g}${We}${a.toString()}`)}));const v=!!t.params.field.scripted,S=!!t.params.missingBucket,k=m.buckets.some((e=>"__missing__"===e.key));v||S&&!k||o.push(Object(d.g)(t.params.field,t.aggConfigs.indexPattern)),Object(l.each)(m.buckets,(e=>{if("__missing__"===e.key)return;const t=_.createFilter(e.key);t.meta.negate=!0,o.push(t)})),u.filters.filters[g]={bool:Object(d.l)(o,s)}};return h(0,a.aggregations,r[0].id,[],""),!c&&!p&&(()=>({"other-filter":u}))})(t,a,e);if(!r)return e;o.setField("aggs",r);const{rawResponse:u}=await o.fetch$({abortSignal:i,sessionId:s,inspector:{adapter:n,title:c.i18n.translate("data.search.aggs.buckets.terms.otherBucketTitle",{defaultMessage:"Other bucket"}),description:c.i18n.translate("data.search.aggs.buckets.terms.otherBucketDescription",{defaultMessage:"This request counts the number of documents that fall outside the criterion of the data buckets."})}}).toPromise();e=Ze(t,e,u,a,r())}return a.params.missingBucket&&(e=((e,t,a)=>{const r=Object(l.cloneDeep)(e);return Xe(r.aggregations,a.id).forEach((e=>{e.key="__missing__"})),r})(e,0,a)),e},params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.BOOLEAN,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.IP,h.KBN_FIELD_TYPES.STRING]},{name:"orderBy",write:l.noop},{name:"orderAgg",type:"agg",allowedAggs:et,default:null,makeAgg(e,t={type:"count"}){t.schema="orderAgg";const a=e.aggConfigs.createAggConfig(t,{addToAggConfigs:!1});return a.id=e.id+"-orderAgg",a},write(e,t,a){const r=e.params.order.value,n=t.params.order={};let i=e.params.orderAgg||a.getResponseAggById(e.params.orderBy);if(t.params.script&&(t.params.value_type="number"===e.getField().type?"float":e.getField().type),e.params.missingBucket&&"string"===e.params.field.type&&(t.params.missing="__missing__"),!i)return void(n[e.params.orderBy||"_count"]=r);if(null!=a&&a.hasTimeShifts()&&Object.keys(null==a?void 0:a.getTimeShifts()).length>1&&a.timeRange){const e=i.getTimeShift();i=a.createAggConfig({type:"filtered_metric",id:i.id,params:{customBucket:a.createAggConfig({type:"filter",id:"shift",params:{filter:{language:"lucene",query:{range:{[a.timeFields[0]]:{gte:o()(a.timeRange.from).subtract(e||0).toISOString(),lte:o()(a.timeRange.to).subtract(e||0).toISOString()}}}}}},{addToAggConfigs:!1}).serialize(),customMetric:i.serialize()},enabled:!1},{addToAggConfigs:!1})}if("count"===i.type.name)return void(n._count=r);const s=i.getValueBucketPath();i.parentId&&a&&(i=a.byId(i.parentId)),t.subAggs=(t.subAggs||[]).concat(i),n[s]=r}},{name:"order",type:"optioned",default:"desc",options:[{text:c.i18n.translate("data.search.aggs.buckets.terms.orderDescendingTitle",{defaultMessage:"Descending"}),value:"desc"},{text:c.i18n.translate("data.search.aggs.buckets.terms.orderAscendingTitle",{defaultMessage:"Ascending"}),value:"asc"}],write:l.noop},{name:"size",default:5},{name:"otherBucket",default:!1,write:l.noop},{name:"otherBucketLabel",type:"string",default:c.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel",{defaultMessage:"Other"}),displayName:c.i18n.translate("data.search.aggs.otherBucket.labelForOtherBucketLabel",{defaultMessage:"Label for other bucket"}),shouldShow:e=>e.getParam("otherBucket"),write:l.noop},{name:"missingBucket",default:!1,write:l.noop},{name:"missingBucketLabel",default:c.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel",{defaultMessage:"Missing",description:'Default label used in charts when documents are missing a field.\n          Visible when you create a chart with a terms aggregation and enable "Show missing values"'}),type:"string",displayName:c.i18n.translate("data.search.aggs.otherBucket.labelForMissingValuesLabel",{defaultMessage:"Label for missing values"}),shouldShow:e=>e.getParam("missingBucket"),write:l.noop},{name:"exclude",displayName:c.i18n.translate("data.search.aggs.buckets.terms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:!0,shouldShow:Ce,...je},{name:"include",displayName:c.i18n.translate("data.search.aggs.buckets.terms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:!0,shouldShow:Ce,...je}]}),rt="aggAvg",nt=()=>({name:rt,help:c.i18n.translate("data.search.aggs.function.metrics.avg.help",{defaultMessage:"Generates a serialized agg config for a Avg agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.avg.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.avg.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.avg.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.avg.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.avg.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.avg.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.AVG,params:{...i}}}}}),it=c.i18n.translate("data.search.aggs.metrics.averageTitle",{defaultMessage:"Average"}),st=()=>new metric_agg_type_MetricAggType({name:A.AVG,expressionName:rt,title:it,valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.averageLabel",{defaultMessage:"Average {field}",values:{field:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.HISTOGRAM]}]}),ot="aggBucketAvg",lt=()=>({name:ot,help:c.i18n.translate("data.search.aggs.function.metrics.bucket_avg.help",{defaultMessage:"Generates a serialized agg config for a Avg Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_avg.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a,r;const{id:n,enabled:i,schema:s,...o}=t;return{type:"agg_type",value:{id:n,enabled:i,schema:s,type:A.AVG_BUCKET,params:{...o,customBucket:null===(a=t.customBucket)||void 0===a?void 0:a.value,customMetric:null===(r=t.customMetric)||void 0===r?void 0:r.value}}}}}),ut=(e,t)=>{const a=Object(l.startCase)(t),r=e.getParam("customMetric"),n=e.getParam("metricAgg");if(r){let e=r.makeLabel();return e.includes(`${a} of `)?(e=e.substring(`${a} of `.length),e=`2. ${t} of ${e}`):e=e.includes(`${t} of `)?parseInt(e.substring(0,1),10)+1+e.substring(1):`${a} of ${e}`,e}const i=e.aggConfigs.byId(n);return i?`${a} of ${i.makeLabel()}`:""},ct=e=>(t,a,r)=>{if(!t||!t.params)return;const n=t.getParam(e);n&&n.type&&n.type.params&&n.type.params.forEach((e=>{e.modifyAggConfigOnSearchRequestStart&&e.modifyAggConfigOnSearchRequestStart(n,a,r)}))},dt=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!geo_bounds","!geo_centroid","!filtered_metric","!single_percentile"],gt=[],pt=c.i18n.translate("data.search.aggs.metrics.siblingPipelineAggregationsSubtypeTitle",{defaultMessage:"Sibling pipeline aggregations"}),ht={subtype:pt,params:(e=gt)=>[{name:"customBucket",type:"agg",allowedAggs:e,default:null,makeAgg(e,t={type:"date_histogram"}){const a=e.aggConfigs.createAggConfig(t,{addToAggConfigs:!1});return a.id=e.id+"-bucket",a},modifyAggConfigOnSearchRequestStart:ct("customBucket"),write:()=>{}},{name:"customMetric",type:"agg",allowedAggs:dt,default:null,makeAgg(e,t={type:"count"}){const a=e.aggConfigs.createAggConfig(t,{addToAggConfigs:!1});return a.id=e.id+"-metric",a},modifyAggConfigOnSearchRequestStart:ct("customMetric"),write:(e,t)=>((e,t)=>{const a=e.getParam("customMetric");if(!a)return;const r=a,n=e.getParam("customBucket");r.type.name!==A.COUNT?(n.subAggs=(t.subAggs||[]).concat(r),t.params.buckets_path=`${n.id}>${r.id}`):t.params.buckets_path=n.id+">_count",t.parentAggs=(t.parentAggs||[]).concat(n)})(e,t)}],getSerializedFormat(e){const t=e.getParam("customMetric");return t?t.type.getSerializedFormat(t):{}}},ft=c.i18n.translate("data.search.aggs.metrics.overallAverageLabel",{defaultMessage:"overall average"}),mt=c.i18n.translate("data.search.aggs.metrics.averageBucketTitle",{defaultMessage:"Average Bucket"}),bt=()=>{const{subtype:e,params:t,getSerializedFormat:a}=ht;return new metric_agg_type_MetricAggType({name:A.AVG_BUCKET,expressionName:ot,title:mt,makeLabel:e=>ut(e,ft),subtype:e,params:[...t()],getSerializedFormat:a,getValue(e,t){const a=e.getParam("customMetric"),r=e.getParam("customBucket"),n=a.type&&a.type.isScalable();let i=t[e.id]&&t[e.id].value;if(n&&"date_histogram"===r.type.name){const e=r.write();i*=Object(l.get)(e,"bucketInterval.scale",1)}return i}})},yt="aggBucketMax",_t=()=>({name:yt,help:c.i18n.translate("data.search.aggs.function.metrics.bucket_max.help",{defaultMessage:"Generates a serialized agg config for a Max Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_max.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.bucket_max.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_max.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_max.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_max.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_max.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_max.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a,r;const{id:n,enabled:i,schema:s,...o}=t;return{type:"agg_type",value:{id:n,enabled:i,schema:s,type:A.MAX_BUCKET,params:{...o,customBucket:null===(a=t.customBucket)||void 0===a?void 0:a.value,customMetric:null===(r=t.customMetric)||void 0===r?void 0:r.value}}}}}),vt=c.i18n.translate("data.search.aggs.metrics.overallMaxLabel",{defaultMessage:"overall max"}),St=c.i18n.translate("data.search.aggs.metrics.maxBucketTitle",{defaultMessage:"Max Bucket"}),kt=()=>{const{subtype:e,params:t,getSerializedFormat:a}=ht;return new metric_agg_type_MetricAggType({name:A.MAX_BUCKET,expressionName:yt,title:St,makeLabel:e=>ut(e,vt),subtype:e,params:[...t()],getSerializedFormat:a})},xt="aggBucketMin",Et=()=>({name:xt,help:c.i18n.translate("data.search.aggs.function.metrics.bucket_min.help",{defaultMessage:"Generates a serialized agg config for a Min Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_min.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.bucket_min.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_min.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_min.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_min.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_min.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_min.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a,r;const{id:n,enabled:i,schema:s,...o}=t;return{type:"agg_type",value:{id:n,enabled:i,schema:s,type:A.MIN_BUCKET,params:{...o,customBucket:null===(a=t.customBucket)||void 0===a?void 0:a.value,customMetric:null===(r=t.customMetric)||void 0===r?void 0:r.value}}}}}),Tt=c.i18n.translate("data.search.aggs.metrics.overallMinLabel",{defaultMessage:"overall min"}),It=c.i18n.translate("data.search.aggs.metrics.minBucketTitle",{defaultMessage:"Min Bucket"}),wt=()=>{const{subtype:e,params:t,getSerializedFormat:a}=ht;return new metric_agg_type_MetricAggType({name:A.MIN_BUCKET,expressionName:xt,title:It,makeLabel:e=>ut(e,Tt),subtype:e,params:[...t()],getSerializedFormat:a})},Ft="aggBucketSum",At=()=>({name:Ft,help:c.i18n.translate("data.search.aggs.function.metrics.bucket_sum.help",{defaultMessage:"Generates a serialized agg config for a Sum Bucket agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.bucket_sum.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a,r;const{id:n,enabled:i,schema:s,...o}=t;return{type:"agg_type",value:{id:n,enabled:i,schema:s,type:A.SUM_BUCKET,params:{...o,customBucket:null===(a=t.customBucket)||void 0===a?void 0:a.value,customMetric:null===(r=t.customMetric)||void 0===r?void 0:r.value}}}}}),Mt=c.i18n.translate("data.search.aggs.metrics.overallSumLabel",{defaultMessage:"overall sum"}),Ot=c.i18n.translate("data.search.aggs.metrics.sumBucketTitle",{defaultMessage:"Sum Bucket"}),Rt=()=>{const{subtype:e,params:t,getSerializedFormat:a}=ht;return new metric_agg_type_MetricAggType({name:A.SUM_BUCKET,expressionName:Ft,title:Ot,makeLabel:e=>ut(e,Mt),subtype:e,params:[...t()],getSerializedFormat:a})},Nt="aggFilteredMetric",Pt=()=>({name:Nt,help:c.i18n.translate("data.search.aggs.function.metrics.filtered_metric.help",{defaultMessage:"Generates a serialized agg config for a filtered metric agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.filtered_metric.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.filtered_metric.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.filtered_metric.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customBucket:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.filtered_metric.customBucket.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations. Has to be a filter aggregation"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.filtered_metric.customMetric.help",{defaultMessage:"Agg config to use for building sibling pipeline aggregations"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.filtered_metric.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a,r;const{id:n,enabled:i,schema:s,...o}=t;return{type:"agg_type",value:{id:n,enabled:i,schema:s,type:A.FILTERED_METRIC,params:{...o,customBucket:null===(a=t.customBucket)||void 0===a?void 0:a.value,customMetric:null===(r=t.customMetric)||void 0===r?void 0:r.value}}}}}),Ct=c.i18n.translate("data.search.aggs.metrics.filteredMetricLabel",{defaultMessage:"filtered"}),jt=c.i18n.translate("data.search.aggs.metrics.filteredMetricTitle",{defaultMessage:"Filtered metric"}),Lt=()=>{const{subtype:e,params:t,getSerializedFormat:a}=ht;return new metric_agg_type_MetricAggType({name:A.FILTERED_METRIC,expressionName:Nt,title:jt,makeLabel:e=>ut(e,Ct),subtype:e,params:[...t(["filter"])],hasNoDslParams:!0,getSerializedFormat:a,getValue(e,t){const a=e.getParam("customMetric"),r=e.getParam("customBucket");return t&&t[r.id]&&a.getValue(t[r.id])},getValueBucketPath(e){const t=e.getParam("customBucket"),a=e.getParam("customMetric");return"count"===a.type.name?t.getValueBucketPath():`${t.getValueBucketPath()}>${a.getValueBucketPath()}`},getResponseId:e=>e.params.customBucket.id})},Dt="aggCardinality",Bt=()=>({name:Dt,help:c.i18n.translate("data.search.aggs.function.metrics.cardinality.help",{defaultMessage:"Generates a serialized agg config for a Cardinality agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cardinality.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.cardinality.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cardinality.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.cardinality.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cardinality.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cardinality.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.CARDINALITY,params:{...i}}}}}),qt=c.i18n.translate("data.search.aggs.metrics.uniqueCountTitle",{defaultMessage:"Unique Count"}),Gt=()=>new metric_agg_type_MetricAggType({name:A.CARDINALITY,valueType:"number",expressionName:Dt,title:qt,makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.uniqueCountLabel",{defaultMessage:"Unique count of {field}",values:{field:e.getFieldDisplayName()}}),getSerializedFormat:e=>({id:"number"}),params:[{name:"field",type:"field",filterFieldTypes:Object.values(h.KBN_FIELD_TYPES).filter((e=>e!==h.KBN_FIELD_TYPES.HISTOGRAM))}]}),Qt="aggCount",Ut=()=>({name:Qt,help:c.i18n.translate("data.search.aggs.function.metrics.count.help",{defaultMessage:"Generates a serialized agg config for a Count agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.count.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.count.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.count.schema.help",{defaultMessage:"Schema to use for this aggregation"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.count.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.COUNT,params:i}}}}),zt=()=>new metric_agg_type_MetricAggType({name:A.COUNT,expressionName:Qt,title:c.i18n.translate("data.search.aggs.metrics.countTitle",{defaultMessage:"Count"}),hasNoDsl:!0,json:!1,makeLabel:()=>c.i18n.translate("data.search.aggs.metrics.countLabel",{defaultMessage:"Count"}),getSerializedFormat:e=>({id:"number"}),getValue(e,t){const a=e.getTimeShift();return a?t[`doc_count_${a.asMilliseconds()}`]:t.doc_count},isScalable:()=>!0}),$t="aggCumulativeSum",Ht=()=>({name:$t,help:c.i18n.translate("data.search.aggs.function.metrics.cumulative_sum.help",{defaultMessage:"Generates a serialized agg config for a Cumulative Sum agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},buckets_path:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.cumulative_sum.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a;const{id:r,enabled:n,schema:i,...s}=t;return{type:"agg_type",value:{id:r,enabled:n,schema:i,type:A.CUMULATIVE_SUM,params:{...s,customMetric:null===(a=t.customMetric)||void 0===a?void 0:a.value}}}}}),Kt=(e,t,a)=>{const r=e.getParam("customMetric"),n=e.getParam("metricAgg"),i=r||a&&a.getResponseAggById(n);r&&"count"!==r.type.name&&(t.parentAggs=(t.parentAggs||[]).concat(i)),t.params={buckets_path:"count"===i.type.name?"_count":i.id}},Vt=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!geo_bounds","!geo_centroid","!filtered_metric","!single_percentile"],Yt=c.i18n.translate("data.search.aggs.metrics.parentPipelineAggregationsSubtypeTitle",{defaultMessage:"Parent Pipeline Aggregations"}),Wt={subtype:Yt,params:()=>[{name:"metricAgg",default:"custom",write:Kt},{name:"customMetric",type:"agg",allowedAggs:Vt,makeAgg(e,t={type:"count"}){const a=e.aggConfigs.createAggConfig(t,{addToAggConfigs:!1});return a.id=e.id+"-metric",a},modifyAggConfigOnSearchRequestStart:ct("customMetric"),write:l.noop},{name:"buckets_path",write:l.noop}],getSerializedFormat(e){let t;const a=e.getParam("customMetric");return t=a||e.aggConfigs.byId(e.getParam("metricAgg")),t?t.type.getSerializedFormat(t):{}}},Jt=c.i18n.translate("data.search.aggs.metrics.cumulativeSumLabel",{defaultMessage:"cumulative sum"}),Xt=c.i18n.translate("data.search.aggs.metrics.cumulativeSumTitle",{defaultMessage:"Cumulative Sum"}),Zt=()=>{const{subtype:e,params:t,getSerializedFormat:a}=Wt;return new metric_agg_type_MetricAggType({name:A.CUMULATIVE_SUM,expressionName:$t,title:Xt,makeLabel:e=>ut(e,Jt),subtype:e,params:[...t()],getSerializedFormat:a})},ea="aggDerivative",ta=()=>({name:ea,help:c.i18n.translate("data.search.aggs.function.metrics.derivative.help",{defaultMessage:"Generates a serialized agg config for a Derivative agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.derivative.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.derivative.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},buckets_path:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a;const{id:r,enabled:n,schema:i,...s}=t;return{type:"agg_type",value:{id:r,enabled:n,schema:i,type:A.DERIVATIVE,params:{...s,customMetric:null===(a=t.customMetric)||void 0===a?void 0:a.value}}}}}),aa=c.i18n.translate("data.search.aggs.metrics.derivativeLabel",{defaultMessage:"derivative"}),ra=c.i18n.translate("data.search.aggs.metrics.derivativeTitle",{defaultMessage:"Derivative"}),na=()=>{const{subtype:e,params:t,getSerializedFormat:a}=Wt;return new metric_agg_type_MetricAggType({name:A.DERIVATIVE,expressionName:ea,title:ra,makeLabel:e=>ut(e,aa),subtype:e,params:[...t()],getSerializedFormat:a})},ia="aggGeoBounds",sa=()=>({name:ia,help:c.i18n.translate("data.search.aggs.function.metrics.geo_bounds.help",{defaultMessage:"Generates a serialized agg config for a Geo Bounds agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_bounds.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.geo_bounds.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_bounds.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.geo_bounds.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_bounds.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_bounds.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.GEO_BOUNDS,params:{...i}}}}}),oa=c.i18n.translate("data.search.aggs.metrics.geoBoundsTitle",{defaultMessage:"Geo Bounds"}),la=c.i18n.translate("data.search.aggs.metrics.geoBoundsLabel",{defaultMessage:"Geo Bounds"}),ua=()=>new metric_agg_type_MetricAggType({name:A.GEO_BOUNDS,expressionName:ia,title:oa,makeLabel:()=>la,params:[{name:"field",type:"field",filterFieldTypes:h.KBN_FIELD_TYPES.GEO_POINT}]}),ca="aggGeoCentroid",da=()=>({name:ca,help:c.i18n.translate("data.search.aggs.function.metrics.geo_centroid.help",{defaultMessage:"Generates a serialized agg config for a Geo Centroid agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_centroid.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.geo_centroid.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_centroid.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.geo_centroid.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_centroid.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.geo_centroid.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.GEO_CENTROID,params:{...i}}}}}),ga=c.i18n.translate("data.search.aggs.metrics.geoCentroidTitle",{defaultMessage:"Geo Centroid"}),pa=c.i18n.translate("data.search.aggs.metrics.geoCentroidLabel",{defaultMessage:"Geo Centroid"}),ha=()=>new metric_agg_type_MetricAggType({name:A.GEO_CENTROID,expressionName:ca,title:ga,makeLabel:()=>pa,params:[{name:"field",type:"field",filterFieldTypes:h.KBN_FIELD_TYPES.GEO_POINT}],getValue:(e,t)=>t[e.id]&&t[e.id].location}),fa="aggMax",ma=()=>({name:fa,help:c.i18n.translate("data.search.aggs.function.metrics.max.help",{defaultMessage:"Generates a serialized agg config for a Max agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.max.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.max.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.max.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.max.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.max.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.max.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.MAX,params:{...i}}}}}),ba=c.i18n.translate("data.search.aggs.metrics.maxTitle",{defaultMessage:"Max"}),ya=()=>new metric_agg_type_MetricAggType({name:A.MAX,expressionName:fa,title:ba,valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.maxLabel",{defaultMessage:"Max {field}",values:{field:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.HISTOGRAM]}]}),_a="aggMedian",va=()=>({name:_a,help:c.i18n.translate("data.search.aggs.function.metrics.median.help",{defaultMessage:"Generates a serialized agg config for a Median agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.median.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.median.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.median.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.median.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.median.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.median.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.MEDIAN,params:{...i}}}}}),Sa=c.i18n.translate("data.search.aggs.metrics.medianTitle",{defaultMessage:"Median"}),ka=()=>new metric_agg_type_MetricAggType({name:A.MEDIAN,expressionName:_a,dslName:"percentiles",title:Sa,valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.medianLabel",{defaultMessage:"Median {field}",values:{field:e.getFieldDisplayName()}}),getValueBucketPath:e=>`${e.id}.50`,params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[50],shouldShow:()=>!1,serialize:()=>{}}],getValue(e,t){var a;return null===(a=t[e.id])||void 0===a?void 0:a.values["50.0"]}}),xa="aggSinglePercentile",Ea=()=>({name:xa,help:c.i18n.translate("data.search.aggs.function.metrics.singlePercentile.help",{defaultMessage:"Generates a serialized agg config for a single percentile agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.field.help",{defaultMessage:"Field to use for this aggregation"})},percentile:{types:["number"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.percentile.help",{defaultMessage:"Percentile to fetch"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.singlePercentile.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.SINGLE_PERCENTILE,params:{...i}}}}}),Ta=c.i18n.translate("data.search.aggs.metrics.singlePercentileTitle",{defaultMessage:"Percentile"}),Ia=()=>new metric_agg_type_MetricAggType({name:A.SINGLE_PERCENTILE,expressionName:xa,dslName:"percentiles",title:Ta,valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.singlePercentileLabel",{defaultMessage:"Percentile {field}",values:{field:e.getFieldDisplayName()}}),getValueBucketPath:e=>`${e.id}.${e.params.percentile}`,params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percentile",default:95,write:(e,t)=>{t.params.percents=[e.params.percentile]}}],getValue(e,t){var a;let r=String(e.params.percentile);Number.isInteger(e.params.percentile)&&(r+=".0");const{values:n}=null!==(a=t[e.id])&&void 0!==a?a:{};return n?n[r]:NaN}}),wa="aggMin",Fa=()=>({name:wa,help:c.i18n.translate("data.search.aggs.function.metrics.min.help",{defaultMessage:"Generates a serialized agg config for a Min agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.min.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.min.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.min.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.min.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.min.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.min.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.MIN,params:{...i}}}}}),Aa=c.i18n.translate("data.search.aggs.metrics.minTitle",{defaultMessage:"Min"}),Ma=()=>new metric_agg_type_MetricAggType({name:A.MIN,expressionName:wa,title:Aa,valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.minLabel",{defaultMessage:"Min {field}",values:{field:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.HISTOGRAM]}]}),Oa="aggMovingAvg",Ra=()=>({name:Oa,help:c.i18n.translate("data.search.aggs.function.metrics.moving_avg.help",{defaultMessage:"Generates a serialized agg config for a Moving Average agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.moving_avg.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},window:{types:["number"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.window.help",{defaultMessage:'The size of window to "slide" across the histogram.'})},buckets_path:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.derivative.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},script:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.script.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.moving_avg.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a;const{id:r,enabled:n,schema:i,...s}=t;return{type:"agg_type",value:{id:r,enabled:n,schema:i,type:A.MOVING_FN,params:{...s,customMetric:null===(a=t.customMetric)||void 0===a?void 0:a.value}}}}}),Na=c.i18n.translate("data.search.aggs.metrics.movingAvgTitle",{defaultMessage:"Moving Avg"}),Pa=c.i18n.translate("data.search.aggs.metrics.movingAvgLabel",{defaultMessage:"moving avg"}),Ca=()=>{const{subtype:e,params:t,getSerializedFormat:a}=Wt;return new metric_agg_type_MetricAggType({name:A.MOVING_FN,expressionName:Oa,dslName:"moving_fn",title:Na,makeLabel:e=>ut(e,Pa),subtype:e,getSerializedFormat:a,params:[...t(),{name:"window",default:5},{name:"script",default:"MovingFunctions.unweightedAvg(values)"}],getValue:(e,t)=>t[e.id]?t[e.id].value:null})},ja="aggPercentileRanks",La=()=>({name:ja,help:c.i18n.translate("data.search.aggs.function.metrics.percentile_ranks.help",{defaultMessage:"Generates a serialized agg config for a Percentile Ranks agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.field.help",{defaultMessage:"Field to use for this aggregation"})},values:{types:["number"],multi:!0,help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.values.help",{defaultMessage:"Range of percentiles ranks"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentile_ranks.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.PERCENTILE_RANKS,params:{...i}}}}}),Da=(e,t)=>e.$$_ResponseAggConfigClass?e.$$_ResponseAggConfigClass:e.$$_ResponseAggConfigClass=Ba(e,t),Ba=(e,t)=>{function a(t){const a=e.id;let r;const n=String(t);r=n.indexOf(".")>-1?a+"['"+n.replace(/'/g,"\\'")+"']":a+"."+n,this.id=r,this.key=t,this.parentId=a}return a.prototype=Object.create(e),a.prototype.constructor=a,Object(l.assignIn)(a.prototype,t),a},qa=(e,t)=>{var a;const{values:r}=null!==(a=t[e.parentId])&&void 0!==a?a:{},n=Object(l.find)(r,(({key:t})=>t===e.key));return n?n.value:NaN},Ga=e=>({makeLabel(){const{getDefaultInstance:t}=e(),a=this.getField(),r=a&&a.format||t(h.KBN_FIELD_TYPES.NUMBER),n=this.getParam("customLabel")||this.getFieldDisplayName();return c.i18n.translate("data.search.aggs.metrics.percentileRanks.valuePropsLabel",{defaultMessage:'Percentile rank {format} of "{label}"',values:{format:r.convert(this.key,"text"),label:n}})}}),Qa=({getFieldFormatsStart:e})=>new metric_agg_type_MetricAggType({name:A.PERCENTILE_RANKS,expressionName:ja,title:c.i18n.translate("data.search.aggs.metrics.percentileRanksTitle",{defaultMessage:"Percentile Ranks"}),makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.percentileRanksLabel",{defaultMessage:"Percentile ranks of {field}",values:{field:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.HISTOGRAM]},{name:"values",default:[]},{write(e,t){t.params.keyed=!1}}],getResponseAggs(t){const a=Da(t,Ga(e));return t.getParam("values").map((e=>new a(e)))},getSerializedFormat:e=>({id:"percent"}),getValue:(e,t)=>qa(e,t)/100}),Ua="aggPercentiles",za=()=>({name:Ua,help:c.i18n.translate("data.search.aggs.function.metrics.percentiles.help",{defaultMessage:"Generates a serialized agg config for a Percentiles agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentiles.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.percentiles.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentiles.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.percentiles.field.help",{defaultMessage:"Field to use for this aggregation"})},percents:{types:["number"],multi:!0,help:c.i18n.translate("data.search.aggs.metrics.percentiles.percents.help",{defaultMessage:"Range of percentiles ranks"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentiles.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.percentiles.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.PERCENTILES,params:{...i}}}}});function $a(e){return e+""+function(e){const t=Math.floor(parseFloat(e)),a=t%100;if(a>=11&&a<=13)return"th";const r=t%10;return 1===r?"st":2===r?"nd":3===r?"rd":"th"}(e)}const Ha={makeLabel(){const e=this.getParam("customLabel")||this.getFieldDisplayName();return c.i18n.translate("data.search.aggs.metrics.percentiles.valuePropsLabel",{defaultMessage:"{percentile} percentile of {label}",values:{percentile:$a(this.key),label:e}})}},Ka=()=>new metric_agg_type_MetricAggType({name:A.PERCENTILES,expressionName:Ua,title:c.i18n.translate("data.search.aggs.metrics.percentilesTitle",{defaultMessage:"Percentiles"}),valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.percentilesLabel",{defaultMessage:"Percentiles of {field}",values:{field:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[1,5,25,50,75,95,99]},{write(e,t){t.params.keyed=!1}}],getResponseAggs(e){const t=Da(e,Ha);return e.getParam("percents").map((e=>new t(e)))},getValue:qa}),Va="aggSerialDiff",Ya=()=>({name:Va,help:c.i18n.translate("data.search.aggs.function.metrics.serial_diff.help",{defaultMessage:"Generates a serialized agg config for a Serial Differencing agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.serial_diff.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.schema.help",{defaultMessage:"Schema to use for this aggregation"})},metricAgg:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.metricAgg.help",{defaultMessage:"Id for finding agg config to use for building parent pipeline aggregations"})},customMetric:{types:["agg_type"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.customMetric.help",{defaultMessage:"Agg config to use for building parent pipeline aggregations"})},buckets_path:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.buckets_path.help",{defaultMessage:"Path to the metric of interest"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.serial_diff.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{var a;const{id:r,enabled:n,schema:i,...s}=t;return{type:"agg_type",value:{id:r,enabled:n,schema:i,type:A.SERIAL_DIFF,params:{...s,customMetric:null===(a=t.customMetric)||void 0===a?void 0:a.value}}}}}),Wa=c.i18n.translate("data.search.aggs.metrics.serialDiffTitle",{defaultMessage:"Serial Diff"}),Ja=c.i18n.translate("data.search.aggs.metrics.serialDiffLabel",{defaultMessage:"serial diff"}),Xa=()=>{const{subtype:e,params:t,getSerializedFormat:a}=Wt;return new metric_agg_type_MetricAggType({name:A.SERIAL_DIFF,expressionName:Va,title:Wa,makeLabel:e=>ut(e,Ja),subtype:e,params:[...t()],getSerializedFormat:a})},Za="aggStdDeviation",er=()=>({name:Za,help:c.i18n.translate("data.search.aggs.function.metrics.std_deviation.help",{defaultMessage:"Generates a serialized agg config for a Standard Deviation agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.std_deviation.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.std_deviation.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.std_deviation.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.std_deviation.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.std_deviation.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.std_deviation.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.STD_DEV,params:{...i}}}}}),tr={valProp(){const e=this.getParam("customLabel");return this.keyedDetails(e)[this.key].valProp},makeLabel(){const e=this.getFieldDisplayName(),t=this.getParam("customLabel"),a=this.keyedDetails(t,e);return Object(l.get)(a,[this.key,"title"])},keyedDetails(e,t){const a=e||c.i18n.translate("data.search.aggs.metrics.standardDeviation.keyDetailsLabel",{defaultMessage:"Standard Deviation of {fieldDisplayName}",values:{fieldDisplayName:t}});return{std_lower:{valProp:["std_deviation_bounds","lower"],title:c.i18n.translate("data.search.aggs.metrics.standardDeviation.lowerKeyDetailsTitle",{defaultMessage:"Lower {label}",values:{label:a}})},std_upper:{valProp:["std_deviation_bounds","upper"],title:c.i18n.translate("data.search.aggs.metrics.standardDeviation.upperKeyDetailsTitle",{defaultMessage:"Upper {label}",values:{label:a}})}}}},ar=()=>new metric_agg_type_MetricAggType({name:A.STD_DEV,expressionName:Za,dslName:"extended_stats",title:c.i18n.translate("data.search.aggs.metrics.standardDeviationTitle",{defaultMessage:"Standard Deviation"}),makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.standardDeviationLabel",{defaultMessage:"Standard Deviation of {field}",values:{field:e.getFieldDisplayName()}}),params:[{name:"field",type:"field",filterFieldTypes:h.KBN_FIELD_TYPES.NUMBER}],getResponseAggs(e){const t=Da(e,tr);return[new t("std_lower"),new t("std_upper")]},getValue:(e,t)=>Object(l.get)(t[e.parentId],e.valProp())}),rr="aggSum",nr=()=>({name:rr,help:c.i18n.translate("data.search.aggs.function.metrics.sum.help",{defaultMessage:"Generates a serialized agg config for a Sum agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.sum.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.sum.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.sum.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.sum.field.help",{defaultMessage:"Field to use for this aggregation"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.sum.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.sum.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.SUM,params:{...i}}}}}),ir=c.i18n.translate("data.search.aggs.metrics.sumTitle",{defaultMessage:"Sum"}),sr=()=>new metric_agg_type_MetricAggType({name:A.SUM,expressionName:rr,title:ir,valueType:"number",makeLabel:e=>c.i18n.translate("data.search.aggs.metrics.sumLabel",{defaultMessage:"Sum of {field}",values:{field:e.getFieldDisplayName()}}),isScalable:()=>!0,params:[{name:"field",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.HISTOGRAM]}]}),or="aggTopHit",lr=()=>({name:or,help:c.i18n.translate("data.search.aggs.function.metrics.top_hit.help",{defaultMessage:"Generates a serialized agg config for a Top Hit agg"}),type:"agg_type",args:{id:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:c.i18n.translate("data.search.aggs.metrics.top_hit.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.schema.help",{defaultMessage:"Schema to use for this aggregation"})},field:{types:["string"],required:!0,help:c.i18n.translate("data.search.aggs.metrics.top_hit.field.help",{defaultMessage:"Field to use for this aggregation"})},aggregate:{types:["string"],required:!0,options:["min","max","sum","average","concat"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.aggregate.help",{defaultMessage:"Aggregate type"})},size:{types:["number"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.size.help",{defaultMessage:"Max number of buckets to retrieve"})},sortOrder:{types:["string"],options:["desc","asc"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.sortOrder.help",{defaultMessage:"Order in which to return the results: asc or desc"})},sortField:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.sortField.help",{defaultMessage:"Field to order results by"})},json:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.top_hit.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})},timeShift:{types:["string"],help:c.i18n.translate("data.search.aggs.metrics.timeShift.help",{defaultMessage:'Shift the time range for the metric by a set time, for example 1h or 7d. "previous" will use the closest time range from the date histogram or time range filter.'})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:A.TOP_HITS,params:{...i}}}}}),ur=e=>{const t=e.getParam("field");return t&&t.type&&t.type===h.KBN_FIELD_TYPES.NUMBER},cr=()=>new metric_agg_type_MetricAggType({name:A.TOP_HITS,expressionName:or,title:c.i18n.translate("data.search.aggs.metrics.topHitTitle",{defaultMessage:"Top Hit"}),makeLabel(e){const t=c.i18n.translate("data.search.aggs.metrics.topHit.lastPrefixLabel",{defaultMessage:"Last"}),a=c.i18n.translate("data.search.aggs.metrics.topHit.firstPrefixLabel",{defaultMessage:"First"});let r="desc"===e.getParam("sortOrder").value?t:a;const n=e.getParam("size");1!==n&&(r+=` ${n}`);const i=e.getParam("field");return`${r} ${i?i.displayName:""}`},params:[{name:"field",type:"field",onlyAggregatable:!1,filterFieldTypes:Object.values(h.KBN_FIELD_TYPES).filter((e=>e!==h.KBN_FIELD_TYPES.HISTOGRAM)),write(e,t){const a=e.getParam("field");t.params={},a.scripted?t.params.script_fields={[a.name]:{script:{source:a.script,lang:a.lang}}}:("_source"!==a.name&&(t.params.fields=[{field:a.name,...a.type===h.KBN_FIELD_TYPES.DATE&&{format:"date_time"}}]),t.params._source="_source"===a.name)}},{name:"aggregate",type:"optioned",options:[{text:c.i18n.translate("data.search.aggs.metrics.topHit.minLabel",{defaultMessage:"Min"}),isCompatible:ur,disabled:!0,value:"min"},{text:c.i18n.translate("data.search.aggs.metrics.topHit.maxLabel",{defaultMessage:"Max"}),isCompatible:ur,disabled:!0,value:"max"},{text:c.i18n.translate("data.search.aggs.metrics.topHit.sumLabel",{defaultMessage:"Sum"}),isCompatible:ur,disabled:!0,value:"sum"},{text:c.i18n.translate("data.search.aggs.metrics.topHit.averageLabel",{defaultMessage:"Average"}),isCompatible:ur,disabled:!0,value:"average"},{text:c.i18n.translate("data.search.aggs.metrics.topHit.concatenateLabel",{defaultMessage:"Concatenate"}),isCompatible:e=>"*"===u.a.get(e.params,"field.filterFieldTypes","*"),disabled:!0,value:"concat"}],write:u.a.noop},{name:"size",default:1},{name:"sortField",type:"field",filterFieldTypes:[h.KBN_FIELD_TYPES.NUMBER,h.KBN_FIELD_TYPES.DATE,h.KBN_FIELD_TYPES.IP,h.KBN_FIELD_TYPES.STRING],default:e=>e.getIndexPattern().timeFieldName,write:u.a.noop},{name:"sortOrder",type:"optioned",default:"desc",options:[{text:c.i18n.translate("data.search.aggs.metrics.topHit.descendingLabel",{defaultMessage:"Descending"}),value:"desc"},{text:c.i18n.translate("data.search.aggs.metrics.topHit.ascendingLabel",{defaultMessage:"Ascending"}),value:"asc"}],write(e,t){const a=e.params.sortField,r=e.params.sortOrder;a.scripted?t.params.sort=[{_script:{script:{source:a.script,lang:a.lang},type:a.type,order:r.value}}]:t.params.sort=[{[a.name]:{order:r.value}}]}}],getValue(e,t){const a=u.a.get(t,`${e.id}.hits.hits`);if(!a||!a.length)return null;const r=e.getParam("field").name;let n=u.a.flatten(a.map((t=>"_source"===r?t._source:e.getIndexPattern().flattenHit(t,!0)[r])));if(1===n.length&&(n=n[0]),Array.isArray(n)){if(!u.a.compact(n).length)return null;switch(e.getParam("aggregate").value){case"max":return u.a.max(n);case"min":return u.a.min(n);case"sum":return u.a.sum(n);case"average":return u.a.sum(n)/n.length}}return n}}),dr=()=>({metrics:[{name:A.COUNT,fn:zt},{name:A.AVG,fn:st},{name:A.SUM,fn:sr},{name:A.MEDIAN,fn:ka},{name:A.SINGLE_PERCENTILE,fn:Ia},{name:A.MIN,fn:Ma},{name:A.MAX,fn:ya},{name:A.STD_DEV,fn:ar},{name:A.CARDINALITY,fn:Gt},{name:A.PERCENTILES,fn:Ka},{name:A.PERCENTILE_RANKS,fn:Qa},{name:A.TOP_HITS,fn:cr},{name:A.DERIVATIVE,fn:na},{name:A.CUMULATIVE_SUM,fn:Zt},{name:A.MOVING_FN,fn:Ca},{name:A.SERIAL_DIFF,fn:Xa},{name:A.AVG_BUCKET,fn:bt},{name:A.SUM_BUCKET,fn:Rt},{name:A.MIN_BUCKET,fn:wt},{name:A.MAX_BUCKET,fn:kt},{name:A.FILTERED_METRIC,fn:Lt},{name:A.GEO_BOUNDS,fn:ua},{name:A.GEO_CENTROID,fn:ha}],buckets:[{name:v.a.DATE_HISTOGRAM,fn:G},{name:v.a.HISTOGRAM,fn:_e},{name:v.a.RANGE,fn:Qe},{name:v.a.DATE_RANGE,fn:K},{name:v.a.IP_RANGE,fn:Fe},{name:v.a.TERMS,fn:at},{name:v.a.FILTER,fn:X},{name:v.a.FILTERS,fn:re},{name:v.a.SIGNIFICANT_TERMS,fn:Ke},{name:v.a.GEOHASH_GRID,fn:le},{name:v.a.GEOTILE_GRID,fn:ge}]}),gr=()=>[Y,ee,ze,ke,U,De,ce,ie,he,k,Ye,nt,lt,_t,Et,At,Pt,Bt,Ut,Ht,ta,sa,da,ma,va,Ea,Fa,Ra,La,za,Ya,er,nr,lr];class agg_types_registry_AggTypesRegistry{constructor(){i()(this,"bucketAggs",new Map),i()(this,"metricAggs",new Map),i()(this,"setup",(()=>({registerBucket:(e,t)=>{if(this.bucketAggs.get(e)||this.metricAggs.get(e))throw new Error(`Agg has already been registered with name: ${e}`);this.bucketAggs.set(e,t)},registerMetric:(e,t)=>{if(this.bucketAggs.get(e)||this.metricAggs.get(e))throw new Error(`Agg has already been registered with name: ${e}`);this.metricAggs.set(e,t)}}))),i()(this,"start",(()=>({get:e=>this.bucketAggs.get(e)||this.metricAggs.get(e),getAll:()=>({buckets:Array.from(this.bucketAggs.values()),metrics:Array.from(this.metricAggs.values())})})))}}const pr=e=>{const{getIndexPattern:t,createAggConfigs:a,aggTypesStart:r}=e,n=async e=>{if(e.meta.index)return await t(e.meta.index)};return{getIndexPattern:n,getAggConfig:async e=>{const t=await n(e);if(!t)return;return(await a(t,[e.meta.sourceParams])).aggs[0]},isFilterable:e=>{var t;if("esaggs"!==e.meta.source)return!1;const a=r.get(null===(t=e.meta.sourceParams)||void 0===t?void 0:t.type)({});return Boolean(a.createFilter)}}},hr=["dateFormat","dateFormat:scaled","dateFormat:tz",h.UI_SETTINGS.HISTOGRAM_BAR_TARGET,h.UI_SETTINGS.HISTOGRAM_MAX_BARS,h.UI_SETTINGS.SEARCH_QUERY_LANGUAGE,h.UI_SETTINGS.QUERY_ALLOW_LEADING_WILDCARDS,h.UI_SETTINGS.QUERY_STRING_OPTIONS,h.UI_SETTINGS.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX];class aggs_service_AggsCommonService{constructor(){i()(this,"aggTypesRegistry",new agg_types_registry_AggTypesRegistry)}setup({registerFunction:e}){const t=this.aggTypesRegistry.setup(),a=dr();a.buckets.forEach((({name:e,fn:a})=>t.registerBucket(e,a))),a.metrics.forEach((({name:e,fn:a})=>t.registerMetric(e,a)));return gr().forEach((t=>e(t))),{types:t}}start({getConfig:e,getIndexPattern:t,isDefaultTimezone:a}){const r=this.aggTypesRegistry.start(),n=(e,t)=>new agg_configs_AggConfigs(e,t,{typesRegistry:r});return{calculateAutoTimeExpression:Object(D.f)(e),datatableUtilities:pr({getIndexPattern:t,createAggConfigs:n,aggTypesStart:r}),createAggConfigs:n,types:r}}}},function(e,t,a){"use strict";a.r(t),a.d(t,"esFilters",(function(){return c})),a.d(t,"isFilter",(function(){return r.isFilter})),a.d(t,"isFilters",(function(){return r.isFilters})),a.d(t,"esKuery",(function(){return d})),a.d(t,"esQuery",(function(){return g})),a.d(t,"getEsQueryConfig",(function(){return r.getEsQueryConfig})),a.d(t,"FilterLabel",(function(){return n.b})),a.d(t,"FilterItem",(function(){return n.a})),a.d(t,"getDisplayValueFromFilter",(function(){return i.m})),a.d(t,"generateFilters",(function(){return i.k})),a.d(t,"extractTimeRange",(function(){return i.i})),a.d(t,"exporters",(function(){return ze})),a.d(t,"indexPatterns",(function(){return $e})),a.d(t,"IndexPattern",(function(){return p.IndexPattern})),a.d(t,"IndexPatternField",(function(){return p.IndexPatternField})),a.d(t,"ES_FIELD_TYPES",(function(){return r.ES_FIELD_TYPES})),a.d(t,"KBN_FIELD_TYPES",(function(){return r.KBN_FIELD_TYPES})),a.d(t,"UI_SETTINGS",(function(){return r.UI_SETTINGS})),a.d(t,"fieldList",(function(){return r.fieldList})),a.d(t,"IndexPatternType",(function(){return r.IndexPatternType})),a.d(t,"DuplicateDataViewError",(function(){return r.DuplicateDataViewError})),a.d(t,"QuerySuggestionTypes",(function(){return h.b})),a.d(t,"AggGroupLabels",(function(){return r.AggGroupLabels})),a.d(t,"AggGroupNames",(function(){return r.AggGroupNames})),a.d(t,"METRIC_TYPES",(function(){return r.METRIC_TYPES})),a.d(t,"BUCKET_TYPES",(function(){return r.BUCKET_TYPES})),a.d(t,"parseSearchSourceJSON",(function(){return k.Xd})),a.d(t,"injectSearchSourceReferences",(function(){return k.td})),a.d(t,"extractSearchSourceReferences",(function(){return k.nc})),a.d(t,"getSearchParamsFromRequest",(function(){return k.jd})),a.d(t,"noSearchSessionStorageCapabilityMessage",(function(){return D})),a.d(t,"SEARCH_SESSIONS_MANAGEMENT_ID",(function(){return P})),a.d(t,"waitUntilNextSessionCompletes$",(function(){return B})),a.d(t,"isEsError",(function(){return Z})),a.d(t,"SearchSessionState",(function(){return O})),a.d(t,"SortDirection",(function(){return k.E})),a.d(t,"handleResponse",(function(){return V})),a.d(t,"isErrorResponse",(function(){return r.isErrorResponse})),a.d(t,"isCompleteResponse",(function(){return r.isCompleteResponse})),a.d(t,"isPartialResponse",(function(){return r.isPartialResponse})),a.d(t,"search",(function(){return He})),a.d(t,"QueryStringInput",(function(){return n.c})),a.d(t,"SearchBar",(function(){return n.d})),a.d(t,"createSavedQueryService",(function(){return i.g})),a.d(t,"connectToQueryState",(function(){return i.e})),a.d(t,"syncQueryStateWithUrl",(function(){return i.r})),a.d(t,"getDefaultQuery",(function(){return i.l})),a.d(t,"FilterManager",(function(){return i.a})),a.d(t,"TimeHistory",(function(){return i.c})),a.d(t,"getTime",(function(){return r.getTime})),a.d(t,"castEsToKbnFieldTypeName",(function(){return r.castEsToKbnFieldTypeName})),a.d(t,"getKbnTypeNames",(function(){return r.getKbnTypeNames})),a.d(t,"isTimeRange",(function(){return r.isTimeRange})),a.d(t,"isQuery",(function(){return r.isQuery})),a.d(t,"ACTION_GLOBAL_APPLY_FILTER",(function(){return le})),a.d(t,"APPLY_FILTER_TRIGGER",(function(){return he})),a.d(t,"plugin",(function(){return Ke}));var r=a(2),n=a(32),i=a(20);const s=i.d,o=i.p,l=i.h,u=i.f,c={FilterLabel:n.b,FilterItem:n.a,FILTERS:r.FILTERS,FilterStateStore:r.FilterStateStore,buildEmptyFilter:r.buildEmptyFilter,buildPhrasesFilter:r.buildPhrasesFilter,buildExistsFilter:r.buildExistsFilter,buildPhraseFilter:r.buildPhraseFilter,buildQueryFilter:r.buildQueryFilter,buildRangeFilter:r.buildRangeFilter,isPhraseFilter:r.isPhraseFilter,isExistsFilter:r.isExistsFilter,isPhrasesFilter:r.isPhrasesFilter,isRangeFilter:r.isRangeFilter,isMatchAllFilter:r.isMatchAllFilter,isQueryStringFilter:r.isQueryStringFilter,isFilterPinned:r.isFilterPinned,toggleFilterNegated:r.toggleFilterNegated,disableFilter:r.disableFilter,getPhraseFilterField:r.getPhraseFilterField,getPhraseFilterValue:r.getPhraseFilterValue,getDisplayValueFromFilter:i.m,compareFilters:r.compareFilters,COMPARE_ALL_OPTIONS:r.COMPARE_ALL_OPTIONS,generateFilters:i.k,onlyDisabledFiltersChanged:r.onlyDisabledFiltersChanged,changeTimeFilter:s,convertRangeFilterToTimeRangeString:u,mapAndFlattenFilters:o,extractTimeFilter:l,extractTimeRange:i.i},d={nodeTypes:r.nodeTypes,fromKueryExpression:r.fromKueryExpression,toElasticsearchQuery:r.toElasticsearchQuery},g={buildEsQuery:r.buildEsQuery,getEsQueryConfig:r.getEsQueryConfig,buildQueryFromFilters:r.buildQueryFromFilters,luceneStringToDsl:r.luceneStringToDsl,decorateQuery:r.decorateQuery};var p=a(35),h=a(55),f=a(1),m=a.n(f),b=a(8),y=a(7),_=a(15);function v({getStartServices:e}){return function({getStartDependencies:e}){return()=>({...Object(_.p)(),fn:(t,a,{inspectorAdapters:r,abortSignal:n,getSearchSessionId:i,getExecutionContext:s})=>Object(b.defer)((async()=>{var t,r;const{aggs:n,indexPatterns:i,searchSource:s,getNow:o}=await e(),l=await i.create(a.index.value,!0),u=n.createAggConfigs(l,null!==(t=null===(r=a.aggs)||void 0===r?void 0:r.map((e=>e.value)))&&void 0!==t?t:[]);return u.hierarchical=a.metricsAtAllLevels,{aggConfigs:u,indexPattern:l,searchSource:s,getNow:o}})).pipe(Object(y.switchMap)((({aggConfigs:e,indexPattern:o,searchSource:l,getNow:u})=>Object(_.s)({abortSignal:n,aggs:e,filters:Object(f.get)(t,"filters",void 0),indexPattern:o,inspectorAdapters:r,partialRows:a.partialRows,query:Object(f.get)(t,"query",void 0),searchSessionId:i(),searchSourceService:l,timeFields:a.timeFields,timeRange:Object(f.get)(t,"timeRange",void 0),getNow:u,executionContext:s()}))))})}({getStartDependencies:async()=>{const[,,t]=await e(),{indexPatterns:a,search:r,nowProvider:n}=t;return{aggs:r.aggs,indexPatterns:a,searchSource:r.searchSource,getNow:()=>n.get()}}})}var S=a(63);var k=a(11),x=a(3),E=a.n(x),T=a(0),I=a(66),w=a.n(I),F=a(82),A=a.n(F),M=a(24);let O;!function(e){e.None="none",e.Loading="loading",e.Completed="completed",e.BackgroundLoading="backgroundLoading",e.BackgroundCompleted="backgroundCompleted",e.Restored="restored",e.Canceled="canceled"}(O||(O={}));const R={start:e=>({appName:e})=>({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[],sessionId:w.a.v4(),startTime:new Date,appName:e}),restore:e=>e=>({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[],sessionId:e,isRestore:!0,isStored:!0}),clear:e=>()=>({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[]}),store:e=>t=>{if(!e.sessionId)throw new Error("Can't store session. Missing sessionId");if(e.isStored||e.isRestore)throw new Error("Can't store because current session is already stored\"");return{...e,isStored:!0,searchSessionSavedObject:t}},trackSearch:e=>t=>{if(!e.sessionId)throw new Error("Can't track search. Missing sessionId");return{...e,isStarted:!0,pendingSearches:e.pendingSearches.concat(t),completedTime:void 0}},unTrackSearch:e=>t=>{const a=e.pendingSearches.filter((e=>e!==t));return{...e,pendingSearches:a,completedTime:0===a.length?new Date:e.completedTime}},cancel:e=>()=>{if(!e.sessionId)throw new Error("Can't cancel searches. Missing sessionId");if(e.isRestore)throw new Error("Can't cancel searches when restoring older searches");return{...e,pendingSearches:[],isCanceled:!0,canceledTime:new Date,isStored:!1,searchSessionSavedObject:void 0}},setSearchSessionSavedObject:e=>t=>{if(!e.sessionId)throw new Error("Can't add search session saved object session into the state. Missing sessionId");if(e.sessionId!==t.attributes.sessionId)throw new Error("Can't add search session saved object session into the state. SessionIds don't match.");return{...e,searchSessionSavedObject:t}}},N={getState:e=>()=>{if(!e.sessionId)return O.None;if(!e.isStarted)return O.None;if(e.isCanceled)return O.Canceled;switch(!0){case e.isRestore:return e.pendingSearches.length>0?O.BackgroundLoading:O.Restored;case e.isStored:return e.pendingSearches.length>0?O.BackgroundLoading:O.BackgroundCompleted;default:return e.pendingSearches.length>0?O.Loading:O.Completed}return O.None},getMeta(e){const t=this.getState(e)();return()=>{var a,r,n,i,s;return{state:t,name:null===(a=e.searchSessionSavedObject)||void 0===a?void 0:a.attributes.name,startTime:null!==(r=e.searchSessionSavedObject)&&void 0!==r&&r.attributes.created?new Date(null===(n=e.searchSessionSavedObject)||void 0===n?void 0:n.attributes.created):e.startTime,completedTime:null!==(i=e.searchSessionSavedObject)&&void 0!==i&&i.attributes.completed?new Date(null===(s=e.searchSessionSavedObject)||void 0===s?void 0:s.attributes.completed):e.completedTime,canceledTime:e.canceledTime}}}},P="search_sessions";var C=a(6),j=a.n(C);function L(e,t){return t.sessionStartTime&&t.appendStartTime&&(e=function(e,t){return`${e} - ${j()(t).format("L @ LT")}`}(e,t.sessionStartTime)),e}class session_service_SessionService{constructor(e,t,a,r,{freezeState:n=!0}={freezeState:!0}){E()(this,"state$",void 0),E()(this,"state",void 0),E()(this,"sessionMeta$",void 0),E()(this,"searchSessionInfoProvider",void 0),E()(this,"searchSessionIndicatorUiConfig",void 0),E()(this,"subscription",new b.Subscription),E()(this,"currentApp",void 0),E()(this,"hasAccessToSearchSessions",!1),E()(this,"toastService",void 0),E()(this,"lastSessionSnapshot",void 0),this.sessionsClient=a,this.nowProvider=r;const{stateContainer:i,sessionState$:s,sessionMeta$:o}=(({freeze:e=!0}={freeze:!0})=>{const t=Object(M.createStateContainer)({sessionId:void 0,appName:void 0,isStored:!1,isRestore:!1,isCanceled:!1,isStarted:!1,pendingSearches:[]},R,N,e?void 0:{freeze:e=>e}),a=t.state$.pipe(Object(y.map)((()=>t.selectors.getMeta())),Object(y.distinctUntilChanged)(A.a),Object(y.shareReplay)(1)),r=a.pipe(Object(y.map)((e=>e.state)),Object(y.distinctUntilChanged)());return{stateContainer:t,sessionState$:r,sessionMeta$:a}})({freeze:n});this.state$=s,this.state=i,this.sessionMeta$=o,this.subscription.add(o.pipe(Object(y.map)((e=>e.startTime)),Object(y.distinctUntilChanged)()).subscribe((e=>{e?this.nowProvider.set(e):this.nowProvider.reset()}))),t().then((([t])=>{var a,r;this.hasAccessToSearchSessions=null===(a=t.application.capabilities.management)||void 0===a||null===(r=a.kibana)||void 0===r?void 0:r[P],this.toastService=t.notifications.toasts,this.subscription.add(t.application.currentAppId$.subscribe((a=>{if(this.currentApp=a,!this.getSessionId())return;const r=`Application '${this.state.get().appName}' had an open session while navigating`;e.env.mode.dev?t.fatalErrors.add(r):console.warn(r)})))}))}hasAccess(){return this.hasAccessToSearchSessions}trackSearch(e){return this.state.transitions.trackSearch(e),()=>{this.state.transitions.unTrackSearch(e)}}destroy(){this.subscription.unsubscribe(),this.clear(),this.lastSessionSnapshot=void 0}getSessionId(){return this.state.get().sessionId}getSession$(){return this.state.state$.pipe(Object(y.startWith)(this.state.get()),Object(y.map)((e=>e.sessionId)),Object(y.distinctUntilChanged)())}isStored(){return this.state.get().isStored}isRestore(){return this.state.get().isRestore}start(){if(!this.currentApp)throw new Error("this.currentApp is missing");return this.state.transitions.start({appName:this.currentApp}),this.getSessionId()}restore(e){this.state.transitions.restore(e),this.refreshSearchSessionSavedObject()}continue(e){var t,a;(null===(t=this.lastSessionSnapshot)||void 0===t?void 0:t.sessionId)===e?(this.state.set({...this.lastSessionSnapshot,appName:this.currentApp,pendingSearches:[]}),this.lastSessionSnapshot=void 0):console.warn(`Continue search session: last known search session id: "${null===(a=this.lastSessionSnapshot)||void 0===a?void 0:a.sessionId}", but received ${e}`)}clear(){const e=this.state.get().appName;e&&e!==this.currentApp?console.warn(`Skip clearing session "${this.getSessionId()}" because it belongs to a different app. current: "${this.currentApp}", owner: "${e}"`):(this.getSessionId()&&(this.lastSessionSnapshot=this.state.get()),this.state.transitions.clear(),this.searchSessionInfoProvider=void 0,this.searchSessionIndicatorUiConfig=void 0)}async cancel(){const e=this.state.get().isStored;this.state.get().pendingSearches.forEach((e=>{e.abort()})),this.state.transitions.cancel(),e&&await this.sessionsClient.delete(this.state.get().sessionId)}async save(){const e=this.getSessionId();if(!e)throw new Error("No current session");const t=this.state.get().appName;if(!t)throw new Error("No current session app");if(!this.hasAccess())throw new Error("No access to search sessions");const a=this.searchSessionInfoProvider;if(!a)throw new Error("No info provider for current session");const[r,{initialState:n,restoreState:i,urlGeneratorId:s}]=await Promise.all([a.getName(),a.getUrlGeneratorData()]),o=L(r,{sessionStartTime:this.state.get().startTime,appendStartTime:a.appendSessionStartTimeToName}),l=await this.sessionsClient.create({name:o,appId:t,restoreState:i,initialState:n,urlGeneratorId:s,sessionId:e});this.getSessionId()===e&&this.state.transitions.store(l)}async renameCurrentSession(e){const t=this.getSessionId();if(t&&this.state.get().isStored){let r=!1;try{await this.sessionsClient.rename(t,e),r=!0}catch(e){var a;null===(a=this.toastService)||void 0===a||a.addError(e,{title:T.i18n.translate("data.searchSessions.sessionService.sessionEditNameError",{defaultMessage:"Failed to edit name of the search session"})})}r&&t===this.getSessionId()&&await this.refreshSearchSessionSavedObject()}}isCurrentSession(e){return!!e&&this.getSessionId()===e}getSearchOptions(e){if(!e)return null;if(!this.hasAccessToSearchSessions)return null;const t=this.isCurrentSession(e);return{sessionId:e,isRestore:!!t&&this.isRestore(),isStored:!!t&&this.isStored()}}enableStorage(e,t){this.searchSessionInfoProvider={appendSessionStartTimeToName:!0,...e},this.searchSessionIndicatorUiConfig=t}isSessionStorageReady(){return!!this.searchSessionInfoProvider}getSearchSessionIndicatorUiConfig(){return{isDisabled:()=>({disabled:!1}),...this.searchSessionIndicatorUiConfig}}async refreshSearchSessionSavedObject(){const e=this.getSessionId();if(e&&this.state.get().isStored)try{const t=await this.sessionsClient.get(e);this.getSessionId()===e&&this.state.transitions.setSearchSessionSavedObject(t)}catch(e){var t;null===(t=this.toastService)||void 0===t||t.addError(e,{title:T.i18n.translate("data.searchSessions.sessionService.sessionObjectFetchError",{defaultMessage:"Failed to fetch search session info"})})}}}class sessions_client_SessionsClient{constructor(e){E()(this,"http",void 0),this.http=e.http}get(e){return this.http.get(`/internal/session/${encodeURIComponent(e)}`)}create({name:e,appId:t,urlGeneratorId:a,initialState:r,restoreState:n,sessionId:i}){return this.http.post("/internal/session",{body:JSON.stringify({name:e,initialState:r,restoreState:n,sessionId:i,appId:t,urlGeneratorId:a})})}find(e){return this.http.post("/internal/session/_find",{body:JSON.stringify(e)})}update(e,t){return this.http.put(`/internal/session/${encodeURIComponent(e)}`,{body:JSON.stringify(t)})}rename(e,t){return this.update(e,{name:t})}extend(e,t){return this.http.post(`/internal/session/${encodeURIComponent(e)}/_extend`,{body:JSON.stringify({expires:t})})}delete(e){return this.http.delete(`/internal/session/${encodeURIComponent(e)}`)}}const D=T.i18n.translate("data.searchSessionIndicator.noCapability",{defaultMessage:"You don't have permissions to create search sessions."});function B(e,{waitForIdle:t=1e3}={waitForIdle:1e3}){return e.state$.pipe(Object(y.skipUntil)(e.state$.pipe(Object(y.first)((e=>e===O.None)))),Object(y.skipUntil)(e.state$.pipe(Object(y.first)((e=>e===O.Loading)))),Object(y.debounceTime)(t),Object(y.first)((e=>e===O.Completed||e===O.BackgroundCompleted)))}Date.now();var q=a(4),G=a.n(q),Q=a(13);const U=()=>G.a.createElement("div",null),z=G.a.lazy((()=>a.e(8).then(a.bind(null,124)))),$=e=>G.a.createElement(G.a.Suspense,{fallback:G.a.createElement(U,null)},G.a.createElement(z,e));var H=a(28),K=a(22);function V(e,t){const{rawResponse:a}=t;if(a.timed_out&&Object(K.b)().toasts.addWarning({title:T.i18n.translate("data.search.searchSource.fetch.requestTimedOutNotificationMessage",{defaultMessage:"Data might be incomplete because your request timed out"})}),a._shards&&a._shards.failed){const t=T.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationMessage",{defaultMessage:"{shardsFailed} of {shardsTotal} shards failed",values:{shardsFailed:a._shards.failed,shardsTotal:a._shards.total}}),r=T.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationDescription",{defaultMessage:"The data you are seeing might be incomplete or wrong."}),n=Object(H.toMountPoint)(G.a.createElement(G.a.Fragment,null,r,G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement($,{request:e.body,response:a,title:t})));Object(K.b)().toasts.addWarning({title:t,text:n})}return t}var Y=a(26);function W(e){const t=e.attributes||e,{type:a,reason:r,caused_by:n}=t;return n?W(n):{type:a,reason:r}}function J(e){var t;return(null===(t=function(e){var t;const a=e.attributes,r=(null==a?void 0:a.failed_shards)||(null==a||null===(t=a.caused_by)||void 0===t?void 0:t.failed_shards);return r?r[0]:void 0}(e))||void 0===t?void 0:t.reason)||W(e)}class es_error_EsError extends Y.KbnError{constructor(e){var t;super(`EsError: ${(null===(t=J(e))||void 0===t?void 0:t.reason)||T.i18n.translate("data.esError.unknownRootCause",{defaultMessage:"unknown"})}`),E()(this,"attributes",void 0),this.err=e,this.attributes=e.attributes}getErrorMessage(e){var t,a;const r=null===(t=J(this.err))||void 0===t?void 0:t.reason,n=null===(a=this.attributes)||void 0===a?void 0:a.reason,i=null!=r?r:n;return G.a.createElement(G.a.Fragment,null,G.a.createElement(Q.EuiSpacer,{size:"s"}),i?G.a.createElement(Q.EuiCodeBlock,{"data-test-subj":"errMessage",isCopyable:!0,paddingSize:"s"},i):null)}}var X=a(16);function Z(e){return!!e.attributes}class painless_error_PainlessError extends es_error_EsError{constructor(e,t){super(e),E()(this,"painlessStack",void 0),E()(this,"indexPattern",void 0),this.indexPattern=t}getErrorMessage(e){var t,a,r,n,i,s;const o=J(this.err),l=null!=o&&o.script_stack?null==o||null===(t=o.script_stack)||void 0===t?void 0:t.slice(-2).join("\n"):void 0,u=(null==o||null===(a=o.script_stack)||void 0===a||null===(r=a.slice(-1)[0])||void 0===r?void 0:r.indexOf("HERE"))||!1,c=null==o||null===(n=o.caused_by)||void 0===n?void 0:n.reason,d=null!=o&&o.script_stack?null==o?void 0:o.script_stack.join("\n"):void 0,g=null==this||null===(i=this.indexPattern)||void 0===i?void 0:i.id;return G.a.createElement(G.a.Fragment,null,G.a.createElement(Q.EuiText,{size:"s","data-test-subj":"painlessScript"},T.i18n.translate("data.painlessError.painlessScriptedFieldErrorMessage",{defaultMessage:"Error executing runtime field or scripted field on index pattern {indexPatternName}",values:{indexPatternName:null==this||null===(s=this.indexPattern)||void 0===s?void 0:s.title}})),G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement(Q.EuiSpacer,{size:"s"}),l||d?G.a.createElement(Q.EuiCodeBlock,{"data-test-subj":"painlessStackTrace",isCopyable:!0,paddingSize:"s"},u?l:d):null,c?G.a.createElement(Q.EuiText,{"data-test-subj":"painlessHumanReadableError"},c):null,G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement(Q.EuiText,{textAlign:"right"},G.a.createElement(Q.EuiButton,{color:"danger",onClick:()=>function(t){e.navigateToApp("management",{path:"/kibana/indexPatterns"+(t?`/patterns/${t}`:"")})}(g),size:"s"},G.a.createElement(X.FormattedMessage,{id:"data.painlessError.buttonTxt",defaultMessage:"Edit script"}))))}}let ee;!function(e){e[e.CONTACT=0]="CONTACT",e[e.CHANGE=1]="CHANGE"}(ee||(ee={}));class timeout_error_SearchTimeoutError extends Y.KbnError{constructor(e,t){super(`Request timeout: ${JSON.stringify(null==e?void 0:e.message)}`),E()(this,"mode",void 0),this.mode=t}getMessage(){switch(this.mode){case ee.CONTACT:return T.i18n.translate("data.search.timeoutContactAdmin",{defaultMessage:"Your query has timed out. Contact your system administrator to increase the run time."});case ee.CHANGE:return T.i18n.translate("data.search.timeoutIncreaseSetting",{defaultMessage:"Your query has timed out. Increase run time with the search timeout advanced setting."})}}getActionText(){if(this.mode===ee.CHANGE)return T.i18n.translate("data.search.timeoutIncreaseSettingActionText",{defaultMessage:"Edit setting"})}onClick(e){if(this.mode===ee.CHANGE)e.navigateToApp("management",{path:"/kibana/settings"})}getErrorMessage(e){const t=this.getActionText();return G.a.createElement(G.a.Fragment,null,this.getMessage(),t&&G.a.createElement(G.a.Fragment,null,G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement(Q.EuiText,{textAlign:"right"},G.a.createElement(Q.EuiButton,{color:"danger",onClick:()=>this.onClick(e),size:"s","data-test-subj":"searchTimeoutError"},t))))}}class search_response_cache_SearchResponseCache{constructor(e,t){E()(this,"responseCache",void 0),E()(this,"cacheSize",0),this.maxItems=e,this.maxCacheSizeMB=t,this.responseCache=new Map}byteToMb(e){return e/1048576}deleteItem(e,t=!0){const a=this.responseCache.get(e);a&&(t&&a.subs.unsubscribe(),this.cacheSize-=a.size,this.responseCache.delete(e))}setItem(e,t){this.deleteItem(e,!1),this.cacheSize+=t.size,this.responseCache.set(e,t)}clear(){this.cacheSize=0,this.responseCache.forEach((e=>{e.subs.unsubscribe()})),this.responseCache.clear()}shrink(){for(;this.responseCache.size>this.maxItems||this.byteToMb(this.cacheSize)>this.maxCacheSizeMB;){const[e]=[...this.responseCache.keys()];this.deleteItem(e)}}has(e){return this.responseCache.has(e)}set(e,t){if(this.responseCache.has(e))throw new Error("duplicate key");const{response$:a,searchAbortController:n}=t,i={response$:a,searchAbortController:n,subs:new b.Subscription,size:0};this.setItem(e,i),i.subs.add(a.subscribe({next:t=>{const a=new Blob([JSON.stringify(t)]).size;this.byteToMb(a)<this.maxCacheSizeMB&&!Object(r.isErrorResponse)(t)?(this.setItem(e,{...i,size:a}),this.shrink()):this.deleteItem(e)},error:t=>{this.deleteItem(e)}})),this.shrink()}get(e){const t=this.responseCache.get(e);if(t)return this.setItem(e,t),{response$:t.response$,searchAbortController:t.searchAbortController}}}var te=a(83),ae=a.n(te),re=a(84);let ne;!function(e){e.Timeout="timeout"}(ne||(ne={}));class search_abort_controller_SearchAbortController{constructor(e){E()(this,"inputAbortSignals",new Array),E()(this,"abortController",new AbortController),E()(this,"timeoutSub",void 0),E()(this,"destroyed",!1),E()(this,"reason",void 0),E()(this,"abortHandler",(()=>{this.inputAbortSignals.every((e=>e.aborted))&&(this.abortController.abort(),this.cleanup())})),e&&(this.timeoutSub=Object(b.timer)(e).subscribe((()=>{this.reason=ne.Timeout,this.abortController.abort(),this.timeoutSub.unsubscribe()})))}cleanup(){var e;this.destroyed||(this.destroyed=!0,null===(e=this.timeoutSub)||void 0===e||e.unsubscribe(),this.inputAbortSignals.forEach((e=>{e.removeEventListener("abort",this.abortHandler)})))}addAbortSignal(e){this.destroyed||(this.inputAbortSignals.push(e),e.aborted?this.abortHandler():e.addEventListener("abort",this.abortHandler))}getSignal(){return this.abortController.signal}abort(){this.cleanup(),this.abortController.abort()}isTimeout(){return this.reason===ne.Timeout}}class search_interceptor_SearchInterceptor{constructor(e){E()(this,"uiSettingsSub",void 0),E()(this,"searchTimeout",void 0),E()(this,"responseCache",new search_response_cache_SearchResponseCache(50,10)),E()(this,"pendingCount$",new b.BehaviorSubject(0)),E()(this,"application",void 0),E()(this,"docLinks",void 0),E()(this,"batchedFetch",void 0),E()(this,"showTimeoutErrorToast",((e,t)=>{this.deps.toasts.addDanger({title:"Timed out",text:Object(H.toMountPoint)(e.getErrorMessage(this.application))})})),E()(this,"showTimeoutErrorMemoized",Object(f.memoize)(this.showTimeoutErrorToast,((e,t)=>t))),E()(this,"showRestoreWarningToast",(e=>{var t;this.deps.toasts.addWarning({title:"Your search session is still running",text:Object(H.toMountPoint)((t=this.docLinks,G.a.createElement(G.a.Fragment,null,G.a.createElement(Q.EuiSpacer,{size:"s"}),"It needs more time to fully render. You can wait here or come back to it later.",G.a.createElement(Q.EuiSpacer,{size:"m"}),G.a.createElement(Q.EuiText,{textAlign:"right"},G.a.createElement(Q.EuiLink,{href:t.links.search.sessionLimits,color:"warning",target:"_blank","data-test-subj":"searchSessionIncompleteWarning",external:!0},G.a.createElement(X.FormattedMessage,{id:"data.searchSession.warning.readDocs",defaultMessage:"Read More"}))))))},{toastLifeTimeMs:6e4})})),E()(this,"showRestoreWarning",Object(f.memoize)(this.showRestoreWarningToast)),E()(this,"showTimeoutError",((e,t)=>{t?this.showTimeoutErrorMemoized(e,t):this.showTimeoutErrorToast(e,t)})),this.deps=e,this.deps.http.addLoadingCountSource(this.pendingCount$),this.deps.startServices.then((([e])=>{this.application=e.application,this.docLinks=e.docLinks})),this.batchedFetch=e.bfetch.batchedFunction({url:"/internal/bsearch"}),this.searchTimeout=e.uiSettings.get(r.UI_SETTINGS.SEARCH_TIMEOUT),this.uiSettingsSub=e.uiSettings.get$(r.UI_SETTINGS.SEARCH_TIMEOUT).subscribe((e=>{this.searchTimeout=e}))}stop(){this.responseCache.clear(),this.uiSettingsSub.unsubscribe()}getTimeoutMode(){var e;return null!==(e=this.application.capabilities.advancedSettings)&&void 0!==e&&e.save?ee.CHANGE:ee.CONTACT}createRequestHash$(e,t){const{sessionId:a,isRestore:r}=t,{preference:n,...i}=e.params||{},s={...i,sessionId:a,isRestore:r};return Object(b.from)(a?async function(e){return(new re.Sha256).update(ae()(e),"utf8").digest("hex")}(s):Object(b.of)(void 0))}handleSearchError(e,t,a){if(a||"Request timed out"===e.message){const a=new timeout_error_SearchTimeoutError(e,this.getTimeoutMode());return this.showTimeoutError(a,null==t?void 0:t.sessionId),a}return e instanceof M.AbortError?e:Z(e)?function(e){if(!Z(e))return!1;const t=J(e);if(!t)return!1;const{lang:a}=t;return"painless"===a}(e)?new painless_error_PainlessError(e,null==t?void 0:t.indexPattern):new es_error_EsError(e):e instanceof Error?e:new Error(e.message)}getSerializableOptions(e){const{sessionId:t,...a}=e||{},r={},n={...a,...this.deps.session.getSearchOptions(t)};return void 0!==n.sessionId&&(r.sessionId=n.sessionId),void 0!==n.isRestore&&(r.isRestore=n.isRestore),void 0!==n.legacyHitsTotal&&(r.legacyHitsTotal=n.legacyHitsTotal),void 0!==n.strategy&&(r.strategy=n.strategy),void 0!==n.isStored&&(r.isStored=n.isStored),void 0!==n.executionContext&&(r.executionContext=n.executionContext),r}runSearch$({id:e,...t},a,n){const{sessionId:i,strategy:s}=a;let o=!1;const l=this.deps.session.isCurrentSession(i)&&this.deps.session.state$.pipe(Object(y.skip)(1),Object(y.filter)((e=>this.deps.session.isCurrentSession(i)&&e===O.BackgroundLoading)),Object(y.take)(1)).subscribe((()=>{o=!0})),u=Object(f.once)((()=>{e&&!o&&this.deps.http.delete(`/internal/search/${s}/${e}`)}));return Object(r.pollSearch)((()=>this.runSearch({id:e,...t},{...a,abortSignal:n.getSignal()})),u,{...a,abortSignal:n.getSignal()}).pipe(Object(y.tap)((t=>e=t.id)),Object(y.catchError)((e=>(u(),Object(b.throwError)(e)))),Object(y.finalize)((()=>{n.cleanup(),l&&l.unsubscribe()})),Object(y.shareReplay)(1))}runSearch(e,t){const{abortSignal:a}=t||{};return this.batchedFetch({request:e,options:this.getSerializableOptions(t)},a)}getSearchResponse$(e,t,a){var r;const n=a?this.responseCache.get(a):void 0,i=(null==n?void 0:n.searchAbortController)||new search_abort_controller_SearchAbortController(this.searchTimeout);i.addAbortSignal(null!==(r=t.abortSignal)&&void 0!==r?r:(new AbortController).signal);const s=(null==n?void 0:n.response$)||this.runSearch$(e,t,i);return a&&!this.responseCache.has(a)&&this.responseCache.set(a,{response$:s,searchAbortController:i}),{response$:s,searchAbortController:i}}search({id:e,...t},a={}){const n={strategy:r.ENHANCED_ES_SEARCH_STRATEGY,...a},{sessionId:i,abortSignal:s}=n;return this.createRequestHash$(t,n).pipe(Object(y.switchMap)((e=>{const{searchAbortController:a,response$:r}=this.getSearchResponse$(t,n,e);this.pendingCount$.next(this.pendingCount$.getValue()+1);const o=this.deps.session.isCurrentSession(i)?this.deps.session.trackSearch({abort:()=>a.abort()}):void 0,l=(s?Object(b.fromEvent)(s,"abort"):b.EMPTY).pipe(Object(y.map)((()=>{throw new M.AbortError})));return r.pipe(Object(y.takeUntil)(l),Object(y.catchError)((e=>Object(b.throwError)(this.handleSearchError(e,n,a.isTimeout())))),Object(y.tap)((e=>{i&&i===this.deps.session.getSessionId()&&this.deps.session.isRestore()&&!1===e.isRestored&&this.showRestoreWarning(i)})),Object(y.finalize)((()=>{this.pendingCount$.next(this.pendingCount$.getValue()-1),o&&this.deps.session.isCurrentSession(i)&&o()})))})))}showError(e){var t;e instanceof M.AbortError||e instanceof timeout_error_SearchTimeoutError||(e instanceof es_error_EsError?this.deps.toasts.addDanger({title:T.i18n.translate("data.search.esErrorTitle",{defaultMessage:"Cannot retrieve search results"}),text:Object(H.toMountPoint)(e.getErrorMessage(this.application))}):"HttpFetchError"===e.constructor.name?this.deps.toasts.addDanger({title:T.i18n.translate("data.search.httpErrorTitle",{defaultMessage:"Cannot retrieve your data"}),text:Object(H.toMountPoint)((t=e.message,G.a.createElement(G.a.Fragment,null,T.i18n.translate("data.errors.fetchError",{defaultMessage:"Check your network and proxy configuration. If the problem persists, contact your network administrator."}),G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement(Q.EuiSpacer,{size:"s"}),G.a.createElement(Q.EuiCodeBlock,{"data-test-subj":"errMessage",isCopyable:!0,paddingSize:"s"},t))))}):this.deps.toasts.addError(e,{title:"Search Error"}))}}var ie=a(41);const se=()=>G.a.createElement("div",null),oe=G.a.lazy((()=>a.e(5).then(a.bind(null,122)))),le="ACTION_GLOBAL_APPLY_FILTER";async function ue(e){return void 0!==e.filters}function ce(e,t){return Object(ie.createAction)({type:le,id:le,order:100,getIconType:()=>"filter",getDisplayName:()=>T.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"}),isCompatible:ue,execute:async({filters:a,timeFieldName:r,controlledBy:n})=>{if(!a)throw new Error("Applying a filter requires a filter");if(!await ue({filters:a}))throw new ie.IncompatibleActionError;let i=a;if(i.length>1){const e=await Promise.all(a.map((e=>Object(K.a)().get(e.meta.index)))),t=new Promise((t=>{const r=Object(K.c)().openModal(Object(H.toMountPoint)(((e,t,a,r)=>G.a.createElement(G.a.Suspense,{fallback:G.a.createElement(se,null)},G.a.createElement(oe,{indexPatterns:t,filters:e,onCancel:a,onSubmit:r})))(a,e,(()=>{r.close(),t([])}),(e=>{r.close(),t(e)}))),{"data-test-subj":"test"})}));i=await t}if(n&&e.getFilters().forEach((t=>{t.meta.controlledBy===n&&e.removeFilter(t)})),r){const{timeRangeFilter:a,restOfFilters:n}=c.extractTimeFilter(r,i);e.addFilters(n),a&&c.changeTimeFilter(t,a)}else e.addFilters(i)}})}const de=async(e,t,a)=>{var r;if(!(e&&e.columns&&e.columns[t]&&e.columns[t].meta&&"esaggs"===e.columns[t].meta.source&&null!==(r=e.columns[t].meta.sourceParams)&&void 0!==r&&r.indexPatternId))return;const n=e.columns[t],{indexPatternId:i,...s}=e.columns[t].meta.sourceParams,o=Object(K.d)().aggs.createAggConfigs(await Object(K.a)().get(i),[s]).aggs[0];let l=[];const u=a>-1?e.rows[a][n.id]:null;if(null!=u&&o.isFilterable()){if("terms"===o.type.name&&o.params.otherBucket){const r=((e,t,a)=>{if(-1===a)return[];const r=e.rows.filter((r=>e.columns.every(((n,i)=>r[n.id]===e.rows[a][n.id]||i>=t)))).map((a=>a[e.columns[t].id]));return[...new Set(r.filter((e=>"__other__"!==e&&"__missing__"!==e)))]})(e,t,a);l=o.createFilter(u,{terms:r})}else l=o.createFilter(u);if(l)return Array.isArray(l)||(l=[l]),l}},ge=async({data:e,negate:t})=>{const a=[];return await Promise.all(e.filter((e=>e)).map((async e=>{const{table:r,column:n,row:i}=e,s=await de(r,n,i)||[];s&&s.forEach((e=>{t&&(e=c.toggleFilterNegated(e)),a.push(e)}))}))),m.a.uniqWith(c.mapAndFlattenFilters(a),((e,t)=>c.compareFilters(e,t,c.COMPARE_ALL_OPTIONS)))};async function pe(e){const t=e.table.columns[e.column];if(!t||!t.meta)return[];const{indexPatternId:a,...r}=t.meta.sourceParams,n=await Object(K.a)().get(a),i=Object(K.d)().aggs.createAggConfigs(n,[r]).aggs[0].params.field;if(!i||e.range.length<=1)return[];const s=e.range[0],o=Object(f.last)(e.range);if(s===o)return[];const l="date"===i.type,u={gte:l?j()(s).toISOString():s,lt:l?j()(o).toISOString():o};return l&&(u.format="strict_date_optional_time"),c.mapAndFlattenFilters([c.buildRangeFilter(i,u,n)])}const he="FILTER_TRIGGER",fe={id:he,title:T.i18n.translate("data.triggers.applyFilterTitle",{defaultMessage:"Apply filter"}),description:T.i18n.translate("data.triggers.applyFilterDescription",{defaultMessage:"When kibana filter is applied. Could be a single value or a range filter."})},me="ACTION_SELECT_RANGE";const be="ACTION_VALUE_CLICK";a(97);var ye=a(30);class aggs_service_AggsService{constructor(){E()(this,"aggsCommonService",new ye.h),E()(this,"initializedAggTypes",new Map),E()(this,"getConfig",void 0),E()(this,"subscriptions",[]),E()(this,"nowProvider",void 0),E()(this,"calculateBounds",(e=>Object(r.calculateBounds)(e,{forceNow:this.nowProvider.get()})))}setup({registerFunction:e,uiSettings:t,nowProvider:a}){return this.nowProvider=a,this.getConfig=function(e,t,a){const r={};return t.forEach((t=>{a.push(e.get$(t).subscribe((e=>{r[t]=e})))})),e=>r[e]}(t,ye.Mb,this.subscriptions),this.aggsCommonService.setup({registerFunction:e})}start({fieldFormats:e,uiSettings:t,indexPatterns:a}){const r=()=>t.isDefault("dateFormat:tz"),{calculateAutoTimeExpression:n,datatableUtilities:i,types:s}=this.aggsCommonService.start({getConfig:this.getConfig,getIndexPattern:a.get,isDefaultTimezone:r}),o={calculateBounds:this.calculateBounds,getConfig:this.getConfig,getFieldFormatsStart:()=>({deserialize:e.deserialize,getDefaultInstance:e.getDefaultInstance}),isDefaultTimezone:r};s.getAll().buckets.forEach((e=>{const t=e(o);this.initializedAggTypes.set(t.name,t)})),s.getAll().metrics.forEach((e=>{const t=e(o);this.initializedAggTypes.set(t.name,t)}));const l={get:e=>this.initializedAggTypes.get(e),getAll:()=>({buckets:Array.from(this.initializedAggTypes.values()).filter((e=>"buckets"===e.type)),metrics:Array.from(this.initializedAggTypes.values()).filter((e=>"metrics"===e.type))})};return{calculateAutoTimeExpression:n,datatableUtilities:i,createAggConfigs:(e,t=[])=>new ye.b(e,t,{typesRegistry:l}),types:l}}stop(){this.subscriptions.forEach((e=>e.unsubscribe())),this.subscriptions=[]}}var _e=a(25);let ve;!function(e){e.QUERY_TIMED_OUT="queryTimedOut",e.SESSION_INDICATOR_TOUR_LOADING="sessionIndicatorTourLoading",e.SESSION_INDICATOR_TOUR_RESTORED="sessionIndicatorTourRestored",e.SESSION_INDICATOR_SAVE_DISABLED="sessionIndicatorSaveDisabled",e.SESSION_SENT_TO_BACKGROUND="sessionSentToBackground",e.SESSION_SAVED_RESULTS="sessionSavedResults",e.SESSION_VIEW_RESTORED="sessionViewRestored",e.SESSION_IS_RESTORED="sessionIsRestored",e.SESSION_RELOADED="sessionReloaded",e.SESSION_EXTENDED="sessionExtended",e.SESSION_CANCELLED="sessionCancelled",e.SESSION_DELETED="sessionDeleted",e.SESSION_VIEW_LIST="sessionViewList",e.SESSIONS_LIST_LOADED="sessionsListLoaded"}(ve||(ve={}));const Se=(e,t)=>{const a=(a,r)=>async()=>{const n=await(async()=>{const[{application:t}]=await e();return t.currentAppId$.pipe(Object(y.first)()).toPromise()})();return null==t?void 0:t.reportUiCounter(n,a,r)};return{trackQueryTimedOut:a(_e.METRIC_TYPE.LOADED,ve.QUERY_TIMED_OUT),trackSessionIndicatorTourLoading:a(_e.METRIC_TYPE.LOADED,ve.SESSION_INDICATOR_TOUR_LOADING),trackSessionIndicatorTourRestored:a(_e.METRIC_TYPE.LOADED,ve.SESSION_INDICATOR_TOUR_RESTORED),trackSessionIndicatorSaveDisabled:a(_e.METRIC_TYPE.LOADED,ve.SESSION_INDICATOR_SAVE_DISABLED),trackSessionSentToBackground:a(_e.METRIC_TYPE.CLICK,ve.SESSION_SENT_TO_BACKGROUND),trackSessionSavedResults:a(_e.METRIC_TYPE.CLICK,ve.SESSION_SAVED_RESULTS),trackSessionViewRestored:a(_e.METRIC_TYPE.CLICK,ve.SESSION_VIEW_RESTORED),trackSessionIsRestored:a(_e.METRIC_TYPE.CLICK,ve.SESSION_IS_RESTORED),trackSessionReloaded:a(_e.METRIC_TYPE.CLICK,ve.SESSION_RELOADED),trackSessionExtended:a(_e.METRIC_TYPE.CLICK,ve.SESSION_EXTENDED),trackSessionCancelled:a(_e.METRIC_TYPE.CLICK,ve.SESSION_CANCELLED),trackSessionDeleted:a(_e.METRIC_TYPE.CLICK,ve.SESSION_DELETED),trackViewSessionsList:a(_e.METRIC_TYPE.CLICK,ve.SESSION_VIEW_LIST),trackSessionsListLoaded:a(_e.METRIC_TYPE.LOADED,ve.SESSIONS_LIST_LOADED)}};var ke=a(18);const xe="aggShardDelay",Ee=()=>({name:xe,help:T.i18n.translate("data.search.aggs.function.buckets.shardDelay.help",{defaultMessage:"Generates a serialized agg config for a Shard Delay agg"}),type:"agg_type",args:{id:{types:["string"],help:T.i18n.translate("data.search.aggs.buckets.shardDelay.id.help",{defaultMessage:"ID for this aggregation"})},enabled:{types:["boolean"],default:!0,help:T.i18n.translate("data.search.aggs.buckets.shardDelay.enabled.help",{defaultMessage:"Specifies whether this aggregation should be enabled"})},schema:{types:["string"],help:T.i18n.translate("data.search.aggs.buckets.shardDelay.schema.help",{defaultMessage:"Schema to use for this aggregation"})},delay:{types:["string"],help:T.i18n.translate("data.search.aggs.buckets.shardDelay.delay.help",{defaultMessage:'Delay between shards to process. Example: "5s".'})},json:{types:["string"],help:T.i18n.translate("data.search.aggs.buckets.shardDelay.json.help",{defaultMessage:"Advanced json to include when the agg is sent to Elasticsearch"})},customLabel:{types:["string"],help:T.i18n.translate("data.search.aggs.buckets.shardDelay.customLabel.help",{defaultMessage:"Represents a custom label for this aggregation"})}},fn:(e,t)=>{const{id:a,enabled:r,schema:n,...i}=t;return{type:"agg_type",value:{id:a,enabled:r,schema:n,type:Te,params:{...i}}}}}),Te="shard_delay",Ie=()=>new ke.a({name:Te,title:"Shard Delay",expressionName:xe,createFilter:()=>({match_all:{}}),customLabels:!1,params:[{name:"delay",type:"string",default:"5s",write(e,t){t.params={...t.params,value:e.params.delay}}}]});class search_service_SearchService{constructor(e){E()(this,"aggsService",new aggs_service_AggsService),E()(this,"searchSourceService",new k.D),E()(this,"searchInterceptor",void 0),E()(this,"usageCollector",void 0),E()(this,"sessionService",void 0),E()(this,"sessionsClient",void 0),this.initializerContext=e}setup({http:e,getStartServices:t,notifications:a,uiSettings:r},{bfetch:n,expressions:i,usageCollection:s,nowProvider:o}){this.usageCollector=Se(t,s),this.sessionsClient=new sessions_client_SessionsClient({http:e}),this.sessionService=new session_service_SessionService(this.initializerContext,t,this.sessionsClient,o),this.searchInterceptor=new search_interceptor_SearchInterceptor({bfetch:n,toasts:a.toasts,http:e,uiSettings:r,startServices:t(),usageCollector:this.usageCollector,session:this.sessionService}),i.registerFunction(v({getStartServices:t})),i.registerFunction(k.Kd),i.registerFunction(function({getStartServices:e}){return Object(_.r)((async()=>{const[t]=await e();return{savedObjectsClient:t.savedObjects.client}}))}({getStartServices:t})),i.registerFunction(k.bc),i.registerFunction(k.hc),i.registerFunction(k.lc),i.registerFunction(k.vd),i.registerFunction(k.Pd),i.registerFunction(k.Od),i.registerFunction(k.Nd),i.registerFunction(k.oc),i.registerFunction(k.Rd),i.registerFunction(k.sc),i.registerFunction(k.uc),i.registerFunction(k.ge),i.registerFunction(k.Md),i.registerFunction(k.kc),i.registerFunction(k.ce),i.registerFunction(k.fe),i.registerFunction(k.Zd),i.registerType(k.Ld),i.registerFunction(function({getStartServices:e}){return Object(S.a)({getStartDependencies:async()=>{const[t,,{search:a}]=await e();return{uiSettingsClient:t.uiSettings,search:a.search}}})}({getStartServices:t})),i.registerType(k.jc);const l=this.aggsService.setup({registerFunction:i.registerFunction,uiSettings:r,nowProvider:o});return this.initializerContext.config.get().search.aggs.shardDelay.enabled&&(l.types.registerBucket(Te,Ie),i.registerFunction(Ee)),{aggs:l,usageCollector:this.usageCollector,session:this.sessionService,sessionsClient:this.sessionsClient}}start({http:e,uiSettings:t},{fieldFormats:a,indexPatterns:r}){const n=(e,t={})=>this.searchInterceptor.search(e,t),i=new b.BehaviorSubject(0);e.addLoadingCountSource(i);const s={getConfig:t.get.bind(t),search:n,onResponse:V};return{aggs:this.aggsService.start({fieldFormats:a,uiSettings:t,indexPatterns:r}),search:n,showError:e=>{this.searchInterceptor.showError(e)},session:this.sessionService,sessionsClient:this.sessionsClient,searchSource:this.searchSourceService.start(r,s)}}stop(){this.aggsService.stop(),this.searchSourceService.stop(),this.searchInterceptor.stop()}}var we=a(50),Fe=a.n(we);const Ae=()=>G.a.createElement("div",null),Me=G.a.lazy((()=>a.e(6).then(a.bind(null,123)))),Oe=e=>G.a.createElement(G.a.Suspense,{fallback:G.a.createElement(Ae,null)},G.a.createElement(Me,e));var Re=a(64);const Ne=(e,t)=>{const{timefilter:{timefilter:a},filterManager:r,queryString:n}=e;t.attributes.timefilter&&(a.setTime({from:t.attributes.timefilter.from,to:t.attributes.timefilter.to}),t.attributes.timefilter.refreshInterval&&a.setRefreshInterval(t.attributes.timefilter.refreshInterval)),n.setQuery(t.attributes.query);const i=t.attributes.filters||[],s=r.getGlobalFilters();r.setFilters([...s,...i])},Pe=e=>{e.filterManager.removeAll(),e.queryString.clearQuery()},Ce=e=>{const{timefilter:t}=e.timefilter;return e=>{t.setRefreshInterval({value:e.refreshInterval,pause:e.isPaused})}},je=(e,t,a)=>{if(!e.useDefaultBehaviors)return e.onQuerySubmit;const{timefilter:r}=t.timefilter;return n=>{!m.a.isEqual(r.getTime(),n.dateRange)||!m.a.isEqual(n.query,a)?(r.setTime(n.dateRange),n.query?t.queryString.setQuery(n.query):t.queryString.clearQuery()):e.onQuerySubmit&&e.onQuerySubmit({dateRange:r.getTime(),query:a},!1)}},Le=(e,t)=>e.useDefaultBehaviors?()=>{t(),e.onSavedQueryIdChange&&e.onSavedQueryIdChange()}:e.onClearSavedQuery,De=(e,t)=>e.useDefaultBehaviors?a=>{t(a),e.onSavedQueryIdChange&&e.onSavedQueryIdChange(a.id)}:e.onSavedQueryUpdated;function Be({core:e,storage:t,data:a,usageCollection:r}){return n=>{const{useDefaultBehaviors:i}=n,s=Object(q.useRef)(n.onQuerySubmit),{filters:o}=(e=>{const[t,a]=Object(q.useState)(e.filters||e.filterManager.getFilters());return Object(q.useEffect)((()=>{const t=new b.Subscription;return t.add(e.filterManager.getUpdates$().subscribe({next:()=>{const t=e.filterManager.getFilters();a(t)}})),()=>{t.unsubscribe()}}),[e.filterManager]),{filters:t}})({filters:n.filters,filterManager:a.query.filterManager}),{query:l}=(e=>{const[t,a]=Object(q.useState)(e.query||e.queryStringManager.getQuery());return Object(q.useEffect)((()=>{const t=new b.Subscription;return t.add(e.queryStringManager.getUpdates$().subscribe({next:()=>{const t=e.queryStringManager.getQuery();a(t)}})),()=>{t.unsubscribe()}}),[e.queryStringManager]),{query:t}})({query:n.query,queryStringManager:a.query.queryString}),{timeRange:u,refreshInterval:c}=(e=>{const t={from:e.dateRangeFrom||e.timefilter.getTime().from,to:e.dateRangeTo||e.timefilter.getTime().to},a={value:e.refreshInterval||e.timefilter.getRefreshInterval().value,pause:e.isRefreshPaused||e.timefilter.getRefreshInterval().pause},[r,n]=Object(q.useState)(t),[i,s]=Object(q.useState)(a);return Object(q.useEffect)((()=>{const t=new b.Subscription;return t.add(e.timefilter.getRefreshIntervalUpdate$().subscribe({next:()=>{const t=e.timefilter.getRefreshInterval();s(t)}})),t.add(e.timefilter.getTimeUpdate$().subscribe({next:()=>{n(e.timefilter.getTime())}})),()=>{t.unsubscribe()}}),[e.timefilter]),{refreshInterval:i,timeRange:r}})({dateRangeFrom:n.dateRangeFrom,dateRangeTo:n.dateRangeTo,refreshInterval:n.refreshInterval,isRefreshPaused:n.isRefreshPaused,timefilter:a.query.timefilter.timefilter}),{savedQuery:d,setSavedQuery:g,clearSavedQuery:p}=(e=>{const[t,a]=Object(q.useState)();return Object(q.useEffect)((()=>{e.savedQueryId?(async t=>{try{const r=await e.queryService.savedQueries.getSavedQuery(t);r&&r.id===t&&(a(r),Ne(e.queryService,r))}catch(r){a(void 0),Pe(e.queryService),e.notifications.toasts.addWarning({title:T.i18n.translate("data.search.unableToGetSavedQueryToastTitle",{defaultMessage:"Unable to load saved query {savedQueryId}",values:{savedQueryId:t}}),text:`${r.message}`})}})(e.savedQueryId):a(void 0)}),[e.notifications.toasts,e.queryService,e.queryService.savedQueries,e.savedQueryId]),{savedQuery:t,setSavedQuery:t=>{a(t),Ne(e.queryService,t)},clearSavedQuery:()=>{a(void 0),Pe(e.queryService)}}})({queryService:a.query,savedQueryId:n.savedQueryId,notifications:e.notifications});return Object(q.useEffect)((()=>{i&&s.current&&s.current({dateRange:u,query:l},!0)}),[l,u,i]),G.a.createElement(H.KibanaContextProvider,{services:{appName:n.appName,data:a,storage:t,usageCollection:r,...e}},G.a.createElement(Re.a,Fe()({showAutoRefreshOnly:n.showAutoRefreshOnly,showDatePicker:n.showDatePicker,showFilterBar:n.showFilterBar,showQueryBar:n.showQueryBar,showQueryInput:n.showQueryInput,showSaveQuery:n.showSaveQuery,screenTitle:n.screenTitle,indexPatterns:n.indexPatterns,indicateNoData:n.indicateNoData,timeHistory:a.query.timefilter.history,dateRangeFrom:u.from,dateRangeTo:u.to,refreshInterval:c.value,isRefreshPaused:c.pause,filters:o,query:l,onFiltersUpdated:(h=a.query,e=>{h.filterManager.setFilters(e)}),onRefreshChange:Ce(a.query),savedQuery:d,onQuerySubmit:je(n,a.query,l),onClearSavedQuery:Le(n,p),onSavedQueryUpdated:De(n,g),onSaved:De(n,g),iconType:n.iconType,nonKqlMode:n.nonKqlMode,nonKqlModeHelpText:n.nonKqlModeHelpText,customSubmitButton:n.customSubmitButton,isClearable:n.isClearable,placeholder:n.placeholder},(e=>e.useDefaultBehaviors?{}:e)(n))));var h}}const qe=Object(q.lazy)((()=>a.e(10).then(a.bind(null,125)))),Ge=e=>t=>G.a.createElement(qe,{adapters:t.adapters,title:t.title,uiSettings:e().uiSettings,fieldFormats:e().fieldFormats,uiActions:e().uiActions,isFilterable:e().isFilterable,options:t.options});var Qe=a(85);function Ue(){const e=function(){const e=window.location.href.split("?");if(e.length<=1)return{};return Object(Qe.parse)(e[1],{sort:!1})}().forceNow;if(!e)return;const t=Date.parse(e);if(isNaN(t))throw new Error(`forceNow query parameter, ${e}, can't be parsed by Date.parse`);return new Date(t)}class now_provider_NowProvider{constructor(){E()(this,"nowFromUrl",Ue()),E()(this,"now",void 0)}get(){return this.nowFromUrl?this.nowFromUrl:this.now?this.now:new Date}set(e){this.now=e}reset(){this.now=void 0}}class plugin_DataPublicPlugin{constructor(e){E()(this,"autocomplete",void 0),E()(this,"searchService",void 0),E()(this,"queryService",void 0),E()(this,"storage",void 0),E()(this,"usageCollection",void 0),E()(this,"nowProvider",void 0),this.searchService=new search_service_SearchService(e),this.queryService=new i.b,this.autocomplete=new h.a(e),this.storage=new M.Storage(window.localStorage),this.nowProvider=new now_provider_NowProvider}setup(e,{bfetch:t,expressions:a,uiActions:n,usageCollection:i,inspector:s,fieldFormats:o}){const l=Object(M.createStartServicesGetter)(e.getStartServices);this.usageCollection=i;const u=this.searchService.setup(e,{bfetch:t,usageCollection:i,expressions:a,nowProvider:this.nowProvider}),c=this.queryService.setup({uiSettings:e.uiSettings,storage:this.storage,nowProvider:this.nowProvider});var d;return n.registerTrigger(fe),n.registerAction(ce(c.filterManager,c.timefilter.timefilter)),s.registerView((d=()=>({uiActions:l().plugins.uiActions,uiSettings:l().core.uiSettings,fieldFormats:l().self.fieldFormats,isFilterable:l().self.search.aggs.datatableUtilities.isFilterable}),{title:T.i18n.translate("data.inspector.table.dataTitle",{defaultMessage:"Data"}),order:10,help:T.i18n.translate("data.inspector.table..dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:e=>Boolean(e.tables),component:Ge(d)})),o.register(Object(r.getAggsFormats)((e=>l().plugins.fieldFormats.deserialize(e)))),{autocomplete:this.autocomplete.setup(e,{timefilter:c.timefilter,usageCollection:i}),search:u,query:c}}start(e,{uiActions:t,fieldFormats:a,dataViews:r}){const{uiSettings:n,notifications:i,overlays:s}=e;Object(K.g)(i),Object(K.h)(s),Object(K.j)(n),Object(K.f)(r);const o=this.queryService.start({storage:this.storage,http:e.http,uiSettings:n}),l=this.searchService.start(e,{fieldFormats:a,indexPatterns:r});var u;Object(K.i)(l),t.addTriggerAction("SELECT_RANGE_TRIGGER",(u=()=>({uiActions:t}),Object(ie.createAction)({type:me,id:me,shouldAutoExecute:async()=>!0,execute:async e=>{try{const t=await pe(e.data);t.length>0&&await u().uiActions.getTrigger(he).exec({filters:t,embeddable:e.embeddable,timeFieldName:e.data.timeFieldName})}catch(e){console.warn("Error [ACTION_SELECT_RANGE]: can't extract filters from action context")}}}))),t.addTriggerAction("VALUE_CLICK_TRIGGER",function(e){return Object(ie.createAction)({type:be,id:be,shouldAutoExecute:async()=>!0,execute:async t=>{try{const a=await ge(t.data);a.length>0&&await e().uiActions.getTrigger(he).exec({filters:a,embeddable:t.embeddable,timeFieldName:t.data.timeFieldName})}catch(e){console.warn("Error [ACTION_EMIT_APPLY_FILTER_TRIGGER]: can't extract filters from action context")}}})}((()=>({uiActions:t})))),t.addTriggerAction(he,t.getAction(le));const c={actions:{createFiltersFromValueClickAction:ge,createFiltersFromRangeSelectAction:pe},autocomplete:this.autocomplete.start(),fieldFormats:a,indexPatterns:r,dataViews:r,query:o,search:l,nowProvider:this.nowProvider},d=Be({core:e,data:c,storage:this.storage,usageCollection:this.usageCollection});return{...c,ui:{IndexPatternSelect:(g=r,e=>G.a.createElement(Oe,Fe()({},e,{indexPatternService:g}))),SearchBar:d}};var g}stop(){this.autocomplete.clearProviders(),this.queryService.stop(),this.searchService.stop()}}const ze={datatableToCSV:r.datatableToCSV,CSV_MIME_TYPE:r.CSV_MIME_TYPE,cellHasFormulas:r.cellHasFormulas,tableHasFormulas:r.tableHasFormulas},$e={ILLEGAL_CHARACTERS_KEY:p.ILLEGAL_CHARACTERS_KEY,CONTAINS_SPACES_KEY:p.CONTAINS_SPACES_KEY,ILLEGAL_CHARACTERS_VISIBLE:p.ILLEGAL_CHARACTERS_VISIBLE,ILLEGAL_CHARACTERS:p.ILLEGAL_CHARACTERS,isFilterable:r.isFilterable,isNestedField:r.isNestedField,isMultiField:r.isMultiField,getFieldSubtypeMulti:r.getFieldSubtypeMulti,getFieldSubtypeNested:r.getFieldSubtypeNested,validate:p.validateDataView},He={aggs:{CidrMask:r.CidrMask,dateHistogramInterval:r.dateHistogramInterval,intervalOptions:r.intervalOptions,InvalidEsCalendarIntervalError:r.InvalidEsCalendarIntervalError,InvalidEsIntervalFormatError:r.InvalidEsIntervalFormatError,IpAddress:r.IpAddress,isDateHistogramBucketAggConfig:r.isDateHistogramBucketAggConfig,isNumberType:r.isNumberType,isStringType:r.isStringType,isType:r.isType,isValidEsInterval:r.isValidEsInterval,isValidInterval:r.isValidInterval,parentPipelineType:r.parentPipelineType,parseEsInterval:r.parseEsInterval,parseInterval:r.parseInterval,propFilter:r.propFilter,siblingPipelineType:r.siblingPipelineType,termsAggFilter:r.termsAggFilter,toAbsoluteDates:r.toAbsoluteDates,boundsDescendingRaw:r.boundsDescendingRaw,getNumberHistogramIntervalByDatatableColumn:r.getNumberHistogramIntervalByDatatableColumn,getDateHistogramMetaDataByDatatableColumn:r.getDateHistogramMetaDataByDatatableColumn},getResponseInspectorStats:r.getResponseInspectorStats,tabifyAggResponse:r.tabifyAggResponse,tabifyGetColumns:r.tabifyGetColumns};function Ke(e){return new plugin_DataPublicPlugin(e)}},function(e,t,a){"use strict";a.d(t,"b",(function(){return r.b})),a.d(t,"a",(function(){return r.a})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return c.a})),a.d(t,"e",(function(){return p}));var r=a(68),n=a(4),i=a.n(n),s=a(28);const o=()=>i.a.createElement("div",null),l=Object(s.withKibana)(i.a.lazy((()=>a.e(0).then(a.bind(null,121))))),u=e=>i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(o,null)},i.a.createElement(l,e));var c=a(64);const d=()=>i.a.createElement("div",null),g=i.a.lazy((()=>a.e(9).then(a.bind(null,126)))),p=e=>i.a.createElement(i.a.Suspense,{fallback:i.a.createElement(d,null)},i.a.createElement(g,e))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ES_FIELD_TYPES",{enumerable:!0,get:function(){return i.ES_FIELD_TYPES}}),Object.defineProperty(t,"KBN_FIELD_TYPES",{enumerable:!0,get:function(){return i.KBN_FIELD_TYPES}}),Object.defineProperty(t,"KbnFieldType",{enumerable:!0,get:function(){return r.KbnFieldType}}),Object.defineProperty(t,"castEsToKbnFieldTypeName",{enumerable:!0,get:function(){return n.castEsToKbnFieldTypeName}}),Object.defineProperty(t,"getFilterableKbnTypeNames",{enumerable:!0,get:function(){return n.getFilterableKbnTypeNames}}),Object.defineProperty(t,"getKbnFieldType",{enumerable:!0,get:function(){return n.getKbnFieldType}}),Object.defineProperty(t,"getKbnTypeNames",{enumerable:!0,get:function(){return n.getKbnTypeNames}});var r=a(70),n=a(90),i=a(51)},function(e,t,a){"use strict";a.d(t,"a",(function(){return AggConfig}));var r=a(3),n=a.n(r),i=a(6),s=a.n(i),o=a(1),l=a.n(o),u=a(0),c=a(46),d=a(21);class AggConfig{static ensureIds(e){const t=[],a=[];e.forEach((function(e){(e.id?t:a).push(e)}));let r=AggConfig.nextId(t);return a.forEach((function(e){e.id=String(r++)})),e}static nextId(e){return 1+e.reduce((function(e,t){return Math.max(e,+t.id||0)}),0)}constructor(e,t){n()(this,"aggConfigs",void 0),n()(this,"id",void 0),n()(this,"enabled",void 0),n()(this,"params",void 0),n()(this,"parent",void 0),n()(this,"brandNew",void 0),n()(this,"schema",void 0),n()(this,"__type",void 0),n()(this,"__typeDecorations",void 0),n()(this,"subAggs",[]),this.aggConfigs=e,this.id=String(t.id||AggConfig.nextId(e.aggs)),this.enabled="boolean"!=typeof t.enabled||t.enabled,this.params={},this.setType(t.type),t.schema&&(this.schema=t.schema),this.setParams(t.params||{}),this.__type=this.__type}setParams(e){e=e||this.params||{};const t=this.params={};this.getAggParams().forEach((a=>{let r=e[a.name];if(null==r){if(null==a.default)return;if(l.a.isFunction(a.default)){if(r=a.default(this),null==r)return}else r=a.default}if(a.deserialize){const e=l.a.isFunction(a.valueType),n=e&&r instanceof a.valueType,i=!e&&l.a.isObject(r);return n||i||(r=a.deserialize(r,this)),void(t[a.name]=r)}t[a.name]=l.a.cloneDeep(r)}))}getParam(e){return l.a.get(this.params,e)}hasTimeShift(){return Boolean(this.getParam("timeShift"))}getTimeShift(){const e=this.getParam("timeShift");if(!e)return;const t=Object(d.n)(e);if("invalid"===t)throw new Error(`could not parse time shift ${e}`);if("previous"===t){const e=this.aggConfigs.getTimeShiftInterval();if(e)return e;if(!this.aggConfigs.timeRange)return;const t=this.aggConfigs.getResolvedTimeRange();return s.a.duration(s()(t.max).diff(t.min))}return t}write(e){return Object(c.b)(this.type.params,this,e)}isFilterable(){return l.a.isFunction(this.type.createFilter)}createFilter(e,t={}){const a=this.type.createFilter;if(!a)throw new TypeError(`The "${this.type.title}" aggregation does not support filtering.`);const r=this.getField(),n=this.getFieldDisplayName();if(r&&!r.filterable){let e=`The "${n}" field can not be used for filtering.`;throw r.scripted&&(e=`The "${n}" field is scripted and can not be used for filtering.`),new TypeError(e)}return a(this,e,t)}onSearchRequestStart(e,t){return this.type?Promise.all(this.type.params.map((a=>a.modifyAggConfigOnSearchRequestStart(this,e,t)))):Promise.resolve()}toDsl(e){if(this.type.hasNoDsl)return;const t=this.write(e),a={};if(this.type.hasNoDslParams||(a[this.type.dslName||this.type.name]=t.params),this.subAggs.length&&(t.subAggs?t.subAggs.push(...this.subAggs):t.subAggs=this.subAggs),t.subAggs){const r=a.aggs||(a.aggs={});t.subAggs.forEach((function(t){r[t.id]=t.toDsl(e)}))}if(t.parentAggs){const r=a.parentAggs||(a.parentAggs={});t.parentAggs.forEach((function(t){r[t.id]=t.toDsl(e)}))}return a}serialize(){const e=this.params,t=l.a.transform(this.getAggParams(),((t,a)=>{let r=e[a.name];null!=r&&(a.serialize&&(r=a.serialize(r,this)),null!=r&&(t[a.name]=l.a.cloneDeep(r)))}),{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,params:t,...this.schema&&{schema:this.schema}}}toJSON(){return this.serialize()}toSerializedFieldFormat(){return this.type?this.type.getSerializedFormat(this):{}}toExpressionAst(){const e=this.type&&this.type.expressionName,{type:t,...a}=this.serialize();if(!e||!a.params)return;return{type:"expression",chain:[{type:"function",function:e,arguments:{...Object.entries(a.params).reduce(((e,[t,a])=>{const r=this.getAggParams().find((e=>e.name===t));if(r&&r.toExpressionAst){const a=r.toExpressionAst(this.getParam(t));a&&(e[t]=Array.isArray(a)?a:[a])}else if(a&&Array.isArray(a)){const r=a.filter((e=>null!=e));e[t]="object"==typeof r[0]?[JSON.stringify(r)]:r}else"object"==typeof a?e[t]=[JSON.stringify(a)]:void 0!==a&&(e[t]=[a]);return e}),{}),id:[this.id],enabled:[this.enabled],...this.schema?{schema:[this.schema]}:{}}}]}}getAggParams(){return[...l.a.hasIn(this,"type.params")?this.type.params:[]]}getRequestAggs(){return this.type&&this.type.getRequestAggs(this)||[this]}getResponseAggs(){return this.type&&this.type.getResponseAggs(this)||[this]}getValue(e){return this.type.getValue(this,e)}getResponseId(){return this.type.getResponseId(this)}getKey(e,t){return this.type.getKey?this.type.getKey(e,t,this):""}getFieldDisplayName(){const e=this.getField();return e?e.displayName||this.fieldName():""}getField(){return this.params.field}getValueBucketPath(){return this.type.getValueBucketPath(this)}makeLabel(e=!1){return this.params.customLabel?this.params.customLabel:this.type?e?u.i18n.translate("data.search.aggs.percentageOfLabel",{defaultMessage:"Percentage of {label}",values:{label:this.type.makeLabel(this)}}):`${this.type.makeLabel(this)}`:""}getIndexPattern(){return this.aggConfigs.indexPattern}getTimeRange(){return this.aggConfigs.timeRange}fieldName(){const e=this.getField();return e?e.name:""}fieldIsTimeField(){var e,t,a;const r=null===(e=this.getIndexPattern())||void 0===e||null===(t=e.getTimeField)||void 0===t||null===(a=t.call(e))||void 0===a?void 0:a.name,n=r?[r]:[],i=this.aggConfigs.timeFields&&this.aggConfigs.timeFields.length>0?this.aggConfigs.timeFields:n,s=this.fieldName();return i.includes(s)}get type(){return this.__type}set type(e){this.__typeDecorations&&l.a.forOwn(this.__typeDecorations,((e,t)=>{delete this[t]})),e&&l.a.isFunction(e.decorateAggConfig)&&(this.__typeDecorations=e.decorateAggConfig(),Object.defineProperties(this,this.__typeDecorations)),this.__type=e;let t=[];const a=this.type&&this.type.params.find((e=>"field"===e.type));a&&(t=a.getAvailableFields(this)),this.setParams({field:t.find((e=>e.name===this.getField()))})}setType(e){this.type=e}}},function(e,t,a){"use strict";var r=a(73);a.o(r,"CONTAINS_SPACES_KEY")&&a.d(t,"CONTAINS_SPACES_KEY",(function(){return r.CONTAINS_SPACES_KEY})),a.o(r,"ILLEGAL_CHARACTERS")&&a.d(t,"ILLEGAL_CHARACTERS",(function(){return r.ILLEGAL_CHARACTERS})),a.o(r,"ILLEGAL_CHARACTERS_KEY")&&a.d(t,"ILLEGAL_CHARACTERS_KEY",(function(){return r.ILLEGAL_CHARACTERS_KEY})),a.o(r,"ILLEGAL_CHARACTERS_VISIBLE")&&a.d(t,"ILLEGAL_CHARACTERS_VISIBLE",(function(){return r.ILLEGAL_CHARACTERS_VISIBLE})),a.o(r,"IndexPattern")&&a.d(t,"IndexPattern",(function(){return r.IndexPattern})),a.o(r,"IndexPatternField")&&a.d(t,"IndexPatternField",(function(){return r.IndexPatternField})),a.o(r,"validateDataView")&&a.d(t,"validateDataView",(function(){return r.validateDataView}))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i}));const r="kuery",n="kibana.userQueryLanguage",i={META_FIELDS:"metaFields",DOC_HIGHLIGHT:"doc_table:highlight",QUERY_STRING_OPTIONS:"query:queryString:options",QUERY_ALLOW_LEADING_WILDCARDS:"query:allowLeadingWildcards",SEARCH_QUERY_LANGUAGE:"search:queryLanguage",SORT_OPTIONS:"sort:options",COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX:"courier:ignoreFilterIfFieldNotInIndex",COURIER_SET_REQUEST_PREFERENCE:"courier:setRequestPreference",COURIER_CUSTOM_REQUEST_PREFERENCE:"courier:customRequestPreference",COURIER_MAX_CONCURRENT_SHARD_REQUESTS:"courier:maxConcurrentShardRequests",COURIER_BATCH_SEARCHES:"courier:batchSearches",SEARCH_INCLUDE_FROZEN:"search:includeFrozen",SEARCH_TIMEOUT:"search:timeout",HISTOGRAM_BAR_TARGET:"histogram:barTarget",HISTOGRAM_MAX_BARS:"histogram:maxBars",HISTORY_LIMIT:"history:limit",TIMEPICKER_REFRESH_INTERVAL_DEFAULTS:"timepicker:refreshIntervalDefaults",TIMEPICKER_QUICK_RANGES:"timepicker:quickRanges",TIMEPICKER_TIME_DEFAULTS:"timepicker:timeDefaults",FILTERS_PINNED_BY_DEFAULT:"filters:pinnedByDefault",FILTERS_EDITOR_SUGGEST_VALUES:"filterEditor:suggestValues",AUTOCOMPLETE_USE_TIMERANGE:"autocomplete:useTimeRange",AUTOCOMPLETE_VALUE_SUGGESTION_METHOD:"autocomplete:valueSuggestionMethod",DATE_FORMAT:"dateFormat",DATEFORMAT_TZ:"dateFormat:tz"}},function(e,t,a){e.exports=a(29)(2400)},function(e,t,a){"use strict";var r=a(33);a.d(t,"a",(function(){return r.ES_FIELD_TYPES})),a.d(t,"b",(function(){return r.KBN_FIELD_TYPES}))},function(e,t,a){"use strict";a(52);var r=a(39);a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return r.b}))},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){"use strict";a.d(t,"a",(function(){return AggType}));var r=a(3),n=a.n(r),i=a(1),s=a(0),o=a(46),l=a(27);class AggType{splitForTimeShift(e,t){return!1}constructor(e){if(n()(this,"name",void 0),n()(this,"type",void 0),n()(this,"subtype",void 0),n()(this,"dslName",void 0),n()(this,"expressionName",void 0),n()(this,"title",void 0),n()(this,"valueType",void 0),n()(this,"makeLabel",void 0),n()(this,"ordered",void 0),n()(this,"hasNoDsl",void 0),n()(this,"hasNoDslParams",void 0),n()(this,"createFilter",void 0),n()(this,"params",void 0),n()(this,"getRequestAggs",void 0),n()(this,"getResponseAggs",void 0),n()(this,"decorateAggConfig",void 0),n()(this,"postFlightRequest",void 0),n()(this,"getSerializedFormat",void 0),n()(this,"getValue",void 0),n()(this,"getKey",void 0),n()(this,"paramByName",(e=>this.params.find((t=>t.name===e)))),n()(this,"getValueBucketPath",(e=>e.id)),n()(this,"getResponseId",void 0),this.name=e.name,this.type=e.type||"metrics",this.dslName=e.dslName||e.name,this.expressionName=e.expressionName,this.title=e.title,this.valueType=e.valueType,this.makeLabel=e.makeLabel||Object(i.constant)(this.name),this.ordered=e.ordered,this.hasNoDsl=!!e.hasNoDsl,this.hasNoDslParams=!!e.hasNoDslParams,e.createFilter&&(this.createFilter=e.createFilter),e.getValueBucketPath&&(this.getValueBucketPath=e.getValueBucketPath),e.params&&e.params.length&&e.params[0]instanceof l.a)this.params=e.params;else{const t=e.params?[...e.params]:[];!1!==e.json&&t.push({name:"json",type:"json",advanced:!0}),!1!==e.customLabels&&t.push({name:"customLabel",displayName:s.i18n.translate("data.search.aggs.string.customLabel",{defaultMessage:"Custom label"}),type:"string",write:i.noop}),this.params=Object(o.a)(t)}this.getRequestAggs=e.getRequestAggs||i.noop,this.getResponseAggs=e.getResponseAggs||(()=>{}),this.decorateAggConfig=e.decorateAggConfig||(()=>({})),this.postFlightRequest=e.postFlightRequest||i.identity,this.getSerializedFormat=e.getSerializedFormat||(e=>e.params.field?e.aggConfigs.indexPattern.getFormatterForField(e.params.field).toJSON():{}),this.getValue=e.getValue||((e,t)=>{}),this.getResponseId=e.getResponseId||(e=>e.id)}}},function(e,t,a){"use strict";a.d(t,"t",(function(){return n})),a.d(t,"a",(function(){return U})),a.d(t,"n",(function(){return G})),a.d(t,"r",(function(){return D})),a.d(t,"K",(function(){return B})),a.d(t,"M",(function(){return q})),a.d(t,"q",(function(){return l})),a.d(t,"s",(function(){return u})),a.d(t,"L",(function(){return c})),a.d(t,"I",(function(){return d})),a.d(t,"f",(function(){return g})),a.d(t,"l",(function(){return p})),a.d(t,"G",(function(){return h})),a.d(t,"o",(function(){return f})),a.d(t,"u",(function(){return m})),a.d(t,"v",(function(){return b})),a.d(t,"z",(function(){return y})),a.d(t,"H",(function(){return _})),a.d(t,"A",(function(){return v})),a.d(t,"w",(function(){return x})),a.d(t,"B",(function(){return E})),a.d(t,"C",(function(){return T})),a.d(t,"D",(function(){return I})),a.d(t,"F",(function(){return w})),a.d(t,"E",(function(){return F})),a.d(t,"k",(function(){return A})),a.d(t,"j",(function(){return M})),a.d(t,"i",(function(){return O})),a.d(t,"m",(function(){return R})),a.d(t,"d",(function(){return N})),a.d(t,"h",(function(){return P})),a.d(t,"e",(function(){return C})),a.d(t,"g",(function(){return j})),a.d(t,"N",(function(){return L})),a.d(t,"b",(function(){return z})),a.d(t,"x",(function(){return s})),a.d(t,"y",(function(){return o})),a.d(t,"p",(function(){return Q})),a.d(t,"J",(function(){return k})),a.d(t,"O",(function(){return S})),a.d(t,"c",(function(){return i.c}));var r=a(2);function n(e){return{allowLeadingWildcards:e.get(r.UI_SETTINGS.QUERY_ALLOW_LEADING_WILDCARDS),queryStringOptions:e.get(r.UI_SETTINGS.QUERY_STRING_OPTIONS),ignoreFilterIfFieldNotInIndex:e.get(r.UI_SETTINGS.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX),dateFormatTZ:e.get("dateFormat:tz")}}var i=a(5);const s=i.y,o=i.z,l=i.r,u=i.t,c=i.P,d=i.M,g=i.f,p=i.l,h=i.J,f=i.p,m=i.v,b=i.w,y=i.A,_=i.L,v=i.B,S=i.T,k=i.N,x=i.x,E=i.C,T=i.D,I=i.E,w=i.G,F=i.F,A=i.k,M=i.j,O=i.i,R=i.m,N=i.d,P=i.h,C=i.e,j=i.g,L=i.R,D=i.s,B=i.O,q=i.Q,G=i.o,Q=i.q,U=i.a,z=i.b},function(e,t,a){e.exports=a(29)(2402)},function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var r=a(56),n=a(57),i=a(60),s=a(61),o=a(62),l=a(27);const u={field:n.a,optioned:i.a,string:s.a,json:o.a,agg:r.a,_default:l.a},c=e=>e.map((e=>new(u[e.type]||u._default)(e))),d=(e=[],t,a,r)=>{const n={params:{}};return r=r||{},e.forEach((e=>{e.write?e.write(t,n,a,r):e&&e.name&&(n.params[e.name]=t.params[e.name])})),n}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return d}));var r=a(0),n=a(6),i=a.n(n);const s=[{bound:1/0,interval:i.a.duration(1,"year"),boundLabel:r.i18n.translate("data.search.timeBuckets.infinityLabel",{defaultMessage:"More than a year"}),intervalLabel:r.i18n.translate("data.search.timeBuckets.yearLabel",{defaultMessage:"a year"})},{bound:i.a.duration(1,"year"),interval:i.a.duration(1,"month"),boundLabel:r.i18n.translate("data.search.timeBuckets.yearLabel",{defaultMessage:"a year"}),intervalLabel:r.i18n.translate("data.search.timeBuckets.monthLabel",{defaultMessage:"a month"})},{bound:i.a.duration(3,"week"),interval:i.a.duration(1,"week"),boundLabel:r.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:21}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:7}})},{bound:i.a.duration(1,"week"),interval:i.a.duration(1,"d"),boundLabel:r.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:7}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:1}})},{bound:i.a.duration(24,"hour"),interval:i.a.duration(12,"hour"),boundLabel:r.i18n.translate("data.search.timeBuckets.dayLabel",{defaultMessage:"{amount, plural, one {a day} other {# days}}",values:{amount:1}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:12}})},{bound:i.a.duration(6,"hour"),interval:i.a.duration(3,"hour"),boundLabel:r.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:6}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:3}})},{bound:i.a.duration(2,"hour"),interval:i.a.duration(1,"hour"),boundLabel:r.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:2}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.hourLabel",{defaultMessage:"{amount, plural, one {an hour} other {# hours}}",values:{amount:1}})},{bound:i.a.duration(45,"minute"),interval:i.a.duration(30,"minute"),boundLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:45}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:30}})},{bound:i.a.duration(20,"minute"),interval:i.a.duration(10,"minute"),boundLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:20}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:10}})},{bound:i.a.duration(9,"minute"),interval:i.a.duration(5,"minute"),boundLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:9}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:5}})},{bound:i.a.duration(3,"minute"),interval:i.a.duration(1,"minute"),boundLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:3}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.minuteLabel",{defaultMessage:"{amount, plural, one {a minute} other {# minutes}}",values:{amount:1}})},{bound:i.a.duration(45,"second"),interval:i.a.duration(30,"second"),boundLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:45}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:30}})},{bound:i.a.duration(15,"second"),interval:i.a.duration(10,"second"),boundLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:15}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:10}})},{bound:i.a.duration(7.5,"second"),interval:i.a.duration(5,"second"),boundLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:7.5}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:5}})},{bound:i.a.duration(5,"second"),interval:i.a.duration(1,"second"),boundLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:5}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.secondLabel",{defaultMessage:"{amount, plural, one {a second} other {# seconds}}",values:{amount:1}})},{bound:i.a.duration(500,"ms"),interval:i.a.duration(100,"ms"),boundLabel:r.i18n.translate("data.search.timeBuckets.millisecondLabel",{defaultMessage:"{amount, plural, one {a millisecond} other {# milliseconds}}",values:{amount:500}}),intervalLabel:r.i18n.translate("data.search.timeBuckets.millisecondLabel",{defaultMessage:"{amount, plural, one {a millisecond} other {# milliseconds}}",values:{amount:100}})}],o=s.map((({bound:e,interval:t})=>({bound:Number(e),interval:Number(t)})));function l(e,t){const a=t/e;return isFinite(a)?a:NaN}function u(e){const t=isNaN(e)?0:Math.max(Math.floor(e),1);return i.a.duration(t)}function c(e,t){const a=l(e,t),r=o.findIndex((({bound:e})=>Number(e)<=a));if(-1!==r){const e=o[r-1].interval;return i.a.duration(e)}return u(a)}function d(e,t){const a=l(e,t);for(const{interval:e}of o)if(e<=a)return i.a.duration(e);return u(a)}},function(e,t,a){e.exports=a(29)(495)},function(e,t,a){!function(t){"use strict";const a="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${a}\\.${a}\\.${a}\\.${a}$`,"i"),threeOctet:new RegExp(`^${a}\\.${a}\\.${a}$`,"i"),twoOctet:new RegExp(`^${a}\\.${a}$`,"i"),longValue:new RegExp(`^${a}$`,"i")},n=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",l={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${a}\\.${a}\\.${a}\\.${a}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${a}\\.${a}\\.${a}\\.${a}(${s})?$`,"i")};function u(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;let a,r,n=0,i=-1,s=(e.match(l.zoneIndex)||[])[0];for(s&&(s=s.substring(1),e=e.replace(/%.+$/,""));(i=e.indexOf(":",i+1))>=0;)n++;if("::"===e.substr(0,2)&&n--,"::"===e.substr(-2,2)&&n--,n>t)return null;for(r=t-n,a=":";r--;)a+="0:";return":"===(e=e.replace("::",a))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){const t=e.split(":"),a=[];for(let e=0;e<t.length;e++)a.push(parseInt(t[e],16));return a}(),zoneId:s}}function c(e,t,a,r){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let n,i=0;for(;r>0;){if(n=a-r,n<0&&(n=0),e[i]>>n!=t[i]>>n)return!1;r-=a,i+=1}return!0}function d(e){if(i.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(n.test(e))return parseInt(e,8);throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function g(e,t){for(;e.length<t;)e=`0${e}`;return e}const p={};p.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");let t,a;for(t=0;t<e.length;t++)if(a=e[t],!(0<=a&&a<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){let a;if(void 0===t&&(a=e,e=a[0],t=a[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return c(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const a={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let r,n,i;for(r=3;r>=0;r-=1){if(n=this.octets[r],!(n in a))return null;if(i=a[n],t&&0!==i)return null;8!==i&&(t=!0),e+=i}return 32-e},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),p.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),a=t[0].toByteArray(),r=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),n=[];let i=0;for(;i<4;)n.push(parseInt(a[i],10)|255^parseInt(r[i],10)),i++;return new this(n)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(e){return null!==this.parser(e)},p.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return!1}},p.IPv4.isValidFourPartDecimal=function(e){return!(!p.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(e){let t,a,r,n,i;try{for(t=this.parseCIDR(e),r=t[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),n=[],a=0;a<4;)n.push(parseInt(r[a],10)&parseInt(i[a],10)),a++;return new this(n)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(e){const t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},p.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const a=[this.parse(t[1]),e];return Object.defineProperty(a,"toString",{value:function(){return this.join("/")}}),a}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(e){let t,a,n;if(t=e.match(r.fourOctet))return function(){const e=t.slice(1,6),r=[];for(let t=0;t<e.length;t++)a=e[t],r.push(d(a));return r}();if(t=e.match(r.longValue)){if(n=d(t[1]),n>4294967295||n<0)throw new Error("ipaddr: address outside defined range");return function(){const e=[];let t;for(t=0;t<=24;t+=8)e.push(n>>t&255);return e}().reverse()}return(t=e.match(r.twoOctet))?function(){const e=t.slice(1,4),a=[];if(n=d(e[1]),n>16777215||n<0)throw new Error("ipaddr: address outside defined range");return a.push(d(e[0])),a.push(n>>16&255),a.push(n>>8&255),a.push(255&n),a}():(t=e.match(r.threeOctet))?function(){const e=t.slice(1,5),a=[];if(n=d(e[2]),n>65535||n<0)throw new Error("ipaddr: address outside defined range");return a.push(d(e[0])),a.push(d(e[1])),a.push(n>>8&255),a.push(255&n),a}():null},p.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");const t=[0,0,0,0];let a=0;const r=Math.floor(e/8);for(;a<r;)t[a]=255,a++;return r<4&&(t[r]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.IPv6=function(){function e(e,t){let a,r;if(16===e.length)for(this.parts=[],a=0;a<=14;a+=2)this.parts.push(e[a]<<8|e[a+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(a=0;a<this.parts.length;a++)if(r=this.parts[a],!(0<=r&&r<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){let a;if(void 0===t&&(a=e,e=a[0],t=a[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return c(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const a={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let r,n;for(let i=7;i>=0;i-=1){if(r=this.parts[i],!(r in a))return null;if(n=a[r],t&&0!==n)return null;16!==n&&(t=!0),e+=n}return 128-e},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){let e;const t=[],a=this.parts;for(let r=0;r<a.length;r++)e=a[r],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(g(this.parts[t].toString(16),4));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const e=this.parts.slice(-2),t=e[0],a=e[1];return new p.IPv4([t>>8,255&t,a>>8,255&a])},e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g,t=this.toNormalizedString();let a,r=0,n=-1;for(;a=e.exec(t);)a[0].length>n&&(r=a.index,n=a[0].length);return n<0?t:`${t.substring(0,r)}::${t.substring(r+n)}`},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),p.IPv6.isIPv6=function(e){return null!==this.parser(e)},p.IPv6.isValid=function(e){if("string"==typeof e&&-1===e.indexOf(":"))return!1;try{const t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(e){return!1}},p.IPv6.parse=function(e){const t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},p.IPv6.parseCIDR=function(e){let t,a,r;if((a=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(a[2]),t>=0&&t<=128))return r=[this.parse(a[1]),t],Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(e){let t,a,r,n,i,s;if(r=e.match(l.deprecatedTransitional))return this.parser(`::ffff:${r[1]}`);if(l.native.test(e))return u(e,8);if((r=e.match(l.transitional))&&(s=r[6]||"",t=u(r[1].slice(0,-1)+s,6),t.parts)){for(i=[parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])],a=0;a<i.length;a++)if(n=i[a],!(0<=n&&n<=255))return null;return t.parts.push(i[0]<<8|i[1]),t.parts.push(i[2]<<8|i[3]),{parts:t.parts,zoneId:t.zoneId}}return null},p.fromByteArray=function(e){const t=e.length;if(4===t)return new p.IPv4(e);if(16===t)return new p.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(e){return p.IPv6.isValid(e)||p.IPv4.isValid(e)},p.parse=function(e){if(p.IPv6.isValid(e))return p.IPv6.parse(e);if(p.IPv4.isValid(e))return p.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(e){try{return p.IPv6.parseCIDR(e)}catch(t){try{return p.IPv4.parseCIDR(e)}catch(e){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(e){const t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},p.subnetMatch=function(e,t,a){let r,n,i,s;for(n in null==a&&(a="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,n))for(i=t[n],!i[0]||i[0]instanceof Array||(i=[i]),r=0;r<i.length;r++)if(s=i[r],e.kind()===s[0].kind()&&e.match.apply(e,s))return n;return a},e.exports?e.exports=p:t.ipaddr=p}(this)},function(e,t,a){e.exports=a(29)(1076)},function(e,t,a){"use strict";let r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.KBN_FIELD_TYPES=t.ES_FIELD_TYPES=void 0,t.ES_FIELD_TYPES=r,function(e){e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram"}(r||(t.ES_FIELD_TYPES=r={})),t.KBN_FIELD_TYPES=n,function(e){e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing"}(n||(t.KBN_FIELD_TYPES=n={}))},function(e,t,a){},function(e,t,a){"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function o(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},r=[],n=0;n<e.length;n++){var i=e[n],l=t.base?i[0]+t.base:i[0],u=a[l]||0,c="".concat(l," ").concat(u);a[l]=u+1;var d=o(c),g={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(g)):s.push({identifier:c,updater:m(g,t),references:1}),r.push(c)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=a.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function g(e,t,a,r){var n=a?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var i=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function p(e,t,a){var r=a.css,n=a.media,i=a.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function m(e,t){var a,r,n;if(t.singleton){var i=f++;a=h||(h=u(t)),r=g.bind(null,a,i,!1),n=g.bind(null,a,i,!0)}else a=u(t),r=p.bind(null,a,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<a.length;r++){var n=o(a[r]);s[n].references--}for(var i=l(e,t),u=0;u<a.length;u++){var c=o(a[u]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}a=i}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var n=(s=r,o=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[a].concat(i).concat([n]).join("\n")}var s,o,l;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,r){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(n[s]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);r&&n[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},function(e,t,a){"use strict";let r;a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return autocomplete_service_AutocompleteService})),function(e){e.Field="field",e.Value="value",e.Operator="operator",e.Conjunction="conjunction",e.RecentSearch="recentSearch"}(r||(r={}));var n=a(3),i=a.n(n),s=a(6),o=a.n(s),l=a(19),u=a.n(l),c=a(5),d=a(1),g=a(2);const p=()=>Promise.resolve([]),h=(e,{timefilter:t,usageCollector:a})=>{function r(e,t,a,r){return[Math.floor(Date.now()/1e3/60),a,e,t.name,JSON.stringify(r)].join("|")}const n=Object(d.memoize)(((t,r,n,i=[],s,o=e.uiSettings.get(g.UI_SETTINGS.AUTOCOMPLETE_VALUE_SUGGESTION_METHOD))=>{var l;return null==a||a.trackRequest(),e.http.fetch(`/api/kibana/suggestions/values/${t}`,{method:"POST",body:JSON.stringify({query:n,field:r.name,fieldMeta:null==r||null===(l=r.toSpec)||void 0===l?void 0:l.call(r),filters:i,method:o}),signal:s}).then((e=>(null==a||a.trackResult(),e)))}),r);return async({indexPattern:i,field:s,query:o,useTimeRange:l,boolFilter:d,signal:p,method:h})=>{var f;const m=e.uiSettings.get(g.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES);l=null!==(f=l)&&void 0!==f?f:e.uiSettings.get(g.UI_SETTINGS.AUTOCOMPLETE_USE_TIMERANGE);const{title:b}=i;if("boolean"===s.type)return[!0,!1];if(!m||!s.aggregatable||"string"!==s.type)return[];const y=l?(({timefilter:e},t)=>{const a=e.getTime(),r={from:u.a.parse(a.from).startOf("minute").toISOString(),to:u.a.parse(a.to).endOf("minute").toISOString()};return e.createFilter(t,r)})(t,i):void 0,_=[...d||[],...y?Object(c.l)([y],i).filter:[]];try{return null==a||a.trackCall(),await n(b,s,o,_,p,h)}catch(e){return null!=p&&p.aborted||null==a||a.trackError(),n.cache.delete(r(b,s,o,_)),[]}}};var f=a(7),m=a(25);let b;!function(e){e.CALL="autocomplete:call",e.REQUEST="autocomplete:req",e.RESULT="autocomplete:res",e.ERROR="autocomplete:err"}(b||(b={}));var y=a(4),_=a.n(y),v=a(16);const S=Object(d.flow)((function(e){return e.replace(/[\\():<>"*]/g,"\\$&")}),(function(e){return e.replace(/(\s+)(and|or)(\s+)/gi,"$1\\$2$3")}),(function(e){return e.replace(/not(\s+)/gi,"\\$&")}),(function(e){return e.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));var k=a(31);const x=(e,t)=>{const a=["raw","keyword"];return a.map((t=>`${e.name}.${t}`)).includes(t.name)?1:a.map((e=>`${t.name}.${e}`)).includes(e.name)?-1:e.name.localeCompare(t.name)},E=e=>({indexPatterns:e},{start:t,end:a,prefix:r,suffix:n,nestedPath:i=""})=>{const s=Object(d.flatten)(e.map((e=>e.fields.filter(k.indexPatterns.isFilterable)))),o=`${r}${n}`.trim().toLowerCase(),l=function(e,t,a){if(!t)return e;const r=(""+t).toLowerCase(),n=Object(d.partition)(e,(e=>(""+(a?e[a]:e)).toLowerCase().startsWith(r)));return[...n[0],...n[1]]}(s.filter((e=>{const t=k.indexPatterns.getFieldSubtypeNested(e);return(!i||i&&(null==t?void 0:t.nested.path.includes(i)))&&e.name.toLowerCase().includes(o)})).sort(x),o,"name"),u=l.map((e=>{const r=e.subType&&e.subType.nested?e.subType.nested.path.slice(i?i.length+1:0):"",n=e.subType&&e.subType.nested&&r.length>0?`${S(r)}:{ ${S(e.name.slice(e.subType.nested.path.length+1))}  }`:`${S(e.name.slice(i?i.length+1:0))} `,s=(e=>_.a.createElement("p",null,_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.filterResultsDescription",defaultMessage:"Filter results that contain {fieldName}",values:{fieldName:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},e.name)}})))(e),o=e.subType&&e.subType.nested&&r.length>0?n.length-2:n.length;return{type:k.QuerySuggestionTypes.Field,text:n,description:s,start:t,end:a,cursorIndex:o,field:e}}));return Promise.resolve(u)},T=e=>{const t=e.getStartServices().then((([e,t,a])=>a.autocomplete));return async({indexPatterns:e,boolFilter:a,useTimeRange:r,signal:n,method:i},{start:s,end:o,prefix:l,suffix:u,fieldName:c,nestedPath:g})=>{const p=g?`${g}.${c}`:c,h=[];e.forEach((e=>{e.fields.filter((e=>e.name===p)).forEach((t=>h.push([e,t])))}));const f=`${l}${u}`.trim(),{getValueSuggestions:m}=await t,b=await Promise.all(h.map((([e,t])=>m({indexPattern:e,field:t,query:f,boolFilter:a,useTimeRange:r,signal:n,method:i}).then((e=>{const t=e.map((e=>{return"string"==typeof e?`"${t=e,t.replace(/[\\"]/g,"\\$&")}"`:`${e}`;var t}));return((e,t,a,r)=>r.filter((e=>e.toLowerCase().includes(a.toLowerCase()))).map((a=>({type:k.QuerySuggestionTypes.Value,text:`${a} `,start:e,end:t}))))(s,o,f,t)})))));return Object(d.flatten)(b)}},I=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.equalOperatorDescription.equalsText",defaultMessage:"equals",description:"Part of data.kueryAutocomplete.equalOperatorDescription. Full text: 'equals some value'"}),w=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText",defaultMessage:"less than or equal to",description:"Part of data.kueryAutocomplete.lessThanOrEqualOperatorDescription. Full text: 'is less than or equal to some value'"}),F=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText",defaultMessage:"greater than or equal to",description:"Part of data.kueryAutocomplete.greaterThanOrEqualOperatorDescription. Full text: 'is greater than or equal to some value'"}),A=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOperatorDescription.lessThanText",defaultMessage:"less than",description:"Part of data.kueryAutocomplete.lessThanOperatorDescription. Full text: 'is less than some value'"}),M=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText",defaultMessage:"greater than",description:"Part of data.kueryAutocomplete.greaterThanOperatorDescription. Full text: 'is greater than some value'"}),O=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.existOperatorDescription.existsText",defaultMessage:"exists",description:"Part of data.kueryAutocomplete.existOperatorDescription. Full text: 'exists in any form'"}),R={":":{description:_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.equalOperatorDescription",defaultMessage:"{equals} some value",values:{equals:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},I)},description:"Full text: 'equals some value'. See 'data.kueryAutocomplete.equalOperatorDescription.equalsText' for 'equals' part."}),fieldTypes:["string","number","number_range","date","date_range","ip","ip_range","geo_point","geo_shape","boolean"]},"<=":{description:_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOrEqualOperatorDescription",defaultMessage:"is {lessThanOrEqualTo} some value",values:{lessThanOrEqualTo:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},w)},description:"Full text: 'is less than or equal to some value'. See 'data.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText' for 'less than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">=":{description:_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOrEqualOperatorDescription",defaultMessage:"is {greaterThanOrEqualTo} some value",values:{greaterThanOrEqualTo:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},F)},description:"Full text: 'is greater than or equal to some value'. See 'data.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText' for 'greater than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},"<":{description:_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.lessThanOperatorDescription",defaultMessage:"is {lessThan} some value",values:{lessThan:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},A)},description:"Full text: 'is less than some value'. See 'data.kueryAutocomplete.lessThanOperatorDescription.lessThanText' for 'less than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">":{description:_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.greaterThanOperatorDescription",defaultMessage:"is {greaterThan} some value",values:{greaterThan:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},M)},description:"Full text: 'is greater than some value'. See 'data.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText' for 'greater than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},": *":{description:_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.existOperatorDescription",defaultMessage:"{exists} in any form",values:{exists:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},O)},description:"Full text: 'exists in any form'. See 'data.kueryAutocomplete.existOperatorDescription.existsText' for 'exists' part."}),fieldTypes:void 0}},N=e=>R[e],P=e=>_.a.createElement("p",null,N(e).description),C=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.andOperatorDescription.bothArgumentsText",defaultMessage:"both arguments",description:"Part of data.kueryAutocomplete.andOperatorDescription. Full text: 'Requires both arguments to be true'"}),j=_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText",defaultMessage:"one or more arguments",description:"Part of data.kueryAutocomplete.orOperatorDescription. Full text: 'Requires one or more arguments to be true'"}),L={and:_.a.createElement("p",null,_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.andOperatorDescription",defaultMessage:"Requires {bothArguments} to be true",values:{bothArguments:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},C)},description:"Full text: ' Requires both arguments to be true'. See 'data.kueryAutocomplete.andOperatorDescription.bothArgumentsText' for 'both arguments' part."})),or:_.a.createElement("p",null,_.a.createElement(v.FormattedMessage,{id:"data.kueryAutocomplete.orOperatorDescription",defaultMessage:"Requires {oneOrMoreArguments} to be true",values:{oneOrMoreArguments:_.a.createElement("span",{className:"kbnSuggestionItem__callout"},j)},description:"Full text: 'Requires one or more arguments to be true'. See 'data.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText' for 'one or more arguments' part."}))},D="@kuery-cursor@",B=e=>{const t={field:E(),value:T(e),operator:({indexPatterns:e},{end:t,fieldName:a,nestedPath:r})=>{const n=Object(d.flatten)(e.map((e=>e.fields.slice()))),i=r?`${r}.${a}`:a,s=n.filter((e=>e.name===i)).map((e=>Object.keys(R).filter((t=>{const{fieldTypes:a}=N(t);return!a||a.includes(e.type)})).map((e=>({type:k.QuerySuggestionTypes.Operator,text:e+" ",description:P(e),start:t,end:t})))));return Promise.resolve(Object(d.flatten)(s))},conjunction:(e,{text:t,end:a})=>{let r=[];return t.endsWith(" ")&&(r=Object.keys(L).map((e=>({type:k.QuerySuggestionTypes.Conjunction,text:`${e} `,description:L[e],start:a,end:a})))),Promise.resolve(r)}};return e=>{const{query:a,selectionStart:r,selectionEnd:n}=e,i=`${a.substr(0,r)}${D}${a.substr(n)}`;return Promise.all(((e,a)=>{try{const r=Object(c.t)(e,{cursorSymbol:D,parseCursor:!0});return r.suggestionTypes.map((e=>t[e](a,r)))}catch(e){return[]}})(i,e)).then((e=>{return t=Object(d.flatten)(e),Object(d.uniqBy)(t,(({type:e,text:t,start:a,end:r})=>[e,t,a,r].join("|")));var t}))}};class autocomplete_service_AutocompleteService{constructor(e){i()(this,"autocompleteConfig",void 0),i()(this,"querySuggestionProviders",new Map),i()(this,"getValueSuggestions",void 0),i()(this,"getQuerySuggestions",(e=>{const{language:t}=e,a=this.querySuggestionProviders.get(t);if(a)return a(e)})),i()(this,"hasQuerySuggestions",(e=>this.querySuggestionProviders.has(e))),this.initializerContext=e;const{autocomplete:t}=e.config.get();this.autocompleteConfig=t}setup(e,{timefilter:t,usageCollection:a}){const{autocomplete:r}=this.initializerContext.config.get(),{terminateAfter:n,timeout:i}=r.valueSuggestions,s=((e,t)=>{const a=async()=>{const[{application:t}]=await e();return t.currentAppId$.pipe(Object(f.first)()).toPromise()};return{trackCall:async()=>{const e=await a();return null==t?void 0:t.reportUiCounter(e,m.METRIC_TYPE.LOADED,b.CALL)},trackRequest:async()=>{const e=await a();return null==t?void 0:t.reportUiCounter(e,m.METRIC_TYPE.LOADED,b.REQUEST)},trackResult:async()=>{const e=await a();return null==t?void 0:t.reportUiCounter(e,m.METRIC_TYPE.LOADED,b.RESULT)},trackError:async()=>{const e=await a();return null==t?void 0:t.reportUiCounter(e,m.METRIC_TYPE.LOADED,b.ERROR)}}})(e.getStartServices,a);return this.getValueSuggestions=this.autocompleteConfig.valueSuggestions.enabled?h(e,{timefilter:t,usageCollector:s}):p,this.autocompleteConfig.querySuggestions.enabled&&this.querySuggestionProviders.set("kuery",B(e)),{getQuerySuggestions:this.getQuerySuggestions,getAutocompleteSettings:()=>({terminateAfter:o.a.duration(n).asMilliseconds(),timeout:o.a.duration(i).asMilliseconds()})}}start(){return{getQuerySuggestions:this.getQuerySuggestions,hasQuerySuggestions:this.hasQuerySuggestions,getValueSuggestions:this.getValueSuggestions}}clearProviders(){this.querySuggestionProviders.clear()}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return AggParamType}));var r=a(3),n=a.n(r),i=a(34),s=a(27);class AggParamType extends s.a{constructor(e){super(e),n()(this,"makeAgg",void 0),n()(this,"allowedAggs",[]),e.allowedAggs&&(this.allowedAggs=e.allowedAggs),e.write||(this.write=(e,t)=>{e.params[this.name]&&e.params[this.name].length&&(t.params[this.name]=e.params[this.name])}),e.serialize||(this.serialize=e=>e.serialize()),e.deserialize||(this.deserialize=(e,t)=>{if(!t)throw new Error("aggConfig was not provided to AggParamType deserialize function");return this.makeAgg(t,e)}),e.toExpressionAst||(this.toExpressionAst=e=>{if(!e||!e.toExpressionAst)throw new Error("aggConfig was not provided to AggParamType toExpressionAst function");return e.toExpressionAst()}),this.makeAgg=e.makeAgg,this.valueType=i.a}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return FieldParamType}));var r=a(3),n=a.n(r),i=a(0),s=a(26),o=a(27),l=a(21),u=a(39),c=a(17);const d=Object(l.o)("type");class FieldParamType extends o.a{constructor(e){super(e),n()(this,"required",!0),n()(this,"scriptable",!0),n()(this,"filterFieldTypes",void 0),n()(this,"onlyAggregatable",void 0),n()(this,"getAvailableFields",(e=>e.getIndexPattern().fields.filter((e=>{const{onlyAggregatable:t,scriptable:a,filterFieldTypes:r}=this;return!(t&&(!e.aggregatable||Object(c.isNestedField)(e))||!a&&e.scripted)&&0!==d([e],r).length})))),this.filterFieldTypes=e.filterFieldTypes||"*",this.onlyAggregatable=!1!==e.onlyAggregatable,e.write||(this.write=(e,t)=>{const a=e.getField();if(!a)throw new TypeError(i.i18n.translate("data.search.aggs.paramTypes.field.requiredFieldParameterErrorMessage",{defaultMessage:"{fieldParameter} is a required parameter",values:{fieldParameter:'"field"'}}));if(a.type===u.b.MISSING)throw new s.SavedFieldNotFound(i.i18n.translate("data.search.aggs.paramTypes.field.notFoundSavedFieldParameterErrorMessage",{defaultMessage:'The field "{fieldParameter}" associated with this object no longer exists in the index pattern. Please use another field.',values:{fieldParameter:a.name}}));const r=this.getAvailableFields(e).find((e=>e.name===a.name));var n;if(!r)throw new s.SavedFieldTypeInvalidForAgg(i.i18n.translate("data.search.aggs.paramTypes.field.invalidSavedFieldParameterErrorMessage",{defaultMessage:'Saved field "{fieldParameter}" of index pattern "{indexPatternTitle}" is invalid for use with the "{aggType}" aggregation. Please select a new field.',values:{fieldParameter:a.name,aggType:null==e||null===(n=e.type)||void 0===n?void 0:n.title,indexPatternTitle:e.getIndexPattern().title}}));r.scripted?t.params.script={source:r.script,lang:r.lang}:t.params.field=r.name}),this.serialize=e=>e.name,this.deserialize=(e,t)=>{if(!t)throw new Error("aggConfig was not provided to FieldParamType deserialize function");const a=t.getIndexPattern().fields.getByName(e);return a||new c.IndexPatternField({type:u.b.MISSING,name:e,searchable:!1,aggregatable:!1})}}}},function(e,t,a){"use strict";function r({from:e,to:t},a){return e?t?a(e)+" to "+a(t):"After "+a(e):"Before "+a(t)}a.d(t,"a",(function(){return r}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=(e,t)=>{if("mask"===e.type)return t(e.mask);return`${e.from?t(e.from):"-Infinity"} to ${e.to?t(e.to):"Infinity"}`}},function(e,t,a){"use strict";a.d(t,"a",(function(){return OptionedParamType}));var r=a(3),n=a.n(r),i=a(27);class OptionedParamType extends i.a{constructor(e){super(e),n()(this,"options",void 0),e.write||(this.write=(e,t)=>{t.params[this.name]=e.params[this.name].value}),e.serialize||(this.serialize=e=>e.value),e.deserialize||(this.deserialize=e=>this.options.find((t=>t.value===e))),this.options=e.options||[]}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return StringParamType}));var r=a(27);class StringParamType extends r.a{constructor(e){super(e),e.write||(this.write=(e,t)=>{e.params[this.name]&&e.params[this.name].length&&(t.params[this.name]=e.params[this.name])})}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return JsonParamType}));var r=a(1),n=a.n(r),i=a(27);class JsonParamType extends i.a{constructor(e){super(e),this.name=e.name||"json",e.write||(this.write=(e,t)=>{let a;const r=e.params[this.name];if(r){try{a=JSON.parse(function(e){const t=e.split('"""');for(let e=1;e<t.length-1;e+=2)t[e]=JSON.stringify(t[e]);return t.join("")}(r))}catch(e){return}t.params=function(e,t){function a(e,t){return n.a.isPlainObject(e)&&n.a.isPlainObject(t)?function(e,t){return n()(e).keys().union(n.a.keys(t)).transform((function(r,n){const i=a(e[n],t[n]);void 0!==i&&(r[n]=i)}),{}).value()}(e,t):Array.isArray(e)&&Array.isArray(t)?function(e,t){return n.a.times(Math.max(e.length,t.length),(function(r){return a(e[r],t[r])}))}(e,t):null!==t?void 0!==t?t:e:void 0}return a(e,t)}(t.params,a)}})}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(0),n=a(5),i=a(80),s=a(44);const o=({getStartDependencies:e})=>({name:"esdsl",type:"es_raw_response",inputTypes:["kibana_context","null"],help:r.i18n.translate("data.search.esdsl.help",{defaultMessage:"Run Elasticsearch request"}),args:{dsl:{types:["string"],aliases:["_","q","query"],help:r.i18n.translate("data.search.esdsl.q.help",{defaultMessage:"Query DSL"}),required:!0},index:{types:["string"],help:r.i18n.translate("data.search.esdsl.index.help",{defaultMessage:"ElasticSearch index to query"}),required:!0},size:{types:["number"],help:r.i18n.translate("data.search.esdsl.size.help",{defaultMessage:"ElasticSearch searchAPI size parameter"}),default:10}},async fn(t,a,{inspectorAdapters:o,abortSignal:l,getKibanaRequest:u}){const{search:c,uiSettingsClient:d}=await e(u),g=JSON.parse(a.dsl);if(t){const e=Object(s.t)(d),a=Object(n.f)(void 0,t.query||[],t.filters||[],e);g.query&&a.bool.must.push(g.query),g.query=a}o.requests||(o.requests=new i.RequestAdapter);const p=o.requests.start(r.i18n.translate("data.search.dataRequest.title",{defaultMessage:"Data"}),{description:r.i18n.translate("data.search.es_search.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});p.stats({indexPattern:{label:r.i18n.translate("data.search.es_search.indexPatternLabel",{defaultMessage:"Index pattern"}),value:a.index,description:r.i18n.translate("data.search.es_search.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})}});try{const{rawResponse:e}=await c({params:{index:a.index,size:a.size,body:g}},{abortSignal:l}).toPromise(),t={};return null!=e&&e.took&&(t.queryTime={label:r.i18n.translate("data.search.es_search.queryTimeLabel",{defaultMessage:"Query time"}),value:r.i18n.translate("data.search.es_search.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:e.took}}),description:r.i18n.translate("data.search.es_search.queryTimeDescription",{defaultMessage:"The time it took to process the query. Does not include the time to send the request or parse it in the browser."})}),null!=e&&e.hits&&(t.hitsTotal={label:r.i18n.translate("data.search.es_search.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:`${e.hits.total}`,description:r.i18n.translate("data.search.es_search.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})},t.hits={label:r.i18n.translate("data.search.es_search.hitsLabel",{defaultMessage:"Hits"}),value:`${e.hits.hits.length}`,description:r.i18n.translate("data.search.es_search.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}),p.stats(t).ok({json:e}),p.json(g),{type:"es_raw_response",body:e}}catch(e){throw p.error({json:e}),e}}})},function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(4),n=a.n(r),i=a(16),s=a(28);const o=()=>n.a.createElement("div",null),l=n.a.lazy((()=>Promise.all([a.e(0),a.e(1),a.e(4)]).then(a.bind(null,117)))),u=Object(i.injectI18n)(Object(s.withKibana)((e=>n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(o,null)},n.a.createElement(l,e)))))},function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return f})),a.d(t,"d",(function(){return c}));var r=a(1);const n=["_id","_ignored","_index","_node","_primary_term","_routing","_score","_seq_no","_shard","_source","_type","_version"];function i(e,t,a){var i;const s={};function o(e,n=""){for(const[i,l]of Object.entries(e)){const e=n+i,u=null==t?void 0:t.fields.getByName(e);if(!1===(null==a?void 0:a.shallow)){const t="nested"===(null==u?void 0:u.type);if(Array.isArray(l)&&!t){l.forEach((t=>Object(r.isPlainObject)(t)&&o(t,e+".")));continue}}else if(void 0!==s[e])continue;const c=u&&"conflict"!==u.type,d=!Object(r.isPlainObject)(l);c||d?s[e]?Array.isArray(s[e])?s[e].push(l):s[e]=[s[e],l]:s[e]=l:o(l,e+".")}}return o(e.fields||{}),!1!==(null==a?void 0:a.source)&&e._source?o(e._source):null!=a&&a.includeIgnoredValues&&e.ignored_field_values&&Object.entries(e.ignored_field_values).forEach((([e,t])=>{s[e]?Array.isArray(s[e])?s[e]=[...s[e],...t]:s[e]=[s[e],...t]:s[e]=t})),null==t||null===(i=t.metaFields)||void 0===i||i.forEach((t=>{var a;(a=t,n.includes(a)&&"_source"!==t)&&(s[t]=e[t])})),new Proxy(s,{ownKeys:e=>Reflect.ownKeys(e).sort(((e,a)=>{var r,n;const i=null==t||null===(r=t.metaFields)||void 0===r?void 0:r.includes(String(e)),s=null==t||null===(n=t.metaFields)||void 0===n?void 0:n.includes(String(a));return i&&s?String(e).localeCompare(String(a)):i?1:s?-1:String(e).localeCompare(String(a))}))})}const s=(e,t,a={})=>{const r=[],n=e.hits.hits.map((e=>{const n=i(e,t,a);for(const[e,a]of Object.entries(n)){const n=null==t?void 0:t.fields.getByName(e),i=(null==n?void 0:n.name)||e;if(!r.find((e=>e.id===i))){const e=(null==n?void 0:n.type)||typeof a,s=n&&(null==t?void 0:t.getFormatterForField(n));r.push({id:i,name:i,meta:{type:e,field:i,index:null==t?void 0:t.id,params:s?s.toJSON():void 0}})}}return n})).filter((e=>e));return{type:"datatable",columns:r,rows:n}};var o=a(3),l=a.n(o);const u=(e,t)=>{let a="";try{a=e.makeLabel()}catch(e){}return{aggConfig:e,id:`col-${t}-${e.id}`,name:a}};function c(e,t){if(t)return e.map(((e,t)=>u(e,t)));const a=[],n=Object(r.groupBy)(e,(e=>e.type.type));if(!n.buckets)return n.metrics.map(((e,t)=>u(e,t)));let i=0;return n.buckets.forEach((e=>{a.push(u(e,i++)),n.metrics.forEach((e=>{a.push(u(e,i++))}))})),a}class response_writer_TabbedAggResponseWriter{constructor(e,t){l()(this,"columns",void 0),l()(this,"rows",[]),l()(this,"bucketBuffer",[]),l()(this,"metricBuffer",[]),l()(this,"partialRows",void 0),l()(this,"params",void 0),this.partialRows=t.partialRows||!1,this.params=t,this.columns=c(e.getResponseAggs(),!t.metricsAtAllLevels),this.rows=[]}row(){const e={};this.bucketBuffer.forEach((t=>{e[t.id]=t.value})),this.metricBuffer.forEach((t=>{e[t.id]=t.value}));const t=!this.columns.every((t=>e.hasOwnProperty(t.id)))&&!this.partialRows;Object(r.isEmpty)(e)||t||this.rows.push(e)}response(){return{type:"datatable",columns:this.columns.map((e=>{var t,a,r,n,i,s,o,l,u,c;return{id:e.id,name:e.name,meta:{type:e.aggConfig.type.valueType||(null===(t=e.aggConfig.params.field)||void 0===t?void 0:t.type)||"number",field:null===(a=e.aggConfig.params.field)||void 0===a?void 0:a.name,index:null===(r=e.aggConfig.getIndexPattern())||void 0===r?void 0:r.title,params:e.aggConfig.toSerializedFieldFormat(),source:"esaggs",sourceParams:{indexPatternId:null===(n=e.aggConfig.getIndexPattern())||void 0===n?void 0:n.id,appliedTimeRange:null!==(i=e.aggConfig.params.field)&&void 0!==i&&i.name&&this.params.timeRange&&this.params.timeRange.timeFields&&this.params.timeRange.timeFields.includes(null===(s=e.aggConfig.params.field)||void 0===s?void 0:s.name)?{from:null===(o=this.params.timeRange)||void 0===o||null===(l=o.from)||void 0===l?void 0:l.toISOString(),to:null===(u=this.params.timeRange)||void 0===u||null===(c=u.to)||void 0===c?void 0:c.toISOString()}:void 0,...e.aggConfig.serialize()}}}})),rows:this.rows}}}var d=a(6),g=a.n(d);const p=(e,t)=>(null==e?void 0:e.from)===(null==t?void 0:t.from)&&(null==e?void 0:e.to)===(null==t?void 0:t.to);class buckets_TabifyBuckets{constructor(e,t,a){l()(this,"length",void 0),l()(this,"objectMode",void 0),l()(this,"buckets",void 0),l()(this,"_keys",[]),e&&e.buckets?this.buckets=e.buckets:this.buckets=e?[e]:[],this.objectMode=Object(r.isPlainObject)(this.buckets),this.objectMode?(this._keys=Object(r.keys)(this.buckets),this.length=this._keys.length):this.length=this.buckets.length,this.length&&t&&(this.orderBucketsAccordingToParams(t),t.drop_partials&&this.dropPartials(t,a))}forEach(e){const t=this.buckets;this.objectMode?this._keys.forEach((a=>{e(t[a],a)})):t.forEach((t=>{e(t,t.key)}))}orderBucketsAccordingToParams(e){if(e.filters&&this.objectMode)this._keys=e.filters.map((e=>{const t=Object(r.get)(e,"input.query.query_string.query",e.input.query),a="string"==typeof t?t:JSON.stringify(t);return e.label||a||"*"}));else if(e.ranges&&this.objectMode)this._keys=e.ranges.map((e=>Object(r.findKey)(this.buckets,(t=>p(t,e)))));else if(e.ranges&&"date"!==e.field.type){let t=e.ranges;e.ipRangeType&&(t="mask"===e.ipRangeType?t.mask:t.fromTo),this.buckets=t.map((e=>e.mask?this.buckets.find((t=>t.key===e.mask)):this.buckets.find((t=>p(t,e)))))}}dropPartials(e,t){if(!t||this.buckets.length<=1||this.objectMode||!t.timeFields.includes(e.field.name))return;const a=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter((e=>!g()(e.key).isBefore(t.from)&&!g()(e.key+a).isAfter(t.to))),this.length=this.buckets.length}}var h=a(30);function f(e,t,a){var n,i;function s(e,t,n,i,l){const u=t.columns.shift();if(u){const c=u.aggConfig;if(c.getParam("scaleMetricValues")){const t=c.write(e);l*=t.metricScale||1}switch(c.type.type){case h.d.Buckets:const d=Object(r.get)(n,c.id),g=new buckets_TabifyBuckets(d,c.params,null==a?void 0:a.timeRange);g.length?g.forEach(((a,r)=>{const n=c.getKey(a,r),i=void 0!==n;i&&t.bucketBuffer.push({id:u.id,value:n}),s(e,t,a,c.getKey(a,r),l),i&&t.bucketBuffer.pop()})):null!=a&&a.partialRows?(t.columns.unshift(u),o(e,t,n,i,l),t.columns.shift()):t.row();break;case h.d.Metrics:let p=c.getValue(n);1!==l&&(p*=l),t.metricBuffer.push({id:u.id,value:p}),t.columns.length?s(e,t,n,i,l):t.row(),t.metricBuffer.pop()}t.columns.unshift(u)}}function o(e,t,a,r,n){const i=t.columns.shift();if(i){switch(i.aggConfig.type.type){case h.d.Metrics:return t.columns.unshift(i),void s(e,t,a,r,n);case h.d.Buckets:o(e,t,a,r,n)}t.columns.unshift(i)}}const l=new response_writer_TabbedAggResponseWriter(e,a||{});return s(e,l,{...t.aggregations,doc_count:(null===(n=t.aggregations)||void 0===n?void 0:n.doc_count)||(null===(i=t.hits)||void 0===i?void 0:i.total)},"",1),l.response()}},function(e,t,a){var r=a(92),n=a(93),i=n;i.v1=r,i.v4=n,e.exports=i},function(e,t,a){"use strict";a.d(t,"a",(function(){return time_buckets_TimeBuckets}));var r=a(3),n=a.n(r),i=a(1),s=a(6),o=a.n(s),l=a(21),u=a(47),c=a(19);const d=a.n(c).a.unitsDesc,g=d.indexOf("w");var p=a(23);function h(e){return e&&"isValid"in e&&e.isValid()}function f(e){return o.a.isDuration(e)&&Boolean(+e)}class time_buckets_TimeBuckets{constructor(e){n()(this,"_timeBucketConfig",void 0),n()(this,"_lb",void 0),n()(this,"_ub",void 0),n()(this,"_originalInterval",null),n()(this,"_i",void 0),this._timeBucketConfig=e}getDuration(){if(void 0===this._ub||void 0===this._lb||!this.hasBounds())return;const e=this._ub.valueOf()-this._lb.valueOf();return o.a.duration(e,"ms")}setBounds(e){if(!e)return this.clearBounds();let t;t=Object(i.isPlainObject)(e)&&!Array.isArray(e)?[e.min,e.max]:Array.isArray(e)?e:[];const a=Object(i.sortBy)(t,Number);if(!(2===a.length&&a.every(h)))throw this.clearBounds(),new Error("invalid bounds set: "+e);this._lb=a.shift(),this._ub=a.pop();const r=this.getDuration();if(!r||r.asSeconds()<0)throw new TypeError("Intervals must be positive")}clearBounds(){this._lb=this._ub=void 0}hasBounds(){return h(this._ub)&&h(this._lb)}getBounds(){if(this.hasBounds())return{min:this._lb,max:this._ub}}setInterval(e){var t;if(this._originalInterval=null,this._i=(t=e,Object(i.isObject)(t)?e.val:e),this._i&&this._i!==p.a){if(Object(i.isString)(this._i)){const e=Object(l.m)(this._i);f(e)&&(this._originalInterval=this._i,this._i=e)}if(!f(this._i))throw new TypeError('"'+this._i+'" is not a valid interval.')}else this._i=p.a}getInterval(e=!0){const t=this.getDuration(),a=f(this._i)?this._i:Object(u.c)(this._timeBucketConfig["histogram:barTarget"],Number(t)),r=e=>{if(!this.hasBounds()||!t)return e;const a=this._timeBucketConfig["histogram:maxBars"],r=Object(u.b)(a,Number(t));let i;return e<r?(i=r,e=n(e),Object.assign(i,{preScaled:e,scale:Number(e)/Number(i),scaled:!0})):e},n=t=>{let a;var r;!t.scaled&&this._originalInterval&&(a=null===(r=Object(l.p)(this._originalInterval))||void 0===r?void 0:r.unit);const n=e||!this._originalInterval?function(e,t){for(let a=0;a<d.length;a++){const r=d[a],n=e.as(r);if(n>=1&&Math.floor(n)===n){if(1===n&&t&&r!==t)continue;if(a<=g&&1!==n)continue;return{value:n,unit:r,expression:n+r}}}const a=e.as("ms");return{value:a,unit:"ms",expression:a+"ms"}}(t,a):function(e){const{value:t,unit:a}=Object(l.l)(e);return{value:t,unit:a,expression:e}}(this._originalInterval),i=o.a.normalizeUnits(n.unit);return Object.assign(t,{description:1===n.value?i:n.value+" "+i+"s",esValue:n.value,esUnit:n.unit,expression:n.expression})};return n(e?r(a):a)}getScaledDateFormat(){const e=this.getInterval(),t=this._timeBucketConfig["dateFormat:scaled"];for(let a=t.length-1;a>=0;a--){const r=t[a];if(!r[0]||e&&e>=o.a.duration(r[0]))return r[1]}return this._timeBucketConfig.dateFormat}}},function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return u}));var r=a(4),n=a.n(r);const i=()=>n.a.createElement("div",null),s=n.a.lazy((()=>a.e(3).then(a.bind(null,111)))),o=e=>n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(i,null)},n.a.createElement(s,e)),l=n.a.lazy((()=>a.e(1).then(a.bind(null,110)))),u=e=>n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(i,null)},n.a.createElement(l,e))},function(e,t,a){"use strict";function r(e,t,a,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,r.prototype),i.expected=t,i.found=a,i.location=n,i.name="SyntaxError",i}function n(e,t,a){return a=a||" ",e.length>t?e:(t-=e.length,e+(a+=a.repeat(t)).slice(0,t))}!function(e,t){function a(){this.constructor=e}a.prototype=t.prototype,e.prototype=new a}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var a,r=null;for(a=0;a<e.length;a++)if(e[a].source===this.location.source){r=e[a].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source+":"+i.line+":"+i.column;if(r){var o=this.location.end,l=n("",i.line.toString().length),u=r[i.line-1],c=i.line===o.line?o.column:u.length+1;t+="\n --\x3e "+s+"\n"+l+" |\n"+i.line+" | "+u+"\n"+l+" | "+n("",i.column-1)+n("",c-i.column,"^")}else t+="\n at "+s}return t},r.buildMessage=function(e,t){var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function s(e){return a[e.type](e)}return"Expected "+function(e){var t,a,r=e.map(s);if(r.sort(),r.length>0){for(t=1,a=1;t<r.length;t++)r[t-1]!==r[t]&&(r[a]=r[t],a++);r.length=a}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var a,n={},i=(t=void 0!==t?t:{}).grammarSource,s={start:it,Literal:yt},o=it,l="(",u=")",c=":",d="{",g="}",p="or",h="and",f="not",m='"',b="\\",y="*",_="\\t",v="\\r",S="\\n",k="u",x="<=",E=">=",T="<",I=">",w="@kuery-cursor@",F=/^[\\"]/,A=/^[^"]/,M=/^[\\():<>"*{}]/,O=/^[0-9a-f]/i,R=/^[ \t\r\n\xA0]/,N=Xe("(",!1),P=Xe(")",!1),C=Xe(":",!1),j=Xe("{",!1),L=Xe("}",!1),D=et("fieldName"),B=et("value"),q=et("OR"),G=Xe("or",!0),Q=et("AND"),U=Xe("and",!0),z=et("NOT"),$=Xe("not",!0),H=et("literal"),K=Xe('"',!1),V=Xe("\\",!1),Y=Ze(["\\",'"'],!1,!1),W=Ze(['"'],!0,!1),J={type:"any"},X=Xe("*",!1),Z=Xe("\\t",!1),ee=Xe("\\r",!1),te=Xe("\\n",!1),ae=Ze(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),re=Xe("u",!1),ne=Ze([["0","9"],["a","f"]],!1,!0),ie=Xe("<=",!1),se=Xe(">=",!1),oe=Xe("<",!1),le=Xe(">",!1),ue=et("whitespace"),ce=Ze([" ","\t","\r","\n",""],!1,!1),de=Xe("@kuery-cursor@",!1),ge=function(e,t){return"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:null!==e?e:Nt.function.buildNode("is","*","*")},pe=function(e,t){return t},he=function(e,t){const a=[e,...t],r=Mt&&a.find((e=>"cursor"===e.type));return r||Pt("or",a)},fe=function(e,t){const a=[e,...t],r=Mt&&a.find((e=>"cursor"===e.type));return r||Pt("and",a)},me=function(e){return"cursor"===e.type?e:Pt("not",[e])},be=function(e,t){return"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:e},ye=function(e,t,a){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===a.type?{...a,suggestionTypes:["conjunction"]}:Pt("nested",[e,t])},_e=function(e,t,a){if("cursor"===a.type)return{...a,suggestionTypes:["conjunction"]};const r=Lt(t,a);return Pt("range",[e,r])},ve=function(e,t){return"cursor"===t.type?{...t,fieldName:e.value,suggestionTypes:["value","conjunction"]}:t(e)},Se=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(Ct(null))},ke=function(e,t){return"cursor"===t.type?{...t,suggestionTypes:["conjunction"]}:e},xe=function(e,t){return t},Ee=function(e,t){const a=[e,...t],r=Mt&&a.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Pt("or",a.map((t=>t(e))))},Te=function(e,t){const a=[e,...t],r=Mt&&a.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Pt("and",a.map((t=>t(e))))},Ie=function(e){return"cursor"===e.type?{...list,suggestionTypes:["value"]}:t=>Pt("not",[e(t)])},we=function(e){if("cursor"===e.type)return e;const t=Ct(!0);return a=>Pt("is",[a,e,t])},Fe=function(e){if("cursor"===e.type)return e;!Rt&&"wildcard"===e.type&&Nt.wildcard.hasLeadingWildcard(e)&&function(e,t){throw t=void 0!==t?t:at(Ke,He),function(e,t){return new r(e,null,null,t)}(e,t)}("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const t=Ct(!1);return a=>Pt("is",[a,e,t])},Ae=function(){return Mt},Me=function(t,a,r){const{start:n,end:i}=at(Ke,He);return{type:"cursor",start:n.offset,end:i.offset-a.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(Ke,He).replace(a,"")}},Oe=function(e){return Ct(e.join(""))},Re=function(e){return e},Ne=function(e){const t=e.join("").trim();return"null"===t?Ct(null):"true"===t?Ct(!0):"false"===t?Ct(!1):e.includes(Dt)?jt(t):Ct(t)},Pe=function(){return Dt},Ce=function(){return"\t"},je=function(){return"\r"},Le=function(){return"\n"},De=function(e){return e},Be=function(e){return e},qe=function(e){return String.fromCharCode(parseInt(e,16))},Ge=function(){return"lte"},Qe=function(){return"gte"},Ue=function(){return"lt"},ze=function(){return"gt"},$e=function(){return Ot},He=0,Ke=0,Ve=[{line:1,column:1}],Ye=0,We=[],Je=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=s[t.startRule]}function Xe(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ze(e,t,a){return{type:"class",parts:e,inverted:t,ignoreCase:a}}function et(e){return{type:"other",description:e}}function tt(t){var a,r=Ve[t];if(r)return r;for(a=t-1;!Ve[a];)a--;for(r={line:(r=Ve[a]).line,column:r.column};a<t;)10===e.charCodeAt(a)?(r.line++,r.column=1):r.column++,a++;return Ve[t]=r,r}function at(e,t){var a=tt(e),r=tt(t);return{source:i,start:{offset:e,line:a.line,column:a.column},end:{offset:t,line:r.line,column:r.column}}}function rt(e){He<Ye||(He>Ye&&(Ye=He,We=[]),We.push(e))}function nt(e,t,a){return new r(r.buildMessage(e,t),e,t,a)}function it(){var e,t,a,r;for(e=He,t=[],a=Ft();a!==n;)t.push(a),a=Ft();return(a=st())===n&&(a=null),(r=xt())!==n?(Ke=e,e=ge(a,r)):(He=e,e=n),e}function st(){var e,t,a,r,i;if(e=He,(t=ot())!==n){if(a=[],r=He,ft()!==n&&(i=ot())!==n?(Ke=r,r=pe(t,i)):(He=r,r=n),r!==n)for(;r!==n;)a.push(r),r=He,ft()!==n&&(i=ot())!==n?(Ke=r,r=pe(t,i)):(He=r,r=n);else a=n;a!==n?(Ke=e,e=he(t,a)):(He=e,e=n)}else He=e,e=n;return e===n&&(e=ot()),e}function ot(){var e,t,a,r,i;if(e=He,(t=lt())!==n){if(a=[],r=He,mt()!==n&&(i=lt())!==n?(Ke=r,r=pe(t,i)):(He=r,r=n),r!==n)for(;r!==n;)a.push(r),r=He,mt()!==n&&(i=lt())!==n?(Ke=r,r=pe(t,i)):(He=r,r=n);else a=n;a!==n?(Ke=e,e=fe(t,a)):(He=e,e=n)}else He=e,e=n;return e===n&&(e=lt()),e}function lt(){var e,t;return e=He,bt()!==n&&(t=ut())!==n?(Ke=e,e=me(t)):(He=e,e=n),e===n&&(e=ut()),e}function ut(){var t,a,r,i,s,o;if(t=He,40===e.charCodeAt(He)?(a=l,He++):(a=n,0===Je&&rt(N)),a!==n){for(r=[],i=Ft();i!==n;)r.push(i),i=Ft();(i=st())!==n&&(s=xt())!==n?(41===e.charCodeAt(He)?(o=u,He++):(o=n,0===Je&&rt(P)),o!==n?(Ke=t,t=be(i,s)):(He=t,t=n)):(He=t,t=n)}else He=t,t=n;return t===n&&(t=function(){var t,a,r,i,s,o,l,u,p,h;if(t=He,a=ct(),a!==n){for(r=[],i=Ft();i!==n;)r.push(i),i=Ft();if(58===e.charCodeAt(He)?(i=c,He++):(i=n,0===Je&&rt(C)),i!==n){for(s=[],o=Ft();o!==n;)s.push(o),o=Ft();if(123===e.charCodeAt(He)?(o=d,He++):(o=n,0===Je&&rt(j)),o!==n){for(l=[],u=Ft();u!==n;)l.push(u),u=Ft();(u=st())!==n&&(p=xt())!==n?(125===e.charCodeAt(He)?(h=g,He++):(h=n,0===Je&&rt(L)),h!==n?(Ke=t,t=ye(a,u,p)):(He=t,t=n)):(He=t,t=n)}else He=t,t=n}else He=t,t=n}else He=t,t=n;t===n&&(t=function(){var t;t=function(){var t,a,r,i,s,o;if(t=He,a=ct(),a!==n){for(r=[],i=Ft();i!==n;)r.push(i),i=Ft();if(i=function(){var t,a;t=He,e.substr(He,2)===x?(a=x,He+=2):(a=n,0===Je&&rt(ie));a!==n&&(Ke=t,a=Ge());t=a,t===n&&(t=He,e.substr(He,2)===E?(a=E,He+=2):(a=n,0===Je&&rt(se)),a!==n&&(Ke=t,a=Qe()),(t=a)===n&&(t=He,60===e.charCodeAt(He)?(a=T,He++):(a=n,0===Je&&rt(oe)),a!==n&&(Ke=t,a=Ue()),(t=a)===n&&(t=He,62===e.charCodeAt(He)?(a=I,He++):(a=n,0===Je&&rt(le)),a!==n&&(Ke=t,a=ze()),t=a)));return t}(),i!==n){for(s=[],o=Ft();o!==n;)s.push(o),o=Ft();(o=yt())!==n?(Ke=t,t=_e(a,i,o)):(He=t,t=n)}else He=t,t=n}else He=t,t=n;return t}(),t===n&&(t=function(){var t,a,r,i,s,o;if(t=He,a=ct(),a!==n){for(r=[],i=Ft();i!==n;)r.push(i),i=Ft();if(58===e.charCodeAt(He)?(i=c,He++):(i=n,0===Je&&rt(C)),i!==n){for(s=[],o=Ft();o!==n;)s.push(o),o=Ft();(o=dt())!==n?(Ke=t,t=ve(a,o)):(He=t,t=n)}else He=t,t=n}else He=t,t=n;return t}(),t===n&&(t=function(){var e,t;e=He,t=ht(),t!==n&&(Ke=e,t=Se(t));return e=t,e}()));return t}());return t}()),t}function ct(){var e;return Je++,e=yt(),Je--,e===n&&(n,0===Je&&rt(D)),e}function dt(){var t,a,r,i,s,o;if(t=He,40===e.charCodeAt(He)?(a=l,He++):(a=n,0===Je&&rt(N)),a!==n){for(r=[],i=Ft();i!==n;)r.push(i),i=Ft();i=function(){var e,t,a,r,i;if(e=He,t=gt(),t!==n){if(a=[],r=He,ft()!==n&&(i=gt())!==n?(Ke=r,r=xe(t,i)):(He=r,r=n),r!==n)for(;r!==n;)a.push(r),r=He,ft()!==n&&(i=gt())!==n?(Ke=r,r=xe(t,i)):(He=r,r=n);else a=n;a!==n?(Ke=e,e=Ee(t,a)):(He=e,e=n)}else He=e,e=n;e===n&&(e=gt());return e}(),i!==n&&(s=xt())!==n?(41===e.charCodeAt(He)?(o=u,He++):(o=n,0===Je&&rt(P)),o!==n?(Ke=t,t=ke(i,s)):(He=t,t=n)):(He=t,t=n)}else He=t,t=n;return t===n&&(t=ht()),t}function gt(){var e,t,a,r,i;if(e=He,(t=pt())!==n){if(a=[],r=He,mt()!==n&&(i=pt())!==n?(Ke=r,r=xe(t,i)):(He=r,r=n),r!==n)for(;r!==n;)a.push(r),r=He,mt()!==n&&(i=pt())!==n?(Ke=r,r=xe(t,i)):(He=r,r=n);else a=n;a!==n?(Ke=e,e=Te(t,a)):(He=e,e=n)}else He=e,e=n;return e===n&&(e=pt()),e}function pt(){var e,t;return e=He,bt()!==n&&(t=dt())!==n?(Ke=e,e=Ie(t)):(He=e,e=n),e===n&&(e=dt()),e}function ht(){var e,t;return Je++,e=He,(t=_t())!==n&&(Ke=e,t=we(t)),(e=t)===n&&(e=He,(t=St())!==n&&(Ke=e,t=Fe(t)),e=t),Je--,e===n&&(t=n,0===Je&&rt(B)),e}function ft(){var t,a,r,i,s;if(Je++,t=He,a=[],(r=Ft())!==n)for(;r!==n;)a.push(r),r=Ft();else a=n;if(a!==n)if(e.substr(He,2).toLowerCase()===p?(r=e.substr(He,2),He+=2):(r=n,0===Je&&rt(G)),r!==n){if(i=[],(s=Ft())!==n)for(;s!==n;)i.push(s),s=Ft();else i=n;i!==n?t=a=[a,r,i]:(He=t,t=n)}else He=t,t=n;else He=t,t=n;return Je--,t===n&&(a=n,0===Je&&rt(q)),t}function mt(){var t,a,r,i,s;if(Je++,t=He,a=[],(r=Ft())!==n)for(;r!==n;)a.push(r),r=Ft();else a=n;if(a!==n)if(e.substr(He,3).toLowerCase()===h?(r=e.substr(He,3),He+=3):(r=n,0===Je&&rt(U)),r!==n){if(i=[],(s=Ft())!==n)for(;s!==n;)i.push(s),s=Ft();else i=n;i!==n?t=a=[a,r,i]:(He=t,t=n)}else He=t,t=n;else He=t,t=n;return Je--,t===n&&(a=n,0===Je&&rt(Q)),t}function bt(){var t,a,r,i;if(Je++,t=He,e.substr(He,3).toLowerCase()===f?(a=e.substr(He,3),He+=3):(a=n,0===Je&&rt($)),a!==n){if(r=[],(i=Ft())!==n)for(;i!==n;)r.push(i),i=Ft();else r=n;r!==n?t=a=[a,r]:(He=t,t=n)}else He=t,t=n;return Je--,t===n&&(a=n,0===Je&&rt(z)),t}function yt(){var e;return Je++,(e=_t())===n&&(e=St()),Je--,e===n&&(n,0===Je&&rt(H)),e}function _t(){var t,a,r,i,s,o,l;if(t=He,Ke=He,(a=(a=Ae())?void 0:n)!==n)if(34===e.charCodeAt(He)?(r=m,He++):(r=n,0===Je&&rt(K)),r!==n){for(i=[],s=vt();s!==n;)i.push(s),s=vt();if((s=At())!==n){for(o=[],l=vt();l!==n;)o.push(l),l=vt();34===e.charCodeAt(He)?(l=m,He++):(l=n,0===Je&&rt(K)),l!==n?(Ke=t,t=Me(i,s,o)):(He=t,t=n)}else He=t,t=n}else He=t,t=n;else He=t,t=n;if(t===n)if(t=He,34===e.charCodeAt(He)?(a=m,He++):(a=n,0===Je&&rt(K)),a!==n){for(r=[],i=vt();i!==n;)r.push(i),i=vt();34===e.charCodeAt(He)?(i=m,He++):(i=n,0===Je&&rt(K)),i!==n?(Ke=t,t=Oe(r)):(He=t,t=n)}else He=t,t=n;return t}function vt(){var t,a,r;return(t=Et())===n&&(t=It())===n&&(t=He,92===e.charCodeAt(He)?(a=b,He++):(a=n,0===Je&&rt(V)),a!==n?(F.test(e.charAt(He))?(r=e.charAt(He),He++):(r=n,0===Je&&rt(Y)),r!==n?(Ke=t,t=Re(r)):(He=t,t=n)):(He=t,t=n),t===n&&(t=He,a=He,Je++,r=At(),Je--,r===n?a=void 0:(He=a,a=n),a!==n?(A.test(e.charAt(He))?(r=e.charAt(He),He++):(r=n,0===Je&&rt(W)),r!==n?(Ke=t,t=Re(r)):(He=t,t=n)):(He=t,t=n))),t}function St(){var e,t,a,r,i,s;if(e=He,Ke=He,(t=(t=Ae())?void 0:n)!==n){for(a=[],r=kt();r!==n;)a.push(r),r=kt();if((r=At())!==n){for(i=[],s=kt();s!==n;)i.push(s),s=kt();Ke=e,e=Me(a,r,i)}else He=e,e=n}else He=e,e=n;if(e===n){if(e=He,t=[],(a=kt())!==n)for(;a!==n;)t.push(a),a=kt();else t=n;t!==n&&(Ke=e,t=Ne(t)),e=t}return e}function kt(){var t,a,r,i,s;return(t=Et())===n&&(t=function(){var t,a,r;t=He,92===e.charCodeAt(He)?(a=b,He++):(a=n,0===Je&&rt(V));a!==n&&(r=Tt())!==n?(Ke=t,t=Re(r)):(He=t,t=n);return t}(),t===n&&(t=It())===n&&(t=function(){var t,a,r;t=He,92===e.charCodeAt(He)?(a=b,He++):(a=n,0===Je&&rt(V));a!==n?(e.substr(He,2).toLowerCase()===p?(r=e.substr(He,2),He+=2):(r=n,0===Je&&rt(G)),r===n&&(e.substr(He,3).toLowerCase()===h?(r=e.substr(He,3),He+=3):(r=n,0===Je&&rt(U)),r===n&&(e.substr(He,3).toLowerCase()===f?(r=e.substr(He,3),He+=3):(r=n,0===Je&&rt($)))),r!==n?(Ke=t,t=De(r)):(He=t,t=n)):(He=t,t=n);return t}(),t===n&&(t=function(){var t,a;t=He,42===e.charCodeAt(He)?(a=y,He++):(a=n,0===Je&&rt(X));a!==n&&(Ke=t,a=Pe());return t=a,t}(),t===n&&(t=He,a=He,Je++,r=Tt(),Je--,r===n?a=void 0:(He=a,a=n),a!==n?(r=He,Je++,i=function(){var e;e=ft(),e===n&&(e=mt())===n&&(e=bt());return e}(),Je--,i===n?r=void 0:(He=r,r=n),r!==n?(i=He,Je++,s=At(),Je--,s===n?i=void 0:(He=i,i=n),i!==n?(e.length>He?(s=e.charAt(He),He++):(s=n,0===Je&&rt(J)),s!==n?(Ke=t,t=Re(s)):(He=t,t=n)):(He=t,t=n)):(He=t,t=n)):(He=t,t=n))))),t}function xt(){var e,t,a,r,i,s;if(e=He,Ke=He,(t=(t=Ae())?void 0:n)!==n){for(a=[],r=Ft();r!==n;)a.push(r),r=Ft();if((r=At())!==n){for(i=[],s=Ft();s!==n;)i.push(s),s=Ft();Ke=e,e=Me(a,r,i)}else He=e,e=n}else He=e,e=n;if(e===n)for(e=[],t=Ft();t!==n;)e.push(t),t=Ft();return e}function Et(){var t,a;return t=He,e.substr(He,2)===_?(a=_,He+=2):(a=n,0===Je&&rt(Z)),a!==n&&(Ke=t,a=Ce()),(t=a)===n&&(t=He,e.substr(He,2)===v?(a=v,He+=2):(a=n,0===Je&&rt(ee)),a!==n&&(Ke=t,a=je()),(t=a)===n&&(t=He,e.substr(He,2)===S?(a=S,He+=2):(a=n,0===Je&&rt(te)),a!==n&&(Ke=t,a=Le()),t=a)),t}function Tt(){var t;return M.test(e.charAt(He))?(t=e.charAt(He),He++):(t=n,0===Je&&rt(ae)),t}function It(){var t,a,r;return t=He,92===e.charCodeAt(He)?(a=b,He++):(a=n,0===Je&&rt(V)),a!==n?(r=function(){var t,a,r,i,s,o,l,u;t=He,117===e.charCodeAt(He)?(a=k,He++):(a=n,0===Je&&rt(re));a!==n?(r=He,i=He,(s=wt())!==n&&(o=wt())!==n&&(l=wt())!==n&&(u=wt())!==n?i=s=[s,o,l,u]:(He=i,i=n),(r=i!==n?e.substring(r,He):i)!==n?(Ke=t,t=qe(r)):(He=t,t=n)):(He=t,t=n);return t}(),r!==n?(Ke=t,t=Be(r)):(He=t,t=n)):(He=t,t=n),t}function wt(){var t;return O.test(e.charAt(He))?(t=e.charAt(He),He++):(t=n,0===Je&&rt(ne)),t}function Ft(){var t;return Je++,R.test(e.charAt(He))?(t=e.charAt(He),He++):(t=n,0===Je&&rt(ce)),Je--,t===n&&(n,0===Je&&rt(ue)),t}function At(){var t,a;return t=He,Ke=He,(Ae()?void 0:n)!==n?(e.substr(He,14)===w?(a=w,He+=14):(a=n,0===Je&&rt(de)),a!==n?(Ke=t,t=$e()):(He=t,t=n)):(He=t,t=n),t}const{parseCursor:Mt,cursorSymbol:Ot,allowLeadingWildcards:Rt=!0,helpers:{nodeTypes:Nt}}=t,Pt=Nt.function.buildNodeWithArgumentNodes,Ct=Nt.literal.buildNode,jt=Nt.wildcard.buildNode,Lt=Nt.namedArg.buildNode,{wildcardSymbol:Dt}=Nt.wildcard;if((a=o())!==n&&He===e.length)return a;throw a!==n&&He<e.length&&rt({type:"end"}),nt(We,Ye<e.length?e.charAt(Ye):null,Ye<e.length?at(Ye,Ye+1):at(Ye,Ye))}}},function(e,t,a){"use strict";var r=a(89);Object.defineProperty(t,"__esModule",{value:!0}),t.KbnFieldType=void 0;var n=r(a(3)),i=a(51);t.KbnFieldType=class KbnFieldType{constructor(e={}){(0,n.default)(this,"name",void 0),(0,n.default)(this,"sortable",void 0),(0,n.default)(this,"filterable",void 0),(0,n.default)(this,"esTypes",void 0),this.name=e.name||i.KBN_FIELD_TYPES.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}},function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var r=new Uint8Array(16);e.exports=function(){return a(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},function(e,t){for(var a=[],r=0;r<256;++r)a[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,n=a;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/dataViews/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){var r=a(88);function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}e.exports=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,a){e.exports=a(29)(2387)},function(e,t,a){e.exports=a(29)(1071)},function(e,t,a){e.exports=a(29)(2396)},function(e,t,a){e.exports=a(29)(2392)},function(e,t,a){e.exports=a(29)(2406)},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var r,n,i;if(Array.isArray(t)){if((r=t.length)!=a.length)return!1;for(n=r;0!=n--;)if(!e(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(a,i[n]))return!1;for(n=r;0!=n--;){var s=i[n];if(!e(t[s],a[s]))return!1}return!0}return t!=t&&a!=a}},function(e,t,a){var r="undefined"!=typeof JSON?JSON:a(94);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var a=t.space||"";"number"==typeof a&&(a=Array(a+1).join(" "));var s,o="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},u=t.cmp&&(s=t.cmp,function(e){return function(t,a){var r={key:t,value:e[t]},n={key:a,value:e[a]};return s(r,n)}}),c=[];return function e(t,s,d,g){var p=a?"\n"+new Array(g+1).join(a):"",h=a?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=l.call(t,s,d))){if("object"!=typeof d||null===d)return r.stringify(d);if(n(d)){for(var f=[],m=0;m<d.length;m++){var b=e(d,m,d[m],g+1)||r.stringify(null);f.push(p+a+b)}return"["+f.join(",")+p+"]"}if(-1!==c.indexOf(d)){if(o)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(d);var y=i(d).sort(u&&u(d));for(f=[],m=0;m<y.length;m++){var _=e(d,s=y[m],d[s],g+1);if(_){var v=r.stringify(s)+h+_;f.push(p+a+v)}}return c.splice(c.indexOf(d),1),"{"+f.join(",")+p+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},a=[];for(var r in e)t.call(e,r)&&a.push(r);return a}},function(e,t,a){a.r(t);var r=__kbnBundles__.get("entry/core/public/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,a){"use strict";const r=a(106),n=a(107),i=a(108);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=a):r[e]=a};case"bracket":return(e,a,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],a):r[e]=[a]:r[e]=a};case"comma":case"separator":return(t,a,r)=>{const n="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);r[t]=n};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const n of e.split("&")){let[e,s]=i(t.decode?n.replace(/\+/g," "):n,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:l(s,t),a(l(e,t),s,r)}for(const e of Object.keys(r)){const a=r[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=g(a[e],t);else r[e]=g(a,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const a=r[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=u(a):e[t]=a,e}),Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],r=function(e){switch(e.arrayFormat){case"index":return t=>(a,r)=>{const n=a.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?a:null===r?[...a,[o(t,e),"[",n,"]"].join("")]:[...a,[o(t,e),"[",o(n,e),"]=",o(r,e)].join("")]};case"bracket":return t=>(a,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?a:null===r?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(r,e)].join("")];case"comma":case"separator":return t=>(a,r)=>null==r||0===r.length?a:0===a.length?[[o(t,e),"=",o(r,e)].join("")]:[[a,o(r,e)].join(e.arrayFormatSeparator)];default:return t=>(a,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?a:null===r?[...a,o(t,e)]:[...a,[o(t,e),"=",o(r,e)].join("")]}}(t),n={};for(const t of Object.keys(e))a(t)||(n[t]=e[t]);const i=Object.keys(n);return!1!==t.sort&&i.sort(t.sort),i.map((a=>{const n=e[a];return void 0===n?"":null===n?o(a,t):Array.isArray(n)?n.reduce(r(a),[]).join("&"):o(a,t)+"="+o(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,r]=i(e,"#");return Object.assign({url:a.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:l(r,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const r=c(e.url).split("?")[0]||"",n=t.extract(e.url),i=t.parse(n,{sort:!1}),s=Object.assign(i,e.query);let l=t.stringify(s,a);l&&(l=`?${l}`);let u=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(u=`#${o(e.fragmentIdentifier,a)}`),`${r}${l}${u}`}},function(e,t,a){a(87),__kbnBundles__.define("plugin/data/public",a,31),__kbnBundles__.define("plugin/data/common",a,2)},function(e,t,a){a.p=window.__kbnPublicPath__.data},function(e,t,a){e.exports=a(29)(2394)},function(e,t,a){e.exports=a(29)(1077)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKbnTypeNames=t.getKbnFieldType=t.getFilterableKbnTypeNames=t.castEsToKbnFieldTypeName=void 0;var r=a(91),n=a(51);const i=(0,r.createKbnFieldTypes)();t.getKbnFieldType=e=>i.find((t=>t.name===e))||r.kbnFieldTypeUnknown;t.getKbnTypeNames=()=>i.filter((e=>e.name)).map((e=>e.name));t.castEsToKbnFieldTypeName=e=>{const t=i.find((t=>t.esTypes.includes(e)));return t&&t.name?t.name:n.KBN_FIELD_TYPES.UNKNOWN};t.getFilterableKbnTypeNames=()=>i.filter((e=>e.filterable)).map((e=>e.name))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kbnFieldTypeUnknown=t.createKbnFieldTypes=void 0;var r=a(70),n=a(51);const i=new r.KbnFieldType({name:n.KBN_FIELD_TYPES.UNKNOWN});t.kbnFieldTypeUnknown=i;t.createKbnFieldTypes=()=>[new r.KbnFieldType({name:n.KBN_FIELD_TYPES.STRING,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.STRING,n.ES_FIELD_TYPES.TEXT,n.ES_FIELD_TYPES.KEYWORD,n.ES_FIELD_TYPES.VERSION,n.ES_FIELD_TYPES._TYPE,n.ES_FIELD_TYPES._ID]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.NUMBER,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.FLOAT,n.ES_FIELD_TYPES.HALF_FLOAT,n.ES_FIELD_TYPES.SCALED_FLOAT,n.ES_FIELD_TYPES.DOUBLE,n.ES_FIELD_TYPES.INTEGER,n.ES_FIELD_TYPES.LONG,n.ES_FIELD_TYPES.UNSIGNED_LONG,n.ES_FIELD_TYPES.SHORT,n.ES_FIELD_TYPES.BYTE,n.ES_FIELD_TYPES.TOKEN_COUNT]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.FLOAT_RANGE,n.ES_FIELD_TYPES.DOUBLE_RANGE,n.ES_FIELD_TYPES.INTEGER_RANGE,n.ES_FIELD_TYPES.LONG_RANGE]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.DATE,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.DATE,n.ES_FIELD_TYPES.DATE_NANOS]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.DATE_RANGE]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.IP,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.IP]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.IP_RANGE,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.IP_RANGE]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.BOOLEAN,sortable:!0,filterable:!0,esTypes:[n.ES_FIELD_TYPES.BOOLEAN]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.OBJECT,esTypes:[n.ES_FIELD_TYPES.OBJECT]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.NESTED,esTypes:[n.ES_FIELD_TYPES.NESTED]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.GEO_POINT,esTypes:[n.ES_FIELD_TYPES.GEO_POINT]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.GEO_SHAPE,esTypes:[n.ES_FIELD_TYPES.GEO_SHAPE]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.ATTACHMENT,esTypes:[n.ES_FIELD_TYPES.ATTACHMENT]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.MURMUR3,esTypes:[n.ES_FIELD_TYPES.MURMUR3]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES._SOURCE,esTypes:[n.ES_FIELD_TYPES._SOURCE]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.HISTOGRAM,filterable:!0,esTypes:[n.ES_FIELD_TYPES.HISTOGRAM]}),new r.KbnFieldType({name:n.KBN_FIELD_TYPES.CONFLICT}),i]},function(e,t,a){var r,n,i=a(71),s=a(72),o=0,l=0;e.exports=function(e,t,a){var u=t&&a||0,c=t||[],d=(e=e||{}).node||r,g=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==g){var p=i();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==g&&(g=n=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:l+1,m=h-o+(f-l)/1e4;if(m<0&&void 0===e.clockseq&&(g=g+1&16383),(m<0||h>o)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=h,l=f,n=g;var b=(1e4*(268435455&(h+=122192928e5))+f)%4294967296;c[u++]=b>>>24&255,c[u++]=b>>>16&255,c[u++]=b>>>8&255,c[u++]=255&b;var y=h/4294967296*1e4&268435455;c[u++]=y>>>8&255,c[u++]=255&y,c[u++]=y>>>24&15|16,c[u++]=y>>>16&255,c[u++]=g>>>8|128,c[u++]=255&g;for(var _=0;_<6;++_)c[u+_]=d[_];return t||s(c)}},function(e,t,a){var r=a(71),n=a(72);e.exports=function(e,t,a){var i=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[i+o]=s[o];return t||n(s)}},function(e,t,a){t.parse=a(95),t.stringify=a(96)},function(e,t){var a,r,n,i,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:a,text:n}},l=function(e){return e&&e!==r&&o("Expected '"+e+"' instead of '"+r+"'"),r=n.charAt(a),a+=1,r},u=function(){var e,t="";for("-"===r&&(t="-",l("-"));r>="0"&&r<="9";)t+=r,l();if("."===r)for(t+=".";l()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,l(),"-"!==r&&"+"!==r||(t+=r,l());r>="0"&&r<="9";)t+=r,l();if(e=+t,isFinite(e))return e;o("Bad number")},c=function(){var e,t,a,n="";if('"'===r)for(;l();){if('"'===r)return l(),n;if("\\"===r)if(l(),"u"===r){for(a=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)a=16*a+e;n+=String.fromCharCode(a)}else{if("string"!=typeof s[r])break;n+=s[r]}else n+=r}o("Bad string")},d=function(){for(;r&&r<=" ";)l()};i=function(){switch(d(),r){case"{":return function(){var e,t={};if("{"===r){if(l("{"),d(),"}"===r)return l("}"),t;for(;r;){if(e=c(),d(),l(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=i(),d(),"}"===r)return l("}"),t;l(","),d()}}o("Bad object")}();case"[":return function(){var e=[];if("["===r){if(l("["),d(),"]"===r)return l("]"),e;for(;r;){if(e.push(i()),d(),"]"===r)return l("]"),e;l(","),d()}}o("Bad array")}();case'"':return c();case"-":return u();default:return r>="0"&&r<="9"?u():function(){switch(r){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}o("Unexpected '"+r+"'")}()}},e.exports=function(e,t){var s;return n=e,a=0,r=" ",s=i(),d(),r&&o("Syntax error"),"function"==typeof t?function e(a,r){var n,i,s=a[r];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(void 0!==(i=e(s,n))?s[n]=i:delete s[n]);return t.call(a,r,s)}({"":s},""):s}},function(e,t){var a,r,n,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(e,t){var i,s,u,c,d,g=a,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof n&&(p=n.call(t,e,p)),typeof p){case"string":return o(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(a+=r,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=p.length,i=0;i<c;i+=1)d[i]=l(i,p)||"null";return u=0===d.length?"[]":a?"[\n"+a+d.join(",\n"+a)+"\n"+g+"]":"["+d.join(",")+"]",a=g,u}if(n&&"object"==typeof n)for(c=n.length,i=0;i<c;i+=1)"string"==typeof(s=n[i])&&(u=l(s,p))&&d.push(o(s)+(a?": ":":")+u);else for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(u=l(s,p))&&d.push(o(s)+(a?": ":":")+u);return u=0===d.length?"{}":a?"{\n"+a+d.join(",\n"+a)+"\n"+g+"}":"{"+d.join(",")+"}",a=g,u}}e.exports=function(e,t,i){var s;if(a="",r="","number"==typeof i)for(s=0;s<i;s+=1)r+=" ";else"string"==typeof i&&(r=i);if(n=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return l("",{"":e})}},function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(98);case"v7light":return a(100);case"v8dark":return a(102);case"v8light":return a(104)}},function(e,t,a){var r=a(53),n=a(99);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},function(e,t,a){(t=a(54)(!1)).push([e.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalQueryBar--inPage{padding:0}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#DFE5EF;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(27,169,245,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 1px 1px -1px rgba(0,0,0,0.2),0 3px 2px -2px rgba(0,0,0,0.2),inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 1px 1px -1px rgba(0,0,0,0.2),0 3px 2px -2px rgba(0,0,0,0.2),inset 0 0 0 1px #424752}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#98A2B3;background-color:rgba(52,55,65,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#ff7575}.globalFilterItem-isWarning .globalFilterLabel__value{color:#FFCE7A}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#424752;border-top-left-radius:2px;border-bottom-left-radius:2px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 1px 1px -1px rgba(0,0,0,0.2),0 3px 2px -2px rgba(0,0,0,0.2),inset 0 0 0 1px #803333}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#cc5252}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 12px -1px rgba(0,0,0,0.2),0 0 4px -1px rgba(0,0,0,0.2),0 0 2px 0 rgba(0,0,0,0.2);border-top-left-radius:4px;border-top-right-radius:4px}.kbnTypeahead__popover--bottom{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-bottom-left-radius:4px;border-bottom-right-radius:4px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;border:1px solid;border-color:#343741;color:#DFE5EF;background-color:#1D1E24;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 4px 4px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:4px 4px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#25262E}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#1D1E24}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#665231}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#325a54}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#0b4462}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#3a2d4a}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#80673d;color:#ffe9c7}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#3f7169;color:#c3f1e9}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#0e557b;color:#76ccf6}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#49385c;color:#baa5d2}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#343741;color:#535966}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#DFE5EF}.kbnSuggestionItem__description{color:#98A2B3;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#25262E;color:#fff;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryManagement__list[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnSavedQueryListItem{margin-top:0;color:#1BA9F5}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:1px solid #282a30}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(255,255,255,0.1);margin:0;padding-top:10px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(255,255,255,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #F66, #F66 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#DFE5EF;background-color:#16171c;background-image:linear-gradient(to top, #1BA9F5, #1BA9F5 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),e.exports=t},function(e,t,a){var r=a(53),n=a(101);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},function(e,t,a){(t=a(54)(!1)).push([e.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalQueryBar--inPage{padding:0}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#343741;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(0,107,180,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 1px 1px -1px rgba(152,162,179,0.2),0 3px 2px -2px rgba(152,162,179,0.2),inset 0 0 0 1px rgba(15,39,118,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 1px 1px -1px rgba(152,162,179,0.2),0 3px 2px -2px rgba(152,162,179,0.2),inset 0 0 0 1px #bcc3ce}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#69707D;background-color:rgba(211,218,230,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#b4251d}.globalFilterItem-isWarning .globalFilterLabel__value{color:#7e5600}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#bcc3ce;border-top-left-radius:2px;border-bottom-left-radius:2px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 1px 1px -1px rgba(152,162,179,0.2),0 3px 2px -2px rgba(152,162,179,0.2),inset 0 0 0 1px #ebbebc}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#d16862}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 12px -1px rgba(152,162,179,0.2),0 0 4px -1px rgba(152,162,179,0.2),0 0 2px 0 rgba(152,162,179,0.2);border-top-left-radius:4px;border-top-right-radius:4px}.kbnTypeahead__popover--bottom{box-shadow:0 12px 24px 0 rgba(65,78,101,0.1),0 6px 12px 0 rgba(65,78,101,0.1),0 4px 4px 0 rgba(65,78,101,0.1),0 2px 2px 0 rgba(65,78,101,0.1);border-color:#d0d3d9;border-top-color:#d9dce0;border-bottom-color:#aaafba;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;border:1px solid;border-color:#D3DAE6;color:#343741;background-color:#fff;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 4px 4px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:4px 4px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#F5F7FA}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fdedcc}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#cce5e3}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#cce1f0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#e9e2f1}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fef6e6;color:#936400}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#e6f2f1;color:#01776d}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#e6f0f8;color:#006BB4}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#f4f1f8;color:#7c609e}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#D3DAE6;color:#98A2B3}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#343741}.kbnSuggestionItem__description{color:#69707D;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#F5F7FA;color:#000;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryManagement__list[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnSavedQueryListItem{margin-top:0;color:#006BB4}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:1px solid #e4e8ee}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(15,39,118,0.1);margin:0;padding-top:10px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(15,39,118,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #BD271E, #BD271E 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#343741;background-color:#fbfcfd;background-image:linear-gradient(to top, #006BB4, #006BB4 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),e.exports=t},function(e,t,a){var r=a(53),n=a(103);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},function(e,t,a){(t=a(54)(!1)).push([e.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalQueryBar--inPage{padding:0}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#DFE5EF;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(54,162,239,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 0 transparent,inset 0 0 0 1px #424752}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#98A2B3;background-color:rgba(52,55,65,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#f87972}.globalFilterItem-isWarning .globalFilterLabel__value{color:#F3D371}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#424752;border-top-left-radius:3px;border-bottom-left-radius:3px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 0 transparent,inset 0 0 0 1px #7c3632}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#c6564f}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 0.8px rgba(0,0,0,0.15),0 0 2px rgba(0,0,0,0.1),0 0 5px rgba(0,0,0,0.1),0 0 17px rgba(0,0,0,0.075);border-top-left-radius:6px;border-top-right-radius:6px}.kbnTypeahead__popover--bottom{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-bottom-left-radius:6px;border-bottom-right-radius:6px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;border:1px solid;border-color:#343741;color:#DFE5EF;background-color:#1D1E24;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 6px 6px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:6px 6px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#25262E}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#1D1E24}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#61542d}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#325956}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#164160}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#3a2d4a}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#7a6a39;color:#f6edc6}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#3f6f6c;color:#c0eeeb}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#1b5178;color:#87c7f6}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#49385c;color:#baa5d2}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#343741;color:#535966}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#DFE5EF}.kbnSuggestionItem__description{color:#98A2B3;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#25262E;color:#fff;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryManagement__list[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnSavedQueryListItem{margin-top:0;color:#36A2EF}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:none}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative;background-color:#16171c;border-radius:6px}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(255,255,255,0.1);margin:0;padding-bottom:9px}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(255,255,255,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #F86B63, #F86B63 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#DFE5EF;background-color:#16171c;background-image:linear-gradient(to top, #36A2EF, #36A2EF 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),e.exports=t},function(e,t,a){var r=a(53),n=a(105);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(n,i);e.exports=n.locals||{}},function(e,t,a){(t=a(54)(!1)).push([e.i,".globalQueryBar{padding:0 8px 8px 8px}.globalQueryBar:first-child{padding-top:8px}.globalQueryBar:not(:empty){padding-bottom:8px}.globalQueryBar--inPage{padding:0}.globalFilterGroup__filterBar{margin-top:4px}.globalFilterBar__addButton{min-height:28px}.globalFilterGroup__branch{padding:8px 12px 0 0;background-repeat:no-repeat;background-position:12px -8px;background-image:url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\")}.globalFilterGroup__wrapper{line-height:1;overflow:hidden;transition:height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.globalFilterGroup__filterFlexItem{overflow:hidden;padding-bottom:2px}.globalFilterBar__flexItem{max-width:calc(100% - 4px)}@media only screen and (max-width: 574px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}@media only screen and (min-width: 575px) and (max-width: 767px){.globalFilterGroup__wrapper-isVisible{margin-top:-16px}}.globalFilterItem{line-height:16px;border:none;color:#343741;padding-top:6px;padding-bottom:6px;white-space:normal}.globalFilterItem .euiBadge__childButton{flex-shrink:1}.globalFilterItem .euiBadge__iconButton:focus{background-color:rgba(0,119,204,0.1)}.globalFilterItem:not(.globalFilterItem-isDisabled){background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(17,43,134,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;box-shadow:0 0 transparent,inset 0 0 0 1px #bcc3ce}@supports (-moz-appearance: none){.globalFilterItem:not(.globalFilterItem-isDisabled){transition-property:box-shadow, background-image, background-size}}.globalFilterItem:focus-within{animation:none !important}.globalFilterItem-isDisabled{color:#69707D;background-color:rgba(211,218,230,0.5);text-decoration:line-through;font-weight:400;font-style:italic}.globalFilterItem-isError .globalFilterLabel__value,.globalFilterItem-isWarning .globalFilterLabel__value{font-weight:700}.globalFilterItem-isError .globalFilterLabel__value{color:#b4251d}.globalFilterItem-isWarning .globalFilterLabel__value{color:#765b0a}.globalFilterItem-isPinned{position:relative}.globalFilterItem-isPinned::before{content:'';position:absolute;top:0;bottom:0;left:0;width:4px;background-color:#bcc3ce;border-top-left-radius:3px;border-bottom-left-radius:3px}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled){box-shadow:0 0 transparent,inset 0 0 0 1px #ebbebc}.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before{background-color:#d16862}.globalFilterItem__editorForm{padding:12px}.globalFilterItem__popover,.globalFilterItem__popoverAnchor{display:block}.kbnTypeahead.kbnTypeahead--small{max-height:20vh}.kbnTypeahead__popover--top{box-shadow:0 0 0.8px rgba(0,0,0,0.06),0 0 2px rgba(0,0,0,0.04),0 0 5px rgba(0,0,0,0.04),0 0 17px rgba(0,0,0,0.03);border-top-left-radius:6px;border-top-right-radius:6px}.kbnTypeahead__popover--bottom{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-bottom-left-radius:6px;border-bottom-right-radius:6px}.kbnTypeahead{max-height:60vh}.kbnTypeahead .kbnTypeahead__popover{max-height:inherit;scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;border:1px solid;border-color:#D3DAE6;color:#343741;background-color:#fff;position:relative;z-index:2000;width:100%;overflow-y:auto}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar{width:16px;height:16px}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-corner,.kbnTypeahead .kbnTypeahead__popover::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item{height:32px;white-space:nowrap;font-size:12px;vertical-align:middle;padding:0;border-bottom:none;line-height:normal}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover{cursor:pointer}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child{border-bottom:none;border-radius:0 0 6px 6px}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child{border-bottom:none;border-radius:6px 6px 0 0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active{background-color:#F5F7FA}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout{background:#fff}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type{color:#000}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fff3d0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#ccf2f0}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#cce4f5}.kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#e9e2f1}.kbnSuggestionItem{display:flex;flex-grow:1;align-items:center;font-size:12px;white-space:nowrap}.kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type{background-color:#fff9e8;color:#8a6a0a}.kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type{background-color:#e6f9f7;color:#007e77}.kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type{background-color:#e6f1fa;color:#006bb8}.kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type{background-color:#f4f1f8;color:#7c609e}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type{background-color:#D3DAE6;color:#98A2B3}.kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text{width:auto}.kbnSuggestionItem__text,.kbnSuggestionItem__type,.kbnSuggestionItem__description{flex-grow:1;flex-basis:0%;display:flex;flex-direction:column}.kbnSuggestionItem__type{flex-grow:0;flex-shrink:0;flex-basis:auto;width:32px;height:32px;text-align:center;overflow:hidden;padding:4px;justify-content:center;align-items:center}.kbnSuggestionItem__text{flex-grow:0;flex-basis:auto;font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;width:250px;overflow:hidden;text-overflow:ellipsis;padding:4px 8px;color:#343741}.kbnSuggestionItem__description{color:#69707D;overflow:hidden;text-overflow:ellipsis;margin-left:32px}.kbnSuggestionItem__description:empty{flex-grow:0;margin-left:0}.kbnSuggestionItem__callout{font-family:\"Roboto Mono\",Consolas,Menlo,Courier,monospace;background:#F5F7FA;color:#000;padding:0 4px;display:inline-block}.kbnSuggestionItem--value .kbnSuggestionItem__text{flex-basis:50%;flex-grow:1}.kbnSavedQueryManagement__popover{max-width:400px}.kbnSavedQueryManagement__listWrapper{max-height:416px;overflow-y:hidden}.kbnSavedQueryManagement__pagination{justify-content:center;padding:6px 12px 12px}.kbnSavedQueryManagement__text{padding:12px 12px 6px 12px}.kbnSavedQueryManagement__list{scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);max-height:inherit;padding:6px 4px !important}.kbnSavedQueryManagement__list::-webkit-scrollbar{width:16px;height:16px}.kbnSavedQueryManagement__list::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnSavedQueryManagement__list::-webkit-scrollbar-corner,.kbnSavedQueryManagement__list::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnSavedQueryManagement__list:focus{outline:none}.kbnSavedQueryManagement__list[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnSavedQueryListItem{margin-top:0;color:#0071c2}.kbnSavedQueryListItem-selected button{font-weight:700}.kbnSavedQueryListItem__label{display:flex;align-items:center}.kbnSavedQueryListItem__labelText{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;margin-right:4px}.kbnQueryBar__wrap{max-width:100%;z-index:2000}.kqlQueryBar__languageSwitcherButton{border-right:none !important;border-left:none}.kbnQueryBar__textareaWrap{overflow:visible !important;display:flex;flex:1 1 100%;position:relative;background-color:#fbfcfd;border-radius:6px}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textareaWrap.kbnQueryBar__textareaWrap--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea{z-index:2000;resize:none !important;height:38px;padding:8px;box-shadow:0 0 0 1px rgba(17,43,134,0.1);margin:0;padding-bottom:9px}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasPrepend{border-top-left-radius:0;border-bottom-left-radius:0}.kbnQueryBar__textarea.kbnQueryBar__textarea--hasAppend{border-top-right-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid){scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin;height:100%;overflow-y:auto;overflow-x:hidden;-webkit-mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%);mask-image:linear-gradient(to bottom, rgba(255,0,0,0.1) 0%,red 7.5px,red calc(100% - 7.5px),rgba(255,0,0,0.1) 100%)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar{width:16px;height:16px}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-corner,.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid):focus{outline:none}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight):not(:invalid)[tabindex='0']:focus:focus-visible{outline-style:auto}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){white-space:nowrap;overflow-y:hidden;overflow-x:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal;box-shadow:0 0 0 1px rgba(17,43,134,0.1)}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea ~ .euiFormControlLayoutIcons{z-index:2001;top:11px;bottom:unset}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(to top, #BD271E, #BD271E 2px, transparent 2px, transparent 100%)}.kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid:focus{color:#343741;background-color:#fbfcfd;background-image:linear-gradient(to top, #07C, #07C 2px, transparent 2px, transparent 100%)}@media only screen and (max-width: 574px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 575px) and (max-width: 767px){.kbnQueryBar--withDatePicker>:first-child{order:1;margin-top:-8px}}@media only screen and (min-width: 768px) and (max-width: 991px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 992px) and (max-width: 1199px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}@media only screen and (min-width: 1200px){.kbnQueryBar__datePickerWrapper{max-width:40vw;flex-grow:0 !important;flex-basis:auto !important}.kbnQueryBar__datePickerWrapper.kbnQueryBar__datePickerWrapper-isHidden{margin-right:-4px !important;width:0;overflow:hidden;max-width:0}}.shardFailureModal{min-height:75vh;width:768px}.shardFailureModal__desc{max-width:686px}.shardFailureModal__descTitle{width:20% !important;margin-top:8px}.shardFailureModal__descValue{width:80% !important;margin-top:8px}.shardFailureModal__keyValueTitle{padding-right:8px}@media only screen and (max-width: 574px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.shardFailureModal__keyValueTitle{display:block;width:100%}.shardFailureModal__descTitle{display:block;width:100% !important}.shardFailureModal__descValue{display:block;width:100% !important}}.insDataTableFormat__filter{opacity:0}.insDataTableFormat__table tr:hover .insDataTableFormat__filter,.insDataTableFormat__filter:focus{opacity:1}\n",""]),e.exports=t},function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,a){"use strict";var r="%[a-f0-9]{2}",n=new RegExp("("+r+")|([^%]+?)","gi"),i=new RegExp("("+r+")+","gi");function s(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],s(a),s(r))}function o(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(n)||[],a=1;a<t.length;a++)t=(e=s(t,a).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},a=i.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var r=o(a[0]);r!==a[0]&&(t[a[0]]=r)}a=i.exec(e)}t["%C2"]="";for(var n=Object.keys(t),s=0;s<n.length;s++){var l=n[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},function(e,t){e.exports=__kbnSharedDeps__.Classnames},,,function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.StyledComponents},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t,a){a.r(t);var r=__kbnBundles__.get("plugin/share/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);