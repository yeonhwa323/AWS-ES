/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,s=t[0],o=t[1],a=0,u=[];a<s.length;a++)i=s[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={6:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=s);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"canvas.chunk."+e+".js"}(e);var c=new Error;o=function(t){a.onerror=a.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",c.name="ChunkLoadError",c.type=i,c.request=s,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var c=o;i(i.s=17)}([function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"z",(function(){return l})),n.d(t,"C",(function(){return g})),n.d(t,"v",(function(){return b})),n.d(t,"r",(function(){return f})),n.d(t,"q",(function(){return _})),n.d(t,"D",(function(){return v})),n.d(t,"k",(function(){return h})),n.d(t,"t",(function(){return P})),n.d(t,"s",(function(){return m})),n.d(t,"F",(function(){return O})),n.d(t,"B",(function(){return y})),n.d(t,"A",(function(){return S})),n.d(t,"E",(function(){return w})),n.d(t,"n",(function(){return j})),n.d(t,"p",(function(){return k})),n.d(t,"x",(function(){return D})),n.d(t,"y",(function(){return x})),n.d(t,"e",(function(){return I})),n.d(t,"d",(function(){return C})),n.d(t,"m",(function(){return E})),n.d(t,"o",(function(){return U})),n.d(t,"c",(function(){return $})),n.d(t,"u",(function(){return B})),n.d(t,"w",(function(){return A}));var r=n(13);const i="canvas",s="/app/canvas#/workpad",o="/api/canvas",a=`${o}/workpad`,c=`${o}/workpad-assets`,u=`${o}/workpad-structures`,p=`${o}/custom-element`,d=`${o}/templates`,l="kibana.canvas.clipboard",g="lastPath:canvas",b=3e4,f=".canvasPage {\n\n}",_=".canvasRenderEl{\n\n}",v=["gif","jpeg","png","svg+xml"],h=25e3,P=10,m=1,O=[.25,.33,.5,.67,.75,1,1.25,1.5,1.75,2,3,4].sort(),y=O[0],S=O[O.length-1],w=32,j="canvasLayout__stageContent",k=["string","number","null","boolean","date"],D="workpad-full-screen-launch",x="workpad-full-screen-launch-with-autoplay",I="/public/canvas/zip",C=`/public/canvas/${r.SHAREABLE_RUNTIME_NAME}.js`,E="canvasEmbeddable",U="canvasContextMenu--topBorder",$=`${o}/fns`,B="essql",A=32},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(16)(1075)},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return CanvasAppLocatorDefinition}));var r=n(2),i=n.n(r),s=n(0);const o="CANVAS_APP_LOCATOR";class CanvasAppLocatorDefinition{constructor(){i()(this,"id",o)}async getLocation(e){const t=s.l;if("workpadPDF"===e.view){const{id:n,page:r}=e;return{app:t,path:`#/export/workpad/pdf/${n}/page/${r}`,state:{}}}return{app:t,path:"#/",state:{}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(12),i=n(9);let s;!function(e){e.Local="localStorage",e.Session="sessionStorage"}(s||(s={}));const o={[s.Local]:null,[s.Session]:null},a=e=>{const t=o[e]||new r.Storage(Object(i.a)()[e]);return o[e]=t,t},c=()=>a(s.Local),u=()=>a(s.Session)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const r={location:null,localStorage:{},sessionStorage:{},innerWidth:0,innerHeight:0,addEventListener:()=>{},removeEventListener:()=>{}},i=()=>"undefined"==typeof window?r:window},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(3);let i=!1;const s=new r.BehaviorSubject(0),o=e=>e(s),a={show:()=>{i||(i=!0,s.next(1))},hide:()=>{i&&(i=!1,s.next(0))}}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports={LIBRARY_NAME:"KbnCanvas",SHAREABLE_RUNTIME_NAME:"kbn_canvas"}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/home/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaLegacy/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(18),__kbnBundles__.define("plugin/canvas/public",n,19)},function(e,t,n){n.p=window.__kbnPublicPath__.canvas},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return j}));var r=n(2),i=n.n(r),s=n(3),o=n(11),a=n(10),c=n(5),u=n(0),p=n(4),d=n(6),l=n(14);const g={id:"canvas",title:"Canvas",subtitle:d.i18n.translate("xpack.canvas.featureCatalogue.canvasSubtitle",{defaultMessage:"Design pixel-perfect presentations."}),description:d.i18n.translate("xpack.canvas.appDescription",{defaultMessage:"Showcase your data in a pixel-perfect way."}),icon:"canvasApp",path:"/app/canvas",showOnHomePage:!1,category:l.FeatureCatalogueCategory.DATA,solutionId:"kibana",order:300};var b=n(8);let f=null;var _=n(1);const v="labs:canvas:enable_ui";var h=n(7),P=n(15);const m=(e,t={})=>{const n=Object(h.get)(e,"response")||e,r=Object(h.get)(e,"body",void 0),i=Object(P.formatMsg)(void 0!==r?e:n),{title:s,...o}=t;let a;return s&&(a=i),{...o,title:s||i,text:a}},O=["@created","@timestamp","assets","colors","css","variables","height","id","isWriteable","name","page","pages","width"],y=function(e){const t=Object.keys(e);for(const n of t)O.includes(n)||delete e[n];return e},S={customElement:new _.PluginServiceProvider((({coreStart:e})=>{const{http:t}=e,n=`${u.b}`;return{create:e=>t.post(n,{body:JSON.stringify(e)}),get:e=>t.get(`${n}/${e}`).then((({data:e})=>e)),update:(e,r)=>t.put(`${n}/${e}`,{body:JSON.stringify(r)}),remove:e=>t.delete(`${n}/${e}`),find:async e=>t.get(`${n}/find`,{query:{name:e,perPage:1e4}})}})),embeddables:new _.PluginServiceProvider((({startPlugins:e})=>({getEmbeddableFactories:e.embeddable.getEmbeddableFactories}))),expressions:new _.PluginServiceProvider((({startPlugins:e})=>e.expressions)),labs:new _.PluginServiceProvider((({startPlugins:e,coreStart:t})=>({projectIDs:_.projectIDs,isLabsEnabled:()=>t.uiSettings.get(v),...e.presentationUtil.labsService}))),navLink:new _.PluginServiceProvider((({coreStart:e,appUpdater:t})=>({updatePath:n=>{null==t||t.next((()=>({defaultPath:`#${n}`}))),Object(c.b)().set(`${u.C}:${e.http.basePath.get()}`,n)}}))),notify:new _.PluginServiceProvider((({coreStart:e})=>{const t=e.notifications.toasts;return{error(e,n){t.addDanger(m(e,n))},warning(e,n){t.addWarning(m(e,n))},info(e,n){t.add(m(e,n))},success(e,n){t.addSuccess(m(e,n))}}})),platform:new _.PluginServiceProvider((({coreStart:e,initContext:t,startPlugins:n})=>{var r,i;if(!t)throw new Error("Canvas platform service requires init context");return{getBasePath:e.http.basePath.get,getBasePathInterface:()=>e.http.basePath,getElasticWebsiteUrl:()=>e.docLinks.ELASTIC_WEBSITE_URL,getDocLinkVersion:()=>e.docLinks.DOC_LINK_VERSION,getKibanaVersion:()=>t.env.packageInfo.version,getHasWriteAccess:()=>e.application.capabilities.canvas.save,getUISetting:e.uiSettings.get.bind(e.uiSettings),hasHeaderBanner$:e.chrome.hasHeaderBanner$,setBreadcrumbs:e.chrome.setBreadcrumbs,setRecentlyAccessed:e.chrome.recentlyAccessed.add,setFullscreen:e.chrome.setIsVisible,redirectLegacyUrl:null===(r=n.spaces)||void 0===r?void 0:r.ui.redirectLegacyUrl,getLegacyUrlConflict:null===(i=n.spaces)||void 0===i?void 0:i.ui.components.getLegacyUrlConflict,getSavedObjects:()=>e.savedObjects,getSavedObjectsClient:()=>e.savedObjects.client,getUISettings:()=>e.uiSettings}})),reporting:new _.PluginServiceProvider((({startPlugins:e,coreStart:t})=>{const{reporting:n}=e,r=()=>({getReportingPanelPDFComponent:()=>(null==n?void 0:n.components.ReportingPanelPDFV2)||null});return n?n.usesUiCapabilities()?!0===(null===(i=t.application.capabilities.canvas)||void 0===i?void 0:i.generatePdf)?r():{getReportingPanelPDFComponent:()=>null}:r():{getReportingPanelPDFComponent:()=>null};var i})),workpad:new _.PluginServiceProvider((({coreStart:e,startPlugins:t})=>{const n=function(){return`${u.g}`};return{get:async t=>{const r=await e.http.get(`${n()}/${t}`);return{css:u.r,variables:[],...r}},resolve:async t=>{const{workpad:r,outcome:i,aliasId:s}=await e.http.get(`${n()}/resolve/${t}`);return{outcome:i,aliasId:s,workpad:{css:u.r,variables:[],...r}}},create:t=>e.http.post(n(),{body:JSON.stringify({...y({...t}),assets:t.assets||{},variables:t.variables||[]})}),createFromTemplate:t=>e.http.post(n(),{body:JSON.stringify({templateId:t})}),findTemplates:async()=>e.http.get(u.f),find:t=>{const r="string"==typeof t&&t.length>0;return e.http.get(`${n()}/find`,{query:{perPage:1e4,name:r?t:""}})},remove:t=>e.http.delete(`${n()}/${t}`),update:(t,r)=>e.http.put(`${n()}/${t}`,{body:JSON.stringify({...y({...r})})}),updateWorkpad:(t,n)=>e.http.put(`${u.i}/${t}`,{body:JSON.stringify({...y({...n})})}),updateAssets:(t,n)=>e.http.put(`${u.h}/${t}`,{body:JSON.stringify(n)}),getRuntimeZip:t=>e.http.post(u.e,{body:JSON.stringify(t)})}}))},w=new _.PluginServiceRegistry(S);class plugin_CanvasPlugin{constructor(e){i()(this,"appUpdater",new s.BehaviorSubject((()=>({})))),i()(this,"initContext",void 0),this.initContext=e}setup(e,t){const{api:r,registries:i}=function(e){const t={elements:[],transformUIs:[],datasourceUIs:[],modelUIs:[],viewUIs:[],argumentUIs:[],tagUIs:[],transitions:[]},n=e=>t=>{Array.isArray(t)?e.push(...t):e.push(t)};return{api:{addFunctions:t=>{t.forEach((t=>{e.registerFunction(t)}))},addTypes:t=>{t.forEach((t=>{e.registerType(t)}))},addRenderers:t=>{t.forEach((t=>{e.registerRenderer(t)}))},addElements:n(t.elements),addTransformUIs:n(t.transformUIs),addDatasourceUIs:n(t.datasourceUIs),addModelUIs:n(t.modelUIs),addViewUIs:n(t.viewUIs),addArgumentUIs:n(t.argumentUIs),addTagUIs:n(t.tagUIs),addTransitions:n(t.transitions)},registries:t}}(t.expressions),s=Object(c.b)().get(`${u.C}:${e.http.basePath.get()}`);return s&&this.appUpdater.next((()=>({defaultPath:`#${s}`}))),e.application.register({category:o.DEFAULT_APP_CATEGORIES.kibana,id:u.l,title:"Canvas",euiIconType:"logoKibana",order:3e3,updater$:this.appUpdater,mount:async s=>{const{CanvasSrcPlugin:o}=await Promise.all([n.e(2),n.e(3),n.e(4),n.e(8)]).then(n.bind(null,363)),a=new o;a.setup(e,{canvas:r}),(async({coreSetup:e,setupPlugins:t})=>{const{expressions:n,bfetch:r}=t;await(async()=>(f||(f=(async()=>{const t=await e.http.get(u.c),i=r.batchedFunction({url:u.c}),{serialize:s}=Object(b.serializeProvider)(n.getTypes());Object.keys(t).forEach((e=>{n.getFunction(e)||n.registerFunction((()=>({...t[e],fn:(t,n)=>i({functionName:e,args:n,context:s(t)})})))}))})()),f))()})({coreSetup:e,setupPlugins:t});const[c,p]=await e.getStartServices();a.start(c,p);const{pluginServices:d}=await n.e(14).then(n.bind(null,57));d.setRegistry(w.start({coreStart:c,startPlugins:p,initContext:this.initContext}));const{renderApp:l,initializeCanvas:g,teardownCanvas:_}=await Promise.all([n.e(2),n.e(3),n.e(4),n.e(5),n.e(7)]).then(n.bind(null,362)),v=await g(e,c,t,p,i,this.appUpdater),h=l({coreStart:c,startPlugins:p,params:s,canvasStore:v,pluginServices:d});return()=>{h(),_(c)}}}),t.home&&t.home.featureCatalogue.register(g),t.share&&t.share.url.locators.create(new p.b),r.addArgumentUIs((async()=>{const{argTypeSpecs:e}=await Promise.all([n.e(2),n.e(3),n.e(5),n.e(12)]).then(n.bind(null,365));return e})),r.addTransitions((async()=>{const{transitions:e}=await Promise.all([n.e(2),n.e(15)]).then(n.bind(null,367));return e})),{...r}}start(e,t){Object(a.a)(e.http.addLoadingCountSource)}}const j=e=>new plugin_CanvasPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionError/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionShape/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Jquery},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/presentationUtil/common/lib");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/common/fonts");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionImage/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionMetric/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionRepeatImage/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionRevealImage/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.History},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressionShape/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ElasticNumeral},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/maps/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/lens/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/discover/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);