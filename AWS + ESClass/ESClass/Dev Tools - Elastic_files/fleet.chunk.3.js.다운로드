/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[3],{106:function(e,t,a){"use strict";var n,l=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),r=[];function s(e){for(var t=-1,a=0;a<r.length;a++)if(r[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},n=[],l=0;l<e.length;l++){var i=e[l],o=t.base?i[0]+t.base:i[0],c=a[o]||0,u="".concat(o," ").concat(c);a[o]=c+1;var d=s(u),m={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(r[d].references++,r[d].updater(m)):r.push({identifier:u,updater:f(m,t),references:1}),n.push(u)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var l=a.nc;l&&(n.nonce=l)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function m(e,t,a,n){var l=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,l);else{var i=document.createTextNode(l),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function g(e,t,a){var n=a.css,l=a.media,i=a.sourceMap;if(l?e.setAttribute("media",l):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,E=0;function f(e,t){var a,n,l;if(t.singleton){var i=E++;a=p||(p=c(t)),n=m.bind(null,a,i,!1),l=m.bind(null,a,i,!0)}else a=c(t),n=g.bind(null,a,t),l=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else l()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=l());var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var l=s(a[n]);r[l].references--}for(var i=o(e,t),c=0;c<a.length;c++){var u=s(a[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}a=i}}}},107:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var l=(r=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(o," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[a].concat(i).concat([l]).join("\n")}var r,s,o;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var l={};if(n)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(l[r]=!0)}for(var s=0;s<e.length;s++){var o=[].concat(e[s]);n&&l[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},271:function(e,t,a){switch(window.__kbnThemeTag__){case"v7dark":return a(272);case"v7light":return a(274);case"v8dark":return a(276);case"v8light":return a(278)}},272:function(e,t,a){var n=a(106),l=a(273);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var i={insert:"head",singleton:!1};n(l,i);e.exports=l.locals||{}},273:function(e,t,a){(t=a(107)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}\n",""]),e.exports=t},274:function(e,t,a){var n=a(106),l=a(275);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var i={insert:"head",singleton:!1};n(l,i);e.exports=l.locals||{}},275:function(e,t,a){(t=a(107)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}\n",""]),e.exports=t},276:function(e,t,a){var n=a(106),l=a(277);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var i={insert:"head",singleton:!1};n(l,i);e.exports=l.locals||{}},277:function(e,t,a){(t=a(107)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}\n",""]),e.exports=t},278:function(e,t,a){var n=a(106),l=a(279);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var i={insert:"head",singleton:!1};n(l,i);e.exports=l.locals||{}},279:function(e,t,a){(t=a(107)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}\n",""]),e.exports=t},294:function(e,t,a){"use strict";a.r(t),a.d(t,"ProtectedRoute",(function(){return bt})),a.d(t,"renderApp",(function(){return vt})),a.d(t,"teardownIntegrations",(function(){return yt}));var n=a(0),l=a.n(n),i=a(70),r=a.n(i),s=a(8),o=a(10),c=a(6),u=a(139),d=a.n(u),m=a(21),g=a(71),p=a(82),E=a(89),f=a(101),h=a(102),b=a(68);const k=Object(n.memo)((({section:e,children:t})=>{const{getHref:a}=Object(o.xb)();return l.a.createElement(h.a,{leftColumn:l.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"none",justifyContent:"center"},l.a.createElement(c.EuiText,null,l.a.createElement("h1",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrationsHeaderTitle",defaultMessage:"Integrations"}))),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiText,{size:"s",color:"subdued"},l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.pageSubtitle",defaultMessage:"Choose an integration to start collecting and analyzing your data."}))))),tabs:[{name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.appNavigation.integrationsAllLinkText",defaultMessage:"Browse integrations"}),isSelected:"browse"===e,href:a("integrations_all")},{name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.appNavigation.integrationsInstalledLinkText",defaultMessage:"Installed integrations"}),isSelected:"manage"===e,href:a("integrations_installed")}]},t)}));var v=a(17),y=a.n(v),x=a(4),M=a(2),j=a(69),O=a.n(j),F=a(73),C=a(111);const I={beta:x.i18n.translate("xpack.fleet.epm.releaseBadge.betaLabel",{defaultMessage:"Beta"}),experimental:x.i18n.translate("xpack.fleet.epm.releaseBadge.experimentalLabel",{defaultMessage:"Experimental"})},w={beta:x.i18n.translate("xpack.fleet.epm.releaseBadge.betaDescription",{defaultMessage:"This integration is not recommended for use in production environments."}),experimental:x.i18n.translate("xpack.fleet.epm.releaseBadge.experimentalDescription",{defaultMessage:"This integration may have breaking changes or be removed in a future release."})},P=O()(c.EuiCard).withConfig({displayName:"Card",componentId:"sc-1xgrkpq-0"})(["min-height:127px;"]);function S({description:e,name:t,title:a,version:n,icons:i,integration:r,url:s,release:o,id:u}){let d=null;o&&"ga"!==o&&(d=l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiSpacer,{size:"xs"}),l.a.createElement("span",null,l.a.createElement(c.EuiToolTip,{display:"inlineBlock",content:w[o]},l.a.createElement(c.EuiBadge,{color:"hollow"},I[o])))));const m=`integration-card:${u}`;return l.a.createElement(F.TrackApplicationView,{viewId:m},l.a.createElement(P,{"data-test-subj":m,layout:"horizontal",title:a||"",titleSize:"xs",description:e,hasBorder:!0,icon:l.a.createElement(C.a,{icons:i,packageName:t,integrationName:r,version:n,size:"xl"}),href:s,target:s.startsWith("http")||s.startsWith("https")?"_blank":void 0},d))}const T=({isLoading:e,controls:t,title:a,list:i,initialSearch:r,onSearchChange:s,setSelectedCategory:o,showMissingIntegrationMessage:u=!1,featuredList:d=null,callout:m})=>{const[g,E]=Object(n.useState)(r||""),h=Object(p.B)(i),b=Object(n.useRef)(null),[k,v]=Object(n.useState)(!1),[y]=Object(n.useState)(window.scrollY);Object(n.useEffect)((()=>{const e=b.current,t=()=>{e&&v((null==e?void 0:e.getBoundingClientRect().top)<110)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}),[y,k]);const M=l.a.createElement(_,{title:a,controls:t,sticky:k});let j;if(e||!h.current)j=l.a.createElement(f.l,null);else{const e=g?i.filter((e=>h.current.search(g).map((e=>e[p.f])).includes(e[p.f]))):i;j=l.a.createElement(L,{list:e,showMissingIntegrationMessage:u})}return l.a.createElement(l.a.Fragment,null,d,l.a.createElement("div",{ref:b},l.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"xl"},l.a.createElement(c.EuiFlexItem,{grow:1,className:k?"kbnStickyMenu":""},M),l.a.createElement(c.EuiFlexItem,{grow:5},l.a.createElement(c.EuiSearchBar,{query:g||void 0,box:{placeholder:x.i18n.translate("xpack.fleet.epmList.searchPackagesPlaceholder",{defaultMessage:"Search for integrations"}),incremental:!0},onChange:({queryText:e,error:t})=>{t||(s(e),E(e))}}),m?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSpacer,null),m):null,l.a.createElement(c.EuiSpacer,null),j,u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSpacer,null),l.a.createElement(A,{resetQuery:()=>{E("")},setSelectedCategory:o}))))))};function _({controls:e,title:t,sticky:a}){let n;return t&&(n=l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiTitle,{size:"s"},l.a.createElement("h2",null,t)),l.a.createElement(c.EuiSpacer,{size:"l"}))),l.a.createElement(c.EuiFlexGroup,{direction:"column",className:a?"kbnStickyMenu":"",gutterSize:"none"},n,e)}function L({list:e,showMissingIntegrationMessage:t=!1}){return l.a.createElement(c.EuiFlexGrid,{gutterSize:"l",columns:3},e.length?e.map((e=>l.a.createElement(c.EuiFlexItem,{key:e.id},l.a.createElement(S,e)))):l.a.createElement(c.EuiFlexItem,{grow:3},l.a.createElement(c.EuiText,null,l.a.createElement("p",null,t?l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epmList.missingIntegrationPlaceholder",defaultMessage:"We didn't find any integrations matching your search term. Please try another keyword or browse using the categories on the left."}):l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epmList.noPackagesFoundPlaceholder",defaultMessage:"No packages found"})))))}function A({resetQuery:e,setSelectedCategory:t}){const a=Object(n.useCallback)((()=>{e(),t("custom")}),[e,t]);return l.a.createElement(c.EuiText,{size:"s",color:"subdued"},l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.missing",defaultMessage:"Don't see an integration? Collect any logs or metrics using our {customInputsLink}. Request new integrations in our {forumLink}.",values:{customInputsLink:l.a.createElement(c.EuiLink,{onClick:a},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.customInputsLink",defaultMessage:"custom inputs"})),forumLink:l.a.createElement(c.EuiLink,{href:"https://discuss.elastic.co/tag/integrations",external:!0,target:"_blank"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.discussForumLink",defaultMessage:"forum"}))}})))}const N={id:"",title:x.i18n.translate("xpack.fleet.epmList.allPackagesFilterLinkText",{defaultMessage:"All categories"})},z={id:"",title:x.i18n.translate("xpack.fleet.epmList.allPackagesInstalledFilterLinkText",{defaultMessage:"All installed"})};function U({isLoading:e,categories:t,selectedCategory:a,onCategoryChange:n}){return l.a.createElement(c.EuiFacetGroup,null,e?l.a.createElement(f.l,null):t.map((e=>l.a.createElement(c.EuiFacetButton,{isSelected:e.id===a,key:e.id,id:e.id,quantity:e.count,onClick:()=>n(e)},e.title))))}const B=()=>{const{docLinks:e}=Object(p.G)();return l.a.createElement(c.EuiLink,{href:e.links.fleet.learnMoreBlog,target:"_blank"},x.i18n.translate("xpack.fleet.epmList.availableCalloutBlogText",{defaultMessage:"announcement blog post"}))},D=()=>l.a.createElement(c.EuiCallOut,{title:x.i18n.translate("xpack.fleet.epmList.availableCalloutTitle",{defaultMessage:"Only installed Elastic Agent Integrations are displayed."}),iconType:"iInCircle"},l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epmList.availableCalloutIntroText",defaultMessage:"To learn more about integrations and the Elastic Agent, read our {link}",values:{link:l.a.createElement(B,null)}}))),R=Object(n.memo)((()=>{Object(p.m)("integrations_installed");const{data:e,isLoading:t}=Object(p.w)({experimental:!0}),{getHref:a,getAbsolutePath:i}=Object(p.z)(),{selectedCategory:r,searchParam:o}=ne(Object(s.useParams)(),Object(s.useLocation)().search),c=Object(s.useHistory)();function u(e){const t=E.j.integrations_installed({category:e,searchTerm:o})[1];c.push(t)}const d=Object(n.useMemo)((()=>((null==e?void 0:e.response)||[]).filter((e=>e.status===M.Gb.Installed))),[null==e?void 0:e.response]),m=Object(n.useMemo)((()=>d.filter((e=>"savedObject"in e&&y()(e.savedObject.attributes.version,e.version)))),[d]),g=Object(n.useMemo)((()=>[{...z,count:d.length},{id:"updates_available",count:m.length,title:x.i18n.translate("xpack.fleet.epmList.updatesAvailableFilterLinkText",{defaultMessage:"Updates available"})}]),[d.length,m.length]);if(!le(r,g))return c.replace(E.j.integrations_installed({category:"",searchTerm:o})[1]),null;const f=l.a.createElement(U,{categories:g,selectedCategory:r,onCategoryChange:({id:e})=>u(e)}),h=("updates_available"===r?m:d).map((e=>ie(i,a,e))),b="updates_available"===r?null:l.a.createElement(D,null);return l.a.createElement(T,{isLoading:t,controls:f,setSelectedCategory:u,callout:b,onSearchChange:function(e){c.replace(E.j.integrations_installed({category:r,searchTerm:e})[1])},initialSearch:o,list:h})}));var G=a(20),H=a.n(G),$=a(1),V=a(74);function W(e,t){const a=[],n=t,l=e.filter((e=>e.name!==M.S));l.forEach((e=>{const t=function(e,t,a){return"ga"===a?[]:Object(V.filterCustomIntegrations)(e,{eprPackageName:t})}(n,e.name,e.release);t.length?t.forEach((e=>{a.find((({id:t})=>t===e.id))||a.push(e)})):a.push(e)}));const i=n.filter((e=>!l.find((t=>t.name===e.eprOverlap))));return a.push(...i),a}const q=l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.recommendedTooltip",defaultMessage:"We recommend Elastic Agent integrations when they are generally available."}),K=O()(c.EuiFlexItem).withConfig({displayName:"Item",componentId:"sc-3a25e0-0"})(["padding-left:",";"],(e=>e.theme.eui.euiSizeXS)),Y=[{type:"recommended",label:l.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},l.a.createElement(c.EuiFlexItem,{grow:!1},x.i18n.translate("xpack.fleet.epm.integrationPreference.recommendedLabel",{defaultMessage:"Recommended"})),l.a.createElement(K,null,l.a.createElement(c.EuiIconTip,{content:q})))},{type:"agent",label:x.i18n.translate("xpack.fleet.epm.integrationPreference.elasticAgentLabel",{defaultMessage:"Elastic Agent only"})},{type:"beats",label:x.i18n.translate("xpack.fleet.epm.integrationPreference.beatsLabel",{defaultMessage:"Beats only"})}],J=({initialType:e,onChange:t})=>{const[a,n]=l.a.useState(e),{docLinks:i}=Object(p.G)(),r=l.a.createElement(c.EuiLink,{href:i.links.fleet.beatsAgentComparison},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.titleLink",defaultMessage:"Elastic Agent and Beats"})),s=l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.title",defaultMessage:"If an integration is available for {link}, show:",values:{link:r}}),o=Y.map((e=>({id:e.type,value:e.type,label:e.label})));return l.a.createElement(c.EuiPanel,{hasShadow:!1,paddingSize:"none"},l.a.createElement(c.EuiText,{size:"s"},s),l.a.createElement(c.EuiSpacer,{size:"m"}),l.a.createElement(c.EuiForm,null,l.a.createElement(c.EuiRadioGroup,{options:o,idSelected:a,onChange:(e,a)=>{n(e),t(a)},name:"preference"})),l.a.createElement(c.EuiSpacer,{size:"m"}))};var Q=a(77);const X=({statusCode:e})=>{let t,a;return 502===e?(t=x.i18n.translate("xpack.fleet.epmList.eprUnavailableBadGatewayCalloutTitle",{defaultMessage:"Kibana cannot reach the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallouBdGatewaytTitleMessage",defaultMessage:"To view these integrations, configure a  {registryproxy} or host {onpremregistry}.",values:{registryproxy:l.a.createElement(Z,null),onpremregistry:l.a.createElement(ee,null)}})):(t=x.i18n.translate("xpack.fleet.epmList.eprUnavailable400500CalloutTitle",{defaultMessage:"Kibana cannot connect to the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallout400500TitleMessage",defaultMessage:"Ensure the {registryproxy} or {onpremregistry} is configured correctly, or try again later.",values:{registryproxy:l.a.createElement(Z,null),onpremregistry:l.a.createElement(ee,null)}})),l.a.createElement(c.EuiCallOut,{title:t,iconType:"iInCircle",color:"warning"},l.a.createElement("p",null,a))};function Z(){const{docLinks:e}=Object(p.G)();return l.a.createElement(c.EuiLink,{href:e.links.fleet.settingsFleetServerProxySettings,target:"_blank"},x.i18n.translate("xpack.fleet.epmList.proxyLinkSnippedText",{defaultMessage:"proxy server"}))}function ee(){const{docLinks:e}=Object(p.G)();return l.a.createElement(c.EuiLink,{href:e.links.fleet.onPremRegistry,target:"_blank"},x.i18n.translate("xpack.fleet.epmList.onPremLinkSnippetText",{defaultMessage:"your own registry"}))}function te(e){var t;if(!Object($.h)(e))return e.categories;const a=null===(t=e.policy_templates)||void 0===t?void 0:t.reduce(((e,t)=>[...e,...t.categories||[]]),e.categories||[]);return H.a.uniq(a)}const ae=Object(n.memo)((()=>{const[e,t]=Object(n.useState)("recommended");Object(p.m)("integrations_all");const{http:a}=Object(p.G)(),i=a.basePath.prepend,{selectedCategory:r,searchParam:o}=ne(Object(s.useParams)(),Object(s.useLocation)().search),u=Object(s.useHistory)(),{getHref:d,getAbsolutePath:m}=Object(p.z)();function g(e){const t=E.j.integrations_all({category:e,searchTerm:o})[1];u.push(t)}const{data:f,isLoading:h,error:b}=Object(p.w)({category:""}),k=Object(n.useMemo)((()=>((null==f?void 0:f.response)||[]).reduce(((e,t)=>{const{policy_templates:a=[],categories:n=[],...l}=t;return[...e,{...l,categories:te(t)},...Object($.h)(t)?a.map((e=>{const{name:t,title:a,description:i,icons:r,categories:s=[]}=e,o=[...n,...s];return{...l,id:`${l.id}-${t}`,integration:t,title:a,description:i,icons:r||l.icons,categories:H.a.uniq(o)}})):[]]}),[])),[f]),{value:v}=Object(p.x)(),y=W("beats"===e?[]:k,"agent"===e?[]:v||[]),{loading:M,value:j}=Object(p.p)(),O=[...y,...j||[]].map((e=>ie(m,d,e)));O.sort(((e,t)=>e.title.localeCompare(t.title)));const{data:C,isLoading:I,error:w}=Object(p.q)({include_policy_templates:!0}),P=Object(n.useMemo)((()=>{const e=I?[]:function(e,t){const a=[],n=(e,t,n)=>{const l=a.find((t=>t.id===e));l?l.count+=t:a.push({id:e,count:t,title:n})};e.forEach((e=>{n(e.id,0,e.title)})),t.forEach((e=>{e.categories.forEach((e=>{const t=Q.INTEGRATION_CATEGORY_DISPLAY[e]?Q.INTEGRATION_CATEGORY_DISPLAY[e]:e;n(e,1,t)}))}));const l=a.filter((e=>e.count>0));return l.sort(((e,t)=>e.id.localeCompare(t.id))),l}(C?C.response:[],O);return[{...N,count:O.length},...e||[]]}),[O,C,I]);if(!I&&!le(r,P))return u.replace(E.j.integrations_all({category:"",searchTerm:o})[1]),null;let S=[l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiHorizontalRule,{margin:"m"}),l.a.createElement(J,{initialType:e,onChange:t}))];P&&(S=[l.a.createElement(c.EuiFlexItem,{className:"eui-yScrollWithShadows"},l.a.createElement(U,{isLoading:I||h||M,categories:P,selectedCategory:r,onCategoryChange:({id:e})=>{g(e)}})),...S]);const _=O.filter((e=>""===r||e.categories.includes(r))),L=l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiFlexGrid,{columns:3},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(F.TrackApplicationView,{viewId:"integration-card:epr:app_search_web_crawler:featured"},l.a.createElement(c.EuiCard,{"data-test-subj":"integration-card:epr:app_search_web_crawler:featured",icon:l.a.createElement(c.EuiIcon,{type:"logoAppSearch",size:"xxl"}),href:i("/app/enterprise_search/app_search/engines/new?method=crawler"),title:x.i18n.translate("xpack.fleet.featuredSearchTitle",{defaultMessage:"Web site crawler"}),description:x.i18n.translate("xpack.fleet.featuredSearchDesc",{defaultMessage:"Add search to your website with the App Search web crawler."})}))),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(F.TrackApplicationView,{viewId:"integration-card:epr:apm:featured"},l.a.createElement(c.EuiCard,{"data-test-subj":"integration-card:epr:apm:featured",title:x.i18n.translate("xpack.fleet.featuredObsTitle",{defaultMessage:"Elastic APM"}),description:x.i18n.translate("xpack.fleet.featuredObsDesc",{defaultMessage:"Monitor, detect and diagnose complex performance issues from your application."}),href:i("/app/home#/tutorial/apm"),icon:l.a.createElement(c.EuiIcon,{type:"logoObservability",size:"xxl"})}))),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(F.TrackApplicationView,{viewId:"integration-card:epr:endpoint:featured"},l.a.createElement(c.EuiCard,{"data-test-subj":"integration-card:epr:endpoint:featured",icon:l.a.createElement(c.EuiIcon,{type:"logoSecurity",size:"xxl"}),href:i("/app/integrations/detail/endpoint/"),title:x.i18n.translate("xpack.fleet.featuredSecurityTitle",{defaultMessage:"Endpoint Security"}),description:x.i18n.translate("xpack.fleet.featuredSecurityDesc",{defaultMessage:"Protect your hosts with threat prevention, detection, and deep security data visibility."})})))),l.a.createElement(c.EuiSpacer,{size:"xl"}));let A;if(b||w){const e=b||w;A=l.a.createElement(X,{statusCode:null==e?void 0:e.statusCode})}return l.a.createElement(T,{featuredList:L,isLoading:h,controls:S,initialSearch:o,list:_,setSelectedCategory:g,onSearchChange:function(e){u.replace(E.j.integrations_all({searchTerm:e})[1])},showMissingIntegrationMessage:!0,callout:A})})),ne=(e,t)=>{const{category:a}=e;return{selectedCategory:a||"",searchParam:new URLSearchParams(t).get(E.g)||""}},le=(e,t)=>t.some((t=>t.id===e)),ie=(e,t,a)=>{let n,l;if("ui_link"===a.type)n=a.uiExternalLink||e(a.uiInternalPath);else{let e=a.version;"savedObject"in a&&(e=a.savedObject.attributes.version||a.version);n=t("integration_details_overview",{pkgkey:`${a.name}-${e}`,...a.integration?{integration:a.integration}:{}})}return"release"in a?l=a.release:!0===a.isBeta&&(l="beta"),{id:`${"ui_link"===a.type?"ui_link":"epr"}:${a.id}`,description:a.description,icons:a.icons&&a.icons.length?a.icons:[],title:a.title,url:n,integration:"integration"in a&&a.integration||"",name:"name"in a&&a.name||"",version:"version"in a&&a.version||"",release:l,categories:(a.categories||[]).filter((e=>!!e))}},re=Object(n.memo)((()=>l.a.createElement(s.Switch,null,l.a.createElement(s.Route,{path:E.f.integrations_installed},l.a.createElement(k,{section:"manage"},l.a.createElement(R,null))),l.a.createElement(s.Route,{path:E.f.integrations_all},l.a.createElement(k,{section:"browse"},l.a.createElement(ae,null))))));var se=a(30);const oe=({size:e="m"})=>l.a.createElement(c.EuiIconTip,{"aria-label":x.i18n.translate("xpack.fleet.epm.updateAvailableTooltip",{defaultMessage:"Update available"}),size:e,type:"alert",color:"warning",content:x.i18n.translate("xpack.fleet.epm.updateAvailableTooltip",{defaultMessage:"Update available"})}),ce=Object(n.memo)((({packageName:e})=>{var t;const{data:a}=Object(p.v)(e);return l.a.createElement(l.a.Fragment,null,null!==(t=null==a?void 0:a.response.agent_policy_count)&&void 0!==t?t:0)})),ue=O()(c.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-536qps-0"})(["padding:",";width:","px;svg,img{height:","px;width:","px;}.euiFlexItem{height:","px;justify-content:center;}"],(e=>e.theme.eui.spacerSizes.xl),(e=>6*parseFloat(e.theme.eui.euiSize)+2*parseFloat(e.theme.eui.euiSizeXL)),(e=>6*parseFloat(e.theme.eui.euiSize)),(e=>6*parseFloat(e.theme.eui.euiSize)),(e=>6*parseFloat(e.theme.eui.euiSize)));function de({packageName:e,integrationName:t,version:a,icons:n}){const i=Object(p.C)({packageName:e,integrationName:t,version:a,icons:n});return l.a.createElement(ue,null,l.a.createElement(c.EuiIcon,{type:i,size:"original"}))}function me(){return l.a.createElement(ue,null,l.a.createElement(f.l,null))}const ge=({checked:e,onChange:t})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSwitch,{label:x.i18n.translate("xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateLabel",{defaultMessage:"Keep integration policies up to date automatically"}),checked:e,onChange:t}),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement(c.EuiText,{color:"subdued",size:"xs"},l.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiIcon,{type:"iInCircle"})),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateDescription",defaultMessage:"When enabled, Fleet will attempt to upgrade and deploy integration policies automatically"}))))),pe=[se.c.dashboard,se.c.search,se.c.visualization];var Ee=a(41);const fe=({savedObjects:e,type:t})=>{const{http:a}=Object(p.G)(),n=t===se.c.dashboard;return l.a.createElement(c.EuiAccordion,{initialIsOpen:n,buttonContent:l.a.createElement(c.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s",responsive:!1},l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiText,{size:"m"},l.a.createElement("h3",null,Ee.a[t]))),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiNotificationBadge,{color:"subdued",size:"m"},l.a.createElement("h3",null,e.length)))),id:t},l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSpacer,{size:"m"}),l.a.createElement(c.EuiSplitPanel.Outer,{hasBorder:!0,hasShadow:!1},e.map((({id:n,attributes:{title:i,description:r}},s)=>{if("view"===t)return;const o=Object(p.e)({http:a,id:n,type:t});return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSplitPanel.Inner,{grow:!1,key:s},l.a.createElement(c.EuiText,{size:"m"},l.a.createElement("p",null,o?l.a.createElement(c.EuiLink,{href:o},i):i)),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement(c.EuiText,{size:"s",color:"subdued"},l.a.createElement("p",null,r)))),s+1<e.length&&l.a.createElement(c.EuiHorizontalRule,{margin:"none"}))})))))},he=({packageInfo:e})=>{const{name:t,version:a}=e,i=`${t}-${a}`,{savedObjects:{client:r}}=Object(p.G)(),o=Object(p.H)(e.name,"package-detail-assets"),{getPath:u}=Object(p.z)(),d=Object(p.t)()(e.name),[m,g]=Object(n.useState)(),[E,h]=Object(n.useState)(),[k,v]=Object(n.useState)(!0);if(Object(n.useEffect)((()=>{(async()=>{if("savedObject"in e){const{savedObject:{attributes:t}}=e;if(!t.installed_kibana||0===t.installed_kibana.length)return void v(!1);try{const e=t.installed_kibana.map((({id:e,type:t})=>({id:e,type:t}))),a=await Promise.all(Object.entries(Object(G.groupBy)(e,"type")).map((([e,t])=>r.bulkGet(t).catch((e=>{var t;if(403===(null==e||null===(t=e.body)||void 0===t?void 0:t.statusCode))return{savedObjects:[]};throw e})).then((({savedObjects:e})=>e)))));g(a.flat())}catch(e){h(e)}finally{v(!1)}}else v(!1)})()}),[r,e]),d.status!==se.b.installed)return l.a.createElement(s.Redirect,{to:u("integration_details_overview",{pkgkey:i})});let y;return y=k?l.a.createElement(f.l,null):E?l.a.createElement(f.g,{title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.fetchAssetsErrorTitle",defaultMessage:"Error loading assets"}),error:E}):void 0===m?o?l.a.createElement(f.h,null,l.a.createElement(o.Component,null)):l.a.createElement(c.EuiTitle,null,l.a.createElement("h2",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.noAssetsFoundLabel",defaultMessage:"No assets found"}))):[...pe.map((e=>{const t=m.filter((t=>t.type===e));return t.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(fe,{savedObjects:t,type:e}),l.a.createElement(c.EuiSpacer,{size:"l"})):null})),o?l.a.createElement(f.h,null,l.a.createElement(o.Component,null)):null],l.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(c.EuiFlexItem,{grow:1}),l.a.createElement(c.EuiFlexItem,{grow:6},y))},be=Object(n.memo)((({images:e,packageName:t,version:a})=>{const{toPackageImage:i}=Object(p.A)(),[r,s]=Object(n.useState)(0),o=Object(n.useMemo)((()=>e.length-1),[e.length]),u=Object(n.useMemo)((()=>i(e[r],t,a)),[r,e,t,i,a]);return l.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween"},l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiText,null,l.a.createElement("h4",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.screenshotsTitle",defaultMessage:"Screenshots"})))),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiPagination,{"aria-label":x.i18n.translate("xpack.fleet.epm.screenshotPaginationAriaLabel",{defaultMessage:"{packageName} screenshot pagination",values:{packageName:t}}),pageCount:o+1,activePage:r,onPageClick:e=>s(e),compressed:!0})))),l.a.createElement(c.EuiFlexItem,null,u?l.a.createElement(c.EuiImage,{allowFullScreen:!0,hasShadow:!0,alt:e[r].title||x.i18n.translate("xpack.fleet.epm.screenshotAltText",{defaultMessage:"{packageName} screenshot #{imageNumber}",values:{packageName:t,imageNumber:r+1}}),title:e[r].title,url:u}):l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.screenshotErrorText",defaultMessage:"Unable to load this screenshot"})))}));var ke=a(115),ve=a.n(ke);const ye={$json:"json",$yml:"yml"},xe={root:({children:e})=>l.a.createElement(c.EuiText,{grow:!0},e),table:({children:e})=>l.a.createElement("table",{className:"euiTable euiTable--responsive"},e),tableRow:({children:e})=>l.a.createElement(c.EuiTableRow,null,e),tableCell:({isHeader:e,children:t})=>e?l.a.createElement(c.EuiTableHeaderCell,null,t):l.a.createElement(c.EuiTableRowCell,null,t),heading:({level:e,children:t})=>{switch(e){case 1:return l.a.createElement("h3",null,t);case 2:return l.a.createElement("h4",null,t);case 3:return l.a.createElement("h5",null,t);default:return l.a.createElement("h6",null,t)}},link:({children:e,href:t})=>l.a.createElement(c.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer"},e),code:({language:e,value:t})=>{let a=e;const n=ye[e];return n&&(a=n),l.a.createElement(c.EuiCodeBlock,{language:a,isCopyable:!0},t)}};function Me({readmePath:e,packageName:t,version:a}){const[i,r]=Object(n.useState)(void 0),{toRelativeImage:s}=Object(p.A)(),o=l.a.useCallback((e=>0!==e.indexOf("http://")&&0!==e.indexOf("https://")?s({packageName:t,version:a,path:e}):e),[s,t,a]);return Object(n.useEffect)((()=>{Object(p.h)(e).then((e=>{r(e.data||"")}))}),[e]),l.a.createElement(n.Fragment,null,void 0!==i?l.a.createElement(ve.a,{transformImageUri:o,renderers:xe,source:i}):l.a.createElement(c.EuiText,null,l.a.createElement("p",null,l.a.createElement(c.EuiLoadingContent,{lines:5})),l.a.createElement("p",null,l.a.createElement(c.EuiLoadingContent,{lines:6})),l.a.createElement("p",null,l.a.createElement(c.EuiLoadingContent,{lines:4}))))}const je=({noticePath:e,onClose:t})=>{const{notifications:a}=Object(p.G)(),[i,r]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{!async function(){try{const{data:t}=await Object(p.h)(e);r(t||"")}catch(e){a.toasts.addError(e,{title:x.i18n.translate("xpack.fleet.epm.errorLoadingNotice",{defaultMessage:"Error loading NOTICE.txt"})})}}()}),[e,a]),l.a.createElement(c.EuiModal,{maxWidth:!0,onClose:t},l.a.createElement(c.EuiModalHeader,null,l.a.createElement(c.EuiModalHeaderTitle,null,l.a.createElement("h1",null,"NOTICE.txt"))),l.a.createElement(c.EuiModalBody,null,l.a.createElement(c.EuiCodeBlock,{overflowHeight:360},i||l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement(c.EuiLoadingContent,{lines:5})),l.a.createElement("p",null,l.a.createElement(c.EuiLoadingContent,{lines:6}))))),l.a.createElement(c.EuiModalFooter,null,l.a.createElement(c.EuiButton,{color:"primary",fill:!0,onClick:t},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.noticeModalCloseBtn",defaultMessage:"Close"}))))},Oe=Object(V.withSuspense)(V.LazyReplacementCard),Fe=Object(g.euiStyled)(c.EuiFlexItem)`
  margin: 0;

  & .euiAccordion {
    padding-top: ${({theme:e})=>2*parseInt(e.eui.euiSizeL,10)}px;

    &::before {
      content: '';
      display: block;
      border-top: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
      position: relative;
      top: -${({theme:e})=>e.eui.euiSizeL};
      margin: 0 ${({theme:e})=>e.eui.euiSizeXS};
    }
  }
`,Ce=Object(n.memo)((({packageInfo:e})=>{const{data:t,isLoading:a}=Object(p.q)(),i=Object(n.useMemo)((()=>!a&&t&&t.response?t.response.filter((t=>{var a;return null===(a=e.categories)||void 0===a?void 0:a.includes(t.id)})).map((e=>e.title)):[]),[t,a,e.categories]),[r,s]=Object(n.useState)(!1),o=Object(n.useCallback)((()=>{s(!r)}),[r]),u=Object(n.useMemo)((()=>{var t;const a=[{title:l.a.createElement(c.EuiTextColor,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.versionLabel",defaultMessage:"Version"})),description:e.version},{title:l.a.createElement(c.EuiTextColor,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.categoryLabel",defaultMessage:"Category"})),description:i.join(", ")}];Object(se.d)(e.assets).forEach((([e,t])=>{const n=Object(se.d)(t).reduce(((t,[a,n])=>(Ee.b[e].includes(a)&&(t[a]=n),t)),{});Object.entries(n).length&&a.push({title:l.a.createElement(c.EuiTextColor,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.assetGroupTitle",defaultMessage:"{assetType} assets",values:{assetType:Ee.c[e]}})),description:l.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(se.d)(n).map((([e,t],a)=>{const n=e;return l.a.createElement(c.EuiFlexItem,{key:`item-${a}`},l.a.createElement(c.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},l.a.createElement(c.EuiFlexItem,{grow:!1},Ee.a[n]),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiNotificationBadge,{color:"subdued"},t.length))))})))})}));const n=[...new Set((null===(t=e.data_streams)||void 0===t?void 0:t.map((e=>e.type)))||[])];return n.length&&a.push({title:l.a.createElement(c.EuiTextColor,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.featuresLabel",defaultMessage:"Features"})),description:n.join(", ")}),(e.license||e.notice)&&a.push({title:l.a.createElement(c.EuiTextColor,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.licenseLabel",defaultMessage:"License"})),description:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,e.license),e.notice&&l.a.createElement("p",null,l.a.createElement(c.EuiLink,{onClick:o},"NOTICE.txt")))}),a}),[i,e.assets,e.data_streams,e.license,e.notice,e.version,o]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiPortal,null,r&&e.notice&&l.a.createElement(je,{noticePath:e.notice,onClose:o})),l.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiText,null,l.a.createElement("h4",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.detailsTitle",defaultMessage:"Details"})))),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiDescriptionList,{type:"column",compressed:!0,listItems:u})),l.a.createElement(Fe,null,l.a.createElement(Oe,{eprPackageName:e.name}))))})),Ie=O()(c.EuiFlexItem).withConfig({displayName:"LeftColumn",componentId:"sc-uj4rsg-0"})(["&&&{margin-top:77px;}"]),we=Object(n.memo)((({packageInfo:e,integrationInfo:t})=>{const a=Object(n.useMemo)((()=>(null==t?void 0:t.screenshots)||e.screenshots||[]),[t,e.screenshots]);return l.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(Ie,{grow:2}),l.a.createElement(c.EuiFlexItem,{grow:9,className:"eui-textBreakWord"},e.readme?l.a.createElement(Me,{readmePath:(null==t?void 0:t.readme)||e.readme,packageName:e.name,version:e.version}):null),l.a.createElement(c.EuiFlexItem,{grow:3},l.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"l",alignItems:"flexStart"},a.length?l.a.createElement(c.EuiFlexItem,null,l.a.createElement(be,{images:a,packageName:e.name,version:e.version})):null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(Ce,{packageInfo:e})))))}));var Pe=a(12);const Se=({onAddAgent:e})=>l.a.createElement(c.EuiButton,{iconType:"plusInCircle","data-test-subj":"addAgentButton",onClick:e,size:"s"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.addAgent",defaultMessage:"Add agent"})),Te=({onAddAgent:e})=>{const[t,a]=Object(n.useState)(!0),i=l.a.createElement(Se,{onAddAgent:()=>{a(!1),e()}});return l.a.createElement(f.a,{button:i,isOpen:t,closePopover:()=>a(!1)})},_e=({agentPolicy:e,agentCount:t=0,onAddAgent:a,hasHelpPopover:n=!1})=>t>0||e.is_managed?l.a.createElement(f.k,{count:t,agentPolicyId:e.id,className:"eui-textTruncate"}):n?l.a.createElement(Te,{onAddAgent:a}):l.a.createElement(Se,{onAddAgent:a});var Le=a(86),Ae=a.n(Le);const Ne={minWidth:0},ze=Object(n.memo)((({name:e,className:t,"data-test-subj":a,title:i,...r})=>{const s=Object(n.useCallback)((e=>{if(a)return`${a}-${e}`}),[a]);return l.a.createElement(c.EuiFlexGroup,{gutterSize:"s",alignItems:"baseline",style:Ne,className:t,"data-test-subj":a,title:i,responsive:!1},l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiAvatar,Ae()({name:e,"data-test-subj":s("avatar")},r))),l.a.createElement(c.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},l.a.createElement(c.EuiText,{size:"s",className:"eui-textTruncate","data-test-subj":s("name")},e)))})),Ue=Object(n.memo)((({packagePolicy:e})=>{const{getHref:t}=Object(p.z)();return l.a.createElement(c.EuiLink,{className:"eui-textTruncate","data-test-subj":"integrationNameLink",title:e.name,href:t("integration_policy_edit",{packagePolicyId:e.id})},e.name)})),Be=({name:e,version:t})=>{var a,i,r;const{search:o}=Object(s.useLocation)(),u=Object(s.useHistory)(),d=Object(n.useMemo)((()=>new URLSearchParams(o)),[o]),m=Object(n.useMemo)((()=>d.get("addAgentToPolicyId")),[d]),g=Object(n.useMemo)((()=>d.get("showAddAgentHelpForPolicyId")),[d]),[h,k]=Object(n.useState)(m),{getPath:v,getHref:y}=Object(p.z)(),M=Object(p.t)()(e),{pagination:j,pageSizeOptions:O,setPagination:F}=Object(p.K)(),{data:C,isLoading:I,resendRequest:w}=(e=>{const{data:t,error:a,isLoading:l,resendRequest:i}=Object(p.u)(e),r=Object(n.useMemo)((()=>{if(null==t||!t.items.length)return"";const e=new Set;return`${E.a}.package_policies: (${t.items.filter((t=>!e.has(t.policy_id)&&(e.add(t.policy_id),!0))).map((e=>e.id)).join(" or ")}) `}),[t]),{data:s,isLoading:o}=Object(p.o)({path:$.b.getListPath(),method:"get",query:{perPage:100,kuery:r},shouldSendRequest:!(null==t||!t.items.length)}),[c,u]=Object(n.useState)();return Object(n.useEffect)((()=>{if(l||o)return;if(null==t||!t.items)return void u(void 0);const e={};if(null!=s&&s.items)for(const t of s.items)e[t.id]=t;const a=t.items.map((t=>({packagePolicy:t,agentPolicy:e[t.policy_id]})));u({...t,items:a})}),[o,l,t,s]),{data:c,error:a,isLoading:l||o,resendRequest:i}})({page:j.currentPage,perPage:j.pageSize,kuery:`${E.h}.package.name: ${e}`}),{updatableIntegrations:P}=Object(p.D)(),S=Object(p.H)(e,"agent-enrollment-flyout"),T=Object(n.useMemo)((()=>{if(null==C||!C.items)return[];return C.items.map((({agentPolicy:e,packagePolicy:t})=>{var a,n;const l=P.get(null!==(a=null===(n=t.package)||void 0===n?void 0:n.name)&&void 0!==a?a:""),i=!!l&&l.policiesToUpgrade.some((({pkgPolicyId:e})=>e===t.id));return{agentPolicy:e,packagePolicy:{...t,hasUpgrade:i}}}))}),[null==C?void 0:C.items,P]),_=null===(a=T.find((({agentPolicy:e})=>e.id===g)))||void 0===a||null===(i=a.packagePolicy)||void 0===i?void 0:i.id;Object(n.useEffect)((()=>{const e=u.listen((e=>{const t=new URLSearchParams(e.search).get("addAgentToPolicyId");t&&k(t)}));return()=>e()}),[u]);const L=Object(n.useCallback)((({page:e})=>{F({currentPage:e.index+1,pageSize:e.size})}),[F]),A=Object(n.useMemo)((()=>S?{title:S.title,children:l.a.createElement(S.Component,null)}:{title:x.i18n.translate("xpack.fleet.agentEnrollment.stepViewDataTitle",{defaultMessage:"View your data"}),children:l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiText,null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.agentEnrollment.viewDataDescription",defaultMessage:"After your agent starts, you can view your data in Kibana by using the integration's installed assets. {pleaseNote}: it may take a few minutes for the initial data to arrive.",values:{pleaseNote:l.a.createElement("strong",null,x.i18n.translate("xpack.fleet.epm.agentEnrollment.viewDataDescription.pleaseNoteLabel",{defaultMessage:"Please note"}))}})),l.a.createElement(c.EuiSpacer,{size:"l"}),l.a.createElement(c.EuiButton,{fill:!0,href:y("integration_details_assets",{pkgkey:`${e}-${t}`})},x.i18n.translate("xpack.fleet.epm.agentEnrollment.viewDataAssetsLabel",{defaultMessage:"View assets"})))}),[e,t,y,S]),N=Object(n.useMemo)((()=>[{field:"packagePolicy.name",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.name",{defaultMessage:"Integration policy"}),render:(e,{packagePolicy:t})=>l.a.createElement(Ue,{packagePolicy:t})},{field:"packagePolicy.package.version",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.version",{defaultMessage:"Version"}),render:(e,{agentPolicy:t,packagePolicy:a})=>l.a.createElement(c.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiText,{size:"s",className:"eui-textNoWrap"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.packageVersion",defaultMessage:"v{version}",values:{version:e}}))),a.hasUpgrade&&l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiButton,{size:"s",minWidth:"0",href:`${y("upgrade_package_policy",{policyId:t.id,packagePolicyId:a.id})}?from=integrations-policy-list`},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.upgradeButton",defaultMessage:"Upgrade"}))))},{field:"packagePolicy.policy_id",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.agentPolicy",{defaultMessage:"Agent policy"}),truncateText:!0,render:(e,{agentPolicy:t})=>l.a.createElement(f.d,{policy:t})},{field:"packagePolicy.updated_by",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.updatedBy",{defaultMessage:"Last updated by"}),truncateText:!0,render:e=>l.a.createElement(ze,{size:"s",name:e,title:e})},{field:"packagePolicy.updated_at",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.updatedAt",{defaultMessage:"Last updated"}),truncateText:!0,render:e=>l.a.createElement("span",{className:"eui-textTruncate",title:e},l.a.createElement(b.FormattedRelative,{value:e}))},{field:"",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.agentCount",{defaultMessage:"Agents"}),render:({agentPolicy:e,packagePolicy:t})=>l.a.createElement(_e,{agentPolicy:e,agentCount:e.agents,onAddAgent:()=>k(e.id),hasHelpPopover:_===t.id})},{field:"",name:x.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.actions",{defaultMessage:"Actions"}),width:"8ch",align:"right",render:({agentPolicy:e,packagePolicy:t})=>l.a.createElement(f.o,{agentPolicy:e,packagePolicy:t,viewDataStep:A,showAddAgent:!0,upgradePackagePolicyHref:`${y("upgrade_package_policy",{policyId:e.id,packagePolicyId:t.id})}?from=integrations-policy-list`})}]),[y,_,A]),z=Object(n.useMemo)((()=>I?l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.loadingPoliciesMessage",defaultMessage:"Loading integration policiesâ€¦"}):void 0),[I]),U=Object(n.useMemo)((()=>{var e;return{pageIndex:j.currentPage-1,pageSize:j.pageSize,totalItemCount:null!==(e=null==C?void 0:C.total)&&void 0!==e?e:0,pageSizeOptions:O}}),[null==C?void 0:C.total,O,j.currentPage,j.pageSize]);return M.status!==se.b.installed?l.a.createElement(s.Redirect,{to:v("integration_details_overview",{pkgkey:`${e}-${t}`})}):l.a.createElement(p.b.Provider,{value:{refresh:w}},l.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(c.EuiFlexItem,{grow:1}),l.a.createElement(c.EuiFlexItem,{grow:6},l.a.createElement(c.EuiBasicTable,{items:T||[],columns:N,loading:I,"data-test-subj":"integrationPolicyTable",pagination:U,onChange:L,noItemsMessage:z}))),h&&!I&&l.a.createElement(f.b,{onClose:()=>{k(null);const{addAgentToPolicyId:e,...t}=Object(Pe.parse)(o);u.replace({search:Object(Pe.stringify)(t)})},agentPolicy:null===(r=T.find((({agentPolicy:e})=>e.id===h)))||void 0===r?void 0:r.agentPolicy,viewDataStep:A}))};var De=a(40);const Re=e=>{const{onCancel:t,onConfirm:a,packageName:n,numOfAssets:i}=e;return l.a.createElement(c.EuiConfirmModal,{title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installTitle",defaultMessage:"Install {packageName}",values:{packageName:n}}),onCancel:t,onConfirm:a,cancelButtonText:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installButtonLabel",defaultMessage:"Install {packageName}",values:{packageName:n}}),defaultFocusedButton:"confirm"},l.a.createElement(c.EuiCallOut,{iconType:"iInCircle",title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installCalloutTitle",defaultMessage:"This action will install {numOfAssets} assets",values:{numOfAssets:i}})}),l.a.createElement(c.EuiSpacer,{size:"l"}),l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installDescription",defaultMessage:"Kibana assets will be installed in the current Space (Default) and will only be accessible to users who have permission to view this Space. Elasticsearch assets are installed globally and will be accessible to all Kibana users."})))};function Ge(e){const{name:t,numOfAssets:a,title:i,version:r}=e,s=Object(p.n)().write,o=Object(p.y)(),u=Object(p.t)(),{status:d}=u(t),[g,E]=Object(n.useState)(!1),f=d===se.b.installing||g,[h,k]=Object(n.useState)(!1),v=Object(n.useCallback)((()=>{k(!h)}),[h]),{notifications:y}=Object(p.G)(),x=Object(n.useCallback)((async()=>{E(!0),v();try{const e=await Object(De.b)({forceRecreate:!1});if(e.error)throw e.error}catch(e){y.toasts.addWarning({title:Object(m.toMountPoint)(l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.fleetSetupErrorTitle",defaultMessage:"Failed to setup Fleet"})),text:Object(m.toMountPoint)(l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.fleetSetupErrorDescription",defaultMessage:"Something went wrong while trying to setup Fleet. Please try again by navigating to Fleet tab."})),iconType:"alert"})}E(!1),o({name:t,version:r,title:i})}),[o,t,i,v,r,y.toasts]),M=l.a.createElement(Re,{numOfAssets:a,packageName:i,onCancel:v,onConfirm:x});return s?l.a.createElement(n.Fragment,null,l.a.createElement(c.EuiButton,{iconType:"importAction",isLoading:f,onClick:v},f?l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.installingPackageButtonLabel",defaultMessage:"Installing {title} assets",values:{title:i}}):l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.installPackageButtonLabel",defaultMessage:"Install {title} assets",values:{title:i}})),h&&M):null}const He=({dryRunData:e,isUpgradingPackagePolicies:t=!1,name:a,packagePolicyIds:i=[],setIsUpgradingPackagePolicies:r=(()=>{}),title:o,version:u})=>{const d=Object(s.useHistory)(),{getPath:g}=Object(p.z)(),{notifications:f}=Object(p.G)(),h=Object(p.n)().write,k=Object(p.y)(),v=Object(p.t)(),{status:y}=v(a),M=y===se.b.installing,[j,O]=Object(n.useState)(!1),[F,C]=Object(n.useState)(!0),[I,w]=Object(n.useState)();Object(n.useEffect)((()=>{(async()=>{if(i&&i.length>0){const{data:e}=await Object(p.g)({perPage:1e3,page:1,kuery:`${E.a}.package_policies:${i.map((e=>`"${e}"`)).join(" or ")}`});w(e)}})()}),[i]);const P=Object(n.useMemo)((()=>i.length),[i]);const S=Object(n.useMemo)((()=>null!=I&&I.items?I.items.reduce(((e,t)=>{var a;return e+((null!=t&&t.package_policies?(a=t.package_policies,Array.isArray(a)&&a.every((e=>"string"==typeof e))?t.package_policies.filter((e=>i.includes(e))):t.package_policies.filter((e=>i.includes(e.id)))):[]).length>0&&null!=t&&t.agents?null==t?void 0:t.agents:0)}),0):0),[I,i]),T=Object(n.useMemo)((()=>null==e?void 0:e.filter((e=>e.hasErrors)).length),[e]),_=Object(n.useCallback)((()=>{C((e=>!e))}),[]),L=Object(n.useCallback)((()=>{const e=g("integration_details_settings",{pkgkey:`${a}-${u}`});d.push(e)}),[d,g,a,u]),A=Object(n.useCallback)((async()=>{await k({name:a,version:u,title:o,fromUpdate:!0})}),[k,a,o,u]),N=Object(n.useCallback)((async()=>{t||(O(!1),r(!0),await k({name:a,version:u,title:o}),await Object(p.j)(i.filter((t=>{var a;return!(null!=e&&null!==(a=e.find((e=>{var a;return(null===(a=e.diff)||void 0===a?void 0:a[0].id)===t})))&&void 0!==a&&a.hasErrors)}))),r(!1),f.toasts.addSuccess({title:Object(m.toMountPoint)(l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.packageUpdateSuccessTitle",defaultMessage:"Updated {title} and upgraded policies",values:{title:o}})),text:Object(m.toMountPoint)(l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.packageUpdateSuccessDescription",defaultMessage:"Successfully updated {title} and upgraded policies",values:{title:o}}))}),L())}),[e,k,t,a,L,f.toasts,i,r,o,u]),z=l.a.createElement(c.EuiConfirmModal,{isLoading:t,maxWidth:568,onCancel:()=>{O(!1)},cancelButtonText:x.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.cancel",{defaultMessage:"Cancel"}),onConfirm:N,confirmButtonText:x.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.confirm",{defaultMessage:"Upgrade {packageName} and policies",values:{packageName:o}}),title:x.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.updateTitle",{defaultMessage:"Upgrade {packageName} and policies",values:{packageName:o}})},l.a.createElement(l.a.Fragment,null,T&&T>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiCallOut,{color:"warning",iconType:"alert",title:x.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.title",{defaultMessage:"Some integration policies have conflicts"})},l.a.createElement("strong",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.integrationPolicyCount",defaultMessage:"{conflictCount, plural, one { # integration policy} other { # integration policies}}",values:{conflictCount:T}}))," ",l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.body",defaultMessage:"{conflictCount, plural, one { has} other { have}} conflicts and will not be upgraded automatically. You can manually resolve these conflicts via agent policy settings in Fleet after performing this upgrade.",values:{conflictCount:T}})),l.a.createElement(c.EuiSpacer,{size:"l"})):null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.body",defaultMessage:"This action will deploy updates to all agents which use these policies. Fleet has detected that {packagePolicyCountText} {packagePolicyCount, plural, one { is} other { are}} ready to be upgraded and {packagePolicyCount, plural, one { is} other { are}} already in use by {agentCountText}.",values:{packagePolicyCount:P,packagePolicyCountText:l.a.createElement("strong",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.confirmUpdateModal.body.policyCount",defaultMessage:"{packagePolicyCount, plural, one {# integration policy} other {# integration policies}}",values:{packagePolicyCount:P}})),agentCountText:l.a.createElement("strong",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.confirmUpdateModal.body.agentCount",defaultMessage:"{agentCount, plural, one {# agent} other {# agents}}",values:{agentCount:S}}))}})));return h?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiFlexGroup,{alignItems:"center"},l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiButton,{isLoading:M||t,onClick:F?()=>O(!0):A},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.updatePackage.updatePackageButtonLabel",defaultMessage:"Upgrade to latest version"}))),P>0&&l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiCheckbox,{compressed:!0,labelProps:{style:{display:"flex"}},id:"upgradePoliciesCheckbox",checked:F,onChange:_,label:x.i18n.translate("xpack.fleet.integrations.updatePackage.upgradePoliciesCheckboxLabel",{defaultMessage:"Upgrade integration policies"})}))),j&&z):null},$e=e=>{const{onCancel:t,onConfirm:a,packageName:n,numOfAssets:i}=e;return l.a.createElement(c.EuiConfirmModal,{title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallTitle",defaultMessage:"Uninstall {packageName}",values:{packageName:n}}),onCancel:t,onConfirm:a,cancelButtonText:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallButtonLabel",defaultMessage:"Uninstall {packageName}",values:{packageName:n}}),defaultFocusedButton:"confirm",buttonColor:"danger"},l.a.createElement(c.EuiCallOut,{color:"danger",title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallCallout.title",defaultMessage:"This action will remove {numOfAssets} assets",values:{numOfAssets:i}})},l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallCallout.description",defaultMessage:"Kibana and Elasticsearch assets that were created by this integration will be removed. Agents policies and any data sent by your agents will not be effected."}))),l.a.createElement(c.EuiSpacer,{size:"l"}),l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallDescription",defaultMessage:"This action cannot be undone. Are you sure you wish to continue?"})))},Ve=({disabled:e=!1,latestVersion:t,name:a,numOfAssets:i,title:r,version:s})=>{const o=Object(p.n)().write,u=Object(p.I)(),d=Object(p.t)(),{status:m}=d(a),g=m===se.b.uninstalling,[E,f]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>{u({name:a,version:s,title:r,redirectToVersion:null!=t?t:s}),f(!1)}),[u,a,r,s,t]),k=l.a.createElement($e,{numOfAssets:i,packageName:r,onCancel:()=>f(!1),onConfirm:h});return o?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiButton,{iconType:"trash",isLoading:g,onClick:()=>f(!0),color:"danger",disabled:!(!e&&!g)},g?l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.uninstallPackage.uninstallingPackageButtonLabel",defaultMessage:"Uninstalling {title}",values:{title:r}}):l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.uninstallPackage.uninstallPackageButtonLabel",defaultMessage:"Uninstall {title}",values:{title:r}})),E&&k):null},We=O.a.td.withConfig({displayName:"SettingsTitleCell",componentId:"sc-1lbna4d-0"})(["padding-right:",";padding-bottom:",";"],(e=>e.theme.eui.spacerSizes.xl),(e=>e.theme.eui.spacerSizes.m)),qe=()=>l.a.createElement("strong",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallNoteLabel",defaultMessage:"Note:"})),Ke=({latestVersion:e})=>l.a.createElement(c.EuiCallOut,{color:"warning",iconType:"alert",title:x.i18n.translate("xpack.fleet.integrations.settings.versionInfo.updatesAvailable",{defaultMessage:"New version available"})},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integration.settings.versionInfo.updatesAvailableBody",defaultMessage:"Upgrade to version {latestVersion} to get the latest features",values:{latestVersion:e}})),Ye=({name:e,version:t})=>{const{getHref:a}=Object(p.z)(),n=a("integration_details_settings",{pkgkey:`${e}-${t}`});return l.a.createElement(c.EuiLink,{href:n},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageLatestVersionLink",defaultMessage:"latest version"}))},Je=Object(n.memo)((({packageInfo:e})=>{const{name:t,title:a,removable:i,latestVersion:r,version:s,keepPoliciesUpToDate:o}=e,[u,d]=Object(n.useState)(),[m,g]=Object(n.useState)(!1),f=Object(p.t)(),{data:h}=Object(p.u)({perPage:1e3,page:1,kuery:`${E.h}.package.name:${t}`}),{notifications:k}=Object(p.G)(),v=Object(n.useMemo)((()=>{const e=[...E.c,...E.b];return Object(G.uniq)(e.map((e=>e.name))).includes(t)}),[t]),[M,j]=Object(n.useState)(null!=o&&o),O=Object(n.useCallback)((()=>{(async()=>{try{j((e=>!e)),await Object(p.i)(`${e.name}-${e.version}`,{keepPoliciesUpToDate:!M}),k.toasts.addSuccess({title:x.i18n.translate("xpack.fleet.integrations.integrationSaved",{defaultMessage:"Integration settings saved"}),text:M?x.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateDisabledSuccess",{defaultMessage:"Fleet will not automatically keep integration policies up to date for {title}",values:{title:a}}):x.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateEnabledSuccess",{defaultMessage:"Fleet will automatically keep integration policies up to date for {title}",values:{title:a}})})}catch(e){k.toasts.addError(e,{title:x.i18n.translate("xpack.fleet.integrations.integrationSavedError",{defaultMessage:"Error saving integration settings"}),toastMessage:x.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateError",{defaultMessage:"Error saving integration settings for {title}",values:{title:a}})})}})()}),[M,k.toasts,e.name,e.version,a]),{status:F,version:C}=f(t),I=!(null==h||!h.total),w=Object(n.useMemo)((()=>null==h?void 0:h.items.map((({id:e})=>e))),[h]);Object(n.useEffect)((()=>{(async()=>{if(w&&w.length){const{data:e}=await Object(p.k)(w,r);d(e)}})()}),[r,w]);const P=!(!C||!y()(C,r)),S=s<r,T=F===se.b.notInstalled&&S||F===se.b.installed&&C!==s,_=F===se.b.installing&&C,L=Object(n.useMemo)((()=>Object.entries(e.assets).reduce(((e,[t,a])=>e+Object.entries(a).reduce(((e,[t,a])=>e+a.length),0)),0)),[e.assets]);return l.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(c.EuiFlexItem,{grow:1}),l.a.createElement(c.EuiFlexItem,{grow:6},l.a.createElement(c.EuiText,null,l.a.createElement(c.EuiTitle,null,l.a.createElement("h3",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageSettingsTitle",defaultMessage:"Settings"}))),l.a.createElement(c.EuiSpacer,{size:"s"}),null!==C&&l.a.createElement("div",null,l.a.createElement(c.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageVersionTitle",defaultMessage:"{title} version",values:{title:a}}))),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement(We,null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.versionInfo.installedVersion",defaultMessage:"Installed version"})),l.a.createElement("td",null,l.a.createElement(c.EuiTitle,{size:"xs"},l.a.createElement("span",null,C)))),l.a.createElement("tr",null,l.a.createElement(We,null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.versionInfo.latestVersion",defaultMessage:"Latest version"})),l.a.createElement("td",null,l.a.createElement(c.EuiTitle,{size:"xs"},l.a.createElement("span",null,r)))))),v&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ge,{checked:M,onChange:O}),l.a.createElement(c.EuiSpacer,{size:"l"})),(P||m)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Ke,{latestVersion:r}),l.a.createElement(c.EuiSpacer,{size:"l"}),l.a.createElement("p",null,l.a.createElement(He,Ae()({},e,{version:r,packagePolicyIds:w,dryRunData:u,isUpgradingPackagePolicies:m,setIsUpgradingPackagePolicies:g}))))),!T&&!_&&l.a.createElement("div",null,l.a.createElement(c.EuiSpacer,{size:"s"}),F===se.b.notInstalled||F===se.b.installing?l.a.createElement("div",null,l.a.createElement(c.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallTitle",defaultMessage:"Install {title}",values:{title:a}}))),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallDescription",defaultMessage:"Install this integration to setup Kibana and Elasticsearch assets designed for {title} data.",values:{title:a}})),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement("p",null,l.a.createElement(Ge,Ae()({},e,{numOfAssets:L,disabled:!h||I})))))):i&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(c.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallTitle",defaultMessage:"Uninstall"}))),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement("p",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallDescription",defaultMessage:"Remove Kibana and Elasticsearch assets that were installed by this integration."}))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement("p",null,l.a.createElement(Ve,Ae()({},e,{numOfAssets:L,latestVersion:r,disabled:!h||I})))))),I&&!0===i&&l.a.createElement("p",null,l.a.createElement(c.EuiText,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallNoteDetail",defaultMessage:"{strongNote} {title} cannot be uninstalled because there are active agents that use this integration. To uninstall, remove all {title} integrations from your agent policies.",values:{title:a,strongNote:l.a.createElement(qe,null)}}))),!1===i&&l.a.createElement("p",null,l.a.createElement(c.EuiText,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallUninstallableNoteDetail",defaultMessage:"{strongNote} The {title} integration is a system integration and cannot be removed.",values:{title:a,strongNote:l.a.createElement(qe,null)}})))),T&&S&&!_&&l.a.createElement("div",null,l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement("div",null,l.a.createElement(c.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallTitle",defaultMessage:"Install {title}",values:{title:a}}))),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement("p",null,l.a.createElement(c.EuiText,{color:"subdued"},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageSettingsOldVersionMessage",defaultMessage:"Version {version} is out of date. The {latestVersion} of this integration is available to be installed.",values:{version:s,latestVersion:l.a.createElement(Ye,{name:t,version:r})}}))))))))})),Qe=Object(n.memo)((({packageInfo:e})=>{const t=Object(p.H)(e.name,"package-detail-custom"),{getPath:a}=Object(p.z)(),i=Object(n.useMemo)((()=>Object($.t)(e)),[e]);return t?l.a.createElement(c.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(c.EuiFlexItem,{grow:1}),l.a.createElement(c.EuiFlexItem,{grow:6},l.a.createElement(f.h,null,l.a.createElement(t.Component,{pkgkey:i,packageInfo:e})))):l.a.createElement(s.Redirect,{to:a("integration_details_overview",{pkgkey:i})})}));a(271);const Xe=O.a.div.withConfig({displayName:"Divider",componentId:"sc-1xcdwih-0"})(["width:0;height:100%;border-left:",";"],(e=>e.theme.eui.euiBorderThin)),Ze=O()(c.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-1xcdwih-1"})(["min-width:0px;"]),et=O()(c.EuiFlexItem).withConfig({displayName:"FlexItemWithMaxHeight",componentId:"sc-1xcdwih-2"})(["@media (min-width:768px){max-height:60px;}"]);function tt({packageTitle:e}){return Object(p.m)("integration_details_overview",{pkgTitle:e}),null}function at(){var e,t,a,i,r;const{getId:o}=Object(p.l)(),{pkgkey:u,panel:d}=Object(s.useParams)(),{getHref:m}=Object(p.z)(),g=Object(p.n)().write,k=Object(p.E)(),v=!(null!==(e=k.data)&&void 0!==e&&e.success)&&"MISSING_SECURITY"===(null===(t=k.data)||void 0===t?void 0:t.error),M=g&&(null===(a=k.data)||void 0===a?void 0:a.success),j=Object(s.useHistory)(),{pathname:O,search:F,hash:C}=Object(s.useLocation)(),P=Object(n.useMemo)((()=>new URLSearchParams(F)),[F]),S=Object(n.useMemo)((()=>P.get("integration")),[P]),T=Object(p.G)(),_=o(),[L,A]=Object(n.useState)(null),N=Object(p.F)(),z=Object(p.t)(),U=Object(p.H)(null!==(i=null==L?void 0:L.name)&&void 0!==i?i:"","package-detail-assets"),B=Object(n.useMemo)((()=>{if(null!==L&&L.name)return z(L.name).status}),[L,z]),D=L&&"savedObject"in L&&L.savedObject&&y()(L.savedObject.attributes.version,L.latestVersion),{data:R,error:G,isLoading:H}=Object(p.s)(u),V=H||k.isLoading,W=void 0!==Object(p.H)(null!==(r=null==R?void 0:R.response.name)&&void 0!==r?r:"","package-detail-custom");Object(n.useEffect)((()=>{if(null!=R&&R.response){const e=R.response;let t;A(e);const{name:a}=R.response;"savedObject"in e&&(t=e.savedObject.attributes.version);const n=null==e?void 0:e.status;a&&N({name:a,status:n,version:t||null})}}),[R,N,A]);const q=Object(n.useMemo)((()=>{var e;return S?null==L||null===(e=L.policy_templates)||void 0===e?void 0:e.find((e=>e.name===S)):void 0}),[S,L]),K=Object(n.useMemo)((()=>l.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement("div",null,l.a.createElement(c.EuiButtonEmpty,{iconType:"arrowLeft",size:"xs",flush:"left",href:m("integrations_all")},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.browseAllButtonText",defaultMessage:"Browse all integrations"})))),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFlexGroup,{gutterSize:"l"},l.a.createElement(et,{grow:!1},V||!L?l.a.createElement(me,null):l.a.createElement(de,{packageName:L.name,integrationName:null==q?void 0:q.name,version:L.version,icons:(null==q?void 0:q.icons)||L.icons})),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},l.a.createElement(Ze,{grow:!1},l.a.createElement(c.EuiText,null,l.a.createElement("h1",null,(null==q?void 0:q.title)||(null==L?void 0:L.title)||"Â "))),null!=L&&L.release&&"ga"!==L.release?l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiBetaBadge,{label:I[L.release],tooltipContent:w[L.release]})):null)))))),[m,q,V,L]),Y=Object(n.useCallback)((e=>{e.preventDefault();const t=j.createHref({pathname:O,search:F,hash:C}),a=E.j.add_integration_to_policy({pkgkey:u,...S?{integration:S}:{},..._?{agentPolicyId:_}:{}})[1];let n,l;_?(n=[E.i,{path:E.j.policy_details({policyId:_})[1]}],l={showAddAgentHelp:!0,openEnrollmentFlyout:!0}):(n=[E.e,{path:E.j.integration_details_policies({pkgkey:u,...S?{integration:S}:{}})[1]}],l={showAddAgentHelp:{renameKey:"showAddAgentHelpForPolicyId",policyIdAsValue:!0},openEnrollmentFlyout:{renameKey:"addAgentToPolicyId",policyIdAsValue:!0}});const i={onSaveNavigateTo:n,onSaveQueryParams:l,onCancelNavigateTo:[E.e,{path:E.j.integration_details_overview({pkgkey:u,...S?{integration:S}:{}})[1]}],onCancelUrl:t};T.application.navigateToApp(E.i,{path:a,state:i})}),[j,C,O,F,u,S,T.application,_]),J=Object(n.useMemo)((()=>L?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiSpacer,{size:"l"}),l.a.createElement(c.EuiFlexGroup,{justifyContent:"flexEnd",direction:"row"},[{label:x.i18n.translate("xpack.fleet.epm.versionLabel",{defaultMessage:"Version"}),content:l.a.createElement(c.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(c.EuiFlexItem,null,L.version),D?l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(oe,null)):null)},..."installed"===B?[{isDivider:!0},{label:x.i18n.translate("xpack.fleet.epm.usedByLabel",{defaultMessage:"Agent policies"}),"data-test-subj":"agentPolicyCount",content:l.a.createElement(ce,{packageName:L.name})}]:[],{isDivider:!0},{content:l.a.createElement(nt,{fill:!0,isDisabled:!M,iconType:"plusInCircle",href:m("add_integration_to_policy",{pkgkey:u,...S?{integration:S}:{},..._?{agentPolicyId:_}:{}}),onClick:Y,"data-test-subj":"addIntegrationPolicyButton",tooltip:M?void 0:{content:v?l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonSecurityRequiredTooltip",defaultMessage:"To add Elastic Agent Integrations, you must have security enabled and have the superuser role. Contact your administrator."}):l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonPrivilegesRequiredTooltip",defaultMessage:"To add Elastic Agent integrations, you must have the superuser role. Contact your adminstrator."})}},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonText",defaultMessage:"Add {packageName}",values:{packageName:(null==q?void 0:q.title)||L.title}}))}].map(((e,t)=>{var a;return l.a.createElement(c.EuiFlexItem,{grow:!1,key:t,"data-test-subj":e["data-test-subj"]},null!==(a=e.isDivider)&&void 0!==a&&a?l.a.createElement(Xe,null):e.label?l.a.createElement(c.EuiDescriptionList,{className:"eui-textRight",compressed:!0,textStyle:"reverse"},l.a.createElement(c.EuiDescriptionListTitle,null,e.label),l.a.createElement(c.EuiDescriptionListDescription,null,e.content)):e.content)})))):void 0),[L,D,B,M,m,u,S,_,Y,v,null==q?void 0:q.title]),Q=Object(n.useMemo)((()=>{if(!L)return[];const e=Object($.t)(L),t=[{id:"overview",name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.overviewLinkText",defaultMessage:"Overview"}),isSelected:"overview"===d,"data-test-subj":"tab-overview",href:m("integration_details_overview",{pkgkey:e,...S?{integration:S}:{}})}];return M&&B===se.b.installed&&t.push({id:"policies",name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packagePoliciesLinkText",defaultMessage:"Integration policies"}),isSelected:"policies"===d,"data-test-subj":"tab-policies",href:m("integration_details_policies",{pkgkey:e,...S?{integration:S}:{}})}),B===se.b.installed&&(L.assets||U)&&t.push({id:"assets",name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packageAssetsLinkText",defaultMessage:"Assets"}),isSelected:"assets"===d,"data-test-subj":"tab-assets",href:m("integration_details_assets",{pkgkey:e,...S?{integration:S}:{}})}),M&&t.push({id:"settings",name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.settingsLinkText",defaultMessage:"Settings"}),isSelected:"settings"===d,"data-test-subj":"tab-settings",href:m("integration_details_settings",{pkgkey:e,...S?{integration:S}:{}})}),W&&t.push({id:"custom",name:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packageCustomLinkText",defaultMessage:"Advanced"}),isSelected:"custom"===d,"data-test-subj":"tab-custom",href:m("integration_details_custom",{pkgkey:e,...S?{integration:S}:{}})}),t}),[L,d,m,S,M,B,U,W]),X=v?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiCallOut,{color:"warning",iconType:"lock",title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutTitle",defaultMessage:"Security needs to be enabled in order to add Elastic Agent integrations"})},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutDescription",defaultMessage:"In order to fully use Fleet, you must enable Elasticsearch and Kibana security features. Follow the {guideLink} to enable security.",values:{guideLink:l.a.createElement("a",{href:T.http.basePath.prepend("/app/fleet")},l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutDescriptionGuideLink",defaultMessage:"steps in this guide"}))}})),l.a.createElement(c.EuiSpacer,null)):void 0;return l.a.createElement(h.a,{leftColumn:K,rightColumn:J,rightColumnGrow:!1,topContent:X,tabs:Q,tabsClassName:"fleet__epm__shiftNavTabs"},q||L?l.a.createElement(tt,{packageTitle:(null==q?void 0:q.title)||(null==L?void 0:L.title)||""}):null,G?l.a.createElement(f.g,{title:l.a.createElement(b.FormattedMessage,{id:"xpack.fleet.epm.loadingIntegrationErrorTitle",defaultMessage:"Error loading integration details"}),error:G}):V||!L?l.a.createElement(f.l,null):l.a.createElement(s.Switch,null,l.a.createElement(s.Route,{path:E.f.integration_details_overview},l.a.createElement(we,{packageInfo:L,integrationInfo:q})),l.a.createElement(s.Route,{path:E.f.integration_details_settings},l.a.createElement(Je,{packageInfo:L})),l.a.createElement(s.Route,{path:E.f.integration_details_assets},l.a.createElement(he,{packageInfo:L})),l.a.createElement(s.Route,{path:E.f.integration_details_policies},l.a.createElement(Be,{name:L.name,version:L.version})),l.a.createElement(s.Route,{path:E.f.integration_details_custom},l.a.createElement(Qe,{packageInfo:L})),l.a.createElement(s.Redirect,{to:E.f.integration_details_overview})))}const nt=({tooltip:e,...t})=>e?l.a.createElement(c.EuiToolTip,e,l.a.createElement(c.EuiButton,t)):l.a.createElement(c.EuiButton,t);var lt=a(123);const it=Object(n.memo)((()=>{var e,t,a,n;const{params:{packagePolicyId:i}}=Object(s.useRouteMatch)(),r=Object(p.r)(i),o=Object(p.H)(null!==(e=null===(t=r.data)||void 0===t||null===(a=t.item)||void 0===a||null===(n=a.package)||void 0===n?void 0:n.name)&&void 0!==e?e:"","package-policy-edit");return l.a.createElement(lt.a,{packagePolicyId:i,from:"package-edit",forceUpgrade:null==o?void 0:o.useLatestPackageVersion})})),rt=()=>(Object(p.m)("integrations"),l.a.createElement(s.Switch,null,l.a.createElement(s.Route,{path:E.f.integration_policy_edit},l.a.createElement(it,null)),l.a.createElement(s.Route,{path:E.f.integration_details},l.a.createElement(at,null)),l.a.createElement(s.Route,{path:E.f.integrations},l.a.createElement(re,null))));var st,ot=(st=function(e,t){return st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},st(e,t)},function(e,t){function a(){this.constructor=e}st(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),ct=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return ot(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,l=t.node;return i.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),l)},t}(n.PureComponent),ut=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return ot(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent);const dt=({children:e,setHeaderActionMenu:t})=>{const a=Object(n.useMemo)((()=>function(){var e,t,a={},n=Object.assign(document.createElement("div"),{setPortalProps:function(e){a=e},getInitialPortalProps:function(){return a},mount:function(a,l){l!==t&&(n.unmount(),a.replaceChild(n,l),e=a,t=l)},unmount:function(a){a&&a!==t||e&&t&&(e.replaceChild(t,n),e=void 0,t=void 0)}});return n}()),[]);return Object(n.useEffect)((()=>(t((e=>Object(m.toMountPoint)(l.a.createElement(ut,{node:a}))(e))),()=>{a.unmount(),t(void 0)})),[a,t]),l.a.createElement(ct,{node:a},e)},mt=O()(c.EuiText).withConfig({displayName:"Description",componentId:"sc-kml9g-0"})(["margin-bottom:",";"],(({theme:e})=>e.eui.euiSizeL)),gt=({endpointUrl:e,cloudId:t,learnMoreUrl:a,managementUrl:n})=>{const[i,r]=l.a.useState(!1),s=l.a.createElement(c.EuiHeaderLink,{onClick:()=>r(!i),iconType:"iInCircle",iconSide:"left",isActive:!0},x.i18n.translate("xpack.fleet.integrations.deploymentButton",{defaultMessage:"View deployment details"})),o=n?l.a.createElement(c.EuiFormRow,{label:"API keys",fullWidth:!0},l.a.createElement(c.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiButton,{href:n},"Create and manage API keys")),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiLink,{external:!0,href:a,target:"_blank"},"Learn more")))):null;return l.a.createElement(c.EuiPopover,{isOpen:i,closePopover:()=>r(!1),button:s,anchorPosition:"downCenter"},l.a.createElement("div",{style:{width:450}},l.a.createElement(mt,null,"Send data to Elastic from your applications by referencing your deployment and Elasticsearch information."),l.a.createElement(c.EuiForm,{component:"div"},l.a.createElement(c.EuiFormRow,{label:"Elasticsearch endpoint",fullWidth:!0,isDisabled:!0},l.a.createElement(c.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFieldText,{value:e,fullWidth:!0,disabled:!0})),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiCopy,{textToCopy:e},(e=>l.a.createElement(c.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),l.a.createElement(c.EuiFormRow,{label:"Cloud ID",fullWidth:!0},l.a.createElement(c.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFieldText,{value:t,fullWidth:!0,disabled:!0})),l.a.createElement(c.EuiFlexItem,{grow:!1},l.a.createElement(c.EuiCopy,{textToCopy:t},(e=>l.a.createElement(c.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),o)))},pt=()=>{var e;const{share:t,cloud:a,docLinks:n}=Object(p.G)();if(!a)return null;const{isCloudEnabled:i,cloudId:r,cname:s}=a;if(!i||!r||!s)return null;if(!(s.endsWith("elastic-cloud.com")||s.endsWith("found.io")||s.endsWith("found.no")||s.endsWith("foundit.no")))return null;const o=`https://${r}.${s.startsWith(".")?s.substring(1):s}`,c=null===(e=t.url.locators.get("MANAGEMENT_APP_LOCATOR"))||void 0===e?void 0:e.useUrl({sectionId:"security",appId:"api_keys"}),u=n.links.fleet.apiKeysLearnMore;return l.a.createElement(gt,{cloudId:r,endpointUrl:o,managementUrl:c,learnMoreUrl:u})},Et=({setHeaderActionMenu:e})=>l.a.createElement(dt,{setHeaderActionMenu:e},l.a.createElement(c.EuiHeaderSection,{grow:!1},l.a.createElement(c.EuiHeaderSectionItem,null,l.a.createElement(c.EuiHeaderLinks,null,l.a.createElement(pt,null))))),ft=Object(n.memo)((({children:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:r,setHeaderActionMenu:u})=>{const E=d()(t.uiSettings.get$("theme:darkMode"));return l.a.createElement(m.RedirectAppLinks,{application:t.application},l.a.createElement(t.i18n.Context,null,l.a.createElement(m.KibanaContextProvider,{services:{...t}},l.a.createElement(c.EuiErrorBoundary,null,l.a.createElement(o.b.Provider,{value:a},l.a.createElement(o.d.Provider,{value:i},l.a.createElement(g.EuiThemeProvider,{darkMode:E},l.a.createElement(p.d.Provider,{value:r},l.a.createElement(o.c,null,l.a.createElement(t.customIntegrations.ContextProvider,null,l.a.createElement(s.Router,{history:n},l.a.createElement(p.a,null,l.a.createElement(p.c,{notifications:t.notifications},l.a.createElement(Et,{setHeaderActionMenu:u}),e)))))))))))))})),ht=Object(n.memo)((()=>{const{modal:e,setModal:t}=Object(p.J)();return l.a.createElement(l.a.Fragment,null,"settings"===e&&l.a.createElement(c.EuiPortal,null,l.a.createElement(f.p,{onClose:()=>{t(null)}})),l.a.createElement(s.Switch,null,l.a.createElement(s.Route,{path:E.f.integrations},l.a.createElement(rt,null)),l.a.createElement(s.Route,{render:({location:e})=>{if(!(""===e.pathname&&e.hash.length>0))return l.a.createElement(s.Redirect,{to:E.j.integrations_all({})[1]});const t=e.hash.replace(/^#/,"");return l.a.createElement(s.Redirect,{to:{...e,pathname:t,hash:void 0}})}})))})),bt=({isAllowed:e=!1,restrictedPath:t="/",...a})=>e?l.a.createElement(s.Route,a):l.a.createElement(s.Redirect,{to:{pathname:t}}),kt=({basepath:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:r,setHeaderActionMenu:s})=>l.a.createElement(ft,{basepath:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:r,setHeaderActionMenu:s},l.a.createElement(ht,null));function vt(e,{element:t,appBasePath:a,history:n,setHeaderActionMenu:i},s,o,c,u){return r.a.render(l.a.createElement(u,null,l.a.createElement(kt,{basepath:a,startServices:e,config:s,history:n,kibanaVersion:o,extensions:c,setHeaderActionMenu:i})),t),()=>{r.a.unmountComponentAtNode(t)}}const yt=e=>{e.chrome.docTitle.reset(),e.chrome.setBreadcrumbs([]),o.h.stop()}}}]);